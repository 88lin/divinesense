# ğŸ“Š ä¸Šæ¸¸åŒæ­¥å¯è¡Œæ€§ä¸ ROI åˆ†ææŠ¥å‘Š

é€šè¿‡å¯¹å½“å‰ `Divinesense` ä»£ç åº“çš„æ·±å…¥è°ƒç ”ï¼Œæˆ‘å‘ç°é¡¹ç›®ç°çŠ¶ä¸ä¸Šæ¸¸ (`usememos/memos`) çš„åŒæ­¥ç¨‹åº¦éå¸¸é«˜ã€‚**æ‚¨ä¹‹å‰çš„åˆ¤æ–­æ˜¯æ­£ç¡®çš„ï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒç‰¹æ€§å®é™…ä¸Šå·²ç»å­˜åœ¨äºä»£ç åº“ä¸­**ï¼Œä½†é—æ¼äº†æœ€æ–°çš„**å…³é”®ä¿®å¤**ã€‚

è¿™æ˜¯å…·ä½“çš„åˆ†æç»“æœï¼š

## 1. ç°çŠ¶è°ƒç ” (As-Is Analysis)

| æ¨¡å—               | ä¸Šæ¸¸çŠ¶æ€                    | Divinesense ç°çŠ¶ | å·®è·                                                                    |
| :----------------- | :-------------------------- | :--------------- | :---------------------------------------------------------------------- |
| **Plugin System**  | å·²å¼•å…¥ `scheduler`, `email` | **âœ… å·²å­˜åœ¨**     | `plugin/scheduler` å’Œ `plugin/email` ç›®å½•å·²å­˜åœ¨ä¸”ä»£ç å……å®ã€‚             |
| **Frontend Deps**  | Mermaid, LaTeX              | **âœ… å·²å®‰è£…**     | `web/package.json` ä¸­å·²åŒ…å« `mermaid`, `rehype-katex`ã€‚                 |
| **Feature: Focus** | ä¸“æ³¨æ¨¡å¼                    | **âš ï¸ éƒ¨åˆ†å­˜åœ¨**   | æ ¸å¿ƒé€»è¾‘å­˜åœ¨ï¼Œä½†éœ€ç¡®è®¤ UI å…¥å£ (`InsertMenu`) æ˜¯å¦æœ€æ–°ã€‚                |
| **Fix: OAuth**     | HTTP ä¸‹å¯é€‰ PKCE            | **âŒ ç¼ºå¤±**       | **ä¸¥é‡**ã€‚å½“å‰ä»£ç åœ¨ HTTP ç¯å¢ƒä¸‹ä¼šå›  `crypto.subtle` æŠ¥é”™å¯¼è‡´ç™»å½•å¤±è´¥ã€‚ |
| **Fix: Privacy**   | Token åˆ·æ–°å¯è§æ€§            | **â“ ç–‘ä¼¼ç¼ºå¤±**   | Home é¡µé€»è¾‘å·²é‡æ„ï¼Œéœ€åœ¨ `PagedMemoList` æˆ– Filter Hook ä¸­æ’æŸ¥ç±»ä¼¼é€»è¾‘ã€‚ |

## 2. ROI (æŠ•èµ„å›æŠ¥ç‡) åˆ†æ

åŸºäºç°çŠ¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿›è¡Œå¤§è§„æ¨¡çš„â€œæ¬è¿â€ï¼Œè€Œæ˜¯è¿›è¡Œ**ç²¾å‡†çš„å¤–ç§‘æ‰‹æœ¯å¼ä¿®å¤**ã€‚

*   **âš¡ï¸ ä¿®å¤ OAuth (PKCE Optional)**
    *   **æˆæœ¬**: ä½ (ä¸»è¦ä¿®æ”¹ `web/src/utils/oauth.ts`)
    *   **æ”¶ç›Š**: â­â­â­â­â­ (Critical)
    *   **ç†ç”±**: è§£å†³è‡ªæ‰˜ç®¡ (HTTP) ç”¨æˆ·æ— æ³•ç™»å½•çš„é˜»æ–­æ€§ Bugã€‚

*   **ğŸ”Œ éªŒè¯æ’ä»¶ç³»ç»Ÿ (Plug-in Wiring)**
    *   **æˆæœ¬**: ä¸­
    *   **æ”¶ç›Š**: â­â­â­â­
    *   **ç†ç”±**: ä»£ç å­˜åœ¨ä¸ä»£è¡¨å·²å¯ç”¨ã€‚éœ€æ£€æŸ¥ `server/server.go` æ˜¯å¦çœŸæ­£åˆå§‹åŒ–å¹¶æŒ‚è½½äº† Scheduler/Email æœåŠ¡ã€‚

*   **âœ¨ è¡¥å…¨ UI å…¥å£ (Focus Mode Entry)**
    *   **æˆæœ¬**: æä½
    *   **æ”¶ç›Š**: â­â­â­
    *   **ç†ç”±**: è®©ç”¨æˆ·æ›´å®¹æ˜“å‘ç°ä¸“æ³¨æ¨¡å¼ã€‚

## 3. æœ€ç»ˆå®æ–½æ–¹æ¡ˆ (Proposed Plan)

å»ºè®®å°† Issue #58 çš„ç›®æ ‡ä»â€œå…¨é‡åŒæ­¥â€è°ƒæ•´ä¸ºâ€œ**å…³é”®ä¿®å¤ä¸å®Œæ•´æ€§éªŒè¯**â€ã€‚

### Phase 1: æ ¸å¿ƒä¿®å¤ (ç«‹å³æ‰§è¡Œ)
1.  **Fix OAuth**: ä¿®æ”¹ `web/src/utils/oauth.ts`ï¼Œä¸º `crypto.subtle` å¢åŠ é™çº§å¤„ç†ã€‚
2.  **Fix Privacy**: æ£€æŸ¥ `web/src/components/PagedMemoList` åŠå…¶ Hooksï¼Œç¡®ä¿åœ¨ Auth çŠ¶æ€éœ‡è¡æ—¶æ•°æ®ä¸ä¸¢å¤±ã€‚

### Phase 2: ç³»ç»ŸéªŒè¯
1.  **Scheduler**: æ£€æŸ¥ `server/server.go`ï¼Œç¡®ä¿ `scheduler` æœåŠ¡è¢«å¯åŠ¨ã€‚
2.  **UI**: ç¡®è®¤ `InsertMenu` åŒ…å« "Focus Mode" é€‰é¡¹ã€‚

---

**äº¤äº’ç¡®è®¤ (Interactive Check)**:

æ‚¨æ˜¯å¦åŒæ„æŒ‰ç…§ä¸Šè¿°**â€œä¿®å¤ä¸ºä¸»ï¼ŒéªŒè¯ä¸ºè¾…â€**çš„ç­–ç•¥æ‰§è¡Œï¼Ÿå¦‚æœåŒæ„ï¼Œæˆ‘å°†ä¼˜å…ˆå¤„ç† OAuth çš„ Crash é—®é¢˜ã€‚
## 4. Deep Dive Findings
- **Plugin Status**: âŒ Code exists in `plugin/` but NOT wired in `server/server.go`.
- **Focus Mode**: âœ… UI Entry exists in `InsertMenu.tsx`. Logic hook `useFocusMode` exists.
- **OAuth**: âŒ Verified missing fallback for `crypto.subtle`.
