# Surgical Slim æ–¹æ³•è¯¦è§£ v3.3

> SOTA æ¨¡å‹èƒ½åŠ› + ä»£ç åˆ†ææŠ€æœ¯ + å¹¶è¡Œæ‰§è¡Œæ•ˆç‡

---

## ç›®å½•

1. [è¯­ä¹‰ç†è§£æ–¹æ³•](#è¯­ä¹‰ç†è§£æ–¹æ³•)
2. [å› æœæ¨ç†æ–¹æ³•](#å› æœæ¨ç†æ–¹æ³•)
3. [æ¨¡å¼è¯†åˆ«æ–¹æ³•](#æ¨¡å¼è¯†åˆ«æ–¹æ³•)
4. [å¹¶è¡Œåˆ†ææ–¹æ³•](#å¹¶è¡Œåˆ†ææ–¹æ³•)
5. [å·¥å…·ç¼–æ’ç­–ç•¥](#å·¥å…·ç¼–æ’ç­–ç•¥)

---

## è¯­ä¹‰ç†è§£æ–¹æ³•

### ç›®æ ‡ï¼šç†è§£ä»£ç "ä¸ºä»€ä¹ˆå­˜åœ¨"

#### æ­¥éª¤ 1ï¼šè¯†åˆ«ä»£ç çš„åŸå§‹ç›®çš„

```bash
# 1. é˜…è¯»åŒ…/æ–‡ä»¶çš„æ–‡æ¡£æ³¨é‡Š
head -50 plugin/cron/*.go | grep -E "^//|^\s*\*"

# 2. æ£€æŸ¥æµ‹è¯•æ–‡ä»¶ä¸­çš„ä½¿ç”¨ç¤ºä¾‹
grep -A 10 "func Test" plugin/cron/*_test.go

# 3. æŸ¥æ‰¾ç›¸å…³ Issue/PR
gh issue list --search "cron" --repo hrygo/divinesense
gh pr list --search "cron" --repo hrygo/divinesense
```

#### æ­¥éª¤ 2ï¼šåˆ¤æ–­ç›®çš„æ˜¯å¦ä»ç„¶æœ‰æ•ˆ

```
æ£€æŸ¥æ¸…å•:
â–¡ äº§å“åŠŸèƒ½æ˜¯å¦ä»åœ¨è·¯çº¿å›¾ä¸­?
â–¡ æ˜¯å¦æœ‰æ›¿ä»£æ–¹æ¡ˆå®ç°äº†ç›¸åŒåŠŸèƒ½?
â–¡ ç”¨æˆ·ç•Œé¢æ˜¯å¦ä»æä¾›ç›¸å…³å…¥å£?
â–¡ æ–‡æ¡£ä¸­æ˜¯å¦ä»è¯´æ˜è¯¥åŠŸèƒ½?
```

#### æ­¥éª¤ 3ï¼šç†è§£åŠŸèƒ½æ¼”æ›¿

```
å¸¸è§æ¼”æ›¿æ¨¡å¼:
â”œâ”€â”€ æŠ€æœ¯æ›¿ä»£: Cron â†’ AI è‡ªç„¶è¯­è¨€è§£æ
â”œâ”€â”€ æ¶æ„é‡æ„: å•ä½“ â†’ å¾®æœåŠ¡
â”œâ”€â”€ åºŸå¼ƒåŠŸèƒ½: Email â†’ ç¬¬ä¸‰æ–¹é›†æˆ
â””â”€â”€ å®éªŒç»“æŸ: POC â†’ äº§å“æˆ–æ”¾å¼ƒ
```

---

## å› æœæ¨ç†æ–¹æ³•

### ç›®æ ‡ï¼šç†è§£"å¦‚æœåˆ é™¤ X ä¼šå‘ç”Ÿä»€ä¹ˆ"

#### æ­¥éª¤ 1ï¼šæ„å»ºä¾èµ–å›¾

```bash
# 1. ç›´æ¥ä¾èµ–
go list -json plugin/cron | jq -r '.Imports[]'

# 2. åå‘ä¾èµ– (è°ä¾èµ–æˆ‘)
go list -json ./... | jq -r 'select(.Imports[] | contains("plugin/cron")) | .ImportPath'
```

#### æ­¥éª¤ 2ï¼šè¯†åˆ«ä¾èµ–æ€§è´¨

```
ä¾èµ–ç±»å‹åˆ¤å®š:
â”œâ”€â”€ å¼ºä¾èµ–: ç¼–è¯‘å¿…éœ€ (å¦‚ interface å®ç°)
â”œâ”€â”€ å¼±ä¾èµ–: å¯é€‰åŠŸèƒ½ (å¦‚ plugin)
â”œâ”€â”€ éšå¼ä¾èµ–: é…ç½®è§¦å‘ (å¦‚ if config.Enabled)
â”œâ”€â”€ æ•°æ®ä¾èµ–: æ•°æ®åº“ schema å¼•ç”¨
â””â”€â”€ æ–‡æ¡£ä¾èµ–: ä»…æ–‡æ¡£ä¸­æåŠ
```

#### æ­¥éª¤ 3ï¼šçº§è”å½±å“åˆ†æ

```
å¦‚æœåˆ é™¤ A:
â”œâ”€â”€ B ä¾èµ– A â†’ B ä¼šå—å½±å“
â”‚   â””â”€â”€ C ä¾èµ– B â†’ C ä¼šå—å½±å“
â””â”€â”€ D ç‹¬ç«‹äº A â†’ D ä¸å—å½±å“

å¯è§†åŒ–æ–¹æ³•:
ä½¿ç”¨ graphviz æˆ– mermaid ç»˜åˆ¶ä¾èµ–å›¾
```

---

## æ¨¡å¼è¯†åˆ«æ–¹æ³•

### ç›®æ ‡ï¼šè¯†åˆ«æ¶æ„æ¨¡å¼ä¸åæ¨¡å¼

#### æ¨¡å¼ 1ï¼šå­¤ç«‹å­å›¾æ£€æµ‹

```
ç‰¹å¾: ä¸€ç»„ä»£ç äº’ç›¸å¼•ç”¨ï¼Œä½†æ— å¤–éƒ¨è¿æ¥

æ£€æµ‹æ–¹æ³•:
1. è¯†åˆ«å¼ºè¿æ¥åˆ†é‡ (SCC)
2. æ£€æŸ¥ SCC çš„å¤–éƒ¨è¾¹
3. å¦‚æœå¤–éƒ¨è¾¹ä¸º 0 â†’ å­¤ç«‹å­å›¾

ç¤ºä¾‹: plugin/filter/ å½¢æˆå­¤ç«‹å­å›¾
```

#### æ¨¡å¼ 2ï¼šæœªå®Œæˆçš„è¿ç§»

```
ç‰¹å¾: æ—§ä»£ç å’Œæ–°ä»£ç åŒæ—¶å­˜åœ¨

æ£€æµ‹æ–¹æ³•:
1. æœç´¢ "deprecated"ã€"legacy" æ ‡è®°
2. æ£€æŸ¥ Git å†å²ä¸­çš„è¿ç§»æäº¤
3. æŸ¥æ‰¾ TODO/FIXME æ ‡è®°

ç¤ºä¾‹: plugin/email/ (æ—§) vs ai/agent/ (æ–°)
```

#### æ¨¡å¼ 3ï¼šé…ç½®é©±åŠ¨çš„å¹½çµä»£ç 

```
ç‰¹å¾: ä»£ç å­˜åœ¨ä½†é»˜è®¤ç¦ç”¨

æ£€æµ‹æ–¹æ³•:
1. æ£€æŸ¥é…ç½®ç»“æ„ä½“ä¸­çš„ Enabled å­—æ®µ
2. æœç´¢ if !enabled åˆ†æ”¯
3. è¯„ä¼°åŠŸèƒ½æ˜¯å¦åœ¨äº§å“è§„åˆ’ä¸­

å†³ç­–: ä¿ç•™æˆ–åˆ é™¤å–å†³äºäº§å“è§„åˆ’
```

---

## å¹¶è¡Œåˆ†ææ–¹æ³•

### ç›®æ ‡ï¼šæœ€å¤§åŒ–åˆ†ææ•ˆç‡

å…¨é¡¹ç›®æ‰«æçš„ç“¶é¢ˆåœ¨äºé¡ºåºæ‰§è¡Œã€‚é€šè¿‡å¹¶è¡Œå­ä»£ç†ï¼Œå°†åˆ†ææ—¶é—´ä» O(nÃ—k) é™è‡³ O(k)ã€‚

### ç­–ç•¥ 1ï¼šåŒºåŸŸåˆ†å‰²å¹¶è¡Œ

```
é¡¹ç›®ç»“æ„åˆ†æï¼ˆä¸€æ¬¡æ€§ï¼‰
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯†åˆ«ç‹¬ç«‹åˆ†æåŒºåŸŸ:                       â”‚
â”‚  â”œâ”€â”€ plugin/     (åç«¯æ’ä»¶)              â”‚
â”‚  â”œâ”€â”€ ai/         (AI æ ¸å¿ƒæ¨¡å—)           â”‚
â”‚  â”œâ”€â”€ server/     (æœåŠ¡å±‚)                â”‚
â”‚  â”œâ”€â”€ web/        (å‰ç«¯ä»£ç )              â”‚
â”‚  â””â”€â”€ proto/      (åè®®å®šä¹‰)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸ºæ¯ä¸ªåŒºåŸŸåˆ›å»ºç‹¬ç«‹ Task + Explore ä»£ç†   â”‚
â”‚  åœ¨å•ä¸ªå“åº”ä¸­å‘é€æ‰€æœ‰ Taskï¼ˆå¹¶è¡Œå¯åŠ¨ï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­‰å¾…æ‰€æœ‰ä»£ç†å®Œæˆ                        â”‚
â”‚  èšåˆç»“æœ â†’ ç”Ÿæˆç»¼åˆæŠ¥å‘Š                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç­–ç•¥ 2ï¼šä»»åŠ¡åˆ†ç‰‡ï¼ˆå¤§å‹ç›®å½•ï¼‰

å¯¹äºåŒ…å« >10 ä¸ªå­æ¨¡å—çš„ç›®å½•ï¼Œè¿›ä¸€æ­¥åˆ†ç‰‡ï¼š

```
plugin/ (å‡è®¾æœ‰ 20 ä¸ªå­æ’ä»¶)
    â”œâ”€â”€ åˆ†ç‰‡ 1: plugin/auth/, plugin/chat_apps/, plugin/cron/
    â”œâ”€â”€ åˆ†ç‰‡ 2: plugin/email/, plugin/filter/, plugin/httpgetter/
    â”œâ”€â”€ åˆ†ç‰‡ 3: plugin/idp/, plugin/markdown/, plugin/ocr/
    â””â”€â”€ ...

æ¯ä¸ªåˆ†ç‰‡åˆ†é…ç»™ç‹¬ç«‹çš„ Explore å­ä»£ç†
```

### ç­–ç•¥ 3ï¼šæ¶ˆæ¯åˆå¹¶ï¼ˆå…³é”®æŠ€æœ¯ï¼‰

**é”™è¯¯æ–¹å¼**ï¼ˆé¡ºåºæ‰§è¡Œï¼‰ï¼š
```
å‘é€ Task #1 â†’ ç­‰å¾… â†’ å‘é€ Task #2 â†’ ç­‰å¾… â†’ ...
```

**æ­£ç¡®æ–¹å¼**ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ï¼š
```
åœ¨å•ä¸ªå“åº”ä¸­ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <Task tool call #1>              â”‚
â”‚ <Task tool call #2>              â”‚
â”‚ <Task tool call #3>              â”‚
â”‚ <Task tool call #4>              â”‚
â”‚ ...                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æ‰€æœ‰ Task åŒæ—¶å¯åŠ¨ï¼Œå¹¶è¡Œæ‰§è¡Œ
```

### ç»“æœèšåˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task #1 å®Œæˆ: plugin/ åˆ†æç»“æœ           â”‚
â”‚  â”œâ”€â”€ plugin/cron/    â†’ ğŸŸ¢ å¯åˆ é™¤         â”‚
â”‚  â”œâ”€â”€ plugin/email/   â†’ ğŸŸ¡ æœªç«Ÿä¹‹äº‹       â”‚
â”‚  â””â”€â”€ ...                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task #2 å®Œæˆ: ai/ åˆ†æç»“æœ              â”‚
â”‚  â”œâ”€â”€ ai/genui/       â†’ ğŸŸ¢ å®éªŒæ€§ä»£ç       â”‚
â”‚  â”œâ”€â”€ ai/habit/       â†’ ğŸŸ¡ è¯„ä¼°ä¸­         â”‚
â”‚  â””â”€â”€ ...                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task #3 å®Œæˆ: server/ åˆ†æç»“æœ          â”‚
â”‚  â””â”€â”€ ...                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
         ç”Ÿæˆç»¼åˆåˆ†ææŠ¥å‘Š
```

### æ€§èƒ½å¯¹æ¯”

| æ‰§è¡Œæ–¹å¼       | 4 æ¨¡å— | 8 æ¨¡å— | 16 æ¨¡å— |
|:-------------|:-------|:-------|:--------|
| é¡ºåºæ‰§è¡Œ      | ~4 åˆ†é’Ÿ | ~8 åˆ†é’Ÿ | ~16 åˆ†é’Ÿ |
| å¹¶è¡Œï¼ˆ4è·¯ï¼‰   | ~1 åˆ†é’Ÿ | ~2 åˆ†é’Ÿ | ~4 åˆ†é’Ÿ |
| **åŠ é€Ÿæ¯”**    | **4x** | **4x** | **4x** |

---

## å·¥å…·ç¼–æ’ç­–ç•¥

### ç­–ç•¥ Aï¼šæ·±åº¦æ¢ç´¢ï¼ˆä¸ç¡®å®šæ—¶ï¼‰

```
ä½¿ç”¨ Task + Explore å­ä»£ç†:
- å…¨é¢æ¢ç´¢ä»£ç ç»“æ„
- è¿½è¸ªå¼•ç”¨é“¾
- å‘ç°éšè—çš„ä¾èµ–å…³ç³»
```

### ç­–ç•¥ Bï¼šå¿«é€ŸéªŒè¯ï¼ˆå‡è®¾é©±åŠ¨ï¼‰

```
ä½¿ç”¨ Grep + Bash:
- éªŒè¯ç‰¹å®šå‡è®¾
- å¿«é€Ÿå¼•ç”¨è®¡æ•°
- é…ç½®æ£€æŸ¥
```

### ç­–ç•¥ Cï¼šä¸Šä¸‹æ–‡ç†è§£ï¼ˆå¤æ‚ä»£ç ï¼‰

```
ä½¿ç”¨ Read:
- é˜…è¯»å…³é”®æ–‡ä»¶
- ç†è§£ä»£ç é€»è¾‘
- å‘ç°è®¾è®¡æ„å›¾
```

### ç­–ç•¥ Dï¼šäººå·¥ä»‹å…¥ï¼ˆé«˜ä¸ç¡®å®šæ€§ï¼‰

```
ä½¿ç”¨ AskUserQuestion:
- ç¡®è®¤äº§å“è§„åˆ’
- è¯¢é—®åŠŸèƒ½çŠ¶æ€
- éªŒè¯å…³é”®å‡è®¾
```

---

## å†³ç­–æ¡†æ¶

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å¼€å§‹åˆ†æ       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ç†è§£ä»£ç æ„å›¾    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              â”‚              â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
         â”‚äº§å“åŠŸèƒ½  â”‚    â”‚æŠ€æœ¯å€ºåŠ¡ â”‚    â”‚å®éªŒåŠŸèƒ½ â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
              â”‚              â”‚              â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
         â”‚ä»åœ¨ç”¨?  â”‚    â”‚æœ‰è®¡åˆ’?  â”‚    â”‚å·²å®Œæˆ? â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
              â”‚              â”‚              â”‚
         Yesâ”‚              Yesâ”‚          Yesâ”‚
            â†“                â†“                â†“
        ğŸ”´ä¿ç•™          ğŸŸ¡è¯„ä¼°ä¸­        ğŸŸ¢åˆ é™¤
```

---

*ç‰ˆæœ¬: v3.3.0 | ç†å¿µ: ç†è§£ > åŒ¹é…ï¼Œæ¨ç† > è§„åˆ™ï¼Œå¹¶è¡Œ > ä¸²è¡Œ*
