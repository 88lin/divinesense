# 文件编辑规范

> **核心原则**：简单修改用 `Edit`，连续 3 次失败后改用 `Write` 整体重写

---

## 编辑策略

| 修改类型 | 推荐方式 |
|:---------|:---------|
| 微小修改（<5行） | `Edit` |
| 结构化修改 | `Edit` |
| 功能添加 | `Write` + `Edit` |
| 大规模重构 | 完整重写 |

**失败回退策略**：连续 3 次 Edit 失败 → Read 完整文件 → Write 整体重写。

---

## Go 代码特殊规则

**⚠️ 禁止使用 sed/正则**：import 块、函数签名、结构体定义、错误处理模式。

**原因**：Go 代码有严格格式要求（`gofmt`），sed 无法保证语法正确性。

---

## 编辑后检查

- [ ] `go fmt` / `pnpm lint` 通过
- [ ] 相关测试通过
- [ ] i18n 同步（如涉及 UI）
