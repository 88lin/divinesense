# CLAUDE.md

> DivineSense é¡¹ç›®å¼€å‘çº²é¢† â€” Claude Code è¾…åŠ©å¼€å‘çš„æ ¸å¿ƒæŒ‡å¯¼æ–‡æ¡£
>
> **ä¿é²œçŠ¶æ€**: âœ… 2026-02-11 v0.97.0 | **æ¶æ„**: Go + React å•äºŒè¿›åˆ¶ | **AI**: äº”ä½é¹¦é¹‰ä»£ç†

---

## ğŸ¯ é¡¹ç›®æœ¬è´¨

**DivineSense (ç¥è¯†)** = AI ä»£ç†é©±åŠ¨çš„ä¸ªäººã€Œç¬¬äºŒå¤§è„‘ã€

```
æŠ€æœ¯æ ˆï¼šGo åç«¯ + React å‰ç«¯ï¼ˆå•äºŒè¿›åˆ¶åˆ†å‘ï¼‰
æ ¸å¿ƒæ¶æ„ï¼šäº”ä½ã€Œé¹¦é¹‰ã€AI ä»£ç† + Unified Block Model
```

---

## ğŸ”‘ Critical Contextï¼ˆå¿…è¯»ï¼‰

**è¯¦ç»†å†…å®¹**ï¼š`@docs/essentials/CRITICAL_CONTEXT.md`

### ç›®å½•é€Ÿè§ˆ
| ç›®å½•      | è¯´æ˜                                    |
| :-------- | :-------------------------------------- |
| `web/`    | å‰ç«¯æ ¹ç›®å½• â€” **å§‹ç»ˆä»æ­¤å¤„è¿è¡Œå‰ç«¯å‘½ä»¤** |
| `ai/`     | AI æ ¸å¿ƒæ¨¡å—ï¼ˆGo ä¸€çº§æ¨¡å—ï¼‰              |
| `server/` | HTTP/gRPC æœåŠ¡å™¨                        |
| `store/`  | æ•°æ®è®¿é—®å±‚                              |
| `proto/`  | Protobuf å®šä¹‰ï¼ˆä¿®æ”¹åéœ€é‡æ–°ç”Ÿæˆï¼‰       |

### å…³é”®é…ç½®
| é…ç½®              | å€¼                         |
| :---------------- | :------------------------- |
| PostgreSQL å®¹å™¨å | `divinesense-postgres-dev` |
| å‰ç«¯ç«¯å£          | 25173                      |
| åç«¯ç«¯å£          | 28081                      |
| æ•°æ®åº“ç«¯å£        | 25432                      |

### å¸¸è§é™·é˜±
| é™·é˜±                | è¯´æ˜                                           |
| :------------------ | :--------------------------------------------- |
| `max-w-md` ç­‰è¯­ä¹‰ç±» | Tailwind v4 è§£æä¸º ~16pxï¼Œç”¨ `max-w-[24rem]`   |
| i18n ä¸åŒæ­¥         | `make check-i18n` æ£€æŸ¥ en.json å’Œ zh-Hans.json |
| æœåŠ¡é‡å¯            | ä¿®æ”¹åç«¯ä»£ç åé€šçŸ¥ç”¨æˆ·æ‰‹åŠ¨ `make restart`      |
| SQLite æ—  AI        | ç”Ÿäº§ AI åŠŸèƒ½å¿…é¡»ç”¨ PostgreSQL                  |

---

## ğŸ§  Agent å·¥ä½œèŒƒå¼

**å·¥ä½œåè®®**ï¼š`@docs/dev-guides/AGENT_WORKFLOW.md`

### æ€è€ƒåè®®
```
ä»»åŠ¡ â†’ åˆ†æ â†’ æ–¹æ¡ˆ â†’ æ‰§è¡Œ â†’ éªŒè¯
         â†‘         â†“
         â””â”€â”€ ä¿®è®¢ â”€â”€â”˜
```

### å·¥å…·é€‰æ‹©
| ä»»åŠ¡           | å·¥å…·            |
| :------------- | :-------------- |
| ç†è§£ä»£ç åº“ç»“æ„ | `Task(Explore)` |
| å®ç°æ–¹æ¡ˆè®¾è®¡   | `Task(Plan)`    |
| æŸ¥æ‰¾å…·ä½“æ–‡ä»¶   | `Glob`          |
| æœç´¢ä»£ç å†…å®¹   | `Grep`          |
| è¯»å–æ–‡ä»¶       | `Read`          |
| ç¼–è¾‘æ–‡ä»¶       | `Edit` / `Write` |

> **æ–‡ä»¶ç¼–è¾‘**ï¼šè¿ç»­ 3 æ¬¡ Edit å¤±è´¥æ—¶ï¼Œæ”¹ç”¨ `Read å®Œæ•´æ–‡ä»¶ â†’ Write æ•´ä½“é‡å†™`ã€‚è¯¦è§ @.claude/rules/file-editing.md

---

## ğŸ—ï¸ æ¶æ„é€Ÿè§ˆ

**æ¶æ„è¯¦æƒ…**ï¼š`@docs/dev-guides/ARCHITECTURE_SUMMARY.md`

### äº”ä½é¹¦é¹‰
| ä»£ç† | è§’è‰² |
|:-----|:-----|
| MemoParrot (ç°ç°) | ç¬”è®°æœç´¢ |
| ScheduleParrot (æ—¶å·§) | æ—¥ç¨‹ç®¡ç† |
| AmazingParrot (æŠ˜è¡·) | ç»¼åˆåŠ©ç† |
| GeekParrot (æå®¢) | Claude Code CLI |
| EvolutionParrot (è¿›åŒ–) | è‡ªæˆ‘è¿›åŒ– |

### è·¯ç”±å››å±‚
```
ç”¨æˆ·è¾“å…¥ â†’ Cache â†’ Rule â†’ History â†’ LLM (~400ms)
```

### æ ¸å¿ƒæ¦‚å¿µ
- **Block**ï¼šç”¨æˆ·-AI äº¤äº’è½®æ¬¡
- **Agent**ï¼šAI ä»£ç†å¤„ç†å™¨
- **Router**ï¼šæ„å›¾è·¯ç”±ç³»ç»Ÿ

---

## ğŸ”„ å·¥ä½œæµ

**å·¥ä½œè§„èŒƒ**ï¼š`@docs/dev-guides/WORKFLOW.md`

### å¼€å‘å‘½ä»¤
| é˜¶æ®µ   | å‘½ä»¤                          |
| :----- | :---------------------------- |
| å¯åŠ¨   | `make start`                  |
| å‰ç«¯   | `make web` / `make build-web` |
| æ•°æ®åº“ | `make db-shell`               |
| æ£€æŸ¥   | `make check-all`              |

### æäº¤æµç¨‹
```
make check-all â†’ feat/fix åˆ†æ”¯ â†’ PR â†’ åˆå¹¶
```
è¯¦ç»†è§„èŒƒï¼š`@.claude/rules/git-workflow.md`

---

## ğŸ“ ç¼–ç è§„èŒƒ

**ä»£ç é£æ ¼**ï¼š`@.claude/rules/code-style.md`

### æ ¸å¿ƒåŸåˆ™
> **å‡æ³• > åŠ æ³•**ï¼šåˆ é™¤é‡å¤ä»£ç ã€åˆå¹¶ç›¸ä¼¼åŠŸèƒ½

### è¯­è¨€è§„èŒƒ
| Go              | React/TS         | Tailwind v4        |
| :-------------- | :--------------- | :----------------- |
| `snake_case.go` | `PascalCase.tsx` | `max-w-[24rem]`    |
| `log/slog`      | `use` å‰ç¼€       | æ˜¾å¼å€¼é¿å…è§£æé”™è¯¯ |
| æ£€æŸ¥é”™è¯¯        | `t("key")`       |                    |

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| ä»»åŠ¡       | æ–‡æ¡£                                  |
| :--------- | :------------------------------------ |
| ç†è§£æ¶æ„   | `@docs/dev-guides/ARCHITECTURE.md`      |
| åç«¯å¼€å‘   | `@docs/dev-guides/BACKEND_DB.md`        |
| å‰ç«¯å¼€å‘   | `@docs/dev-guides/FRONTEND.md`          |
| éƒ¨ç½²       | `@docs/deployment/BINARY_DEPLOYMENT.md` |
| è°ƒè¯•é—®é¢˜   | `@docs/research/DEBUG_LESSONS.md`       |
| æ•°æ®åº“è¿ç§» | `@store/migration/postgres/CLAUDE.md`   |

---

*æœ¬æ–‡æ¡£éšé¡¹ç›®æ¼”è¿›è‡ªåŠ¨æ›´æ–°ã€‚*
