const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CjG08FN8.js","assets/react-vendor-LyyF-653.js","assets/ui-vendor-ByoYm48K.js","assets/leaflet-vendor-Cu4zZue4.js","assets/leaflet-vendor-Dyj9FDc_.css","assets/markdown-vendor-DtAGkuPo.js","assets/math-vendor-JUchi9-2.js","assets/math-vendor-DvXFAOB1.css","assets/mermaid-vendor-B1M2OtO5.js","assets/lodash-vendor-DIRPa7cU.js","assets/react-vendor-k-SYLBed.css","assets/index-D99LTaa7.js","assets/polyfills-RlNY0w59.js","assets/i18n-vendor-Cyfgqt0p.js","assets/index-RrxYxfV3.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./mermaid-vendor-B1M2OtO5.js";import{bz as s,d as a,aB as r,j as o,c2 as i,c3 as n,r as l,a$ as m,b8 as t}from"./react-vendor-LyyF-653.js";import{i as d,j as c,b as x,c as p,S as u,P as j,M as h,o as f,G as b,n as v}from"./index-D99LTaa7.js";import"./lodash-vendor-DIRPa7cU.js";import"./leaflet-vendor-Cu4zZue4.js";import"./ui-vendor-ByoYm48K.js";import"./markdown-vendor-DtAGkuPo.js";import"./math-vendor-JUchi9-2.js";import"./polyfills-RlNY0w59.js";import"./i18n-vendor-Cyfgqt0p.js";const N=l.lazy(()=>e(()=>import("./index-CjG08FN8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),g=({icon:e,label:s,isActive:a,onClick:r})=>o.jsxs("button",{type:"button",onClick:r,className:v("flex items-center gap-2 px-3 py-2 text-sm font-medium transition-all duration-200 border-b-2 rounded-t-lg",a?"border-primary text-primary bg-primary/5":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[o.jsx(e,{className:"h-4 w-4"}),s]}),w=({user:e,onCopyProfileLink:s,shareLabel:a})=>o.jsx("div",{className:"border-b border-border/10 px-4 py-8 sm:px-6",children:o.jsxs("div",{className:"mx-auto flex max-w-2xl gap-4 sm:gap-6",children:[o.jsx(f,{className:"h-20 w-20 shrink-0 rounded-2xl shadow-sm sm:h-24 sm:w-24",avatarUrl:e.avatarUrl}),o.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:e.displayName||e.username}),e.displayName&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",e.username]})]}),e.description&&o.jsx("p",{className:"text-sm text-foreground/70",children:e.description}),o.jsxs(b,{variant:"outline",size:"sm",onClick:s,className:"w-fit gap-2",children:[o.jsx(m,{className:"h-4 w-4"}),a]})]})]})}),y=()=>{const e=d(),m=s().username,[f,b]=a(),v="map"===f.get("view")?"map":"memos",{data:y,isLoading:k,error:C}=c(`users/${m}`,{enabled:!!m});C&&!k&&r.error(e("message.user-not-found"));const L=x({creatorName:y?.name,includeShortcuts:!1,includePinned:!0}),{listSort:P,orderBy:$}=p({pinnedFirst:!0,state:u.NORMAL}),_=e=>{b(s=>("map"===e?s.set("view","map"):s.delete("view"),s))};return k?null:o.jsx("section",{className:"flex min-h-screen w-full flex-col bg-background",children:y?o.jsxs(o.Fragment,{children:[o.jsx(w,{user:y,onCopyProfileLink:()=>{y&&(t(`${window.location.origin}/u/${encodeURIComponent(y.username)}`),r.success(e("message.copied")))},shareLabel:e("common.share")}),o.jsx("div",{className:"border-b border-border/10 mb-4",children:o.jsxs("div",{className:"mx-auto flex max-w-2xl",children:[o.jsx(g,{icon:i,label:e("common.memos"),isActive:"memos"===v,onClick:()=>_("memos")}),o.jsx(g,{icon:n,label:e("common.map"),isActive:"map"===v,onClick:()=>_("map")})]})}),o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"mx-auto w-full max-w-2xl",children:"memos"===v?o.jsx(j,{renderer:(e,s)=>o.jsx(h,{memo:e,showVisibility:!0,showPinned:!0,compact:s?.compact},`${e.name}-${e.displayTime}`),listSort:P,orderBy:$,filter:L}):o.jsx("div",{className:"",children:o.jsx(l.Suspense,{fallback:o.jsx("div",{className:"w-full h-96 flex items-center justify-center",children:"Loading Map..."}),children:o.jsx(N,{creator:y.name,className:"h-[60dvh] sm:h-[500px] rounded-xl"})})})})})]}):o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsx("p",{className:"text-muted-foreground",children:e("message.user-not-found")})})})};export{y as default};
