const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useScheduleAgent-BKnBVHtP.js","assets/react-vendor-LyyF-653.js","assets/ui-vendor-ByoYm48K.js","assets/leaflet-vendor-Cu4zZue4.js","assets/leaflet-vendor-Dyj9FDc_.css","assets/markdown-vendor-DtAGkuPo.js","assets/math-vendor-JUchi9-2.js","assets/math-vendor-DvXFAOB1.css","assets/mermaid-vendor-B1M2OtO5.js","assets/lodash-vendor-DIRPa7cU.js","assets/react-vendor-k-SYLBed.css","assets/polyfills-RlNY0w59.js","assets/i18n-vendor-Cyfgqt0p.js","assets/LocationDialog-DV3bNKl6.js","assets/MermaidBlock-VvWBk8cn.js","assets/AdminSignIn-BuNI9ZA4.js","assets/AuthFooter-DQfrcA-U.js","assets/ThemeSelect-Cq9CVVNd.js","assets/PasswordSignInForm-DSL2nr_-.js","assets/Archived-DS-Zkal_.js","assets/AuthCallback-Cht0KVm-.js","assets/utils-B5ZcaJe4.js","assets/Explore-CA_Ur35J.js","assets/Inboxes-BDNAVr5g.js","assets/MemoDetail-DWBv-r3C.js","assets/NotFound-F1lTKk_M.js","assets/PermissionDenied-Dtxobzuq.js","assets/Attachments-Br5kF_Gq.js","assets/separator-Jvca_ZrM.js","assets/useDialog-BOQkoYHr.js","assets/Setting-Brruf8M1.js","assets/SignIn-gDvnlQNx.js","assets/AuthSkeleton-BwvtN304.js","assets/SignUp-CvlBBEwU.js","assets/UserProfile-CcStlpqC.js","assets/MemoDetailRedirect-DXRmYb-E.js","assets/AIChat-af2GJr8d.js","assets/GenerativeUIContainer-BFWocgGj.js","assets/AIChat-r88p5f08.css","assets/Schedule-BaMu6Yfu.js","assets/Review-SWI4paWK.js","assets/KnowledgeGraph-CF3Ow81Z.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,a)=>((t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a)(t,"symbol"!=typeof n?n+"":n,a);import{u as n,i as a,r,j as o,S as s,C as i,R as l,X as c,L as d,a as u,b as m,c as h,Q as g,d as p,e as b,O as f,f as x,P as v,g as y,h as E,T as N,D as w,k as A,l as S,m as V,M as I,n as k,F as Z,o as W,p as G,q as R,s as C,t as j,v as F,w as Y,x as X,y as B,z as T,A as M,B as L,E as U,G as z,H as D,I as Q,J,K,N as O,U as _,V as H,W as P,Y as $,Z as q,_ as ee,$ as te,a0 as ne,a1 as ae,a2 as re,a3 as oe,a4 as se,a5 as ie,a6 as le,a7 as ce,a8 as de,a9 as ue,aa as me,ab as he,ac as ge,ad as pe,ae as be,af as fe,ag as xe,ah as ve,ai as ye,aj as Ee,ak as Ne,al as we,am as Ae,an as Se,ao as Ve,ap as Ie,aq as ke,ar as Ze,as as We,at as Ge,au as Re,av as Ce,aw as je,ax as Fe,ay as Ye,az as Xe,aA as Be,aB as Te,aC as Me,aD as Le,aE as Ue,aF as ze,aG as De,aH as Qe,aI as Je,aJ as Ke,aK as Oe,aL as _e,aM as He,aN as Pe,aO as $e,aP as qe,aQ as et,aR as tt,aS as nt,aT as at,aU as rt,aV as ot,aW as st,aX as it,aY as lt,aZ as ct,a_ as dt,a$ as ut,b0 as mt,b1 as ht,b2 as gt,b3 as pt,b4 as bt,b5 as ft,b6 as xt,b7 as vt,b8 as yt,b9 as Et,ba as Nt,bb as wt,bc as At,bd as St,be as Vt,bf as It,bg as kt,bh as Zt,bi as Wt,bj as Gt,bk as Rt,bl as Ct,bm as jt,bn as Ft,bo as Yt,bp as Xt,bq as Bt,br as Tt,bs as Mt,bt as Lt,bu as Ut,bv as zt}from"./react-vendor-LyyF-653.js";import"./polyfills-RlNY0w59.js";import{r as Dt,g as Qt,_ as Jt}from"./mermaid-vendor-B1M2OtO5.js";import{i as Kt}from"./i18n-vendor-Cyfgqt0p.js";import{_ as Ot,a1 as _t,$ as Ht,a2 as Pt}from"./lodash-vendor-DIRPa7cU.js";import{g as $t,l as qt,L as en}from"./leaflet-vendor-Cu4zZue4.js";import{e as tn,g as nn,i as an,j as rn,v as on,k as sn,l as ln,m as cn,n as dn,q as un,t as mn,w as hn,x as gn,y as pn}from"./markdown-vendor-DtAGkuPo.js";import"./math-vendor-JUchi9-2.js";import"./ui-vendor-ByoYm48K.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var bn,fn=function(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)};const xn="undefined"!=typeof Intl&&Intl.ListFormat||class{formatToParts(e){const t=[];for(const n of e)t.push({type:"element",value:n}),t.push({type:"literal",value:", "});return t.slice(0,-1)}},vn=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],yn={minimumIntegerDigits:2};class En{constructor(e,t={}){bn.set(this,void 0);let n=String(t.style||"short");"long"!==n&&"short"!==n&&"narrow"!==n&&"digital"!==n&&(n="short");let a="digital"===n?"numeric":n;const r=t.hours||a;a="2-digit"===r?"numeric":r;const o=t.minutes||a;a="2-digit"===o?"numeric":o;const s=t.seconds||a;a="2-digit"===s?"numeric":s;const i=t.milliseconds||a;!function(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===a?r.call(e,n):r?r.value=n:t.set(e,n)}(this,bn,{locale:e,style:n,years:t.years||"digital"===n?"short":n,yearsDisplay:"always"===t.yearsDisplay?"always":"auto",months:t.months||"digital"===n?"short":n,monthsDisplay:"always"===t.monthsDisplay?"always":"auto",weeks:t.weeks||"digital"===n?"short":n,weeksDisplay:"always"===t.weeksDisplay?"always":"auto",days:t.days||"digital"===n?"short":n,daysDisplay:"always"===t.daysDisplay?"always":"auto",hours:r,hoursDisplay:"always"===t.hoursDisplay||"digital"===n?"always":"auto",minutes:o,minutesDisplay:"always"===t.minutesDisplay||"digital"===n?"always":"auto",seconds:s,secondsDisplay:"always"===t.secondsDisplay||"digital"===n?"always":"auto",milliseconds:i,millisecondsDisplay:"always"===t.millisecondsDisplay?"always":"auto"},"f")}resolvedOptions(){return fn(this,bn,"f")}formatToParts(e){const t=[],n=fn(this,bn,"f"),a=n.style,r=n.locale;for(const[o,s]of vn){const i=e[o];if("auto"===n[`${o}Display`]&&!i)continue;const l=n[o],c="2-digit"===l?yn:"numeric"===l?{}:{style:"unit",unit:s,unitDisplay:l};let d=new Intl.NumberFormat(r,c).format(i);"months"===o&&("narrow"===l||"narrow"===a&&d.endsWith("m"))&&(d=d.replace(/(\d+)m$/,"$1mo")),t.push(d)}return new xn(r,{type:"unit",style:"digital"===a?"short":a}).formatToParts(t)}format(e){return this.formatToParts(e).map(e=>e.value).join("")}}bn=new WeakMap;const Nn=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,wn=["year","month","week","day","hour","minute","second","millisecond"];class An{constructor(e=0,t=0,n=0,a=0,r=0,o=0,s=0,i=0){this.years=e,this.months=t,this.weeks=n,this.days=a,this.hours=r,this.minutes=o,this.seconds=s,this.milliseconds=i,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=0===this.sign}abs(){return new An(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(e){var t;if("string"==typeof e){const n=String(e).trim(),a=n.startsWith("-")?-1:1,r=null===(t=n.match(Nn))||void 0===t?void 0:t.slice(1).map(e=>(Number(e)||0)*a);return r?new An(...r):new An}if("object"==typeof e){const{years:t,months:n,weeks:a,days:r,hours:o,minutes:s,seconds:i,milliseconds:l}=e;return new An(t,n,a,r,o,s,i,l)}throw new RangeError("invalid duration")}static compare(e,t){const n=Date.now(),a=Math.abs(Sn(n,An.from(e)).getTime()-n),r=Math.abs(Sn(n,An.from(t)).getTime()-n);return a>r?-1:a<r?1:0}toLocaleString(e,t){return new En(e,t).format(this)}}function Sn(e,t){const n=new Date(e);return t.sign<0?(n.setUTCSeconds(n.getUTCSeconds()+t.seconds),n.setUTCMinutes(n.getUTCMinutes()+t.minutes),n.setUTCHours(n.getUTCHours()+t.hours),n.setUTCDate(n.getUTCDate()+7*t.weeks+t.days),n.setUTCMonth(n.getUTCMonth()+t.months),n.setUTCFullYear(n.getUTCFullYear()+t.years)):(n.setUTCFullYear(n.getUTCFullYear()+t.years),n.setUTCMonth(n.getUTCMonth()+t.months),n.setUTCDate(n.getUTCDate()+7*t.weeks+t.days),n.setUTCHours(n.getUTCHours()+t.hours),n.setUTCMinutes(n.getUTCMinutes()+t.minutes),n.setUTCSeconds(n.getUTCSeconds()+t.seconds)),n}function Vn(e,{relativeTo:t=Date.now()}={}){if(t=new Date(t),e.blank)return e;const n=e.sign;let a=Math.abs(e.years),r=Math.abs(e.months),o=Math.abs(e.weeks),s=Math.abs(e.days),i=Math.abs(e.hours),l=Math.abs(e.minutes),c=Math.abs(e.seconds),d=Math.abs(e.milliseconds);d>=900&&(c+=Math.round(d/1e3)),(c||l||i||s||o||r||a)&&(d=0),c>=55&&(l+=Math.round(c/60)),(l||i||s||o||r||a)&&(c=0),l>=55&&(i+=Math.round(l/60)),(i||s||o||r||a)&&(l=0),s&&i>=12&&(s+=Math.round(i/24)),!s&&i>=21&&(s+=Math.round(i/24)),(s||o||r||a)&&(i=0);const u=t.getFullYear(),m=t.getMonth(),h=t.getDate();if(s>=27||a+r+s){const e=new Date(t);e.setDate(1),e.setMonth(m+r*n+1),e.setDate(0);const i=Math.max(0,h-e.getDate()),l=new Date(t);l.setFullYear(u+a*n),l.setDate(h-i),l.setMonth(m+r*n),l.setDate(h-i+s*n);const c=l.getFullYear()-t.getFullYear(),d=l.getMonth()-t.getMonth(),g=Math.abs(Math.round((Number(l)-Number(t))/864e5))+i,p=Math.abs(12*c+d);g<27?(s>=6?(o+=Math.round(s/7),s=0):s=g,r=a=0):p<=11?(r=p,a=0):(r=0,a=c*n),(r||a)&&(s=0)}return a&&(r=0),o>=4&&(r+=Math.round(o/4)),(r||a)&&(o=0),s&&o&&!r&&!a&&(o+=Math.round(s/7),s=0),new An(a*n,r*n,o*n,s*n,i*n,l*n,c*n,d*n)}var In,kn,Zn,Wn,Gn,Rn,Cn,jn,Fn,Yn,Xn,Bn,Tn,Mn,Ln=function(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)},Un=function(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?r.call(e,n):r?r.value=n:t.set(e,n),n};const zn=globalThis.HTMLElement||null,Dn=new An,Qn=new An(0,0,0,0,0,1);class Jn extends Event{constructor(e,t,n,a){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=e,this.newText=t,this.oldTitle=n,this.newTitle=a}}function Kn(e){if(!e.date)return 1/0;if("duration"===e.format||"elapsed"===e.format){const t=e.precision;if("second"===t)return 1e3;if("minute"===t)return 6e4}const t=Math.abs(Date.now()-e.date.getTime());return t<6e4?1e3:t<36e5?6e4:36e5}const On=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(e){if(this.elements.has(e))return;this.elements.add(e);const t=e.date;if(t&&t.getTime()){const t=Kn(e),n=Date.now()+t;n<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),t),this.time=n)}}unobserve(e){this.elements.has(e)&&this.elements.delete(e)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let e=1/0;for(const t of this.elements)e=Math.min(e,Kn(t)),t.update();this.time=Math.min(36e5,e),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}};class _n extends zn{constructor(){super(...arguments),In.add(this),kn.set(this,!1),Zn.set(this,!1),Gn.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),Mn.set(this,null)}static define(e="relative-time",t=customElements){return t.define(e,this),this}get timeZone(){var e;return(null===(e=this.closest("[time-zone]"))||void 0===e?void 0:e.getAttribute("time-zone"))||this.ownerDocument.documentElement.getAttribute("time-zone")||void 0}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","no-title","datetime","lang","title","aria-hidden","time-zone"]}get onRelativeTimeUpdated(){return Ln(this,Mn,"f")}set onRelativeTimeUpdated(e){Ln(this,Mn,"f")&&this.removeEventListener("relative-time-updated",Ln(this,Mn,"f")),Un(this,Mn,"object"==typeof e||"function"==typeof e?e:null,"f"),"function"==typeof e&&this.addEventListener("relative-time-updated",e)}get second(){const e=this.getAttribute("second");if("numeric"===e||"2-digit"===e)return e}set second(e){this.setAttribute("second",e||"")}get minute(){const e=this.getAttribute("minute");if("numeric"===e||"2-digit"===e)return e}set minute(e){this.setAttribute("minute",e||"")}get hour(){const e=this.getAttribute("hour");if("numeric"===e||"2-digit"===e)return e}set hour(e){this.setAttribute("hour",e||"")}get weekday(){const e=this.getAttribute("weekday");return"long"===e||"short"===e||"narrow"===e?e:"datetime"===this.format&&""!==e?this.formatStyle:void 0}set weekday(e){this.setAttribute("weekday",e||"")}get day(){var e;const t=null!==(e=this.getAttribute("day"))&&void 0!==e?e:"numeric";if("numeric"===t||"2-digit"===t)return t}set day(e){this.setAttribute("day",e||"")}get month(){const e=this.format;let t=this.getAttribute("month");if(""!==t)return null!=t||(t="datetime"===e?this.formatStyle:"short"),"numeric"===t||"2-digit"===t||"short"===t||"long"===t||"narrow"===t?t:void 0}set month(e){this.setAttribute("month",e||"")}get year(){var e;const t=this.getAttribute("year");return"numeric"===t||"2-digit"===t?t:this.hasAttribute("year")||(new Date).getUTCFullYear()===(null===(e=this.date)||void 0===e?void 0:e.getUTCFullYear())?void 0:"numeric"}set year(e){this.setAttribute("year",e||"")}get timeZoneName(){const e=this.getAttribute("time-zone-name");if("long"===e||"short"===e||"shortOffset"===e||"longOffset"===e||"shortGeneric"===e||"longGeneric"===e)return e}set timeZoneName(e){this.setAttribute("time-zone-name",e||"")}get prefix(){var e;return null!==(e=this.getAttribute("prefix"))&&void 0!==e?e:"datetime"===this.format?"":"on"}set prefix(e){this.setAttribute("prefix",e)}get threshold(){const e=this.getAttribute("threshold");return e&&(t=e,Nn.test(t))?e:"P30D";var t}set threshold(e){this.setAttribute("threshold",e)}get tense(){const e=this.getAttribute("tense");return"past"===e?"past":"future"===e?"future":"auto"}set tense(e){this.setAttribute("tense",e)}get precision(){const e=this.getAttribute("precision");return wn.includes(e)?e:"micro"===this.format?"minute":"second"}set precision(e){this.setAttribute("precision",e)}get format(){const e=this.getAttribute("format");return"datetime"===e?"datetime":"relative"===e?"relative":"duration"===e?"duration":"micro"===e?"micro":"elapsed"===e?"elapsed":"auto"}set format(e){this.setAttribute("format",e)}get formatStyle(){const e=this.getAttribute("format-style");if("long"===e)return"long";if("short"===e)return"short";if("narrow"===e)return"narrow";const t=this.format;return"elapsed"===t||"micro"===t?"narrow":"datetime"===t?"short":"long"}set formatStyle(e){this.setAttribute("format-style",e)}get noTitle(){return this.hasAttribute("no-title")}set noTitle(e){this.toggleAttribute("no-title",e)}get datetime(){return this.getAttribute("datetime")||""}set datetime(e){this.setAttribute("datetime",e)}get date(){const e=Date.parse(this.datetime);return Number.isNaN(e)?null:new Date(e)}set date(e){this.datetime=(null==e?void 0:e.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){On.unobserve(this)}attributeChangedCallback(e,t,n){t!==n&&("title"===e&&Un(this,kn,null!==n&&(this.date&&Ln(this,In,"m",Rn).call(this,this.date))!==n,"f"),Ln(this,Zn,"f")||"title"===e&&Ln(this,kn,"f")||Un(this,Zn,(async()=>{await Promise.resolve(),this.update(),Un(this,Zn,!1,"f")})(),"f"))}update(){const e=Ln(this,Gn,"f").textContent||this.textContent||"",t=this.getAttribute("title")||"";let n=t;const a=this.date;if("undefined"==typeof Intl||!Intl.DateTimeFormat||!a)return void(Ln(this,Gn,"f").textContent=e);const r=Date.now();Ln(this,kn,"f")||(n=Ln(this,In,"m",Rn).call(this,a)||"",n&&!this.noTitle&&this.setAttribute("title",n));const o=function(e,t="second",n=Date.now()){const a=e.getTime()-n;if(0===a)return new An;const r=Math.sign(a),o=Math.abs(a),s=Math.floor(o/1e3),i=Math.floor(s/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/30),u=Math.floor(d/12),m=wn.indexOf(t)||wn.length;return new An(m>=0?u*r:0,m>=1?(d-12*u)*r:0,0,m>=3?(c-30*d)*r:0,m>=4?(l-24*c)*r:0,m>=5?(i-60*l)*r:0,m>=6?(s-60*i)*r:0,m>=7?(o-1e3*s)*r:0)}(a,this.precision,r),s=Ln(this,In,"m",Cn).call(this,o);let i=e;const l=Ln(this,In,"m",Tn).call(this,s);i=l?Ln(this,In,"m",Xn).call(this,a):"duration"===s?Ln(this,In,"m",jn).call(this,o):"relative"===s?Ln(this,In,"m",Fn).call(this,o):Ln(this,In,"m",Yn).call(this,a),i?Ln(this,In,"m",Bn).call(this,i):this.shadowRoot===Ln(this,Gn,"f")&&this.textContent&&Ln(this,In,"m",Bn).call(this,this.textContent),i===e&&n===t||this.dispatchEvent(new Jn(e,i,t,n)),"relative"!==s&&"duration"!==s||l?On.unobserve(this):On.observe(this)}}kn=new WeakMap,Zn=new WeakMap,Gn=new WeakMap,Mn=new WeakMap,In=new WeakSet,Wn=function(){var e;const t=(null===(e=this.closest("[lang]"))||void 0===e?void 0:e.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang");try{return new Intl.Locale(null!=t?t:"").toString()}catch(n){return"default"}},Rn=function(e){return new Intl.DateTimeFormat(Ln(this,In,"a",Wn),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short",timeZone:this.timeZone}).format(e)},Cn=function(e){const t=this.format;if("datetime"===t)return"datetime";if("duration"===t)return"duration";if("elapsed"===t)return"duration";if("micro"===t)return"duration";if(("auto"===t||"relative"===t)&&"undefined"!=typeof Intl&&Intl.RelativeTimeFormat){const t=this.tense;if("past"===t||"future"===t)return"relative";if(1===An.compare(e,this.threshold))return"relative"}return"datetime"},jn=function(e){const t=Ln(this,In,"a",Wn),n=this.format,a=this.formatStyle,r=this.tense;let o=Dn;"micro"===n?(e=Vn(e),o=Qn,0===e.months&&("past"===this.tense&&-1!==e.sign||"future"===this.tense&&1!==e.sign)&&(e=Qn)):("past"===r&&-1!==e.sign||"future"===r&&1!==e.sign)&&(e=o);const s=`${this.precision}sDisplay`;return e.blank?o.toLocaleString(t,{style:a,[s]:"always"}):e.abs().toLocaleString(t,{style:a})},Fn=function(e){const t=new Intl.RelativeTimeFormat(Ln(this,In,"a",Wn),{numeric:"auto",style:this.formatStyle}),n=this.tense;"future"===n&&1!==e.sign&&(e=Dn),"past"===n&&-1!==e.sign&&(e=Dn);const[a,r]=function(e,t){const n=Vn(e,t);if(n.blank)return[0,"second"];for(const a of wn){if("millisecond"===a)continue;const e=n[`${a}s`];if(e)return[e,a]}return[0,"second"]}(e);return"second"===r&&a<10?t.format(0,"millisecond"===this.precision?"second":this.precision):t.format(a,r)},Yn=function(e){const t=new Intl.DateTimeFormat(Ln(this,In,"a",Wn),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName,timeZone:this.timeZone});return`${this.prefix} ${t.format(e)}`.trim()},Xn=function(e){return new Intl.DateTimeFormat(Ln(this,In,"a",Wn),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short",timeZone:this.timeZone}).format(e)},Bn=function(e){if(this.hasAttribute("aria-hidden")&&"true"===this.getAttribute("aria-hidden")){const t=document.createElement("span");t.setAttribute("aria-hidden","true"),t.textContent=e,Ln(this,Gn,"f").replaceChildren(t)}else Ln(this,Gn,"f").textContent=e},Tn=function(e){var t;return"duration"!==e&&("true"===this.ownerDocument.documentElement.getAttribute("data-prefers-absolute-time")||"true"===(null===(t=this.ownerDocument.body)||void 0===t?void 0:t.getAttribute("data-prefers-absolute-time")))};const Hn="undefined"!=typeof globalThis?globalThis:window;try{Hn.RelativeTimeElement=_n.define()}catch(iv){if(!(Hn.DOMException&&iv instanceof DOMException&&"NotSupportedError"===iv.name||iv instanceof ReferenceError))throw iv}var Pn,$n={exports:{}};Pn||(Pn=1,$n.exports={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}});var qn,ea={exports:{}};qn||(qn=1,ea.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(a,null,!0),a}(Dt()));var ta,na={exports:{}};ta||(ta=1,na.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"週":e+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(a,null,!0),a}(Dt()));const aa="memos-locale",ra=()=>{try{const e=localStorage.getItem(aa);return e&&ca.includes(e)?e:null}catch{return null}},oa=e=>{if(ca.includes(e))return e;const t=Object.entries(Kt.store.options.fallbackLng);for(const[a,r]of t)if(e===a)return r[0];const n=e.substring(0,2);if(ca.includes(n))return n;for(const a of ca)if(n==a.substring(0,2))return a;return Kt.store.options.fallbackLng.default[0]},sa=()=>{const{t:e}=n();return e},ia=e=>!!e&&ca.includes(e),la=e=>{const t=ia(e)?e:oa(navigator.language);return(e=>{try{localStorage.setItem(aa,e)}catch{}})(t),Kt.changeLanguage(t),"zh-Hans"===t?Qt.locale("zh-cn"):"zh-Hant"===t?Qt.locale("zh-tw"):Qt.locale("en"),t},ca=["en","zh-Hans","zh-Hant"],da={type:"backend",init:function(){},read:function(e,t,n){const a=oa(e);((e,t,n)=>{const a=e[t];return a?"function"==typeof a?a():Promise.resolve(a):new Promise((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./locales/en.json":()=>Jt(()=>import("./en-r99ctk7M.js"),[]),"./locales/zh-Hans.json":()=>Jt(()=>import("./zh-Hans-Cz8Xku5C.js"),[]),"./locales/zh-Hant.json":()=>Jt(()=>import("./zh-Hant-C5TDOYum.js"),[])}),`./locales/${a}.json`,3).then(e=>{n(null,e)}).catch(()=>{})}};function ua(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=ua(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function ma(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=ua(e))&&(a&&(a+=" "),a+=t);return a}Kt.use(da).use(a).init({detection:{order:["navigator"]},fallbackLng:{zh:["zh-Hans","zh-Hant","en"],default:["en"]}});const ha=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ga=ma,pa=(e,t)=>n=>{var a;if(null==(null==t?void 0:t.variants))return ga(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:r,defaultVariants:o}=t,s=Object.keys(r).map(e=>{const t=null==n?void 0:n[e],a=null==o?void 0:o[e];if(null===t)return null;const s=ha(t)||ha(a);return r[e][s]}),i=n&&Object.entries(n).reduce((e,t)=>{let[n,a]=t;return void 0===a||(e[n]=a),e},{}),l=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:n,className:a,...r}=t;return Object.entries(r).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...i}[t]):{...o,...i}[t]===n})?[...e,n,a]:e},[]);return ga(e,s,l,null==n?void 0:n.class,null==n?void 0:n.className)},ba=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),fa="-",xa=[],va=e=>{const t=Na(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Ea(e);const n=e.split(fa),a=""===n[0]&&n.length>1?1:0;return ya(n,a,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=a[e],r=n[e];return t?r?((e,t)=>{const n=new Array(e.length+t.length);for(let a=0;a<e.length;a++)n[a]=e[a];for(let a=0;a<t.length;a++)n[e.length+a]=t[a];return n})(r,t):t:r||xa}return n[e]||xa}}},ya=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const a=e[t],r=n.nextPart.get(a);if(r){const n=ya(e,t+1,r);if(n)return n}const o=n.validators;if(null===o)return;const s=0===t?e.join(fa):e.slice(t).join(fa),i=o.length;for(let l=0;l<i;l++){const e=o[l];if(e.validator(s))return e.classGroupId}},Ea=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),a=t.slice(0,n);return a?"arbitrary.."+a:void 0})(),Na=e=>{const{theme:t,classGroups:n}=e;return wa(n,t)},wa=(e,t)=>{const n=ba();for(const a in e){const r=e[a];Aa(r,n,a,t)}return n},Aa=(e,t,n,a)=>{const r=e.length;for(let o=0;o<r;o++){const r=e[o];Sa(r,t,n,a)}},Sa=(e,t,n,a)=>{"string"!=typeof e?"function"!=typeof e?ka(e,t,n,a):Ia(e,t,n,a):Va(e,t,n)},Va=(e,t,n)=>{(""===e?t:Za(t,e)).classGroupId=n},Ia=(e,t,n,a)=>{Wa(e)?Aa(e(a),t,n,a):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},ka=(e,t,n,a)=>{const r=Object.entries(e),o=r.length;for(let s=0;s<o;s++){const[e,o]=r[s];Aa(o,Za(t,e),n,a)}},Za=(e,t)=>{let n=e;const a=t.split(fa),r=a.length;for(let o=0;o<r;o++){const e=a[o];let t=n.nextPart.get(e);t||(t=ba(),n.nextPart.set(e,t)),n=t}return n},Wa=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,Ga=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),a=Object.create(null);const r=(r,o)=>{n[r]=o,t++,t>e&&(t=0,a=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=a[e])?(r(e,t),t):void 0},set(e,t){e in n?n[e]=t:r(e,t)}}},Ra=[],Ca=(e,t,n,a,r)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:a,isExternal:r}),ja=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=e=>{const t=[];let n,a=0,r=0,o=0;const s=e.length;for(let d=0;d<s;d++){const s=e[d];if(0===a&&0===r){if(":"===s){t.push(e.slice(o,d)),o=d+1;continue}if("/"===s){n=d;continue}}"["===s?a++:"]"===s?a--:"("===s?r++:")"===s&&r--}const i=0===t.length?e:e.slice(o);let l=i,c=!1;i.endsWith("!")?(l=i.slice(0,-1),c=!0):i.startsWith("!")&&(l=i.slice(1),c=!0);return Ca(t,c,l,n&&n>o?n-o:void 0)};if(t){const e=t+":",n=a;a=t=>t.startsWith(e)?n(t.slice(e.length)):Ca(Ra,!1,t,void 0,!0)}if(n){const e=a;a=t=>n({className:t,parseClassName:e})}return a},Fa=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let r=0;r<e.length;r++){const o=e[r],s="["===o[0],i=t.has(o);s||i?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},Ya=/\s+/,Xa=e=>{if("string"==typeof e)return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=Xa(e[a]))&&(n&&(n+=" "),n+=t);return n},Ba=[],Ta=e=>{const t=t=>t[e]||Ba;return t.isThemeGetter=!0,t},Ma=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,La=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ua=/^\d+\/\d+$/,za=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Da=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ja=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ka=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=e=>Ua.test(e),_a=e=>!!e&&!Number.isNaN(Number(e)),Ha=e=>!!e&&Number.isInteger(Number(e)),Pa=e=>e.endsWith("%")&&_a(e.slice(0,-1)),$a=e=>za.test(e),qa=()=>!0,er=e=>Da.test(e)&&!Qa.test(e),tr=()=>!1,nr=e=>Ja.test(e),ar=e=>Ka.test(e),rr=e=>!sr(e)&&!mr(e),or=e=>vr(e,wr,tr),sr=e=>Ma.test(e),ir=e=>vr(e,Ar,er),lr=e=>vr(e,Sr,_a),cr=e=>vr(e,Er,tr),dr=e=>vr(e,Nr,ar),ur=e=>vr(e,Ir,nr),mr=e=>La.test(e),hr=e=>yr(e,Ar),gr=e=>yr(e,Vr),pr=e=>yr(e,Er),br=e=>yr(e,wr),fr=e=>yr(e,Nr),xr=e=>yr(e,Ir,!0),vr=(e,t,n)=>{const a=Ma.exec(e);return!!a&&(a[1]?t(a[1]):n(a[2]))},yr=(e,t,n=!1)=>{const a=La.exec(e);return!!a&&(a[1]?t(a[1]):n)},Er=e=>"position"===e||"percentage"===e,Nr=e=>"image"===e||"url"===e,wr=e=>"length"===e||"size"===e||"bg-size"===e,Ar=e=>"length"===e,Sr=e=>"number"===e,Vr=e=>"family-name"===e,Ir=e=>"shadow"===e,kr=((e,...t)=>{let n,a,r,o;const s=e=>{const t=a(e);if(t)return t;const o=((e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:r,sortModifiers:o}=t,s=[],i=e.trim().split(Ya);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:h}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let g=!!h,p=a(g?m.substring(0,h):m);if(!p){if(!g){l=e+(l.length>0?" "+l:l);continue}if(p=a(m),!p){l=e+(l.length>0?" "+l:l);continue}g=!1}const b=0===d.length?"":1===d.length?d[0]:o(d).join(":"),f=u?b+"!":b,x=f+p;if(s.indexOf(x)>-1)continue;s.push(x);const v=r(p,g);for(let n=0;n<v.length;++n){const e=v[n];s.push(f+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return r(e,o),o};return o=i=>{const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Ga(e.cacheSize),parseClassName:ja(e),sortModifiers:Fa(e),...va(e)}))(l),a=n.cache.get,r=n.cache.set,o=s,s(i)},(...e)=>o(((...e)=>{let t,n,a=0,r="";for(;a<e.length;)(t=e[a++])&&(n=Xa(t))&&(r&&(r+=" "),r+=n);return r})(...e))})(()=>{const e=Ta("color"),t=Ta("font"),n=Ta("text"),a=Ta("font-weight"),r=Ta("tracking"),o=Ta("leading"),s=Ta("breakpoint"),i=Ta("container"),l=Ta("spacing"),c=Ta("radius"),d=Ta("shadow"),u=Ta("inset-shadow"),m=Ta("text-shadow"),h=Ta("drop-shadow"),g=Ta("blur"),p=Ta("perspective"),b=Ta("aspect"),f=Ta("ease"),x=Ta("animate"),v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",mr,sr],y=()=>[mr,sr,l],E=()=>[Oa,"full","auto",...y()],N=()=>[Ha,"none","subgrid",mr,sr],w=()=>["auto",{span:["full",Ha,mr,sr]},Ha,mr,sr],A=()=>[Ha,"auto",mr,sr],S=()=>["auto","min","max","fr",mr,sr],V=()=>["auto",...y()],I=()=>[Oa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],k=()=>[e,mr,sr],Z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",pr,cr,{position:[mr,sr]}],W=()=>["auto","cover","contain",br,or,{size:[mr,sr]}],G=()=>[Pa,hr,ir],R=()=>["","none","full",c,mr,sr],C=()=>["",_a,hr,ir],j=()=>[_a,Pa,pr,cr],F=()=>["","none",g,mr,sr],Y=()=>["none",_a,mr,sr],X=()=>["none",_a,mr,sr],B=()=>[_a,mr,sr],T=()=>[Oa,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$a],breakpoint:[$a],color:[qa],container:[$a],"drop-shadow":[$a],ease:["in","out","in-out"],font:[rr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$a],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$a],shadow:[$a],spacing:["px",_a],text:[$a],"text-shadow":[$a],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Oa,sr,mr,b]}],container:["container"],columns:[{columns:[_a,sr,mr,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Ha,"auto",mr,sr]}],basis:[{basis:[Oa,"full","auto",i,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_a,Oa,"auto","initial","none",sr]}],grow:[{grow:["",_a,mr,sr]}],shrink:[{shrink:["",_a,mr,sr]}],order:[{order:[Ha,"first","last","none",mr,sr]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:w()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:w()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[i,"screen",...I()]}],"min-w":[{"min-w":[i,"screen","none",...I()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[s]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,hr,ir]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,mr,lr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Pa,sr]}],"font-family":[{font:[gr,sr,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,mr,sr]}],"line-clamp":[{"line-clamp":[_a,"none",mr,lr]}],leading:[{leading:[o,...y()]}],"list-image":[{"list-image":["none",mr,sr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",mr,sr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[_a,"from-font","auto",mr,ir]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[_a,"auto",mr,sr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mr,sr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mr,sr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ha,mr,sr],radial:["",mr,sr],conic:[Ha,mr,sr]},fr,dr]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:C()}],"border-w-x":[{"border-x":C()}],"border-w-y":[{"border-y":C()}],"border-w-s":[{"border-s":C()}],"border-w-e":[{"border-e":C()}],"border-w-t":[{"border-t":C()}],"border-w-r":[{"border-r":C()}],"border-w-b":[{"border-b":C()}],"border-w-l":[{"border-l":C()}],"divide-x":[{"divide-x":C()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":C()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[_a,mr,sr]}],"outline-w":[{outline:["",_a,hr,ir]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",d,xr,ur]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",u,xr,ur]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[_a,ir]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":C()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",m,xr,ur]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[_a,mr,sr]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_a]}],"mask-image-linear-from-pos":[{"mask-linear-from":j()}],"mask-image-linear-to-pos":[{"mask-linear-to":j()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":j()}],"mask-image-t-to-pos":[{"mask-t-to":j()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":j()}],"mask-image-r-to-pos":[{"mask-r-to":j()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":j()}],"mask-image-b-to-pos":[{"mask-b-to":j()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":j()}],"mask-image-l-to-pos":[{"mask-l-to":j()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":j()}],"mask-image-x-to-pos":[{"mask-x-to":j()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":j()}],"mask-image-y-to-pos":[{"mask-y-to":j()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[mr,sr]}],"mask-image-radial-from-pos":[{"mask-radial-from":j()}],"mask-image-radial-to-pos":[{"mask-radial-to":j()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[_a]}],"mask-image-conic-from-pos":[{"mask-conic-from":j()}],"mask-image-conic-to-pos":[{"mask-conic-to":j()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",mr,sr]}],filter:[{filter:["","none",mr,sr]}],blur:[{blur:F()}],brightness:[{brightness:[_a,mr,sr]}],contrast:[{contrast:[_a,mr,sr]}],"drop-shadow":[{"drop-shadow":["","none",h,xr,ur]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",_a,mr,sr]}],"hue-rotate":[{"hue-rotate":[_a,mr,sr]}],invert:[{invert:["",_a,mr,sr]}],saturate:[{saturate:[_a,mr,sr]}],sepia:[{sepia:["",_a,mr,sr]}],"backdrop-filter":[{"backdrop-filter":["","none",mr,sr]}],"backdrop-blur":[{"backdrop-blur":F()}],"backdrop-brightness":[{"backdrop-brightness":[_a,mr,sr]}],"backdrop-contrast":[{"backdrop-contrast":[_a,mr,sr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_a,mr,sr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_a,mr,sr]}],"backdrop-invert":[{"backdrop-invert":["",_a,mr,sr]}],"backdrop-opacity":[{"backdrop-opacity":[_a,mr,sr]}],"backdrop-saturate":[{"backdrop-saturate":[_a,mr,sr]}],"backdrop-sepia":[{"backdrop-sepia":["",_a,mr,sr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",mr,sr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_a,"initial",mr,sr]}],ease:[{ease:["linear","initial",f,mr,sr]}],delay:[{delay:[_a,mr,sr]}],animate:[{animate:["none",x,mr,sr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,mr,sr]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:Y()}],"rotate-x":[{"rotate-x":Y()}],"rotate-y":[{"rotate-y":Y()}],"rotate-z":[{"rotate-z":Y()}],scale:[{scale:X()}],"scale-x":[{"scale-x":X()}],"scale-y":[{"scale-y":X()}],"scale-z":[{"scale-z":X()}],"scale-3d":["scale-3d"],skew:[{skew:B()}],"skew-x":[{"skew-x":B()}],"skew-y":[{"skew-y":B()}],transform:[{transform:[mr,sr,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:T()}],"translate-x":[{"translate-x":T()}],"translate-y":[{"translate-y":T()}],"translate-z":[{"translate-z":T()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mr,sr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mr,sr]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[_a,hr,ir,lr]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Zr(...e){return kr(ma(e))}const Wr=pa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-8 px-3",sm:"h-7 rounded-md gap-1 px-2 has-[>svg]:px-2",lg:"h-9 rounded-md px-4",icon:"size-8"}},defaultVariants:{variant:"default",size:"default"}}),Gr=r.forwardRef(({className:e,variant:t,size:n,asChild:a=!1,...r},i)=>{const l=a?s:"button";return o.jsx(l,{ref:i,"data-slot":"button",className:Zr(Wr({variant:t,size:n,className:e})),...r})});Gr.displayName="Button";class Rr extends r.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.reload()}),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:o.jsxs("div",{className:"md:max-w-[500px] w-full p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[o.jsx(i,{className:"w-8 h-8"}),o.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"})]}),o.jsx("p",{className:"text-foreground/70",children:"An unexpected error occurred. This could be due to a network issue or a problem with the application."}),this.state.error&&o.jsxs("details",{className:"bg-muted p-3 rounded-md text-sm",children:[o.jsx("summary",{className:"cursor-pointer font-medium mb-2",children:"Error details"}),o.jsx("pre",{className:"whitespace-pre-wrap break-all text-xs text-foreground/60 overflow-x-auto",children:this.state.error.message})]}),o.jsxs(Gr,{onClick:this.handleReset,className:"w-full gap-2",children:[o.jsx(l,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const Cr="pwa-install-prompt-dismissed",jr=()=>{const[e,t]=r.useState({isInstallable:!1,isIOS:!1,isDesktop:!1,isInstalled:!1,deferredPrompt:null,showPrompt:!1}),n=(()=>{const e=window.navigator.userAgent;return/iPad|iPhone|iPod/.test(e)&&!window.MSStream})(),a=(()=>{const e=window.navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),n=/Tablet|iPad/i.test(e);return!t&&!n})(),o=(()=>{const e=!0===window.navigator.standalone,t=window.matchMedia("(display-mode: standalone)").matches,n=window.history.length<=1,a=!window.matchMedia("(display-mode: browser)").matches;return e||t||n&&a})(),s=(()=>{try{const e=localStorage.getItem(Cr);if(!e)return!1;const t=parseInt(e,10);return Date.now()-t<6048e5}catch{return!1}})(),i=r.useCallback(()=>{try{localStorage.setItem(Cr,Date.now().toString())}catch{}t(e=>({...e,showPrompt:!1}))},[]),l=r.useCallback(async()=>{const{deferredPrompt:n}=e;if(!n)return!1;n.prompt();const{outcome:a}=await n.userChoice;return t(e=>({...e,deferredPrompt:null,isInstallable:!1,showPrompt:!1})),"accepted"===a},[e.deferredPrompt]);return r.useEffect(()=>{const e=!o&&!s;if(t(t=>({...t,isInstalled:o,isIOS:n,isDesktop:a,showPrompt:e&&(n||a)})),o)return;const r=e=>{e.preventDefault(),t(t=>({...t,isInstallable:!0,deferredPrompt:e,showPrompt:!s}))},i=()=>{t({isInstallable:!1,isIOS:!1,isDesktop:!1,isInstalled:!0,deferredPrompt:null,showPrompt:!1})};return window.addEventListener("beforeinstallprompt",r),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("beforeinstallprompt",r),window.removeEventListener("appinstalled",i)}},[o,n,a,s]),{...e,promptInstall:l,hideInstallPrompt:i}},Fr=({className:e})=>{const{t:t}=n(),{isInstallable:a,isIOS:s,isDesktop:i,showPrompt:l,promptInstall:d,hideInstallPrompt:u}=jr(),[m,h]=r.useState(1),[g,p]=r.useState(1),[b,f]=r.useState(!1);if(r.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");f(e.matches);const t=e=>f(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),r.useEffect(()=>{if(b||!l||!s)return;const e=setInterval(()=>{h(e=>e%3+1)},3e3);return()=>clearInterval(e)},[l,s,b]),r.useEffect(()=>{if(b||!l||!i)return;const e=setInterval(()=>{p(e=>e%2+1)},4e3);return()=>clearInterval(e)},[l,i,b]),!l)return null;const x=(e,t)=>Zr("flex items-start gap-2 transition-colors duration-300",e===t&&!b&&"text-foreground font-medium");return o.jsx("div",{className:Zr("fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:w-80 z-50 animate-in slide-in-from-bottom-4",e),children:o.jsxs("div",{className:"bg-background border border-border rounded-lg shadow-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center shrink-0",children:o.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),o.jsx("path",{d:"M2 17l10 5 10-5"}),o.jsx("path",{d:"M2 12l10 5 10-5"})]})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-sm",children:t("pwa.install.title")}),o.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t("pwa.install.description")})]})]}),o.jsx("button",{type:"button",onClick:u,className:"shrink-0 p-1 hover:bg-muted rounded transition-colors","aria-label":t("common.close"),children:o.jsx(c,{className:"w-4 h-4 text-muted-foreground"})})]}),s&&o.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded-md",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:t("pwa.install.iosSteps.title")}),o.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1.5",children:[o.jsxs("li",{className:x(1,m),children:[o.jsx("span",{className:"shrink-0 w-4 h-4 rounded-full bg-primary/10 text-primary flex items-center justify-center text-[10px]",children:"1"}),t("pwa.install.iosSteps.share")]}),o.jsxs("li",{className:x(2,m),children:[o.jsx("span",{className:"shrink-0 w-4 h-4 rounded-full bg-primary/10 text-primary flex items-center justify-center text-[10px]",children:"2"}),t("pwa.install.iosSteps.addToHome")]}),o.jsxs("li",{className:x(3,m),children:[o.jsx("span",{className:"shrink-0 w-4 h-4 rounded-full bg-primary/10 text-primary flex items-center justify-center text-[10px]",children:"3"}),t("pwa.install.iosSteps.confirm")]})]})]}),i&&!a&&o.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded-md",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:t("pwa.install.desktopSteps.title")}),o.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1.5",children:[o.jsxs("li",{className:x(1,g),children:[o.jsx("span",{className:"shrink-0 w-4 h-4 rounded-full bg-primary/10 text-primary flex items-center justify-center text-[10px]",children:"1"}),t("pwa.install.desktopSteps.installMenu")]}),o.jsxs("li",{className:x(2,g),children:[o.jsx("span",{className:"shrink-0 w-4 h-4 rounded-full bg-primary/10 text-primary flex items-center justify-center text-[10px]",children:"2"}),t("pwa.install.desktopSteps.confirm")]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[a?o.jsx("button",{type:"button",onClick:async()=>{a?await d():u()},className:"flex-1 px-3 py-2 bg-primary text-primary-foreground text-sm font-medium rounded-md hover:bg-primary/90 transition-colors",children:t("pwa.install.install")}):s||i?o.jsx("button",{type:"button",onClick:u,className:"flex-1 px-3 py-2 bg-primary text-primary-foreground text-sm font-medium rounded-md hover:bg-primary/90 transition-colors",children:t("common.got-it")}):null,o.jsx("button",{type:"button",onClick:u,className:"px-3 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:t("common.not-now")})]})]})})},Yr=({className:e,size:t="md"})=>o.jsx(d,{className:Zr("animate-spin",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t],e)});var Xr,Br,Tr,Mr;function Lr(e,t){return!(null===e||"object"!=typeof e||!("$typeName"in e)||"string"!=typeof e.$typeName)&&(void 0===t||t.typeName===e.$typeName)}function Ur(){let e=0,t=0;for(let a=0;a<28;a+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<a,!(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let a=3;a<=31;a+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<a,!(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function zr(e,t,n){for(let o=0;o<28;o+=7){const a=e>>>o,r=!(a>>>7==0&&0==t),s=255&(r?128|a:a);if(n.push(s),!r)return}const a=e>>>28&15|(7&t)<<4,r=!!(t>>3);if(n.push(255&(r?128|a:a)),r){for(let e=3;e<31;e+=7){const a=t>>>e,r=!(a>>>7==0),o=255&(r?128|a:a);if(n.push(o),!r)return}n.push(t>>>31&1)}}(Br=Xr||(Xr={}))[Br.Canceled=1]="Canceled",Br[Br.Unknown=2]="Unknown",Br[Br.InvalidArgument=3]="InvalidArgument",Br[Br.DeadlineExceeded=4]="DeadlineExceeded",Br[Br.NotFound=5]="NotFound",Br[Br.AlreadyExists=6]="AlreadyExists",Br[Br.PermissionDenied=7]="PermissionDenied",Br[Br.ResourceExhausted=8]="ResourceExhausted",Br[Br.FailedPrecondition=9]="FailedPrecondition",Br[Br.Aborted=10]="Aborted",Br[Br.OutOfRange=11]="OutOfRange",Br[Br.Unimplemented=12]="Unimplemented",Br[Br.Internal=13]="Internal",Br[Br.Unavailable=14]="Unavailable",Br[Br.DataLoss=15]="DataLoss",Br[Br.Unauthenticated=16]="Unauthenticated",(Mr=Tr||(Tr={}))[Mr.DOUBLE=1]="DOUBLE",Mr[Mr.FLOAT=2]="FLOAT",Mr[Mr.INT64=3]="INT64",Mr[Mr.UINT64=4]="UINT64",Mr[Mr.INT32=5]="INT32",Mr[Mr.FIXED64=6]="FIXED64",Mr[Mr.FIXED32=7]="FIXED32",Mr[Mr.BOOL=8]="BOOL",Mr[Mr.STRING=9]="STRING",Mr[Mr.BYTES=12]="BYTES",Mr[Mr.UINT32=13]="UINT32",Mr[Mr.SFIXED32=15]="SFIXED32",Mr[Mr.SFIXED64=16]="SFIXED64",Mr[Mr.SINT32=17]="SINT32",Mr[Mr.SINT64=18]="SINT64";const Dr=4294967296;function Qr(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let a=0,r=0;function o(t,o){const s=Number(e.slice(t,o));r*=n,a=a*n+s,a>=Dr&&(r+=a/Dr|0,a%=Dr)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?Or(a,r):Kr(a,r)}function Jr(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Dr*t+e);const n=16777215&(e>>>24|t<<8),a=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*a,o=n+8147497*a,s=2*a;const i=1e7;return r>=i&&(o+=Math.floor(r/i),r%=i),o>=i&&(s+=Math.floor(o/i),o%=i),s.toString()+_r(o)+_r(r)}function Kr(e,t){return{lo:0|e,hi:0|t}}function Or(e,t){return t=~t,e?e=1+~e:t+=1,Kr(e,t)}const _r=e=>{const t=String(e);return"0000000".slice(t.length)+t};function Hr(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Pr(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;128&e&&n<10;n++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var $r={};const qr=eo();function eo(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&(!!globalThis.Deno||"object"!=typeof process||"1"!==$r.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),a=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const a="bigint"==typeof e?e:BigInt(e);if(a>n||a<t)throw new Error(`invalid int64: ${e}`);return a},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>r||t<a)throw new Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),to(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),no(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),to(e),Qr(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),no(e),Qr(e)),dec:(e,t)=>function(e,t){let n=Kr(e,t);const a=2147483648&n.hi;a&&(n=Or(n.lo,n.hi));const r=Jr(n.lo,n.hi);return a?"-"+r:r}(e,t),uDec:(e,t)=>Jr(e,t)}}function to(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function no(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}function ao(e,t){switch(e){case Tr.STRING:return"";case Tr.BOOL:return!1;case Tr.DOUBLE:case Tr.FLOAT:return 0;case Tr.INT64:case Tr.UINT64:case Tr.SFIXED64:case Tr.FIXED64:case Tr.SINT64:return t?"0":qr.zero;case Tr.BYTES:return new Uint8Array(0);default:return 0}}const ro=Symbol.for("reflect unsafe local");function oo(e,t){const n=e[t.localName].case;return void 0===n?n:t.fields.find(e=>e.localName===n)}function so(e,t){const n=t.localName;if(t.oneof)return e[t.oneof.localName].case===n;if(2!=t.presence)return void 0!==e[n]&&Object.prototype.hasOwnProperty.call(e,n);switch(t.fieldKind){case"list":return e[n].length>0;case"map":return Object.keys(e[n]).length>0;case"scalar":return!function(e,t){switch(e){case Tr.BOOL:return!1===t;case Tr.STRING:return""===t;case Tr.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}(t.scalar,e[n]);case"enum":return e[n]!==t.enum.values[0].number}throw new Error("message field with implicit presence")}function io(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]}function lo(e,t){if(t.oneof){const n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function co(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function uo(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function mo(e,t){var n,a,r,o;if(uo(e)&&ro in e&&"add"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){const s=t,i=e.field();return s.listKind==i.listKind&&s.scalar===i.scalar&&(null===(n=s.message)||void 0===n?void 0:n.typeName)===(null===(a=i.message)||void 0===a?void 0:a.typeName)&&(null===(r=s.enum)||void 0===r?void 0:r.typeName)===(null===(o=i.enum)||void 0===o?void 0:o.typeName)}return!0}return!1}function ho(e,t){var n,a,r,o;if(uo(e)&&ro in e&&"has"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){const s=t,i=e.field();return s.mapKey===i.mapKey&&s.mapKind==i.mapKind&&s.scalar===i.scalar&&(null===(n=s.message)||void 0===n?void 0:n.typeName)===(null===(a=i.message)||void 0===a?void 0:a.typeName)&&(null===(r=s.enum)||void 0===r?void 0:r.typeName)===(null===(o=i.enum)||void 0===o?void 0:o.typeName)}return!0}return!1}function go(e,t){return uo(e)&&ro in e&&"desc"in e&&uo(e.desc)&&"message"===e.desc.kind&&(void 0===t||e.desc.typeName==t.typeName)}function po(e){const t=e.fields[0];return bo(e.typeName)&&void 0!==t&&"scalar"==t.fieldKind&&"value"==t.name&&1==t.number}function bo(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}function fo(e,t){if(Lr(t,e))return t;const n=function(e){let t;if(function(e){switch(e.file.edition){case 999:return!1;case 998:return!0;default:return e.fields.some(e=>2!=e.presence&&"message"!=e.fieldKind&&!e.oneof)}}(e)){const n=So.get(e);let a,r;if(n)({prototype:a,members:r}=n);else{a={},r=new Set;for(const t of e.members)"oneof"!=t.kind&&("scalar"!=t.fieldKind&&"enum"!=t.fieldKind||2!=t.presence&&(r.add(t),a[t.localName]=Vo(t)));So.set(e,{prototype:a,members:r})}t=Object.create(a),t.$typeName=e.typeName;for(const o of e.members)if(!r.has(o)){if("field"==o.kind){if("message"==o.fieldKind)continue;if(("scalar"==o.fieldKind||"enum"==o.fieldKind)&&2!=o.presence)continue}t[o.localName]=Vo(o)}}else{t={$typeName:e.typeName};for(const n of e.members)"oneof"!=n.kind&&2!=n.presence||(t[n.localName]=Vo(n))}return t}(e);return void 0!==t&&function(e,t,n){for(const a of e.members){let e,r=n[a.localName];if(null!=r){if("oneof"==a.kind){const t=oo(n,a);if(!t)continue;e=t,r=lo(n,t)}else e=a;switch(e.fieldKind){case"message":r=Eo(e,r);break;case"scalar":r=xo(e,r);break;case"list":r=yo(e,r);break;case"map":r=vo(e,r)}co(t,e,r)}}}(e,n,t),n}function xo(e,t){return e.scalar==Tr.BYTES?No(t):t}function vo(e,t){if(uo(t)){if(e.scalar==Tr.BYTES)return wo(t,No);if("message"==e.mapKind)return wo(t,t=>Eo(e,t))}return t}function yo(e,t){if(Array.isArray(t)){if(e.scalar==Tr.BYTES)return t.map(No);if("message"==e.listKind)return t.map(t=>Eo(e,t))}return t}function Eo(e,t){if("message"==e.fieldKind&&!e.oneof&&po(e.message))return xo(e.message.fields[0],t);if(uo(t)){if("google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!==e.parent.typeName)return t;if(!Lr(t,e.message))return fo(e.message,t)}return t}function No(e){return Array.isArray(e)?new Uint8Array(e):e}function wo(e,t){const n={};for(const a of Object.entries(e))n[a[0]]=t(a[1]);return n}const Ao=Symbol(),So=new WeakMap;function Vo(e){if("oneof"==e.kind)return{case:void 0};if("list"==e.fieldKind)return[];if("map"==e.fieldKind)return{};if("message"==e.fieldKind)return Ao;const t=e.getDefaultValue();return void 0!==t?"scalar"==e.fieldKind&&e.longAsString?t.toString():t:"scalar"==e.fieldKind?ao(e.scalar,e.longAsString):e.enum.values[0].number}const Io=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class ko extends Error{constructor(e,t,n="FieldValueInvalidError"){super(t),this.name=n,this.field=()=>e}}const Zo=Symbol.for("@bufbuild/protobuf/text-encoding");function Wo(){if(null==globalThis[Zo]){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[Zo]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(t){return!1}}}}return globalThis[Zo]}var Go,Ro;(Ro=Go||(Go={}))[Ro.Varint=0]="Varint",Ro[Ro.Bit64=1]="Bit64",Ro[Ro.LengthDelimited=2]="LengthDelimited",Ro[Ro.StartGroup=3]="StartGroup",Ro[Ro.EndGroup=4]="EndGroup",Ro[Ro.Bit32=5]="Bit32";const Co=34028234663852886e22,jo=-34028234663852886e22,Fo=4294967295,Yo=2147483647,Xo=-2147483648;class Bo{constructor(e=Wo().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let t=new Uint8Array(e),n=0;for(let a=0;a<this.chunks.length;a++)t.set(this.chunks[a],n),n+=this.chunks[a].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Lo(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Mo(e),Hr(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){!function(e){if("string"==typeof e){const t=e;if(e=Number(e),Number.isNaN(e)&&"NaN"!==t)throw new Error("invalid float32: "+t)}else if("number"!=typeof e)throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>Co||e<jo))throw new Error("invalid float32: "+e)}(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Lo(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Mo(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Mo(e),Hr(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),a=qr.enc(e);return n.setInt32(0,a.lo,!0),n.setInt32(4,a.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),a=qr.uEnc(e);return n.setInt32(0,a.lo,!0),n.setInt32(4,a.hi,!0),this.raw(t)}int64(e){let t=qr.enc(e);return zr(t.lo,t.hi,this.buf),this}sint64(e){const t=qr.enc(e),n=t.hi>>31;return zr(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){const t=qr.uEnc(e);return zr(t.lo,t.hi,this.buf),this}}class To{constructor(e,t=Wo().decodeUtf8){this.decodeUtf8=t,this.varint64=Ur,this.uint32=Pr,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Go.Varint:for(;128&this.buf[this.pos++];);break;case Go.Bit64:this.pos+=4;case Go.Bit32:this.pos+=4;break;case Go.LengthDelimited:let n=this.uint32();this.pos+=n;break;case Go.StartGroup:for(;;){const[e,n]=this.tag();if(n===Go.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return qr.dec(...this.varint64())}uint64(){return qr.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,qr.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return qr.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return qr.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function Mo(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>Yo||e<Xo)throw new Error("invalid int32: "+e)}function Lo(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>Fo||e<0)throw new Error("invalid uint32: "+e)}function Uo(e,t){const n="list"==e.fieldKind?mo(t,e):"map"==e.fieldKind?ho(t,e):Do(e,t);if(!0===n)return;let a;switch(e.fieldKind){case"list":a=`expected ${_o(e)}, got ${Ko(t)}`;break;case"map":a=`expected ${Ho(e)}, got ${Ko(t)}`;break;default:a=Jo(e,t,n)}return new ko(e,a)}function zo(e,t,n){const a=Do(e,n);if(!0!==a)return new ko(e,`list item #${t+1}: ${Jo(e,n,a)}`)}function Do(e,t){return void 0!==e.scalar?Qo(t,e.scalar):void 0!==e.enum?e.enum.open?Number.isInteger(t):e.enum.values.some(e=>e.number===t):go(t,e.message)}function Qo(e,t){switch(t){case Tr.DOUBLE:return"number"==typeof e;case Tr.FLOAT:return"number"==typeof e&&(!(!Number.isNaN(e)&&Number.isFinite(e))||(!(e>Co||e<jo)||`${e.toFixed()} out of range`));case Tr.INT32:case Tr.SFIXED32:case Tr.SINT32:return!("number"!=typeof e||!Number.isInteger(e))&&(!(e>Yo||e<Xo)||`${e.toFixed()} out of range`);case Tr.FIXED32:case Tr.UINT32:return!("number"!=typeof e||!Number.isInteger(e))&&(!(e>Fo||e<0)||`${e.toFixed()} out of range`);case Tr.BOOL:return"boolean"==typeof e;case Tr.STRING:return"string"==typeof e&&(Wo().checkUtf8(e)||"invalid UTF8");case Tr.BYTES:return e instanceof Uint8Array;case Tr.INT64:case Tr.SFIXED64:case Tr.SINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return qr.parse(e),!0}catch(n){return`${e} out of range`}return!1;case Tr.FIXED64:case Tr.UINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return qr.uParse(e),!0}catch(n){return`${e} out of range`}return!1}}function Jo(e,t,n){return n="string"==typeof n?`: ${n}`:`, got ${Ko(t)}`,void 0!==e.scalar?`expected ${function(e){switch(e){case Tr.STRING:return"string";case Tr.BOOL:return"boolean";case Tr.INT64:case Tr.SINT64:case Tr.SFIXED64:return"bigint (int64)";case Tr.UINT64:case Tr.FIXED64:return"bigint (uint64)";case Tr.BYTES:return"Uint8Array";case Tr.DOUBLE:return"number (float64)";case Tr.FLOAT:return"number (float32)";case Tr.FIXED32:case Tr.UINT32:return"number (uint32)";case Tr.INT32:case Tr.SFIXED32:case Tr.SINT32:return"number (int32)"}}(e.scalar)}`+n:void 0!==e.enum?`expected ${e.enum.toString()}`+n:`expected ${Oo(e.message)}`+n}function Ko(e){switch(typeof e){case"object":return null===e?"null":e instanceof Uint8Array?`Uint8Array(${e.length})`:Array.isArray(e)?`Array(${e.length})`:mo(e)?_o(e.field()):ho(e)?Ho(e.field()):go(e)?Oo(e.desc):Lr(e)?`message ${e.$typeName}`:"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function Oo(e){return`ReflectMessage (${e.typeName})`}function _o(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${Tr[e.scalar]})`}}function Ho(e){switch(e.mapKind){case"message":return`ReflectMap (${Tr[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${Tr[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${Tr[e.mapKey]}, ${Tr[e.scalar]})`}}function Po(e,t,n=!0){return new qo(e,t,n)}const $o=new WeakMap;class qo{get sortedFields(){const e=$o.get(this.desc);if(e)return e;const t=this.desc.fields.concat().sort((e,t)=>e.number-t.number);return $o.set(this.desc,t),t}constructor(e,t,n=!0){this.lists=new Map,this.maps=new Map,this.check=n,this.desc=e,this.message=this[ro]=null!=t?t:fo(e),this.fields=e.fields,this.oneofs=e.oneofs,this.members=e.members}findNumber(e){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(e=>[e.number,e]))),this._fieldsByNumber.get(e)}oneofCase(e){return es(this.message,e),oo(this.message,e)}isSet(e){return es(this.message,e),so(this.message,e)}clear(e){es(this.message,e),function(e,t){const n=t.localName;if(t.oneof){const a=t.oneof.localName;e[a].case===n&&(e[a]={case:void 0})}else if(2!=t.presence)delete e[n];else switch(t.fieldKind){case"map":e[n]={};break;case"list":e[n]=[];break;case"enum":e[n]=t.enum.values[0].number;break;case"scalar":e[n]=ao(t.scalar,t.longAsString)}}(this.message,e)}get(e){es(this.message,e);const t=lo(this.message,e);switch(e.fieldKind){case"list":let n=this.lists.get(e);return n&&n[ro]===t||this.lists.set(e,n=new ts(e,t,this.check)),n;case"map":let a=this.maps.get(e);return a&&a[ro]===t||this.maps.set(e,a=new ns(e,t,this.check)),a;case"message":return rs(e,t,this.check);case"scalar":return void 0===t?ao(e.scalar,!1):ds(e,t);case"enum":return null!=t?t:e.enum.values[0].number}}set(e,t){if(es(this.message,e),this.check){const n=Uo(e,t);if(n)throw n}let n;n="message"==e.fieldKind?as(e,t):ho(t)||mo(t)?t[ro]:us(e,t),co(this.message,e,n)}getUnknown(){return this.message.$unknown}setUnknown(e){this.message.$unknown=e}}function es(e,t){if(t.parent.typeName!==e.$typeName)throw new ko(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class ts{field(){return this._field}get size(){return this._arr.length}constructor(e,t,n){this._field=e,this._arr=this[ro]=t,this.check=n}get(e){const t=this._arr[e];return void 0===t?void 0:ss(this._field,t,this.check)}set(e,t){if(e<0||e>=this._arr.length)throw new ko(this._field,`list item #${e+1}: out of range`);if(this.check){const n=zo(this._field,e,t);if(n)throw n}this._arr[e]=os(this._field,t)}add(e){if(this.check){const t=zo(this._field,this._arr.length,e);if(t)throw t}this._arr.push(os(this._field,e))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const e of this._arr)yield ss(this._field,e,this.check)}*entries(){for(let e=0;e<this._arr.length;e++)yield[e,ss(this._field,this._arr[e],this.check)]}}class ns{constructor(e,t,n=!0){this.obj=this[ro]=null!=t?t:{},this.check=n,this._field=e}field(){return this._field}set(e,t){if(this.check){const n=function(e,t,n){const a=Qo(t,e.mapKey);if(!0!==a)return new ko(e,`invalid map key: ${Jo({scalar:e.mapKey},t,a)}`);const r=Do(e,n);return!0!==r?new ko(e,`map entry ${Ko(t)}: ${Jo(e,n,r)}`):void 0}(this._field,e,t);if(n)throw n}return this.obj[ls(e)]=function(e,t){if("message"==e.mapKind)return as(e,t);return us(e,t)}(this._field,t),this}delete(e){const t=ls(e),n=Object.prototype.hasOwnProperty.call(this.obj,t);return n&&delete this.obj[t],n}clear(){for(const e of Object.keys(this.obj))delete this.obj[e]}get(e){let t=this.obj[ls(e)];return void 0!==t&&(t=is(this._field,t,this.check)),t}has(e){return Object.prototype.hasOwnProperty.call(this.obj,ls(e))}*keys(){for(const e of Object.keys(this.obj))yield cs(e,this._field.mapKey)}*entries(){for(const e of Object.entries(this.obj))yield[cs(e[0],this._field.mapKey),is(this._field,e[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const e of Object.values(this.obj))yield is(this._field,e,this.check)}forEach(e,t){for(const n of this.entries())e.call(t,n[1],n[0],this)}}function as(e,t){return go(t)?bo(t.message.$typeName)&&!e.oneof&&"message"==e.fieldKind?t.message.value:"google.protobuf.Struct"==t.desc.typeName&&"google.protobuf.Value"!=e.parent.typeName?hs(t.message):t.message:t}function rs(e,t,n){return void 0!==t&&(po(e.message)&&!e.oneof&&"message"==e.fieldKind?t={$typeName:e.message.typeName,value:ds(e.message.fields[0],t)}:"google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!=e.parent.typeName&&uo(t)&&(t=ms(t))),new qo(e.message,t,n)}function os(e,t){return"message"==e.listKind?as(e,t):us(e,t)}function ss(e,t,n){return"message"==e.listKind?rs(e,t,n):ds(e,t)}function is(e,t,n){return"message"==e.mapKind?rs(e,t,n):t}function ls(e){return"string"==typeof e||"number"==typeof e?e:String(e)}function cs(e,t){switch(t){case Tr.STRING:return e;case Tr.INT32:case Tr.FIXED32:case Tr.UINT32:case Tr.SFIXED32:case Tr.SINT32:{const t=Number.parseInt(e);if(Number.isFinite(t))return t;break}case Tr.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case Tr.UINT64:case Tr.FIXED64:try{return qr.uParse(e)}catch(n){}break;default:try{return qr.parse(e)}catch(a){}}return e}function ds(e,t){switch(e.scalar){case Tr.INT64:case Tr.SFIXED64:case Tr.SINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=qr.parse(t));break;case Tr.FIXED64:case Tr.UINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=qr.uParse(t))}return t}function us(e,t){switch(e.scalar){case Tr.INT64:case Tr.SFIXED64:case Tr.SINT64:"longAsString"in e&&e.longAsString?t=String(t):"string"!=typeof t&&"number"!=typeof t||(t=qr.parse(t));break;case Tr.FIXED64:case Tr.UINT64:"longAsString"in e&&e.longAsString?t=String(t):"string"!=typeof t&&"number"!=typeof t||(t=qr.uParse(t))}return t}function ms(e){const t={$typeName:"google.protobuf.Struct",fields:{}};if(uo(e))for(const[n,a]of Object.entries(e))t.fields[n]=ps(a);return t}function hs(e){const t={};for(const[n,a]of Object.entries(e.fields))t[n]=gs(a);return t}function gs(e){switch(e.kind.case){case"structValue":return hs(e.kind.value);case"listValue":return e.kind.value.values.map(gs);case"nullValue":case void 0:return null;default:return e.kind.value}}function ps(e){const t={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(null===e){const e=0;t.kind={case:"nullValue",value:e}}else if(Array.isArray(e)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(e))for(const t of e)n.values.push(ps(t));t.kind={case:"listValue",value:n}}else t.kind={case:"structValue",value:ms(e)}}return t}function bs(e){const t=function(){if(!ys){ys=[];const e=Es("std");for(let t=0;t<e.length;t++)ys[e[t].charCodeAt(0)]=t;ys["-".charCodeAt(0)]=e.indexOf("+"),ys["_".charCodeAt(0)]=e.indexOf("/")}return ys}();let n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);let a,r=new Uint8Array(n),o=0,s=0,i=0;for(let l=0;l<e.length;l++){if(a=t[e.charCodeAt(l)],void 0===a)switch(e[l]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string")}switch(s){case 0:i=a,s=1;break;case 1:r[o++]=i<<2|(48&a)>>4,i=a,s=2;break;case 2:r[o++]=(15&i)<<4|(60&a)>>2,i=a,s=3;break;case 3:r[o++]=(3&i)<<6|a,s=0}}if(1==s)throw Error("invalid base64 string");return r.subarray(0,o)}function fs(e,t="std"){const n=Es(t),a="std"==t;let r,o="",s=0,i=0;for(let l=0;l<e.length;l++)switch(r=e[l],s){case 0:o+=n[r>>2],i=(3&r)<<4,s=1;break;case 1:o+=n[i|r>>4],i=(15&r)<<2,s=2;break;case 2:o+=n[i|r>>6],o+=n[63&r],s=0}return s&&(o+=n[i],a&&(o+="=",1==s&&(o+="="))),o}let xs,vs,ys;function Es(e){return xs||(xs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),vs=xs.slice(0,-2).concat("-","_")),"url"==e?vs:xs}function Ns(e){let t=!1;const n=[];for(let a=0;a<e.length;a++){let r=e.charAt(a);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const ws=new Set(["constructor","toString","toJSON","valueOf"]);function As(e){return ws.has(e)?e+"$":e}function Ss(e){for(const t of e.field)io(t,"jsonName")||(t.jsonName=Ns(t.name));e.nestedType.forEach(Ss)}function Vs(e,t){switch(e){case Tr.STRING:return t;case Tr.BYTES:{const n=function(e){const t=[],n={tail:e,c:"",next(){return 0!=this.tail.length&&(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(e){if(this.tail.length>=e){const t=this.tail.substring(0,e);return this.tail=this.tail.substring(e),t}return!1}};for(;n.next();)if("\\"===n.c){if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const e=n.c,a=n.take(2);if(!1===a)return!1;const r=parseInt(e+a,8);if(Number.isNaN(r))return!1;t.push(r);break}case"x":{const e=n.c,a=n.take(2);if(!1===a)return!1;const r=parseInt(e+a,16);if(Number.isNaN(r))return!1;t.push(r);break}case"u":{const e=n.c,a=n.take(4);if(!1===a)return!1;const r=parseInt(e+a,16);if(Number.isNaN(r))return!1;const o=new Uint8Array(4);new DataView(o.buffer).setInt32(0,r,!0),t.push(o[0],o[1],o[2],o[3]);break}case"U":{const e=n.c,a=n.take(8);if(!1===a)return!1;const r=qr.uEnc(e+a),o=new Uint8Array(8),s=new DataView(o.buffer);s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),t.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break}}}else t.push(n.c.charCodeAt(0));return new Uint8Array(t)}(t);if(!1===n)throw new Error(`cannot parse ${Tr[e]} default value: ${t}`);return n}case Tr.INT64:case Tr.SFIXED64:case Tr.SINT64:return qr.parse(t);case Tr.UINT64:case Tr.FIXED64:return qr.uParse(t);case Tr.DOUBLE:case Tr.FLOAT:switch(t){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(t)}case Tr.BOOL:return"true"===t;case Tr.INT32:case Tr.UINT32:case Tr.SINT32:case Tr.FIXED32:case Tr.SFIXED32:return parseInt(t,10)}}function*Is(e){switch(e.kind){case"file":for(const t of e.messages)yield t,yield*Is(t);yield*e.enums,yield*e.services,yield*e.extensions;break;case"message":for(const t of e.nestedMessages)yield t,yield*Is(t);yield*e.nestedEnums,yield*e.nestedExtensions}}function ks(...e){const t=function(){const e=new Map,t=new Map,n=new Map;return{kind:"registry",types:e,extendees:t,[Symbol.iterator]:()=>e.values(),get files(){return n.values()},addFile(e,t,a){if(n.set(e.proto.name,e),!t)for(const n of Is(e))this.add(n);if(a)for(const n of e.dependencies)this.addFile(n,t,a)},add(n){if("extension"==n.kind){let e=t.get(n.extendee.typeName);e||t.set(n.extendee.typeName,e=new Map),e.set(n.number,n)}e.set(n.typeName,n)},get:t=>e.get(t),getFile:e=>n.get(e),getMessage(t){const n=e.get(t);return"message"==(null==n?void 0:n.kind)?n:void 0},getEnum(t){const n=e.get(t);return"enum"==(null==n?void 0:n.kind)?n:void 0},getExtension(t){const n=e.get(t);return"extension"==(null==n?void 0:n.kind)?n:void 0},getExtensionFor(e,n){var a;return null===(a=t.get(e.typeName))||void 0===a?void 0:a.get(n)},getService(t){const n=e.get(t);return"service"==(null==n?void 0:n.kind)?n:void 0}}}();if(!e.length)return t;if("$typeName"in e[0]&&"google.protobuf.FileDescriptorSet"==e[0].$typeName){for(const n of e[0].file)Ks(n,t);return t}if("$typeName"in e[0]){let n=function(e){const a=[];for(const n of e.dependency){if(null!=t.getFile(n))continue;if(o.has(n))continue;const s=r(n);if(!s)throw new Error(`Unable to resolve ${n}, imported by ${e.name}`);"kind"in s?t.addFile(s,!1,!0):(o.add(s.name),a.push(s))}return a.concat(...a.map(n))};const a=e[0],r=e[1],o=new Set;for(const e of[a,...n(a)].reverse())Ks(e,t)}else for(const n of e)for(const e of n.files)t.addFile(e);return t}const Zs=998,Ws=999,Gs=9,Rs=10,Cs=11,js=12,Fs=14,Ys=3,Xs=2,Bs=1,Ts=0,Ms=1,Ls=2,Us=3,zs=1,Ds=2,Qs=1,Js={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function Ks(e,t){var n,a;const r={kind:"file",proto:e,deprecated:null!==(a=null===(n=e.options)||void 0===n?void 0:n.deprecated)&&void 0!==a&&a,edition:ti(e),name:e.name.replace(/\.proto$/,""),dependencies:ni(e,t),enums:[],messages:[],extensions:[],services:[],toString:()=>`file ${e.name}`},o=new Map,s={get:e=>o.get(e),add(e){var t;ci(!0===(null===(t=e.proto.options)||void 0===t?void 0:t.mapEntry)),o.set(e.typeName,e)}};for(const i of e.enumType)Hs(i,r,void 0,t);for(const i of e.messageType)Ps(i,r,void 0,t,s);for(const i of e.service)$s(i,r,t);Os(r,t);for(const i of o.values())_s(i,t,s);for(const i of r.messages)_s(i,t,s),Os(i,t);t.addFile(r,!0)}function Os(e,t){switch(e.kind){case"file":for(const n of e.proto.extension){const a=ei(n,e,t);e.extensions.push(a),t.add(a)}break;case"message":for(const n of e.proto.extension){const a=ei(n,e,t);e.nestedExtensions.push(a),t.add(a)}for(const n of e.nestedMessages)Os(n,t)}}function _s(e,t,n){const a=e.proto.oneofDecl.map(t=>function(e,t){return{kind:"oneof",proto:e,deprecated:!1,parent:t,fields:[],name:e.name,localName:As(Ns(e.name)),toString(){return`oneof ${t.typeName}.${this.name}`}}}(t,e)),r=new Set;for(const o of e.proto.field){const s=oi(o,a),i=ei(o,e,t,s,n);e.fields.push(i),e.field[i.localName]=i,void 0===s?e.members.push(i):(s.fields.push(i),r.has(s)||(r.add(s),e.members.push(s)))}for(const o of a.filter(e=>r.has(e)))e.oneofs.push(o);for(const o of e.nestedMessages)_s(o,t,n)}function Hs(e,t,n,a){var r,o,s,i,l;const c=function(e,t){const n=(a=e,(a.substring(0,1)+a.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()+"_");var a;for(const r of t){if(!r.name.toLowerCase().startsWith(n))return;const e=r.name.substring(n.length);if(0==e.length)return;if(/^\d/.test(e))return}return n}(e.name,e.value),d={kind:"enum",proto:e,deprecated:null!==(o=null===(r=e.options)||void 0===r?void 0:r.deprecated)&&void 0!==o&&o,file:t,parent:n,open:!0,name:e.name,typeName:ai(e,n,t),value:{},values:[],sharedPrefix:c,toString(){return`enum ${this.typeName}`}};d.open=function(e){var t;return Qs==li("enumType",{proto:e.proto,parent:null!==(t=e.parent)&&void 0!==t?t:e.file})}(d),a.add(d);for(const u of e.value){const e=u.name;d.values.push(d.value[u.number]={kind:"enum_value",proto:u,deprecated:null!==(i=null===(s=u.options)||void 0===s?void 0:s.deprecated)&&void 0!==i&&i,parent:d,name:e,localName:As(null==c?e:e.substring(c.length)),number:u.number,toString:()=>`enum value ${d.typeName}.${e}`})}(null!==(l=null==n?void 0:n.nestedEnums)&&void 0!==l?l:t.enums).push(d)}function Ps(e,t,n,a,r){var o,s,i,l;const c={kind:"message",proto:e,deprecated:null!==(s=null===(o=e.options)||void 0===o?void 0:o.deprecated)&&void 0!==s&&s,file:t,parent:n,name:e.name,typeName:ai(e,n,t),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};!0===(null===(i=e.options)||void 0===i?void 0:i.mapEntry)?r.add(c):((null!==(l=null==n?void 0:n.nestedMessages)&&void 0!==l?l:t.messages).push(c),a.add(c));for(const d of e.enumType)Hs(d,t,c,a);for(const d of e.nestedType)Ps(d,t,c,a,r)}function $s(e,t,n){var a,r;const o={kind:"service",proto:e,deprecated:null!==(r=null===(a=e.options)||void 0===a?void 0:a.deprecated)&&void 0!==r&&r,file:t,name:e.name,typeName:ai(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};t.services.push(o),n.add(o);for(const s of e.method){const e=qs(s,o,n);o.methods.push(e),o.method[e.localName]=e}}function qs(e,t,n){var a,r,o,s;let i;i=e.clientStreaming&&e.serverStreaming?"bidi_streaming":e.clientStreaming?"client_streaming":e.serverStreaming?"server_streaming":"unary";const l=n.getMessage(ri(e.inputType)),c=n.getMessage(ri(e.outputType));ci(l,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),ci(c,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);const d=e.name;return{kind:"rpc",proto:e,deprecated:null!==(r=null===(a=e.options)||void 0===a?void 0:a.deprecated)&&void 0!==r&&r,parent:t,name:d,localName:As(d.length?As(d[0].toLowerCase()+d.substring(1)):d),methodKind:i,input:l,output:c,idempotency:null!==(s=null===(o=e.options)||void 0===o?void 0:o.idempotencyLevel)&&void 0!==s?s:Ts,toString:()=>`rpc ${t.typeName}.${d}`}}function ei(e,t,n,a,r){var o,s,i;const l=void 0===r,c={kind:"field",proto:e,deprecated:null!==(s=null===(o=e.options)||void 0===o?void 0:o.deprecated)&&void 0!==s&&s,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:si(e,a,l,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(l){const a="file"==t.kind?t:t.file,r="file"==t.kind?void 0:t,o=ai(e,r,a);c.kind="extension",c.file=a,c.parent=r,c.oneof=void 0,c.typeName=o,c.jsonName=`[${o}]`,c.toString=()=>`extension ${o}`;const s=n.getMessage(ri(e.extendee));ci(s,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),c.extendee=s}else{const n=t;ci("message"==n.kind),c.parent=n,c.oneof=a,c.localName=a?Ns(e.name):As(Ns(e.name)),c.jsonName=e.jsonName,c.toString=()=>`field ${n.typeName}.${e.name}`}const d=e.label,u=e.type,m=null===(i=e.options)||void 0===i?void 0:i.jstype;if(d===Ys){const a=u==Cs?null==r?void 0:r.get(ri(e.typeName)):void 0;if(a){c.fieldKind="map";const{key:e,value:t}=function(e){const t=e.fields.find(e=>1===e.number),n=e.fields.find(e=>2===e.number);return ci(t&&"scalar"==t.fieldKind&&t.scalar!=Tr.BYTES&&t.scalar!=Tr.FLOAT&&t.scalar!=Tr.DOUBLE&&n&&"list"!=n.fieldKind&&"map"!=n.fieldKind),{key:t,value:n}}(a);return c.mapKey=e.scalar,c.mapKind=t.fieldKind,c.message=t.message,c.delimitedEncoding=!1,c.enum=t.enum,c.scalar=t.scalar,c}switch(c.fieldKind="list",u){case Cs:case Rs:c.listKind="message",c.message=n.getMessage(ri(e.typeName)),ci(c.message),c.delimitedEncoding=ii(e,t);break;case Fs:c.listKind="enum",c.enum=n.getEnum(ri(e.typeName)),ci(c.enum);break;default:c.listKind="scalar",c.scalar=u,c.longAsString=m==Bs}return c.packed=function(e,t){if(e.label!=Ys)return!1;switch(e.type){case Gs:case js:case Rs:case Cs:return!1}const n=e.options;if(n&&io(n,"packed"))return n.packed;return zs==li("repeatedFieldEncoding",{proto:e,parent:t})}(e,t),c}switch(u){case Cs:case Rs:c.fieldKind="message",c.message=n.getMessage(ri(e.typeName)),ci(c.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.delimitedEncoding=ii(e,t),c.getDefaultValue=()=>{};break;case Fs:{const t=n.getEnum(ri(e.typeName));ci(void 0!==t,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.fieldKind="enum",c.enum=n.getEnum(ri(e.typeName)),c.getDefaultValue=()=>io(e,"defaultValue")?function(e,t){const n=e.values.find(e=>e.name===t);if(!n)throw new Error(`cannot parse ${e} default value: ${t}`);return n.number}(t,e.defaultValue):void 0;break}default:c.fieldKind="scalar",c.scalar=u,c.longAsString=m==Bs,c.getDefaultValue=()=>io(e,"defaultValue")?Vs(u,e.defaultValue):void 0}return c}function ti(e){switch(e.syntax){case"":case"proto2":return Zs;case"proto3":return Ws;case"editions":if(e.edition in Js)return e.edition;throw new Error(`${e.name}: unsupported edition`);default:throw new Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}function ni(e,t){return e.dependency.map(n=>{const a=t.getFile(n);if(!a)throw new Error(`Cannot find ${n}, imported by ${e.name}`);return a})}function ai(e,t,n){let a;return a=t?`${t.typeName}.${e.name}`:n.proto.package.length>0?`${n.proto.package}.${e.name}`:`${e.name}`,a}function ri(e){return e.startsWith(".")?e.substring(1):e}function oi(e,t){if(!io(e,"oneofIndex"))return;if(e.proto3Optional)return;const n=t[e.oneofIndex];return ci(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}function si(e,t,n,a){if(e.label==Xs)return Us;if(e.label==Ys)return Ls;if(t||e.proto3Optional)return Ms;if(n)return Ms;const r=li("fieldPresence",{proto:e,parent:a});return r!=Ls||e.type!=Cs&&e.type!=Rs?r:Ms}function ii(e,t){return e.type==Rs||Ds==li("messageEncoding",{proto:e,parent:t})}function li(e,t){var n,a;const r=null===(n=t.proto.options)||void 0===n?void 0:n.features;if(r){const t=r[e];if(0!=t)return t}if("kind"in t){if("message"==t.kind)return li(e,null!==(a=t.parent)&&void 0!==a?a:t.file);const n=Js[t.edition];if(!n)throw new Error(`feature default for edition ${t.edition} not found`);return n[e]}return li(e,t.parent)}function ci(e,t){if(!e)throw new Error(t)}function di(e){const t=function(e){const t=Object.create({syntax:"",edition:0});return Object.assign(t,Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},e),{messageType:e.messageType.map(ui),enumType:e.enumType.map(gi)}))}(e);t.messageType.forEach(Ss);return ks(t,()=>{}).getFile(t.name)}function ui(e){var t,n,a,r,o,s,i,l;const c=Object.create({visibility:0});return Object.assign(c,{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:null!==(n=null===(t=e.field)||void 0===t?void 0:t.map(mi))&&void 0!==n?n:[],extension:[],nestedType:null!==(r=null===(a=e.nestedType)||void 0===a?void 0:a.map(ui))&&void 0!==r?r:[],enumType:null!==(s=null===(o=e.enumType)||void 0===o?void 0:o.map(gi))&&void 0!==s?s:[],extensionRange:null!==(l=null===(i=e.extensionRange)||void 0===i?void 0:i.map(e=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},e)))&&void 0!==l?l:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function mi(e){const t=Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1});return Object.assign(t,Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?hi(e.options):void 0}))}function hi(e){var t,n,a;const r=Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0});return Object.assign(r,Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},e),{targets:null!==(t=e.targets)&&void 0!==t?t:[],editionDefaults:null!==(a=null===(n=e.editionDefaults)||void 0===n?void 0:n.map(e=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},e)))&&void 0!==a?a:[],uninterpretedOption:[]}))}function gi(e){const t=Object.create({visibility:0});return Object.assign(t,{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(e=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},e))})}function pi(e,t,...n){return n.reduce((e,t)=>e.nestedMessages[t],e.messages[t])}const bi=di({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]}),fi=pi(bi,1);var xi,vi,yi,Ei,Ni,wi,Ai,Si,Vi,Ii,ki,Zi,Wi,Gi,Ri,Ci,ji,Fi,Yi,Xi,Bi,Ti,Mi,Li,Ui,zi,Di,Qi,Ji,Ki,Oi,_i,Hi,Pi,$i,qi,el,tl,nl,al;(vi=xi||(xi={}))[vi.DECLARATION=0]="DECLARATION",vi[vi.UNVERIFIED=1]="UNVERIFIED",(Ei=yi||(yi={}))[Ei.DOUBLE=1]="DOUBLE",Ei[Ei.FLOAT=2]="FLOAT",Ei[Ei.INT64=3]="INT64",Ei[Ei.UINT64=4]="UINT64",Ei[Ei.INT32=5]="INT32",Ei[Ei.FIXED64=6]="FIXED64",Ei[Ei.FIXED32=7]="FIXED32",Ei[Ei.BOOL=8]="BOOL",Ei[Ei.STRING=9]="STRING",Ei[Ei.GROUP=10]="GROUP",Ei[Ei.MESSAGE=11]="MESSAGE",Ei[Ei.BYTES=12]="BYTES",Ei[Ei.UINT32=13]="UINT32",Ei[Ei.ENUM=14]="ENUM",Ei[Ei.SFIXED32=15]="SFIXED32",Ei[Ei.SFIXED64=16]="SFIXED64",Ei[Ei.SINT32=17]="SINT32",Ei[Ei.SINT64=18]="SINT64",(wi=Ni||(Ni={}))[wi.OPTIONAL=1]="OPTIONAL",wi[wi.REPEATED=3]="REPEATED",wi[wi.REQUIRED=2]="REQUIRED",(Si=Ai||(Ai={}))[Si.SPEED=1]="SPEED",Si[Si.CODE_SIZE=2]="CODE_SIZE",Si[Si.LITE_RUNTIME=3]="LITE_RUNTIME",(Ii=Vi||(Vi={}))[Ii.STRING=0]="STRING",Ii[Ii.CORD=1]="CORD",Ii[Ii.STRING_PIECE=2]="STRING_PIECE",(Zi=ki||(ki={}))[Zi.JS_NORMAL=0]="JS_NORMAL",Zi[Zi.JS_STRING=1]="JS_STRING",Zi[Zi.JS_NUMBER=2]="JS_NUMBER",(Gi=Wi||(Wi={}))[Gi.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",Gi[Gi.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",Gi[Gi.RETENTION_SOURCE=2]="RETENTION_SOURCE",(Ci=Ri||(Ri={}))[Ci.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",Ci[Ci.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",Ci[Ci.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",Ci[Ci.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",Ci[Ci.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",Ci[Ci.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",Ci[Ci.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",Ci[Ci.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",Ci[Ci.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",Ci[Ci.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD",(Fi=ji||(ji={}))[Fi.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",Fi[Fi.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",Fi[Fi.IDEMPOTENT=2]="IDEMPOTENT",(Xi=Yi||(Yi={}))[Xi.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",Xi[Xi.EXPORT_ALL=1]="EXPORT_ALL",Xi[Xi.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",Xi[Xi.LOCAL_ALL=3]="LOCAL_ALL",Xi[Xi.STRICT=4]="STRICT",(Ti=Bi||(Bi={}))[Ti.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",Ti[Ti.EXPLICIT=1]="EXPLICIT",Ti[Ti.IMPLICIT=2]="IMPLICIT",Ti[Ti.LEGACY_REQUIRED=3]="LEGACY_REQUIRED",(Li=Mi||(Mi={}))[Li.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",Li[Li.OPEN=1]="OPEN",Li[Li.CLOSED=2]="CLOSED",(zi=Ui||(Ui={}))[zi.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",zi[zi.PACKED=1]="PACKED",zi[zi.EXPANDED=2]="EXPANDED",(Qi=Di||(Di={}))[Qi.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",Qi[Qi.VERIFY=2]="VERIFY",Qi[Qi.NONE=3]="NONE",(Ki=Ji||(Ji={}))[Ki.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",Ki[Ki.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",Ki[Ki.DELIMITED=2]="DELIMITED",(_i=Oi||(Oi={}))[_i.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",_i[_i.ALLOW=1]="ALLOW",_i[_i.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT",(Pi=Hi||(Hi={}))[Pi.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",Pi[Pi.STYLE2024=1]="STYLE2024",Pi[Pi.STYLE_LEGACY=2]="STYLE_LEGACY",(qi=$i||($i={}))[qi.NONE=0]="NONE",qi[qi.SET=1]="SET",qi[qi.ALIAS=2]="ALIAS",(tl=el||(el={}))[tl.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",tl[tl.EDITION_LEGACY=900]="EDITION_LEGACY",tl[tl.EDITION_PROTO2=998]="EDITION_PROTO2",tl[tl.EDITION_PROTO3=999]="EDITION_PROTO3",tl[tl.EDITION_2023=1e3]="EDITION_2023",tl[tl.EDITION_2024=1001]="EDITION_2024",tl[tl.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",tl[tl.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",tl[tl.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",tl[tl.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",tl[tl.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",tl[tl.EDITION_MAX=2147483647]="EDITION_MAX",(al=nl||(nl={}))[al.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",al[al.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",al[al.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT";const rl={readUnknownFields:!0};function ol(e,t,n){const a=Po(e,void 0,!1);return sl(a,new To(t),function(e){return e?Object.assign(Object.assign({},rl),e):rl}(n),!1,t.byteLength),a.message}function sl(e,t,n,a,r){var o;const s=a?t.len:t.pos+r;let i,l;const c=null!==(o=e.getUnknown())&&void 0!==o?o:[];for(;t.pos<s&&([i,l]=t.tag(),!a||l!=Go.EndGroup);){const a=e.findNumber(i);if(!a){const e=t.skip(l,i);n.readUnknownFields&&c.push({no:i,wireType:l,data:e});continue}il(e,t,a,l,n)}if(a&&(l!=Go.EndGroup||i!==r))throw new Error("invalid end group tag");c.length>0&&e.setUnknown(c)}function il(e,t,n,a,r){var o;switch(n.fieldKind){case"scalar":e.set(n,cl(t,n.scalar));break;case"enum":const s=cl(t,Tr.INT32);if(n.enum.open)e.set(n,s);else{if(n.enum.values.some(e=>e.number===s))e.set(n,s);else if(r.readUnknownFields){const t=[];Hr(s,t);const r=null!==(o=e.getUnknown())&&void 0!==o?o:[];r.push({no:n.number,wireType:a,data:new Uint8Array(t)}),e.setUnknown(r)}}break;case"message":e.set(n,ll(t,r,n,e.get(n)));break;case"list":!function(e,t,n,a){var r;const o=n.field();if("message"===o.listKind)return void n.add(ll(e,a,o));const s=null!==(r=o.scalar)&&void 0!==r?r:Tr.INT32,i=t==Go.LengthDelimited&&s!=Tr.STRING&&s!=Tr.BYTES;if(!i)return void n.add(cl(e,s));const l=e.uint32()+e.pos;for(;e.pos<l;)n.add(cl(e,s))}(t,a,e.get(n),r);break;case"map":!function(e,t,n){const a=t.field();let r,o;const s=e.uint32(),i=e.pos+s;for(;e.pos<i;){const[t]=e.tag();switch(t){case 1:r=cl(e,a.mapKey);break;case 2:switch(a.mapKind){case"scalar":o=cl(e,a.scalar);break;case"enum":o=e.int32();break;case"message":o=ll(e,n,a)}}}void 0===r&&(r=ao(a.mapKey,!1));if(void 0===o)switch(a.mapKind){case"scalar":o=ao(a.scalar,!1);break;case"enum":o=a.enum.values[0].number;break;case"message":o=Po(a.message,void 0,!1)}t.set(r,o)}(t,e.get(n),r)}}function ll(e,t,n,a){const r=n.delimitedEncoding,o=null!=a?a:Po(n.message,void 0,!1);return sl(o,e,t,r,r?n.number:e.uint32()),o}function cl(e,t){switch(t){case Tr.STRING:return e.string();case Tr.BOOL:return e.bool();case Tr.DOUBLE:return e.double();case Tr.FLOAT:return e.float();case Tr.INT32:return e.int32();case Tr.INT64:return e.int64();case Tr.UINT64:return e.uint64();case Tr.FIXED64:return e.fixed64();case Tr.BYTES:return e.bytes();case Tr.FIXED32:return e.fixed32();case Tr.SFIXED32:return e.sfixed32();case Tr.SFIXED64:return e.sfixed64();case Tr.SINT64:return e.sint64();case Tr.UINT32:return e.uint32();case Tr.SINT32:return e.sint32()}}function dl(e,t){var n;const a=ol(fi,bs(e));a.messageType.forEach(Ss),a.dependency=null!==(n=null==t?void 0:t.map(e=>e.proto.name))&&void 0!==n?n:[];return ks(a,e=>null==t?void 0:t.find(t=>t.proto.name===e)).getFile(a.name)}const ul=dl("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),ml=pi(ul,0);function hl(e){return function(e){const t=Math.floor(e/1e3);return fo(ml,{seconds:qr.parse(t),nanos:1e6*(e-1e3*t)})}(e.getTime())}function gl(e){return new Date(function(e){return 1e3*Number(e.seconds)+Math.round(e.nanos/1e6)}(e))}const pl=dl("Ch5nb29nbGUvcHJvdG9idWYvZHVyYXRpb24ucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIqCghEdXJhdGlvbhIPCgdzZWNvbmRzGAEgASgDEg0KBW5hbm9zGAIgASgFQoMBChNjb20uZ29vZ2xlLnByb3RvYnVmQg1EdXJhdGlvblByb3RvUAFaMWdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2R1cmF0aW9ucGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),bl=pi(dl("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),0),fl={writeUnknownFields:!0};function xl(e,t,n){return vl(new Bo,function(e){return e?Object.assign(Object.assign({},fl),e):fl}(n),Po(e,t)).finish()}function vl(e,t,n){var a;for(const r of n.sortedFields)if(n.isSet(r))yl(e,t,n,r);else if(3==r.presence)throw new Error(`cannot encode ${r} to binary: required field not set`);if(t.writeUnknownFields)for(const{no:r,wireType:o,data:s}of null!==(a=n.getUnknown())&&void 0!==a?a:[])e.tag(r,o).raw(s);return e}function yl(e,t,n,a){var r;switch(a.fieldKind){case"scalar":case"enum":El(e,n.desc.typeName,a.name,null!==(r=a.scalar)&&void 0!==r?r:Tr.INT32,a.number,n.get(a));break;case"list":!function(e,t,n,a){var r;if("message"==n.listKind){for(const r of a)Nl(e,t,n,r);return}const o=null!==(r=n.scalar)&&void 0!==r?r:Tr.INT32;if(n.packed){if(!a.size)return;e.tag(n.number,Go.LengthDelimited).fork();for(const t of a)Al(e,n.parent.typeName,n.name,o,t);return void e.join()}for(const s of a)El(e,n.parent.typeName,n.name,o,n.number,s)}(e,t,a,n.get(a));break;case"message":Nl(e,t,a,n.get(a));break;case"map":for(const[r,o]of n.get(a))wl(e,t,a,r,o)}}function El(e,t,n,a,r,o){Al(e.tag(r,function(e){switch(e){case Tr.BYTES:case Tr.STRING:return Go.LengthDelimited;case Tr.DOUBLE:case Tr.FIXED64:case Tr.SFIXED64:return Go.Bit64;case Tr.FIXED32:case Tr.SFIXED32:case Tr.FLOAT:return Go.Bit32;default:return Go.Varint}}(a)),t,n,a,o)}function Nl(e,t,n,a){n.delimitedEncoding?vl(e.tag(n.number,Go.StartGroup),t,a).tag(n.number,Go.EndGroup):vl(e.tag(n.number,Go.LengthDelimited).fork(),t,a).join()}function wl(e,t,n,a,r){var o;switch(e.tag(n.number,Go.LengthDelimited).fork(),El(e,n.parent.typeName,n.name,n.mapKey,1,a),n.mapKind){case"scalar":case"enum":El(e,n.parent.typeName,n.name,null!==(o=n.scalar)&&void 0!==o?o:Tr.INT32,2,r);break;case"message":vl(e.tag(2,Go.LengthDelimited).fork(),t,r).join()}e.join()}function Al(e,t,n,a,r){try{switch(a){case Tr.STRING:e.string(r);break;case Tr.BOOL:e.bool(r);break;case Tr.DOUBLE:e.double(r);break;case Tr.FLOAT:e.float(r);break;case Tr.INT32:e.int32(r);break;case Tr.INT64:e.int64(r);break;case Tr.UINT64:e.uint64(r);break;case Tr.FIXED64:e.fixed64(r);break;case Tr.BYTES:e.bytes(r);break;case Tr.FIXED32:e.fixed32(r);break;case Tr.SFIXED32:e.sfixed32(r);break;case Tr.SFIXED64:e.sfixed64(r);break;case Tr.SINT64:e.sint64(r);break;case Tr.UINT32:e.uint32(r);break;case Tr.SINT32:e.sint32(r)}}catch(iv){if(iv instanceof Error)throw new Error(`cannot encode field ${t}.${n} to binary: ${iv.message}`);throw iv}}function Sl(e,t){if(""===e.typeUrl)return;const n="message"==t.kind?t:t.getMessage(Vl(e.typeUrl));return n&&function(e,t){return""!==e.typeUrl&&("string"==typeof t?t:t.typeName)===Vl(e.typeUrl)}(e,n)?ol(n,e.value):void 0}function Vl(e){const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}const Il=dl("Chtnb29nbGUvcHJvdG9idWYvZW1wdHkucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIHCgVFbXB0eUJ9ChNjb20uZ29vZ2xlLnByb3RvYnVmQgpFbXB0eVByb3RvUAFaLmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2VtcHR5cGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),kl=dl("CiBnb29nbGUvcHJvdG9idWYvZmllbGRfbWFzay5wcm90bxIPZ29vZ2xlLnByb3RvYnVmIhoKCUZpZWxkTWFzaxINCgVwYXRocxgBIAMoCUKFAQoTY29tLmdvb2dsZS5wcm90b2J1ZkIORmllbGRNYXNrUHJvdG9QAVoyZ29vZ2xlLmdvbGFuZy5vcmcvcHJvdG9idWYvdHlwZXMva25vd24vZmllbGRtYXNrcGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),Zl=pi(kl,0),Wl=dl("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),Gl=pi(Wl,0),Rl=pi(Wl,1),Cl=pi(Wl,2);var jl,Fl;function Yl(e,t){Tl(t,e);const n=function(e,t){if(void 0===e)return[];if("enum"===t.fieldKind||"scalar"===t.fieldKind){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(e=>e.no===t.number)}(e.$unknown,t),[a,r,o]=Bl(t);for(const s of n)il(a,new To(s.data),r,s.wireType,{readUnknownFields:!0});return o()}function Xl(e,t,n){var a;Tl(t,e);const r=(null!==(a=e.$unknown)&&void 0!==a?a:[]).filter(e=>e.no!==t.number),[o,s]=Bl(t,n),i=new Bo;yl(i,{writeUnknownFields:!0},o,s);const l=new To(i.finish());for(;l.pos<l.len;){const[e,t]=l.tag(),n=l.skip(t,e);r.push({no:e,wireType:t,data:n})}e.$unknown=r}function Bl(e,t){const n=e.typeName,a=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),r=Object.assign(Object.assign({},e.extendee),{fields:[a],members:[a],oneofs:[]}),o=fo(r,void 0!==t?{[n]:t}:void 0);return[Po(r,o),a,()=>{const t=o[n];if(void 0===t){const t=e.message;return po(t)?ao(t.fields[0].scalar,t.fields[0].longAsString):fo(t)}return t}]}function Tl(e,t){if(e.extendee.typeName!=t.$typeName)throw new Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}(Fl=jl||(jl={}))[Fl.NULL_VALUE=0]="NULL_VALUE";const Ml={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function Ll(e,t,n){return Ul(Po(e,t),function(e){return e?Object.assign(Object.assign({},Ml),e):Ml}(n))}function Ul(e,t){var n;const a=function(e,t){if(!e.desc.typeName.startsWith("google.protobuf."))return;switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t){if(""===e.typeUrl)return{};const{registry:n}=t;let a,r;n&&(a=Sl(e,n),a&&(r=n.getMessage(a.$typeName)));if(!r||!a)throw new Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let o=Ul(Po(r,a),t);(r.typeName.startsWith("google.protobuf.")||null===o||Array.isArray(o)||"object"!=typeof o)&&(o={value:o});return o["@type"]=e.typeUrl,o}(e.message,t);case"google.protobuf.Timestamp":return function(e){const t=1e3*Number(e.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);if(e.nanos>999999999)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be greater than 99999999`);let n="Z";if(e.nanos>0){const t=(e.nanos+1e9).toString().substring(1);n="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(t).toISOString().replace(".000Z",n)}(e.message);case"google.protobuf.Duration":return function(e){const t=Number(e.seconds),n=e.nanos;if(t>315576e6||t<-315576e6)throw new Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);if(t>0&&n<0||t<0&&n>0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos sign must match seconds sign`);let a=e.seconds.toString();if(0!==n){let e=Math.abs(n).toString();e="0".repeat(9-e.length)+e,"000000"===e.substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),a+="."+e,n<0&&0==t&&(a="-"+a)}return a+"s"}(e.message);case"google.protobuf.FieldMask":return(n=e.message).paths.map(e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw new Error(`cannot encode message ${n.$typeName} to JSON: lowerCamelCase of path name "`+e+'" is irreversible');return Ns(e)}).join(",");case"google.protobuf.Struct":return Kl(e.message);case"google.protobuf.Value":return Ol(e.message);case"google.protobuf.ListValue":return _l(e.message);default:if(po(e.desc)){const t=e.desc.fields[0];return Ql(t,e.get(t))}return}var n}(e,t);if(void 0!==a)return a;const r={};for(const o of e.sortedFields){if(!e.isSet(o)){if(3==o.presence)throw new Error(`cannot encode ${o} to JSON: required field not set`);if(!t.alwaysEmitImplicit||2!==o.presence)continue}const n=zl(o,e.get(o),t);void 0!==n&&(r[Jl(o,t)]=n)}if(t.registry){const a=new Set;for(const{no:o}of null!==(n=e.getUnknown())&&void 0!==n?n:[])if(!a.has(o)){a.add(o);const n=t.registry.getExtensionFor(e.desc,o);if(!n)continue;const s=Yl(e.message,n),[i,l]=Bl(n,s),c=zl(l,i.get(l),t);void 0!==c&&(r[n.jsonName]=c)}}return r}function zl(e,t,n){switch(e.fieldKind){case"scalar":return Ql(e,t);case"message":return Ul(t,n);case"enum":return Dl(e.enum,t,n.enumAsInteger);case"list":return function(e,t){const n=e.field(),a=[];switch(n.listKind){case"scalar":for(const t of e)a.push(Ql(n,t));break;case"enum":for(const r of e)a.push(Dl(n.enum,r,t.enumAsInteger));break;case"message":for(const n of e)a.push(Ul(n,t))}return t.alwaysEmitImplicit||a.length>0?a:void 0}(t,n);case"map":return function(e,t){const n=e.field(),a={};switch(n.mapKind){case"scalar":for(const[t,r]of e)a[t]=Ql(n,r);break;case"message":for(const[n,r]of e)a[n]=Ul(r,t);break;case"enum":for(const[r,o]of e)a[r]=Dl(n.enum,o,t.enumAsInteger)}return t.alwaysEmitImplicit||e.size>0?a:void 0}(t,n)}}function Dl(e,t,n){var a;if("number"!=typeof t)throw new Error(`cannot encode ${e} to JSON: expected number, got ${Ko(t)}`);if("google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const r=e.value[t];return null!==(a=null==r?void 0:r.name)&&void 0!==a?a:t}function Ql(e,t){var n,a,r,o,s,i;switch(e.scalar){case Tr.INT32:case Tr.SFIXED32:case Tr.SINT32:case Tr.FIXED32:case Tr.UINT32:if("number"!=typeof t)throw new Error(`cannot encode ${e} to JSON: ${null===(n=Uo(e,t))||void 0===n?void 0:n.message}`);return t;case Tr.FLOAT:case Tr.DOUBLE:if("number"!=typeof t)throw new Error(`cannot encode ${e} to JSON: ${null===(a=Uo(e,t))||void 0===a?void 0:a.message}`);return Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case Tr.STRING:if("string"!=typeof t)throw new Error(`cannot encode ${e} to JSON: ${null===(r=Uo(e,t))||void 0===r?void 0:r.message}`);return t;case Tr.BOOL:if("boolean"!=typeof t)throw new Error(`cannot encode ${e} to JSON: ${null===(o=Uo(e,t))||void 0===o?void 0:o.message}`);return t;case Tr.UINT64:case Tr.FIXED64:case Tr.INT64:case Tr.SFIXED64:case Tr.SINT64:if("bigint"!=typeof t&&"string"!=typeof t)throw new Error(`cannot encode ${e} to JSON: ${null===(s=Uo(e,t))||void 0===s?void 0:s.message}`);return t.toString();case Tr.BYTES:if(t instanceof Uint8Array)return fs(t);throw new Error(`cannot encode ${e} to JSON: ${null===(i=Uo(e,t))||void 0===i?void 0:i.message}`)}}function Jl(e,t){return t.useProtoFieldName?e.name:e.jsonName}function Kl(e){const t={};for(const[n,a]of Object.entries(e.fields))t[n]=Ol(a);return t}function Ol(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw new Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":case"stringValue":return e.kind.value;case"structValue":return Kl(e.kind.value);case"listValue":return _l(e.kind.value);default:throw new Error(`${e.$typeName} must have a value`)}}function _l(e){return e.values.map(Ol)}const Hl={ignoreUnknownFields:!1};function Pl(e,t,n){return $l(e,function(e,t){try{return JSON.parse(e)}catch(iv){const n=iv instanceof Error?iv.message:String(iv);throw new Error(`cannot decode message ${t} from JSON: ${n}`,{cause:iv})}}(t,e.typeName),n)}function $l(e,t,n){const a=Po(e);try{ql(a,t,function(e){return e?Object.assign(Object.assign({},Hl),e):Hl}(n))}catch(iv){if((r=iv)instanceof Error&&Io.includes(r.name)&&"field"in r&&"function"==typeof r.field)throw new Error(`cannot decode ${iv.field()} from JSON: ${iv.message}`,{cause:iv});throw iv}var r;return a.message}function ql(e,t,n){var a;if(function(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t,n){var a;if(null===t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${Ko(t)}`);if(0==Object.keys(t).length)return;const r=t["@type"];if("string"!=typeof r||""==r)throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);const o=r.includes("/")?r.substring(r.lastIndexOf("/")+1):r;if(!o.length)throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);const s=null===(a=n.registry)||void 0===a?void 0:a.getMessage(o);if(!s)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${r} is not in the type registry`);const i=Po(s);if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value")){ql(i,t.value,n)}else{const e=Object.assign({},t);delete e["@type"],ql(i,e,n)}!function(e,t,n){let a=!1;n||(n=fo(bl),a=!0),n.value=xl(e,t),n.typeUrl=`type.googleapis.com/${t.$typeName}`}(i.desc,i.message,e)}(e.message,t,n),!0;case"google.protobuf.Timestamp":return function(e,t){if("string"!=typeof t)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Ko(t)}`);const n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);const a=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(a))throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=qr.parse(a/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}(e.message,t),!0;case"google.protobuf.Duration":return function(e,t){if("string"!=typeof t)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Ko(t)}`);const n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===n)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Ko(t)}`);const a=Number(n[1]);if(a>315576e6||a<-315576e6)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Ko(t)}`);if(e.seconds=qr.parse(a),"string"!=typeof n[2])return;const r=n[2]+"0".repeat(9-n[2].length);e.nanos=parseInt(r),(a<0||Object.is(a,-0))&&(e.nanos=-e.nanos)}(e.message,t),!0;case"google.protobuf.FieldMask":return function(e,t){if("string"!=typeof t)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Ko(t)}`);if(""===t)return;function n(t){if(t.includes("_"))throw new Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);const n=t.replace(/[A-Z]/g,e=>"_"+e.toLowerCase());return"_"===n[0]?n.substring(1):n}e.paths=t.split(",").map(n)}(e.message,t),!0;case"google.protobuf.Struct":return ic(e.message,t),!0;case"google.protobuf.Value":return lc(e.message,t),!0;case"google.protobuf.ListValue":return cc(e.message,t),!0;default:if(po(e.desc)){const n=e.desc.fields[0];return null===t?e.clear(n):e.set(n,rc(n,t,!0)),!0}return!1}}(e,t,n))return;if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode ${e.desc} from JSON: ${Ko(t)}`);const r=new Map,o=new Map;for(const s of e.desc.fields)o.set(s.name,s).set(s.jsonName,s);for(const[s,i]of Object.entries(t)){const t=o.get(s);if(t){if(t.oneof){if(null===i&&"scalar"==t.fieldKind)continue;const e=r.get(t.oneof);if(void 0!==e)throw new ko(t.oneof,`oneof set multiple times by ${e.name} and ${t.name}`);r.set(t.oneof,t)}ec(e,t,i,n)}else{let t;if(s.startsWith("[")&&s.endsWith("]")&&(t=null===(a=n.registry)||void 0===a?void 0:a.getExtension(s.substring(1,s.length-1)))&&t.extendee.typeName===e.desc.typeName){const[a,r,o]=Bl(t);ec(a,r,i,n),Xl(e.message,t,o())}if(!t&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${e.desc} from JSON: key "${s}" is unknown`)}}}function ec(e,t,n,a){switch(t.fieldKind){case"scalar":!function(e,t,n){const a=rc(t,n,!1);a===ac?e.clear(t):e.set(t,a)}(e,t,n);break;case"enum":!function(e,t,n,a){const r=nc(t.enum,n,a.ignoreUnknownFields,!1);r===ac?e.clear(t):r!==tc&&e.set(t,r)}(e,t,n,a);break;case"message":!function(e,t,n,a){if(null===n&&"google.protobuf.Value"!=t.message.typeName)return void e.clear(t);const r=e.isSet(t)?e.get(t):Po(t.message);ql(r,n,a),e.set(t,r)}(e,t,n,a);break;case"list":!function(e,t,n){if(null===t)return;const a=e.field();if(!Array.isArray(t))throw new ko(a,"expected Array, got "+Ko(t));for(const r of t){if(null===r)throw new ko(a,"list item must not be null");switch(a.listKind){case"message":const t=Po(a.message);ql(t,r,n),e.add(t);break;case"enum":const o=nc(a.enum,r,n.ignoreUnknownFields,!0);o!==tc&&e.add(o);break;case"scalar":e.add(rc(a,r,!0))}}}(e.get(t),n,a);break;case"map":!function(e,t,n){if(null===t)return;const a=e.field();if("object"!=typeof t||Array.isArray(t))throw new ko(a,"expected object, got "+Ko(t));for(const[r,o]of Object.entries(t)){if(null===o)throw new ko(a,"map value must not be null");let t;switch(a.mapKind){case"message":const e=Po(a.message);ql(e,o,n),t=e;break;case"enum":if(t=nc(a.enum,o,n.ignoreUnknownFields,!0),t===tc)return;break;case"scalar":t=rc(a,o,!0)}const s=oc(a.mapKey,r);e.set(s,t)}}(e.get(t),n,a)}}const tc=Symbol();function nc(e,t,n,a){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:a?e.values[0].number:ac;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=e.values.find(e=>e.name===t);if(void 0!==a)return a.number;if(n)return tc}throw new Error(`cannot decode ${e} from JSON: ${Ko(t)}`)}const ac=Symbol();function rc(e,t,n){if(null===t)return n?ao(e.scalar,!1):ac;switch(e.scalar){case Tr.DOUBLE:case Tr.FLOAT:if("NaN"===t)return NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if("number"==typeof t){if(Number.isNaN(t))throw new ko(e,"unexpected NaN number");if(!Number.isFinite(t))throw new ko(e,"unexpected infinite number");break}if("string"==typeof t){if(""===t)break;if(t.trim().length!==t.length)break;const e=Number(t);if(!Number.isFinite(e))break;return e}break;case Tr.INT32:case Tr.FIXED32:case Tr.SFIXED32:case Tr.SINT32:case Tr.UINT32:return sc(t);case Tr.BYTES:if("string"==typeof t){if(""===t)return new Uint8Array(0);try{return bs(t)}catch(iv){const n=iv instanceof Error?iv.message:String(iv);throw new ko(e,n)}}}return t}function oc(e,t){switch(e){case Tr.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case Tr.INT32:case Tr.FIXED32:case Tr.UINT32:case Tr.SFIXED32:case Tr.SINT32:return sc(t);default:return t}}function sc(e){if("string"==typeof e){if(""===e)return e;if(e.trim().length!==e.length)return e;const t=Number(e);return Number.isNaN(t)?e:t}return e}function ic(e,t){if("object"!=typeof t||null==t||Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${Ko(t)}`);for(const[n,a]of Object.entries(t)){const t=fo(Rl);lc(t,a),e.fields[n]=t}}function lc(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(null===t)e.kind={case:"nullValue",value:jl.NULL_VALUE};else if(Array.isArray(t)){const n=fo(Cl);cc(n,t),e.kind={case:"listValue",value:n}}else{const n=fo(Gl);ic(n,t),e.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${e.$typeName} from JSON ${Ko(t)}`)}return e}function cc(e,t){if(!Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${Ko(t)}`);for(const n of t){const t=fo(Rl);lc(t,n),e.values.push(t)}}function dc(e){const t=Xr[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}let uc;class mc extends Error{constructor(e,t=Xr.Unknown,n,a,r){super(function(e,t){return e.length?`[${dc(t)}] ${e}`:`[${dc(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=n?n:{}),this.details=null!=a?a:[],this.cause=r}static from(e,t=Xr.Unknown){return e instanceof mc?e:e instanceof Error?"AbortError"==e.name||"TimeoutError"==e.name?new mc(e.message,Xr.Canceled):new mc(e.message,t,void 0,void 0,e):new mc(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===mc.prototype||"ConnectError"===e.name&&"code"in e&&"number"==typeof e.code&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&"string"==typeof e.rawMessage&&"cause"in e)}findDetails(e){const t="message"===e.kind?{getMessage:t=>t===e.typeName?e:void 0}:e,n=[];for(const r of this.details){if("desc"in r){t.getMessage(r.desc.typeName)&&n.push(fo(r.desc,r.value));continue}const e=t.getMessage(r.type);if(e)try{n.push(ol(e,r.value))}catch(a){}}return n}}class hc{constructor(e){this.readMaxBytes=e,this.header=new Uint8Array(5),this.headerView=new DataView(this.header.buffer),this.buf=[]}get byteLength(){return this.buf.reduce((e,t)=>e+t.byteLength,0)}decode(e){this.buf.push(e);const t=[];for(;;){let e=this.pop();if(!e)break;t.push(e)}return t}pop(){if((this.env||(this.env=this.head(),this.env))&&this.cons(this.env.data)){const e=this.env;return this.env=void 0,e}}head(){if(!this.cons(this.header))return;const e=this.headerView.getUint8(0),t=this.headerView.getUint32(1);return function(e,t,n=!1){if(t>e){let a=`message size is larger than configured readMaxBytes ${e}`;throw n&&(a=`message size ${t} is larger than configured readMaxBytes ${e}`),new mc(a,Xr.ResourceExhausted)}}(this.readMaxBytes,t,!0),{flags:e,data:new Uint8Array(t)}}cons(e){const t=e.byteLength;if(this.byteLength<t)return!1;let n=0;for(;n<t;){const a=this.buf.shift();a.byteLength>t-n?(e.set(a.subarray(0,t-n),n),this.buf.unshift(a.subarray(t-n)),n+=t-n):(e.set(a,n),n+=a.byteLength)}return!0}}function gc(e){let t;const n=new hc(4294967295);return new ReadableStream({start(){t=e.getReader()},async pull(e){let a=!1;for(;!a;){const r=await t.read();if(r.done)n.byteLength>0&&e.error(new mc("protocol error: incomplete envelope",Xr.InvalidArgument)),e.close();else for(const t of n.decode(r.value))e.enqueue(t),a=!0}}})}var pc=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(n){t[n]=e[n]&&function(t){return new Promise(function(a,r){(function(e,t,n,a){Promise.resolve(a).then(function(t){e({value:t,done:n})},t)})(a,r,(t=e[n](t)).done,t.value)})}}},bc=function(e){return this instanceof bc?(this.v=e,this):new bc(e)},fc=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),o=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),a[Symbol.asyncIterator]=function(){return this},a;function s(e,t){r[e]&&(a[e]=function(t){return new Promise(function(n,a){o.push([e,t,n,a])>1||i(e,t)})},t&&(a[e]=t(a[e])))}function i(e,t){try{(n=r[e](t)).value instanceof bc?Promise.resolve(n.value.v).then(l,c):d(o[0][2],n)}catch(iv){d(o[0][3],iv)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}};function xc(e){return fc(this,arguments,function*(){yield bc(yield*function(e){var t,n;return t={},a("next"),a("throw",function(e){throw e}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(a,r){t[a]=e[a]?function(t){return(n=!n)?{value:bc(e[a](t)),done:!1}:r?r(t):t}:r}}(pc(e)))})}var vc=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(n){t[n]=e[n]&&function(t){return new Promise(function(a,r){(function(e,t,n,a){Promise.resolve(a).then(function(t){e({value:t,done:n})},t)})(a,r,(t=e[n](t)).done,t.value)})}}},yc=function(e){return this instanceof yc?(this.v=e,this):new yc(e)},Ec=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),o=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),a[Symbol.asyncIterator]=function(){return this},a;function s(e,t){r[e]&&(a[e]=function(t){return new Promise(function(n,a){o.push([e,t,n,a])>1||i(e,t)})},t&&(a[e]=t(a[e])))}function i(e,t){try{(n=r[e](t)).value instanceof yc?Promise.resolve(n.value.v).then(l,c):d(o[0][2],n)}catch(iv){d(o[0][3],iv)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}};function Nc(e,t){return function(e,t){const n={};for(const a of e.methods){const e=t(a);null!=e&&(n[a.localName]=e)}return n}(e,e=>{switch(e.methodKind){case"unary":return function(e,t){return async(n,a)=>{var r,o;const s=await e.unary(t,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,n,null==a?void 0:a.contextValues);return null===(r=null==a?void 0:a.onHeader)||void 0===r||r.call(a,s.header),null===(o=null==a?void 0:a.onTrailer)||void 0===o||o.call(a,s.trailer),s.message}}(t,e);case"server_streaming":return function(e,t){return(n,a)=>wc(e.stream(t,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,xc([n]),null==a?void 0:a.contextValues),a)}(t,e);case"client_streaming":return function(e,t){return async(n,a)=>{var r,o,s,i,l,c;const d=await e.stream(t,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,n,null==a?void 0:a.contextValues);let u;null===(l=null==a?void 0:a.onHeader)||void 0===l||l.call(a,d.header);let m=0;try{for(var h,g=!0,p=vc(d.message);!(r=(h=await p.next()).done);g=!0){i=h.value,g=!1;u=i,m++}}catch(b){o={error:b}}finally{try{g||r||!(s=p.return)||await s.call(p)}finally{if(o)throw o.error}}if(!u)throw new mc("protocol error: missing response message",Xr.Unimplemented);if(m>1)throw new mc("protocol error: received extra messages for client streaming method",Xr.Unimplemented);return null===(c=null==a?void 0:a.onTrailer)||void 0===c||c.call(a,d.trailer),u}}(t,e);case"bidi_streaming":return function(e,t){return(n,a)=>wc(e.stream(t,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,n,null==a?void 0:a.contextValues),a)}(t,e);default:return null}})}function wc(e,t){const n=function(){return Ec(this,arguments,function*(){var n,a;const r=yield yc(e);null===(n=null==t?void 0:t.onHeader)||void 0===n||n.call(t,r.header),yield yc(yield*function(e){var t,n;return t={},a("next"),a("throw",function(e){throw e}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(a,r){t[a]=e[a]?function(t){return(n=!n)?{value:yc(e[a](t)),done:!1}:r?r(t):t}:r}}(vc(r.message))),null===(a=null==t?void 0:t.onTrailer)||void 0===a||a.call(t,r.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function Ac(e){if(!e.aborted)return;if(void 0!==e.reason)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Sc(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}function Vc(e,t,...n){if(n.length>0)throw new Error;return e.services[t]}function Ic(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function kc(e,t){return fo(e,t)}function Zc(e,t){function n(t){return!0===t.done?t:{done:t.done,value:kc(e,t.value)}}return{[Symbol.asyncIterator](){const e=t[Symbol.asyncIterator](),a={next:()=>e.next().then(n)};return void 0!==e.throw&&(a.throw=t=>e.throw(t).then(n)),void 0!==e.return&&(a.return=t=>e.return(t).then(n)),a}}}function Wc(e,t){if(!t)return e;for(const n of t.concat().reverse())e=n(e);return e}function Gc(e){var t;const n=Object.assign({},e);return null!==(t=n.ignoreUnknownFields)&&void 0!==t||(n.ignoreUnknownFields=!0),n}function Rc(e,t,n,a){const r=t?Cc(e.input,a):jc(e.input,n);return{parse:(t?Cc(e.output,a):jc(e.output,n)).parse,serialize:r.serialize}}function Cc(e,t){return{parse(n){try{return ol(e,n,t)}catch(iv){const t=iv instanceof Error?iv.message:String(iv);throw new mc(`parse binary: ${t}`,Xr.Internal)}},serialize(n){try{return xl(e,n,t)}catch(iv){const t=iv instanceof Error?iv.message:String(iv);throw new mc(`serialize binary: ${t}`,Xr.Internal)}}}}function jc(e,t){var n,a;const r=null!==(n=null==t?void 0:t.textEncoder)&&void 0!==n?n:new TextEncoder,o=null!==(a=null==t?void 0:t.textDecoder)&&void 0!==a?a:new TextDecoder,s=Gc(t);return{parse(t){try{const n=o.decode(t);return Pl(e,n,s)}catch(iv){throw mc.from(iv,Xr.InvalidArgument)}},serialize(t){try{const n=function(e,t,n){var a;const r=Ll(e,t,n);return JSON.stringify(r,null,null!==(a=null==n?void 0:n.prettySpaces)&&void 0!==a?a:0)}(e,t,s);return r.encode(n)}catch(iv){throw mc.from(iv,Xr.Internal)}}}}const Fc=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function Yc(e,t,n){var a;if(t&&new Headers(t).forEach((e,t)=>n.metadata.append(t,e)),"object"!=typeof e||null==e||Array.isArray(e))throw n;let r=n.code;"code"in e&&"string"==typeof e.code&&(r=null!==(a=function(e){if(!uc){uc={};for(const e of Object.values(Xr))"string"!=typeof e&&(uc[dc(e)]=e)}return uc[e]}(e.code))&&void 0!==a?a:r);const o=e.message;if(null!=o&&"string"!=typeof o)throw n;const s=new mc(null!=o?o:"",r,t);if("details"in e&&Array.isArray(e.details))for(const i of e.details){if(null===i||"object"!=typeof i||Array.isArray(i)||"string"!=typeof i.type||"string"!=typeof i.value)throw n;try{s.details.push({type:i.type,value:bs(i.value),debug:i.debug})}catch(iv){throw n}}return s}function Xc(e){const t=new mc("invalid end stream",Xr.Unknown);let n;try{n=JSON.parse("string"==typeof e?e:(new TextDecoder).decode(e))}catch(iv){throw t}if("object"!=typeof n||null==n||Array.isArray(n))throw t;const a=new Headers;if("metadata"in n){if("object"!=typeof n.metadata||null==n.metadata||Array.isArray(n.metadata))throw t;for(const[e,r]of Object.entries(n.metadata)){if(!Array.isArray(r)||r.some(e=>"string"!=typeof e))throw t;for(const t of r)a.append(e,t)}}return{metadata:a,error:"error"in n&&null!=n.error?Yc(n.error,a,t):void 0}}const Bc="Content-Type",Tc="Content-Encoding",Mc="Connect-Protocol-Version";function Lc(e){const t=new Headers,n=new Headers;return e.forEach((e,a)=>{a.toLowerCase().startsWith("trailer-")?n.append(a.substring(8),e):t.append(a,e)}),[t,n]}function Uc(e,t,n,a,r){const o=new Headers(null!=a?a:{});return void 0!==n&&o.set("Connect-Timeout-Ms",`${n}`),o.set(Bc,"unary"==e?t?"application/proto":"application/json":t?"application/connect+proto":"application/connect+json"),o.set(Mc,"1"),o.has("User-Agent"),o}function zc(e,t,n,a){const r=a.get(Bc),o=function(e){const t=null==e?void 0:e.match(Fc);if(!t)return;return{stream:!!t[1],binary:!!t[3]}}(r);if(200!==n){const t=new mc(`HTTP ${n}`,function(e){switch(e){case 400:return Xr.Internal;case 401:return Xr.Unauthenticated;case 403:return Xr.PermissionDenied;case 404:return Xr.Unimplemented;case 429:case 502:case 503:case 504:return Xr.Unavailable;default:return Xr.Unknown}}(n),a);if("unary"==e&&o&&!o.binary)return{isUnaryError:!0,unaryError:t};throw t}const s=t,i="unary"!==e;if((null==o?void 0:o.binary)!==s||o.stream!==i)throw new mc(`unsupported content type ${r}`,void 0===o?Xr.Unknown:Xr.Internal,a);return{isUnaryError:!1}}const Dc="application/";function Qc(e,t,n){let a="?connect=v1";const r=e.header.get(Bc);0===(null==r?void 0:r.indexOf(Dc))&&(a+="&encoding="+encodeURIComponent(r.slice(12)));const o=e.header.get(Tc);null!==o&&"identity"!==o&&(a+="&compression="+encodeURIComponent(o),n=!0),n&&(a+="&base64=1"),a+="&message="+function(e,t){return t?fs(e,"url"):encodeURIComponent((new TextDecoder).decode(e))}(t,n);const s=e.url+a,i=new Headers(e.header);for(const l of[Mc,Bc,"Content-Length",Tc,"Accept-Encoding"])i.delete(l);return Object.assign(Object.assign({},e),{requestMethod:"GET",url:s,header:i})}function Jc(e){const{signal:t,cleanup:n}=function(e){const t=new AbortController,n=()=>{t.abort(new mc("the operation timed out",Xr.DeadlineExceeded))};let a;return void 0!==e&&(e<=0?n():a=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(a)}}(e.timeoutMs),a=function(...e){const t=new AbortController,n=e.filter(e=>void 0!==e).concat(t.signal);for(const r of n){if(r.aborted){a.apply(r);break}r.addEventListener("abort",a)}function a(){t.signal.aborted||t.abort(Ac(this));for(const e of n)e.removeEventListener("abort",a)}return t}(e.signal,t);return[a.signal,function(e){const r=mc.from(t.aborted?Ac(t):e);return a.abort(r),n(),Promise.reject(r)},function(){n(),a.abort()}]}let Kc=null,Oc=null;const _c="memos_access_token",Hc="memos_token_expires_at",Pc=()=>{if(!Kc)try{const e=sessionStorage.getItem(_c),t=sessionStorage.getItem(Hc);if(e&&t){const n=new Date(t);n>new Date?(Kc=e,Oc=n):(sessionStorage.removeItem(_c),sessionStorage.removeItem(Hc))}}catch(iv){}return Kc},$c=(e,t)=>{Kc=e,Oc=t||null;try{e&&t?(sessionStorage.setItem(_c,e),sessionStorage.setItem(Hc,t.toISOString())):(sessionStorage.removeItem(_c),sessionStorage.removeItem(Hc))}catch(iv){}},qc=()=>{Kc=null,Oc=null;try{sessionStorage.removeItem(_c),sessionStorage.removeItem(Hc)}catch(iv){}};var ed=function(e){return this instanceof ed?(this.v=e,this):new ed(e)},td=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),o=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),a[Symbol.asyncIterator]=function(){return this},a;function s(e,t){r[e]&&(a[e]=function(t){return new Promise(function(n,a){o.push([e,t,n,a])>1||i(e,t)})},t&&(a[e]=t(a[e])))}function i(e,t){try{(n=r[e](t)).value instanceof ed?Promise.resolve(n.value.v).then(l,c):d(o[0][2],n)}catch(iv){d(o[0][3],iv)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}};const nd={redirect:"error"};function ad(e){var t;!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=null!==(t=e.useBinaryFormat)&&void 0!==t&&t;return{async unary(t,a,r,o,s,i){const{serialize:l,parse:c}=Rc(t,n,e.jsonOptions,e.binaryOptions);return r=void 0===r?e.defaultTimeoutMs:r<=0?void 0:r,await function(e){const t=Wc(e.next,e.interceptors),[n,a,r]=Jc(e);return t(Object.assign(Object.assign({},e.req),{message:kc(e.req.method.input,e.req.message),signal:n})).then(e=>(r(),e),a)}({interceptors:e.interceptors,signal:a,timeoutMs:r,req:{stream:!1,service:t.parent,method:t,requestMethod:"POST",url:Ic(e.baseUrl,t),header:Uc(t.methodKind,n,r,o),contextValues:null!=i?i:Sc(),message:s},next:async a=>{var r;let o=null;!0===e.useHttpGet&&t.idempotency===ji.NO_SIDE_EFFECTS?a=Qc(a,l(a.message),n):o=l(a.message);const s=null!==(r=e.fetch)&&void 0!==r?r:globalThis.fetch,i=await s(a.url,Object.assign(Object.assign({},nd),{method:a.requestMethod,headers:a.header,signal:a.signal,body:o})),{isUnaryError:d,unaryError:u}=zc(t.methodKind,n,i.status,i.headers);if(d)throw Yc(await i.json(),function(...e){const t=new Headers;for(const n of e)n.forEach((e,n)=>{t.append(n,e)});return t}(...Lc(i.headers)),u);const[m,h]=Lc(i.headers);return{stream:!1,service:t.parent,method:t,header:m,message:n?c(new Uint8Array(await i.arrayBuffer())):$l(t.output,await i.json(),Gc(e.jsonOptions)),trailer:h}}})},async stream(t,a,r,o,s,i){const{serialize:l,parse:c}=Rc(t,n,e.jsonOptions,e.binaryOptions);function d(e,t,n,a){return td(this,arguments,function*(){const r=gc(e).getReader();let o=!1;for(;;){const e=yield ed(r.read());if(e.done)break;const{flags:a,data:s}=e.value;if(!(1&~a))throw new mc("protocol error: received unsupported compressed output",Xr.Internal);if(!(2&~a)){o=!0;const e=Xc(s);if(e.error){const t=e.error;throw n.forEach((e,n)=>{t.metadata.append(n,e)}),t}e.metadata.forEach((e,n)=>t.set(n,e));continue}yield yield ed(c(s))}if("throwIfAborted"in a&&a.throwIfAborted(),!o)throw"missing EndStreamResponse"})}async function u(e){if("server_streaming"!=t.methodKind)throw"The fetch API does not support streaming request bodies";const n=await e[Symbol.asyncIterator]().next();if(1==n.done)throw"missing request message";return function(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const a=new DataView(n.buffer,n.byteOffset,n.byteLength);return a.setUint8(0,e),a.setUint32(1,t.length),n}(0,l(n.value))}return r=void 0===r?e.defaultTimeoutMs:r<=0?void 0:r,await function(e){const t=Wc(e.next,e.interceptors),[n,a,r]=Jc(e),o=Object.assign(Object.assign({},e.req),{message:Zc(e.req.method.input,e.req.message),signal:n});let s=!1;return n.addEventListener("abort",function(){var t,n;const a=e.req.message[Symbol.asyncIterator]();s||null===(t=a.throw)||void 0===t||t.call(a,this.reason).catch(()=>{}),null===(n=a.return)||void 0===n||n.call(a).catch(()=>{})}),t(o).then(e=>Object.assign(Object.assign({},e),{message:{[Symbol.asyncIterator](){const t=e.message[Symbol.asyncIterator]();return{next:()=>t.next().then(e=>(1==e.done&&(s=!0,r()),e),a)}}}}),a)}({interceptors:e.interceptors,timeoutMs:r,signal:a,req:{stream:!0,service:t.parent,method:t,requestMethod:"POST",url:Ic(e.baseUrl,t),header:Uc(t.methodKind,n,r,o),contextValues:null!=i?i:Sc(),message:s},next:async a=>{var r;const o=null!==(r=e.fetch)&&void 0!==r?r:globalThis.fetch,s=await o(a.url,Object.assign(Object.assign({},nd),{method:a.requestMethod,headers:a.header,signal:a.signal,body:await u(a.message)}));if(zc(t.methodKind,n,s.status,s.headers),null===s.body)throw"missing response body";const i=new Headers;return Object.assign(Object.assign({},a),{header:s.headers,trailer:i,message:d(s.body,i,s.headers,a.signal)})}})}}}const rd=dl("Chxnb29nbGUvYXBpL2Fubm90YXRpb25zLnByb3RvEgpnb29nbGUuYXBpOksKBGh0dHASHi5nb29nbGUucHJvdG9idWYuTWV0aG9kT3B0aW9ucxiwyrwiIAEoCzIULmdvb2dsZS5hcGkuSHR0cFJ1bGVSBGh0dHBCrgEKDmNvbS5nb29nbGUuYXBpQhBBbm5vdGF0aW9uc1Byb3RvUAFaQWdvb2dsZS5nb2xhbmcub3JnL2dlbnByb3RvL2dvb2dsZWFwaXMvYXBpL2Fubm90YXRpb25zO2Fubm90YXRpb25zogIDR0FYqgIKR29vZ2xlLkFwacoCCkdvb2dsZVxBcGniAhZHb29nbGVcQXBpXEdQQk1ldGFkYXRh6gILR29vZ2xlOjpBcGliBnByb3RvMw",[dl("ChVnb29nbGUvYXBpL2h0dHAucHJvdG8SCmdvb2dsZS5hcGkiVAoESHR0cBIjCgVydWxlcxgBIAMoCzIULmdvb2dsZS5hcGkuSHR0cFJ1bGUSJwofZnVsbHlfZGVjb2RlX3Jlc2VydmVkX2V4cGFuc2lvbhgCIAEoCCKBAgoISHR0cFJ1bGUSEAoIc2VsZWN0b3IYASABKAkSDQoDZ2V0GAIgASgJSAASDQoDcHV0GAMgASgJSAASDgoEcG9zdBgEIAEoCUgAEhAKBmRlbGV0ZRgFIAEoCUgAEg8KBXBhdGNoGAYgASgJSAASLwoGY3VzdG9tGAggASgLMh0uZ29vZ2xlLmFwaS5DdXN0b21IdHRwUGF0dGVybkgAEgwKBGJvZHkYByABKAkSFQoNcmVzcG9uc2VfYm9keRgMIAEoCRIxChNhZGRpdGlvbmFsX2JpbmRpbmdzGAsgAygLMhQuZ29vZ2xlLmFwaS5IdHRwUnVsZUIJCgdwYXR0ZXJuIi8KEUN1c3RvbUh0dHBQYXR0ZXJuEgwKBGtpbmQYASABKAkSDAoEcGF0aBgCIAEoCUKnAQoOY29tLmdvb2dsZS5hcGlCCUh0dHBQcm90b1ABWkFnb29nbGUuZ29sYW5nLm9yZy9nZW5wcm90by9nb29nbGVhcGlzL2FwaS9hbm5vdGF0aW9uczthbm5vdGF0aW9uc6ICA0dBWKoCCkdvb2dsZS5BcGnKAgpHb29nbGVcQXBp4gIWR29vZ2xlXEFwaVxHUEJNZXRhZGF0YeoCC0dvb2dsZTo6QXBpYgZwcm90bzM"),bi]),od=dl("Chdnb29nbGUvYXBpL2NsaWVudC5wcm90bxIKZ29vZ2xlLmFwaSK+AQoWQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncxIeChJyZWZlcmVuY2VfZG9jc191cmkYASABKAlCAhgBEjoKDGRlc3RpbmF0aW9ucxgCIAMoDjIkLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeURlc3RpbmF0aW9uEkgKGnNlbGVjdGl2ZV9nYXBpY19nZW5lcmF0aW9uGAMgASgLMiQuZ29vZ2xlLmFwaS5TZWxlY3RpdmVHYXBpY0dlbmVyYXRpb24i+wMKFUNsaWVudExpYnJhcnlTZXR0aW5ncxIPCgd2ZXJzaW9uGAEgASgJEi0KDGxhdW5jaF9zdGFnZRgCIAEoDjIXLmdvb2dsZS5hcGkuTGF1bmNoU3RhZ2USGgoScmVzdF9udW1lcmljX2VudW1zGAMgASgIEi8KDWphdmFfc2V0dGluZ3MYFSABKAsyGC5nb29nbGUuYXBpLkphdmFTZXR0aW5ncxItCgxjcHBfc2V0dGluZ3MYFiABKAsyFy5nb29nbGUuYXBpLkNwcFNldHRpbmdzEi0KDHBocF9zZXR0aW5ncxgXIAEoCzIXLmdvb2dsZS5hcGkuUGhwU2V0dGluZ3MSMwoPcHl0aG9uX3NldHRpbmdzGBggASgLMhouZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncxIvCg1ub2RlX3NldHRpbmdzGBkgASgLMhguZ29vZ2xlLmFwaS5Ob2RlU2V0dGluZ3MSMwoPZG90bmV0X3NldHRpbmdzGBogASgLMhouZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncxIvCg1ydWJ5X3NldHRpbmdzGBsgASgLMhguZ29vZ2xlLmFwaS5SdWJ5U2V0dGluZ3MSKwoLZ29fc2V0dGluZ3MYHCABKAsyFi5nb29nbGUuYXBpLkdvU2V0dGluZ3MiqAMKClB1Ymxpc2hpbmcSMwoPbWV0aG9kX3NldHRpbmdzGAIgAygLMhouZ29vZ2xlLmFwaS5NZXRob2RTZXR0aW5ncxIVCg1uZXdfaXNzdWVfdXJpGGUgASgJEhkKEWRvY3VtZW50YXRpb25fdXJpGGYgASgJEhYKDmFwaV9zaG9ydF9uYW1lGGcgASgJEhQKDGdpdGh1Yl9sYWJlbBhoIAEoCRIeChZjb2Rlb3duZXJfZ2l0aHViX3RlYW1zGGkgAygJEhYKDmRvY190YWdfcHJlZml4GGogASgJEjsKDG9yZ2FuaXphdGlvbhhrIAEoDjIlLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeU9yZ2FuaXphdGlvbhI7ChBsaWJyYXJ5X3NldHRpbmdzGG0gAygLMiEuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3MSKQohcHJvdG9fcmVmZXJlbmNlX2RvY3VtZW50YXRpb25fdXJpGG4gASgJEigKIHJlc3RfcmVmZXJlbmNlX2RvY3VtZW50YXRpb25fdXJpGG8gASgJIuMBCgxKYXZhU2V0dGluZ3MSFwoPbGlicmFyeV9wYWNrYWdlGAEgASgJEkwKE3NlcnZpY2VfY2xhc3NfbmFtZXMYAiADKAsyLy5nb29nbGUuYXBpLkphdmFTZXR0aW5ncy5TZXJ2aWNlQ2xhc3NOYW1lc0VudHJ5EjIKBmNvbW1vbhgDIAEoCzIiLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncxo4ChZTZXJ2aWNlQ2xhc3NOYW1lc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEiQQoLQ3BwU2V0dGluZ3MSMgoGY29tbW9uGAEgASgLMiIuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzIkEKC1BocFNldHRpbmdzEjIKBmNvbW1vbhgBIAEoCzIiLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncyKbAgoOUHl0aG9uU2V0dGluZ3MSMgoGY29tbW9uGAEgASgLMiIuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzEk4KFWV4cGVyaW1lbnRhbF9mZWF0dXJlcxgCIAEoCzIvLmdvb2dsZS5hcGkuUHl0aG9uU2V0dGluZ3MuRXhwZXJpbWVudGFsRmVhdHVyZXMahAEKFEV4cGVyaW1lbnRhbEZlYXR1cmVzEh0KFXJlc3RfYXN5bmNfaW9fZW5hYmxlZBgBIAEoCBInCh9wcm90b2J1Zl9weXRob25pY190eXBlc19lbmFibGVkGAIgASgIEiQKHHVudmVyc2lvbmVkX3BhY2thZ2VfZGlzYWJsZWQYAyABKAgiQgoMTm9kZVNldHRpbmdzEjIKBmNvbW1vbhgBIAEoCzIiLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncyKqAwoORG90bmV0U2V0dGluZ3MSMgoGY29tbW9uGAEgASgLMiIuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzEkkKEHJlbmFtZWRfc2VydmljZXMYAiADKAsyLy5nb29nbGUuYXBpLkRvdG5ldFNldHRpbmdzLlJlbmFtZWRTZXJ2aWNlc0VudHJ5EksKEXJlbmFtZWRfcmVzb3VyY2VzGAMgAygLMjAuZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncy5SZW5hbWVkUmVzb3VyY2VzRW50cnkSGQoRaWdub3JlZF9yZXNvdXJjZXMYBCADKAkSIAoYZm9yY2VkX25hbWVzcGFjZV9hbGlhc2VzGAUgAygJEh4KFmhhbmR3cml0dGVuX3NpZ25hdHVyZXMYBiADKAkaNgoUUmVuYW1lZFNlcnZpY2VzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARo3ChVSZW5hbWVkUmVzb3VyY2VzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASJCCgxSdWJ5U2V0dGluZ3MSMgoGY29tbW9uGAEgASgLMiIuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzIr8BCgpHb1NldHRpbmdzEjIKBmNvbW1vbhgBIAEoCzIiLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncxJFChByZW5hbWVkX3NlcnZpY2VzGAIgAygLMisuZ29vZ2xlLmFwaS5Hb1NldHRpbmdzLlJlbmFtZWRTZXJ2aWNlc0VudHJ5GjYKFFJlbmFtZWRTZXJ2aWNlc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEizwIKDk1ldGhvZFNldHRpbmdzEhAKCHNlbGVjdG9yGAEgASgJEjwKDGxvbmdfcnVubmluZxgCIAEoCzImLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuTG9uZ1J1bm5pbmcSHQoVYXV0b19wb3B1bGF0ZWRfZmllbGRzGAMgAygJGs0BCgtMb25nUnVubmluZxI1ChJpbml0aWFsX3BvbGxfZGVsYXkYASABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24SHQoVcG9sbF9kZWxheV9tdWx0aXBsaWVyGAIgASgCEjEKDm1heF9wb2xsX2RlbGF5GAMgASgLMhkuZ29vZ2xlLnByb3RvYnVmLkR1cmF0aW9uEjUKEnRvdGFsX3BvbGxfdGltZW91dBgEIAEoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbiJRChhTZWxlY3RpdmVHYXBpY0dlbmVyYXRpb24SDwoHbWV0aG9kcxgBIAMoCRIkChxnZW5lcmF0ZV9vbWl0dGVkX2FzX2ludGVybmFsGAIgASgIKqMBChlDbGllbnRMaWJyYXJ5T3JnYW5pemF0aW9uEisKJ0NMSUVOVF9MSUJSQVJZX09SR0FOSVpBVElPTl9VTlNQRUNJRklFRBAAEgkKBUNMT1VEEAESBwoDQURTEAISCgoGUEhPVE9TEAMSDwoLU1RSRUVUX1ZJRVcQBBIMCghTSE9QUElORxAFEgcKA0dFTxAGEhEKDUdFTkVSQVRJVkVfQUkQBypnChhDbGllbnRMaWJyYXJ5RGVzdGluYXRpb24SKgomQ0xJRU5UX0xJQlJBUllfREVTVElOQVRJT05fVU5TUEVDSUZJRUQQABIKCgZHSVRIVUIQChITCg9QQUNLQUdFX01BTkFHRVIQFDpKChBtZXRob2Rfc2lnbmF0dXJlEh4uZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMYmwggAygJUg9tZXRob2RTaWduYXR1cmU6QwoMZGVmYXVsdF9ob3N0Eh8uZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VPcHRpb25zGJkIIAEoCVILZGVmYXVsdEhvc3Q6QwoMb2F1dGhfc2NvcGVzEh8uZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VPcHRpb25zGJoIIAEoCVILb2F1dGhTY29wZXM6RAoLYXBpX3ZlcnNpb24SHy5nb29nbGUucHJvdG9idWYuU2VydmljZU9wdGlvbnMYwbqr+gEgASgJUgphcGlWZXJzaW9uQqkBCg5jb20uZ29vZ2xlLmFwaUILQ2xpZW50UHJvdG9QAVpBZ29vZ2xlLmdvbGFuZy5vcmcvZ2VucHJvdG8vZ29vZ2xlYXBpcy9hcGkvYW5ub3RhdGlvbnM7YW5ub3RhdGlvbnOiAgNHQViqAgpHb29nbGUuQXBpygIKR29vZ2xlXEFwaeICFkdvb2dsZVxBcGlcR1BCTWV0YWRhdGHqAgtHb29nbGU6OkFwaWIGcHJvdG8z",[dl("Ch1nb29nbGUvYXBpL2xhdW5jaF9zdGFnZS5wcm90bxIKZ29vZ2xlLmFwaSqMAQoLTGF1bmNoU3RhZ2USHAoYTEFVTkNIX1NUQUdFX1VOU1BFQ0lGSUVEEAASEQoNVU5JTVBMRU1FTlRFRBAGEg0KCVBSRUxBVU5DSBAHEhAKDEVBUkxZX0FDQ0VTUxABEgkKBUFMUEhBEAISCAoEQkVUQRADEgYKAkdBEAQSDgoKREVQUkVDQVRFRBAFQpoBCg5jb20uZ29vZ2xlLmFwaUIQTGF1bmNoU3RhZ2VQcm90b1ABWi1nb29nbGUuZ29sYW5nLm9yZy9nZW5wcm90by9nb29nbGVhcGlzL2FwaTthcGmiAgNHQViqAgpHb29nbGUuQXBpygIKR29vZ2xlXEFwaeICFkdvb2dsZVxBcGlcR1BCTWV0YWRhdGHqAgtHb29nbGU6OkFwaWIGcHJvdG8z"),bi,pl]),sd=dl("Ch9nb29nbGUvYXBpL2ZpZWxkX2JlaGF2aW9yLnByb3RvEgpnb29nbGUuYXBpKrYBCg1GaWVsZEJlaGF2aW9yEh4KGkZJRUxEX0JFSEFWSU9SX1VOU1BFQ0lGSUVEEAASDAoIT1BUSU9OQUwQARIMCghSRVFVSVJFRBACEg8KC09VVFBVVF9PTkxZEAMSDgoKSU5QVVRfT05MWRAEEg0KCUlNTVVUQUJMRRAFEhIKDlVOT1JERVJFRF9MSVNUEAYSFQoRTk9OX0VNUFRZX0RFRkFVTFQQBxIOCgpJREVOVElGSUVSEAg6ZAoOZmllbGRfYmVoYXZpb3ISHS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zGJwIIAMoDjIZLmdvb2dsZS5hcGkuRmllbGRCZWhhdmlvckICEABSDWZpZWxkQmVoYXZpb3JCsAEKDmNvbS5nb29nbGUuYXBpQhJGaWVsZEJlaGF2aW9yUHJvdG9QAVpBZ29vZ2xlLmdvbGFuZy5vcmcvZ2VucHJvdG8vZ29vZ2xlYXBpcy9hcGkvYW5ub3RhdGlvbnM7YW5ub3RhdGlvbnOiAgNHQViqAgpHb29nbGUuQXBpygIKR29vZ2xlXEFwaeICFkdvb2dsZVxBcGlcR1BCTWV0YWRhdGHqAgtHb29nbGU6OkFwaWIGcHJvdG8z",[bi]),id=dl("Chlnb29nbGUvYXBpL3Jlc291cmNlLnByb3RvEgpnb29nbGUuYXBpIu4CChJSZXNvdXJjZURlc2NyaXB0b3ISDAoEdHlwZRgBIAEoCRIPCgdwYXR0ZXJuGAIgAygJEhIKCm5hbWVfZmllbGQYAyABKAkSNwoHaGlzdG9yeRgEIAEoDjImLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLkhpc3RvcnkSDgoGcGx1cmFsGAUgASgJEhAKCHNpbmd1bGFyGAYgASgJEjMKBXN0eWxlGAogAygOMiQuZ29vZ2xlLmFwaS5SZXNvdXJjZURlc2NyaXB0b3IuU3R5bGUiWwoHSGlzdG9yeRIXChNISVNUT1JZX1VOU1BFQ0lGSUVEEAASHQoZT1JJR0lOQUxMWV9TSU5HTEVfUEFUVEVSThABEhgKFEZVVFVSRV9NVUxUSV9QQVRURVJOEAIiOAoFU3R5bGUSFQoRU1RZTEVfVU5TUEVDSUZJRUQQABIYChRERUNMQVJBVElWRV9GUklFTkRMWRABIjUKEVJlc291cmNlUmVmZXJlbmNlEgwKBHR5cGUYASABKAkSEgoKY2hpbGRfdHlwZRgCIAEoCTpsChJyZXNvdXJjZV9yZWZlcmVuY2USHS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zGJ8IIAEoCzIdLmdvb2dsZS5hcGkuUmVzb3VyY2VSZWZlcmVuY2VSEXJlc291cmNlUmVmZXJlbmNlOm4KE3Jlc291cmNlX2RlZmluaXRpb24SHC5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMYnQggAygLMh4uZ29vZ2xlLmFwaS5SZXNvdXJjZURlc2NyaXB0b3JSEnJlc291cmNlRGVmaW5pdGlvbjpcCghyZXNvdXJjZRIfLmdvb2dsZS5wcm90b2J1Zi5NZXNzYWdlT3B0aW9ucxidCCABKAsyHi5nb29nbGUuYXBpLlJlc291cmNlRGVzY3JpcHRvclIIcmVzb3VyY2VCqwEKDmNvbS5nb29nbGUuYXBpQg1SZXNvdXJjZVByb3RvUAFaQWdvb2dsZS5nb2xhbmcub3JnL2dlbnByb3RvL2dvb2dsZWFwaXMvYXBpL2Fubm90YXRpb25zO2Fubm90YXRpb25zogIDR0FYqgIKR29vZ2xlLkFwacoCCkdvb2dsZVxBcGniAhZHb29nbGVcQXBpXEdQQk1ldGFkYXRh6gILR29vZ2xlOjpBcGliBnByb3RvMw",[bi]),ld=Vc(dl("Ch1hcGkvdjEvYWN0aXZpdHlfc2VydmljZS5wcm90bxIMbWVtb3MuYXBpLnYxIsEDCghBY3Rpdml0eRIUCgRuYW1lGAEgASgJQgbgQQPgQQgSFAoHY3JlYXRvchgCIAEoCUID4EEDEi4KBHR5cGUYAyABKA4yGy5tZW1vcy5hcGkudjEuQWN0aXZpdHkuVHlwZUID4EEDEjAKBWxldmVsGAQgASgOMhwubWVtb3MuYXBpLnYxLkFjdGl2aXR5LkxldmVsQgPgQQMSNAoLY3JlYXRlX3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQMSMwoHcGF5bG9hZBgGIAEoCzIdLm1lbW9zLmFwaS52MS5BY3Rpdml0eVBheWxvYWRCA+BBAyIuCgRUeXBlEhQKEFRZUEVfVU5TUEVDSUZJRUQQABIQCgxNRU1PX0NPTU1FTlQQASI9CgVMZXZlbBIVChFMRVZFTF9VTlNQRUNJRklFRBAAEggKBElORk8QARIICgRXQVJOEAISCQoFRVJST1IQAzpN6kFKChVtZW1vcy5hcGkudjEvQWN0aXZpdHkSFWFjdGl2aXRpZXMve2FjdGl2aXR5fRoEbmFtZSoKYWN0aXZpdGllczIIYWN0aXZpdHkiXgoPQWN0aXZpdHlQYXlsb2FkEkAKDG1lbW9fY29tbWVudBgBIAEoCzIoLm1lbW9zLmFwaS52MS5BY3Rpdml0eU1lbW9Db21tZW50UGF5bG9hZEgAQgkKB3BheWxvYWQiQAoaQWN0aXZpdHlNZW1vQ29tbWVudFBheWxvYWQSDAoEbWVtbxgBIAEoCRIUCgxyZWxhdGVkX21lbW8YAiABKAkiPgoVTGlzdEFjdGl2aXRpZXNSZXF1ZXN0EhEKCXBhZ2Vfc2l6ZRgBIAEoBRISCgpwYWdlX3Rva2VuGAIgASgJIl0KFkxpc3RBY3Rpdml0aWVzUmVzcG9uc2USKgoKYWN0aXZpdGllcxgBIAMoCzIWLm1lbW9zLmFwaS52MS5BY3Rpdml0eRIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkiQQoSR2V0QWN0aXZpdHlSZXF1ZXN0EisKBG5hbWUYASABKAlCHeBBAvpBFwoVbWVtb3MuYXBpLnYxL0FjdGl2aXR5Mv8BCg9BY3Rpdml0eVNlcnZpY2USdwoOTGlzdEFjdGl2aXRpZXMSIy5tZW1vcy5hcGkudjEuTGlzdEFjdGl2aXRpZXNSZXF1ZXN0GiQubWVtb3MuYXBpLnYxLkxpc3RBY3Rpdml0aWVzUmVzcG9uc2UiGoLT5JMCFBISL2FwaS92MS9hY3Rpdml0aWVzEnMKC0dldEFjdGl2aXR5EiAubWVtb3MuYXBpLnYxLkdldEFjdGl2aXR5UmVxdWVzdBoWLm1lbW9zLmFwaS52MS5BY3Rpdml0eSIq2kEEbmFtZYLT5JMCHRIbL2FwaS92MS97bmFtZT1hY3Rpdml0aWVzLyp9Qq8BChBjb20ubWVtb3MuYXBpLnYxQhRBY3Rpdml0eVNlcnZpY2VQcm90b1ABWjNnaXRodWIuY29tL2hyeWdvL2RpdmluZXNlbnNlL3Byb3RvL2dlbi9hcGkvdjE7YXBpdjGiAgNNQViqAgxNZW1vcy5BcGkuVjHKAgxNZW1vc1xBcGlcVjHiAhhNZW1vc1xBcGlcVjFcR1BCTWV0YWRhdGHqAg5NZW1vczo6QXBpOjpWMWIGcHJvdG8z",[rd,od,sd,id,ul]),0),cd=dl("ChdhcGkvdjEvYWlfc2VydmljZS5wcm90bxIMbWVtb3MuYXBpLnYxIkcKGFNjaGVkdWxlQWdlbnRDaGF0UmVxdWVzdBIUCgdtZXNzYWdlGAEgASgJQgPgQQISFQoNdXNlcl90aW1lem9uZRgCIAEoCSItChlTY2hlZHVsZUFnZW50Q2hhdFJlc3BvbnNlEhAKCHJlc3BvbnNlGAEgASgJIksKG1NjaGVkdWxlQWdlbnRTdHJlYW1SZXNwb25zZRINCgVldmVudBgBIAEoCRIPCgdjb250ZW50GAIgASgJEgwKBGRvbmUYAyABKAgiOgoVU2VtYW50aWNTZWFyY2hSZXF1ZXN0EhIKBXF1ZXJ5GAEgASgJQgPgQQISDQoFbGltaXQYAiABKAUiRQoWU2VtYW50aWNTZWFyY2hSZXNwb25zZRIrCgdyZXN1bHRzGAEgAygLMhoubWVtb3MuYXBpLnYxLlNlYXJjaFJlc3VsdCI8CgxTZWFyY2hSZXN1bHQSDAoEbmFtZRgBIAEoCRIPCgdzbmlwcGV0GAIgASgJEg0KBXNjb3JlGAMgASgCIjkKElN1Z2dlc3RUYWdzUmVxdWVzdBIUCgdjb250ZW50GAEgASgJQgPgQQISDQoFbGltaXQYAiABKAUiIwoTU3VnZ2VzdFRhZ3NSZXNwb25zZRIMCgR0YWdzGAEgAygJIrACCgtDaGF0UmVxdWVzdBIUCgdtZXNzYWdlGAEgASgJQgPgQQISDwoHaGlzdG9yeRgCIAMoCRIVCg11c2VyX3RpbWV6b25lGAMgASgJEjwKE3NjaGVkdWxlX3F1ZXJ5X21vZGUYBCABKA4yHy5tZW1vcy5hcGkudjEuU2NoZWR1bGVRdWVyeU1vZGUSKwoKYWdlbnRfdHlwZRgFIAEoDjIXLm1lbW9zLmFwaS52MS5BZ2VudFR5cGUSFwoPY29udmVyc2F0aW9uX2lkGAYgASgFEhwKFGlzX3RlbXBfY29udmVyc2F0aW9uGAcgASgIEhEKCWdlZWtfbW9kZRgKIAEoCBIWCg5ldm9sdXRpb25fbW9kZRgMIAEoCBIWCg5kZXZpY2VfY29udGV4dBgLIAEoCSLyAQoOQUlDb252ZXJzYXRpb24SCgoCaWQYASABKAUSCwoDdWlkGAIgASgJEhIKCmNyZWF0b3JfaWQYAyABKAUSDQoFdGl0bGUYBCABKAkSKgoJcGFycm90X2lkGAUgASgOMhcubWVtb3MuYXBpLnYxLkFnZW50VHlwZRIOCgZwaW5uZWQYBiABKAgSEgoKY3JlYXRlZF90cxgHIAEoAxISCgp1cGRhdGVkX3RzGAggASgDEikKCG1lc3NhZ2VzGAkgAygLMhcubWVtb3MuYXBpLnYxLkFJTWVzc2FnZRIVCg1tZXNzYWdlX2NvdW50GAogASgFIpABCglBSU1lc3NhZ2USCgoCaWQYASABKAUSCwoDdWlkGAIgASgJEhcKD2NvbnZlcnNhdGlvbl9pZBgDIAEoBRIMCgR0eXBlGAQgASgJEgwKBHJvbGUYBSABKAkSDwoHY29udGVudBgGIAEoCRIQCghtZXRhZGF0YRgHIAEoCRISCgpjcmVhdGVkX3RzGAggASgDIhwKGkxpc3RBSUNvbnZlcnNhdGlvbnNSZXF1ZXN0IlIKG0xpc3RBSUNvbnZlcnNhdGlvbnNSZXNwb25zZRIzCg1jb252ZXJzYXRpb25zGAEgAygLMhwubWVtb3MuYXBpLnYxLkFJQ29udmVyc2F0aW9uIiYKGEdldEFJQ29udmVyc2F0aW9uUmVxdWVzdBIKCgJpZBgBIAEoBSJYChtDcmVhdGVBSUNvbnZlcnNhdGlvblJlcXVlc3QSDQoFdGl0bGUYASABKAkSKgoJcGFycm90X2lkGAIgASgOMhcubWVtb3MuYXBpLnYxLkFnZW50VHlwZSJnChtVcGRhdGVBSUNvbnZlcnNhdGlvblJlcXVlc3QSCgoCaWQYASABKAUSEgoFdGl0bGUYAiABKAlIAIgBARITCgZwaW5uZWQYAyABKAhIAYgBAUIICgZfdGl0bGVCCQoHX3Bpbm5lZCIpChtEZWxldGVBSUNvbnZlcnNhdGlvblJlcXVlc3QSCgoCaWQYASABKAUiOgoaQWRkQ29udGV4dFNlcGFyYXRvclJlcXVlc3QSHAoPY29udmVyc2F0aW9uX2lkGAEgASgFQgPgQQIiXAoTTGlzdE1lc3NhZ2VzUmVxdWVzdBIcCg9jb252ZXJzYXRpb25faWQYASABKAVCA+BBAhINCgVsaW1pdBgCIAEoBRIYChBsYXN0X21lc3NhZ2VfdWlkGAMgASgJIpsBChRMaXN0TWVzc2FnZXNSZXNwb25zZRIpCghtZXNzYWdlcxgBIAMoCzIXLm1lbW9zLmFwaS52MS5BSU1lc3NhZ2USEAoIaGFzX21vcmUYAiABKAgSEwoLdG90YWxfY291bnQYAyABKAUSGgoSbGF0ZXN0X21lc3NhZ2VfdWlkGAQgASgJEhUKDXN5bmNfcmVxdWlyZWQYBSABKAgiQAogQ2xlYXJDb252ZXJzYXRpb25NZXNzYWdlc1JlcXVlc3QSHAoPY29udmVyc2F0aW9uX2lkGAEgASgFQgPgQQIiPwoPU3RvcENoYXRSZXF1ZXN0EhwKD2NvbnZlcnNhdGlvbl9pZBgBIAEoBUID4EECEg4KBnJlYXNvbhgCIAEoCSJmChBEYW5nZXJCbG9ja0V2ZW50EhEKCW9wZXJhdGlvbhgBIAEoCRIOCgZyZWFzb24YAiABKAkSFwoPcGF0dGVybl9tYXRjaGVkGAMgASgJEhYKDmJ5cGFzc19hbGxvd2VkGAQgASgIItgCCgxDaGF0UmVzcG9uc2USDwoHY29udGVudBgBIAEoCRIPCgdzb3VyY2VzGAIgAygJEgwKBGRvbmUYAyABKAgSRgoYc2NoZWR1bGVfY3JlYXRpb25faW50ZW50GAQgASgLMiQubWVtb3MuYXBpLnYxLlNjaGVkdWxlQ3JlYXRpb25JbnRlbnQSQAoVc2NoZWR1bGVfcXVlcnlfcmVzdWx0GAUgASgLMiEubWVtb3MuYXBpLnYxLlNjaGVkdWxlUXVlcnlSZXN1bHQSEgoKZXZlbnRfdHlwZRgGIAEoCRISCgpldmVudF9kYXRhGAcgASgJEi8KCmV2ZW50X21ldGEYCCABKAsyGy5tZW1vcy5hcGkudjEuRXZlbnRNZXRhZGF0YRI1Cg9zZXNzaW9uX3N1bW1hcnkYCSABKAsyHC5tZW1vcy5hcGkudjEuU2Vzc2lvblN1bW1hcnkiWwoWU2NoZWR1bGVDcmVhdGlvbkludGVudBIQCghkZXRlY3RlZBgBIAEoCBIcChRzY2hlZHVsZV9kZXNjcmlwdGlvbhgCIAEoCRIRCglyZWFzb25pbmcYAyABKAkijQEKE1NjaGVkdWxlUXVlcnlSZXN1bHQSEAoIZGV0ZWN0ZWQYASABKAgSMAoJc2NoZWR1bGVzGAIgAygLMh0ubWVtb3MuYXBpLnYxLlNjaGVkdWxlU3VtbWFyeRIeChZ0aW1lX3JhbmdlX2Rlc2NyaXB0aW9uGAMgASgJEhIKCnF1ZXJ5X3R5cGUYBCABKAkimwEKD1NjaGVkdWxlU3VtbWFyeRILCgN1aWQYASABKAkSDQoFdGl0bGUYAiABKAkSEAoIc3RhcnRfdHMYAyABKAMSDgoGZW5kX3RzGAQgASgDEg8KB2FsbF9kYXkYBSABKAgSEAoIbG9jYXRpb24YBiABKAkSFwoPcmVjdXJyZW5jZV9ydWxlGAcgASgJEg4KBnN0YXR1cxgIIAEoCSI6ChZHZXRSZWxhdGVkTWVtb3NSZXF1ZXN0EhEKBG5hbWUYASABKAlCA+BBAhINCgVsaW1pdBgCIAEoBSJEChdHZXRSZWxhdGVkTWVtb3NSZXNwb25zZRIpCgVtZW1vcxgBIAMoCzIaLm1lbW9zLmFwaS52MS5TZWFyY2hSZXN1bHQi3QEKE1BhcnJvdFNlbGZDb2duaXRpb24SDAoEbmFtZRgBIAEoCRINCgVlbW9qaRgCIAEoCRINCgV0aXRsZRgDIAEoCRITCgtwZXJzb25hbGl0eRgEIAMoCRIUCgxjYXBhYmlsaXRpZXMYBSADKAkSEwoLbGltaXRhdGlvbnMYBiADKAkSFQoNd29ya2luZ19zdHlsZRgHIAEoCRIWCg5mYXZvcml0ZV90b29scxgIIAMoCRIZChFzZWxmX2ludHJvZHVjdGlvbhgJIAEoCRIQCghmdW5fZmFjdBgKIAEoCSJRCh1HZXRQYXJyb3RTZWxmQ29nbml0aW9uUmVxdWVzdBIwCgphZ2VudF90eXBlGAEgASgOMhcubWVtb3MuYXBpLnYxLkFnZW50VHlwZUID4EECIlsKHkdldFBhcnJvdFNlbGZDb2duaXRpb25SZXNwb25zZRI5Cg5zZWxmX2NvZ25pdGlvbhgBIAEoCzIhLm1lbW9zLmFwaS52MS5QYXJyb3RTZWxmQ29nbml0aW9uIhQKEkxpc3RQYXJyb3RzUmVxdWVzdCJAChNMaXN0UGFycm90c1Jlc3BvbnNlEikKB3BhcnJvdHMYASADKAsyGC5tZW1vcy5hcGkudjEuUGFycm90SW5mbyKCAQoKUGFycm90SW5mbxIrCgphZ2VudF90eXBlGAEgASgOMhcubWVtb3MuYXBpLnYxLkFnZW50VHlwZRIMCgRuYW1lGAIgASgJEjkKDnNlbGZfY29nbml0aW9uGAMgASgLMiEubWVtb3MuYXBpLnYxLlBhcnJvdFNlbGZDb2duaXRpb24iWwoXRGV0ZWN0RHVwbGljYXRlc1JlcXVlc3QSDQoFdGl0bGUYASABKAkSFAoHY29udGVudBgCIAEoCUID4EECEgwKBHRhZ3MYAyADKAkSDQoFdG9wX2sYBCABKAUitQEKGERldGVjdER1cGxpY2F0ZXNSZXNwb25zZRIVCg1oYXNfZHVwbGljYXRlGAEgASgIEhMKC2hhc19yZWxhdGVkGAIgASgIEi0KCmR1cGxpY2F0ZXMYAyADKAsyGS5tZW1vcy5hcGkudjEuU2ltaWxhck1lbW8SKgoHcmVsYXRlZBgEIAMoCzIZLm1lbW9zLmFwaS52MS5TaW1pbGFyTWVtbxISCgpsYXRlbmN5X21zGAUgASgDIrUBCgtTaW1pbGFyTWVtbxIKCgJpZBgBIAEoCRIMCgRuYW1lGAIgASgJEg0KBXRpdGxlGAMgASgJEg8KB3NuaXBwZXQYBCABKAkSEgoKc2ltaWxhcml0eRgFIAEoARITCgtzaGFyZWRfdGFncxgGIAMoCRINCgVsZXZlbBgHIAEoCRI0CglicmVha2Rvd24YCCABKAsyIS5tZW1vcy5hcGkudjEuU2ltaWxhcml0eUJyZWFrZG93biJOChNTaW1pbGFyaXR5QnJlYWtkb3duEg4KBnZlY3RvchgBIAEoARIUCgx0YWdfY29fb2NjdXIYAiABKAESEQoJdGltZV9wcm94GAMgASgBIkcKEU1lcmdlTWVtb3NSZXF1ZXN0EhgKC3NvdXJjZV9uYW1lGAEgASgJQgPgQQISGAoLdGFyZ2V0X25hbWUYAiABKAlCA+BBAiIpChJNZXJnZU1lbW9zUmVzcG9uc2USEwoLbWVyZ2VkX25hbWUYASABKAkiRgoQTGlua01lbW9zUmVxdWVzdBIYCgttZW1vX25hbWVfMRgBIAEoCUID4EECEhgKC21lbW9fbmFtZV8yGAIgASgJQgPgQQIiJAoRTGlua01lbW9zUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCJSChhHZXRLbm93bGVkZ2VHcmFwaFJlcXVlc3QSDAoEdGFncxgBIAMoCRIWCg5taW5faW1wb3J0YW5jZRgCIAEoARIQCghjbHVzdGVycxgDIAMoBSKmAQoZR2V0S25vd2xlZGdlR3JhcGhSZXNwb25zZRImCgVub2RlcxgBIAMoCzIXLm1lbW9zLmFwaS52MS5HcmFwaE5vZGUSJgoFZWRnZXMYAiADKAsyFy5tZW1vcy5hcGkudjEuR3JhcGhFZGdlEicKBXN0YXRzGAMgASgLMhgubWVtb3MuYXBpLnYxLkdyYXBoU3RhdHMSEAoIYnVpbGRfbXMYBCABKAMiewoJR3JhcGhOb2RlEgoKAmlkGAEgASgJEg0KBWxhYmVsGAIgASgJEgwKBHR5cGUYAyABKAkSDAoEdGFncxgEIAMoCRISCgppbXBvcnRhbmNlGAUgASgBEg8KB2NsdXN0ZXIYBiABKAUSEgoKY3JlYXRlZF90cxgHIAEoAyJJCglHcmFwaEVkZ2USDgoGc291cmNlGAEgASgJEg4KBnRhcmdldBgCIAEoCRIMCgR0eXBlGAMgASgJEg4KBndlaWdodBgEIAEoASKKAQoKR3JhcGhTdGF0cxISCgpub2RlX2NvdW50GAEgASgFEhIKCmVkZ2VfY291bnQYAiABKAUSFQoNY2x1c3Rlcl9jb3VudBgDIAEoBRISCgpsaW5rX2VkZ2VzGAQgASgFEhEKCXRhZ19lZGdlcxgFIAEoBRIWCg5zZW1hbnRpY19lZGdlcxgGIAEoBSIlChRHZXREdWVSZXZpZXdzUmVxdWVzdBINCgVsaW1pdBgBIAEoBSJTChVHZXREdWVSZXZpZXdzUmVzcG9uc2USJwoFaXRlbXMYASADKAsyGC5tZW1vcy5hcGkudjEuUmV2aWV3SXRlbRIRCgl0b3RhbF9kdWUYAiABKAUiywEKClJldmlld0l0ZW0SEAoIbWVtb191aWQYASABKAkSEQoJbWVtb19uYW1lGAIgASgJEg0KBXRpdGxlGAMgASgJEg8KB3NuaXBwZXQYBCABKAkSDAoEdGFncxgFIAMoCRIWCg5sYXN0X3Jldmlld190cxgGIAEoAxIUCgxyZXZpZXdfY291bnQYByABKAUSFgoObmV4dF9yZXZpZXdfdHMYCCABKAMSEAoIcHJpb3JpdHkYCSABKAESEgoKY3JlYXRlZF90cxgKIAEoAyJfChNSZWNvcmRSZXZpZXdSZXF1ZXN0EhUKCG1lbW9fdWlkGAEgASgJQgPgQQISMQoHcXVhbGl0eRgCIAEoDjIbLm1lbW9zLmFwaS52MS5SZXZpZXdRdWFsaXR5QgPgQQIiFwoVR2V0UmV2aWV3U3RhdHNSZXF1ZXN0IskBChZHZXRSZXZpZXdTdGF0c1Jlc3BvbnNlEhMKC3RvdGFsX21lbW9zGAEgASgFEhEKCWR1ZV90b2RheRgCIAEoBRIWCg5yZXZpZXdlZF90b2RheRgDIAEoBRIRCgluZXdfbWVtb3MYBCABKAUSFgoObWFzdGVyZWRfbWVtb3MYBSABKAUSEwoLc3RyZWFrX2RheXMYBiABKAUSFQoNdG90YWxfcmV2aWV3cxgHIAEoBRIYChBhdmVyYWdlX2FjY3VyYWN5GAggASgFIsACCg1FdmVudE1ldGFkYXRhEhMKC2R1cmF0aW9uX21zGAEgASgDEhkKEXRvdGFsX2R1cmF0aW9uX21zGAIgASgDEhEKCXRvb2xfbmFtZRgDIAEoCRIPCgd0b29sX2lkGAQgASgJEhQKDGlucHV0X3Rva2VucxgFIAEoBRIVCg1vdXRwdXRfdG9rZW5zGAYgASgFEhoKEmNhY2hlX3dyaXRlX3Rva2VucxgHIAEoBRIZChFjYWNoZV9yZWFkX3Rva2VucxgIIAEoBRIOCgZzdGF0dXMYCSABKAkSEQoJZXJyb3JfbXNnGAogASgJEhUKDWlucHV0X3N1bW1hcnkYCyABKAkSFgoOb3V0cHV0X3N1bW1hcnkYDCABKAkSEQoJZmlsZV9wYXRoGA0gASgJEhIKCmxpbmVfY291bnQYDiABKAUitQMKDlNlc3Npb25TdW1tYXJ5EhIKCnNlc3Npb25faWQYASABKAkSDAoEbW9kZRgRIAEoCRIZChF0b3RhbF9kdXJhdGlvbl9tcxgCIAEoAxIcChR0aGlua2luZ19kdXJhdGlvbl9tcxgDIAEoAxIYChB0b29sX2R1cmF0aW9uX21zGAQgASgDEh4KFmdlbmVyYXRpb25fZHVyYXRpb25fbXMYBSABKAMSGgoSdG90YWxfaW5wdXRfdG9rZW5zGAYgASgFEhsKE3RvdGFsX291dHB1dF90b2tlbnMYByABKAUSIAoYdG90YWxfY2FjaGVfd3JpdGVfdG9rZW5zGAggASgFEh8KF3RvdGFsX2NhY2hlX3JlYWRfdG9rZW5zGAkgASgFEhcKD3Rvb2xfY2FsbF9jb3VudBgKIAEoBRISCgp0b29sc191c2VkGAsgAygJEhYKDmZpbGVzX21vZGlmaWVkGAwgASgFEhIKCmZpbGVfcGF0aHMYDSADKAkSFgoOdG90YWxfY29zdF91c2QYECABKAESDgoGc3RhdHVzGA4gASgJEhEKCWVycm9yX21zZxgPIAEoCSLVBAoMU2Vzc2lvblN0YXRzEgoKAmlkGAEgASgDEhIKCnNlc3Npb25faWQYAiABKAkSFwoPY29udmVyc2F0aW9uX2lkGAMgASgDEg8KB3VzZXJfaWQYBCABKAUSEgoKYWdlbnRfdHlwZRgFIAEoCRISCgpzdGFydGVkX2F0GAYgASgDEhAKCGVuZGVkX2F0GAcgASgDEhkKEXRvdGFsX2R1cmF0aW9uX21zGAggASgDEhwKFHRoaW5raW5nX2R1cmF0aW9uX21zGAkgASgDEhgKEHRvb2xfZHVyYXRpb25fbXMYCiABKAMSHgoWZ2VuZXJhdGlvbl9kdXJhdGlvbl9tcxgLIAEoAxIUCgxpbnB1dF90b2tlbnMYDCABKAUSFQoNb3V0cHV0X3Rva2VucxgNIAEoBRIaChJjYWNoZV93cml0ZV90b2tlbnMYDiABKAUSGQoRY2FjaGVfcmVhZF90b2tlbnMYDyABKAUSFAoMdG90YWxfdG9rZW5zGBAgASgFEhYKDnRvdGFsX2Nvc3RfdXNkGBEgASgBEhcKD3Rvb2xfY2FsbF9jb3VudBgSIAEoBRISCgp0b29sc191c2VkGBMgAygJEhYKDmZpbGVzX21vZGlmaWVkGBQgASgFEhIKCmZpbGVfcGF0aHMYFSADKAkSEgoKbW9kZWxfdXNlZBgWIAEoCRIQCghpc19lcnJvchgXIAEoCBIVCg1lcnJvcl9tZXNzYWdlGBggASgJEhIKCmNyZWF0ZWRfYXQYGSABKAMSEgoKdXBkYXRlZF9hdBgaIAEoAyIxChZHZXRTZXNzaW9uU3RhdHNSZXF1ZXN0EhcKCnNlc3Npb25faWQYASABKAlCA+BBAiJGChdMaXN0U2Vzc2lvblN0YXRzUmVxdWVzdBINCgVsaW1pdBgBIAEoBRIOCgZvZmZzZXQYAiABKAUSDAoEZGF5cxgDIAEoBSJ1ChhMaXN0U2Vzc2lvblN0YXRzUmVzcG9uc2USLAoIc2Vzc2lvbnMYASADKAsyGi5tZW1vcy5hcGkudjEuU2Vzc2lvblN0YXRzEhMKC3RvdGFsX2NvdW50GAIgASgDEhYKDnRvdGFsX2Nvc3RfdXNkGAMgASgBIiMKE0dldENvc3RTdGF0c1JlcXVlc3QSDAoEZGF5cxgBIAEoBSLHAQoJQ29zdFN0YXRzEhYKDnRvdGFsX2Nvc3RfdXNkGAEgASgBEhkKEWRhaWx5X2F2ZXJhZ2VfdXNkGAIgASgBEhUKDXNlc3Npb25fY291bnQYAyABKAMSOgoWbW9zdF9leHBlbnNpdmVfc2Vzc2lvbhgEIAEoCzIaLm1lbW9zLmFwaS52MS5TZXNzaW9uU3RhdHMSNAoPZGFpbHlfYnJlYWtkb3duGAUgAygLMhsubWVtb3MuYXBpLnYxLkRhaWx5Q29zdERhdGEiRgoNRGFpbHlDb3N0RGF0YRIMCgRkYXRlGAEgASgJEhAKCGNvc3RfdXNkGAIgASgBEhUKDXNlc3Npb25fY291bnQYAyABKAMiqgEKEFVzZXJDb3N0U2V0dGluZ3MSGAoQZGFpbHlfYnVkZ2V0X3VzZBgBIAEoARIhChlwZXJfc2Vzc2lvbl90aHJlc2hvbGRfdXNkGAIgASgBEhUKDWFsZXJ0X2VuYWJsZWQYAyABKAgSEwoLYWxlcnRfZW1haWwYBCABKAgSFAoMYWxlcnRfaW5fYXBwGAUgASgIEhcKD2J1ZGdldF9yZXNldF9hdBgGIAEoAyKaAgoaU2V0VXNlckNvc3RTZXR0aW5nc1JlcXVlc3QSHQoQZGFpbHlfYnVkZ2V0X3VzZBgBIAEoAUgAiAEBEiYKGXBlcl9zZXNzaW9uX3RocmVzaG9sZF91c2QYAiABKAFIAYgBARIaCg1hbGVydF9lbmFibGVkGAMgASgISAKIAQESGAoLYWxlcnRfZW1haWwYBCABKAhIA4gBARIZCgxhbGVydF9pbl9hcHAYBSABKAhIBIgBAUITChFfZGFpbHlfYnVkZ2V0X3VzZEIcChpfcGVyX3Nlc3Npb25fdGhyZXNob2xkX3VzZEIQCg5fYWxlcnRfZW5hYmxlZEIOCgxfYWxlcnRfZW1haWxCDwoNX2FsZXJ0X2luX2FwcCo3ChFTY2hlZHVsZVF1ZXJ5TW9kZRIICgRBVVRPEAASDAoIU1RBTkRBUkQQARIKCgZTVFJJQ1QQAiqCAQoJQWdlbnRUeXBlEhYKEkFHRU5UX1RZUEVfREVGQVVMVBAAEhMKD0FHRU5UX1RZUEVfTUVNTxABEhcKE0FHRU5UX1RZUEVfU0NIRURVTEUQAhIWChJBR0VOVF9UWVBFX0FNQVpJTkcQAxIXChNBR0VOVF9UWVBFX0NSRUFUSVZFEAQqlAEKDVJldmlld1F1YWxpdHkSHgoaUkVWSUVXX1FVQUxJVFlfVU5TUEVDSUZJRUQQABIYChRSRVZJRVdfUVVBTElUWV9BR0FJThABEhcKE1JFVklFV19RVUFMSVRZX0hBUkQQAhIXChNSRVZJRVdfUVVBTElUWV9HT09EEAMSFwoTUkVWSUVXX1FVQUxJVFlfRUFTWRAEMrQbCglBSVNlcnZpY2USeQoOU2VtYW50aWNTZWFyY2gSIy5tZW1vcy5hcGkudjEuU2VtYW50aWNTZWFyY2hSZXF1ZXN0GiQubWVtb3MuYXBpLnYxLlNlbWFudGljU2VhcmNoUmVzcG9uc2UiHILT5JMCFjoBKiIRL2FwaS92MS9haS9zZWFyY2gSdgoLU3VnZ2VzdFRhZ3MSIC5tZW1vcy5hcGkudjEuU3VnZ2VzdFRhZ3NSZXF1ZXN0GiEubWVtb3MuYXBpLnYxLlN1Z2dlc3RUYWdzUmVzcG9uc2UiIoLT5JMCHDoBKiIXL2FwaS92MS9haS9zdWdnZXN0LXRhZ3MSWwoEQ2hhdBIZLm1lbW9zLmFwaS52MS5DaGF0UmVxdWVzdBoaLm1lbW9zLmFwaS52MS5DaGF0UmVzcG9uc2UiGoLT5JMCFDoBKiIPL2FwaS92MS9haS9jaGF0MAEShgEKD0dldFJlbGF0ZWRNZW1vcxIkLm1lbW9zLmFwaS52MS5HZXRSZWxhdGVkTWVtb3NSZXF1ZXN0GiUubWVtb3MuYXBpLnYxLkdldFJlbGF0ZWRNZW1vc1Jlc3BvbnNlIiaC0+STAiASHi9hcGkvdjEve25hbWU9bWVtb3MvKn0vcmVsYXRlZBKrAQoWR2V0UGFycm90U2VsZkNvZ25pdGlvbhIrLm1lbW9zLmFwaS52MS5HZXRQYXJyb3RTZWxmQ29nbml0aW9uUmVxdWVzdBosLm1lbW9zLmFwaS52MS5HZXRQYXJyb3RTZWxmQ29nbml0aW9uUmVzcG9uc2UiNoLT5JMCMBIuL2FwaS92MS9haS9wYXJyb3RzL3thZ2VudF90eXBlfS9zZWxmLWNvZ25pdGlvbhJuCgtMaXN0UGFycm90cxIgLm1lbW9zLmFwaS52MS5MaXN0UGFycm90c1JlcXVlc3QaIS5tZW1vcy5hcGkudjEuTGlzdFBhcnJvdHNSZXNwb25zZSIagtPkkwIUEhIvYXBpL3YxL2FpL3BhcnJvdHMSigEKEERldGVjdER1cGxpY2F0ZXMSJS5tZW1vcy5hcGkudjEuRGV0ZWN0RHVwbGljYXRlc1JlcXVlc3QaJi5tZW1vcy5hcGkudjEuRGV0ZWN0RHVwbGljYXRlc1Jlc3BvbnNlIieC0+STAiE6ASoiHC9hcGkvdjEvYWkvZGV0ZWN0LWR1cGxpY2F0ZXMScgoKTWVyZ2VNZW1vcxIfLm1lbW9zLmFwaS52MS5NZXJnZU1lbW9zUmVxdWVzdBogLm1lbW9zLmFwaS52MS5NZXJnZU1lbW9zUmVzcG9uc2UiIYLT5JMCGzoBKiIWL2FwaS92MS9haS9tZXJnZS1tZW1vcxJuCglMaW5rTWVtb3MSHi5tZW1vcy5hcGkudjEuTGlua01lbW9zUmVxdWVzdBofLm1lbW9zLmFwaS52MS5MaW5rTWVtb3NSZXNwb25zZSIggtPkkwIaOgEqIhUvYXBpL3YxL2FpL2xpbmstbWVtb3MSiAEKEUdldEtub3dsZWRnZUdyYXBoEiYubWVtb3MuYXBpLnYxLkdldEtub3dsZWRnZUdyYXBoUmVxdWVzdBonLm1lbW9zLmFwaS52MS5HZXRLbm93bGVkZ2VHcmFwaFJlc3BvbnNlIiKC0+STAhwSGi9hcGkvdjEvYWkva25vd2xlZGdlLWdyYXBoEngKDUdldER1ZVJldmlld3MSIi5tZW1vcy5hcGkudjEuR2V0RHVlUmV2aWV3c1JlcXVlc3QaIy5tZW1vcy5hcGkudjEuR2V0RHVlUmV2aWV3c1Jlc3BvbnNlIh6C0+STAhgSFi9hcGkvdjEvYWkvcmV2aWV3cy9kdWUSegoMUmVjb3JkUmV2aWV3EiEubWVtb3MuYXBpLnYxLlJlY29yZFJldmlld1JlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiL4LT5JMCKToBKiIkL2FwaS92MS9haS9yZXZpZXdzL3ttZW1vX3VpZH0vcmVjb3JkEn0KDkdldFJldmlld1N0YXRzEiMubWVtb3MuYXBpLnYxLkdldFJldmlld1N0YXRzUmVxdWVzdBokLm1lbW9zLmFwaS52MS5HZXRSZXZpZXdTdGF0c1Jlc3BvbnNlIiCC0+STAhoSGC9hcGkvdjEvYWkvcmV2aWV3cy9zdGF0cxKMAQoTTGlzdEFJQ29udmVyc2F0aW9ucxIoLm1lbW9zLmFwaS52MS5MaXN0QUlDb252ZXJzYXRpb25zUmVxdWVzdBopLm1lbW9zLmFwaS52MS5MaXN0QUlDb252ZXJzYXRpb25zUmVzcG9uc2UiIILT5JMCGhIYL2FwaS92MS9haS9jb252ZXJzYXRpb25zEoABChFHZXRBSUNvbnZlcnNhdGlvbhImLm1lbW9zLmFwaS52MS5HZXRBSUNvbnZlcnNhdGlvblJlcXVlc3QaHC5tZW1vcy5hcGkudjEuQUlDb252ZXJzYXRpb24iJYLT5JMCHxIdL2FwaS92MS9haS9jb252ZXJzYXRpb25zL3tpZH0ShAEKFENyZWF0ZUFJQ29udmVyc2F0aW9uEikubWVtb3MuYXBpLnYxLkNyZWF0ZUFJQ29udmVyc2F0aW9uUmVxdWVzdBocLm1lbW9zLmFwaS52MS5BSUNvbnZlcnNhdGlvbiIjgtPkkwIdOgEqIhgvYXBpL3YxL2FpL2NvbnZlcnNhdGlvbnMSiQEKFFVwZGF0ZUFJQ29udmVyc2F0aW9uEikubWVtb3MuYXBpLnYxLlVwZGF0ZUFJQ29udmVyc2F0aW9uUmVxdWVzdBocLm1lbW9zLmFwaS52MS5BSUNvbnZlcnNhdGlvbiIogtPkkwIiOgEqMh0vYXBpL3YxL2FpL2NvbnZlcnNhdGlvbnMve2lkfRKAAQoURGVsZXRlQUlDb252ZXJzYXRpb24SKS5tZW1vcy5hcGkudjEuRGVsZXRlQUlDb252ZXJzYXRpb25SZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5IiWC0+STAh8qHS9hcGkvdjEvYWkvY29udmVyc2F0aW9ucy97aWR9EpgBChNBZGRDb250ZXh0U2VwYXJhdG9yEigubWVtb3MuYXBpLnYxLkFkZENvbnRleHRTZXBhcmF0b3JSZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ij+C0+STAjk6ASoiNC9hcGkvdjEvYWkvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uX2lkfS9zZXBhcmF0b3ISkgEKDExpc3RNZXNzYWdlcxIhLm1lbW9zLmFwaS52MS5MaXN0TWVzc2FnZXNSZXF1ZXN0GiIubWVtb3MuYXBpLnYxLkxpc3RNZXNzYWdlc1Jlc3BvbnNlIjuC0+STAjUSMy9hcGkvdjEvYWkvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uX2lkfS9tZXNzYWdlcxKgAQoZQ2xlYXJDb252ZXJzYXRpb25NZXNzYWdlcxIuLm1lbW9zLmFwaS52MS5DbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VzUmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSI7gtPkkwI1KjMvYXBpL3YxL2FpL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbl9pZH0vbWVzc2FnZXMSYgoIU3RvcENoYXQSHS5tZW1vcy5hcGkudjEuU3RvcENoYXRSZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ih+C0+STAhk6ASoiFC9hcGkvdjEvYWkvY2hhdC9zdG9wEn0KD0dldFNlc3Npb25TdGF0cxIkLm1lbW9zLmFwaS52MS5HZXRTZXNzaW9uU3RhdHNSZXF1ZXN0GhoubWVtb3MuYXBpLnYxLlNlc3Npb25TdGF0cyIogtPkkwIiEiAvYXBpL3YxL2FpL3Nlc3Npb25zL3tzZXNzaW9uX2lkfRJ+ChBMaXN0U2Vzc2lvblN0YXRzEiUubWVtb3MuYXBpLnYxLkxpc3RTZXNzaW9uU3RhdHNSZXF1ZXN0GiYubWVtb3MuYXBpLnYxLkxpc3RTZXNzaW9uU3RhdHNSZXNwb25zZSIbgtPkkwIVEhMvYXBpL3YxL2FpL3Nlc3Npb25zEmkKDEdldENvc3RTdGF0cxIhLm1lbW9zLmFwaS52MS5HZXRDb3N0U3RhdHNSZXF1ZXN0GhcubWVtb3MuYXBpLnYxLkNvc3RTdGF0cyIdgtPkkwIXEhUvYXBpL3YxL2FpL2Nvc3Qtc3RhdHMSbwoTR2V0VXNlckNvc3RTZXR0aW5ncxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoeLm1lbW9zLmFwaS52MS5Vc2VyQ29zdFNldHRpbmdzIiCC0+STAhoSGC9hcGkvdjEvYWkvY29zdC1zZXR0aW5ncxKEAQoTU2V0VXNlckNvc3RTZXR0aW5ncxIoLm1lbW9zLmFwaS52MS5TZXRVc2VyQ29zdFNldHRpbmdzUmVxdWVzdBoeLm1lbW9zLmFwaS52MS5Vc2VyQ29zdFNldHRpbmdzIiOC0+STAh06ASoyGC9hcGkvdjEvYWkvY29zdC1zZXR0aW5nczKqAgoUU2NoZWR1bGVBZ2VudFNlcnZpY2USfwoEQ2hhdBImLm1lbW9zLmFwaS52MS5TY2hlZHVsZUFnZW50Q2hhdFJlcXVlc3QaJy5tZW1vcy5hcGkudjEuU2NoZWR1bGVBZ2VudENoYXRSZXNwb25zZSImgtPkkwIgOgEqIhsvYXBpL3YxL3NjaGVkdWxlLWFnZW50L2NoYXQSkAEKCkNoYXRTdHJlYW0SJi5tZW1vcy5hcGkudjEuU2NoZWR1bGVBZ2VudENoYXRSZXF1ZXN0GikubWVtb3MuYXBpLnYxLlNjaGVkdWxlQWdlbnRTdHJlYW1SZXNwb25zZSItgtPkkwInOgEqIiIvYXBpL3YxL3NjaGVkdWxlLWFnZW50L2NoYXQvc3RyZWFtMAFCqQEKEGNvbS5tZW1vcy5hcGkudjFCDkFpU2VydmljZVByb3RvUAFaM2dpdGh1Yi5jb20vaHJ5Z28vZGl2aW5lc2Vuc2UvcHJvdG8vZ2VuL2FwaS92MTthcGl2MaICA01BWKoCDE1lbW9zLkFwaS5WMcoCDE1lbW9zXEFwaVxWMeICGE1lbW9zXEFwaVxWMVxHUEJNZXRhZGF0YeoCDk1lbW9zOjpBcGk6OlYxYgZwcm90bzM",[rd,sd,Il]),dd=pi(cd,3),ud=pi(cd,6),md=pi(cd,8),hd=pi(cd,27),gd=pi(cd,43);var pd=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.MEMO=1]="MEMO",e[e.SCHEDULE=2]="SCHEDULE",e[e.AMAZING=3]="AMAZING",e[e.CREATIVE=4]="CREATIVE",e))(pd||{}),bd=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AGAIN=1]="AGAIN",e[e.HARD=2]="HARD",e[e.GOOD=3]="GOOD",e[e.EASY=4]="EASY",e))(bd||{});const fd=Vc(cd,0),xd=Vc(cd,1),vd=dl("Ch9hcGkvdjEvYXR0YWNobWVudF9zZXJ2aWNlLnByb3RvEgxtZW1vcy5hcGkudjEitgIKCkF0dGFjaG1lbnQSEQoEbmFtZRgBIAEoCUID4EEIEjQKC2NyZWF0ZV90aW1lGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEDEhUKCGZpbGVuYW1lGAMgASgJQgPgQQISFAoHY29udGVudBgEIAEoDEID4EEEEhoKDWV4dGVybmFsX2xpbmsYBSABKAlCA+BBARIRCgR0eXBlGAYgASgJQgPgQQISEQoEc2l6ZRgHIAEoA0ID4EEDEhYKBG1lbW8YCCABKAlCA+BBAUgAiAEBOk/qQUwKF21lbW9zLmFwaS52MS9BdHRhY2htZW50EhhhdHRhY2htZW50cy97YXR0YWNobWVudH0qC2F0dGFjaG1lbnRzMgphdHRhY2htZW50QgcKBV9tZW1vImgKF0NyZWF0ZUF0dGFjaG1lbnRSZXF1ZXN0EjEKCmF0dGFjaG1lbnQYASABKAsyGC5tZW1vcy5hcGkudjEuQXR0YWNobWVudEID4EECEhoKDWF0dGFjaG1lbnRfaWQYAiABKAlCA+BBASJ1ChZMaXN0QXR0YWNobWVudHNSZXF1ZXN0EhYKCXBhZ2Vfc2l6ZRgBIAEoBUID4EEBEhcKCnBhZ2VfdG9rZW4YAiABKAlCA+BBARITCgZmaWx0ZXIYAyABKAlCA+BBARIVCghvcmRlcl9ieRgEIAEoCUID4EEBInUKF0xpc3RBdHRhY2htZW50c1Jlc3BvbnNlEi0KC2F0dGFjaG1lbnRzGAEgAygLMhgubWVtb3MuYXBpLnYxLkF0dGFjaG1lbnQSFwoPbmV4dF9wYWdlX3Rva2VuGAIgASgJEhIKCnRvdGFsX3NpemUYAyABKAUiRQoUR2V0QXR0YWNobWVudFJlcXVlc3QSLQoEbmFtZRgBIAEoCUIf4EEC+kEZChdtZW1vcy5hcGkudjEvQXR0YWNobWVudCKCAQoXVXBkYXRlQXR0YWNobWVudFJlcXVlc3QSMQoKYXR0YWNobWVudBgBIAEoCzIYLm1lbW9zLmFwaS52MS5BdHRhY2htZW50QgPgQQISNAoLdXBkYXRlX21hc2sYAiABKAsyGi5nb29nbGUucHJvdG9idWYuRmllbGRNYXNrQgPgQQIiSAoXRGVsZXRlQXR0YWNobWVudFJlcXVlc3QSLQoEbmFtZRgBIAEoCUIf4EEC+kEZChdtZW1vcy5hcGkudjEvQXR0YWNobWVudDLEBQoRQXR0YWNobWVudFNlcnZpY2USiQEKEENyZWF0ZUF0dGFjaG1lbnQSJS5tZW1vcy5hcGkudjEuQ3JlYXRlQXR0YWNobWVudFJlcXVlc3QaGC5tZW1vcy5hcGkudjEuQXR0YWNobWVudCI02kEKYXR0YWNobWVudILT5JMCIToKYXR0YWNobWVudCITL2FwaS92MS9hdHRhY2htZW50cxJ7Cg9MaXN0QXR0YWNobWVudHMSJC5tZW1vcy5hcGkudjEuTGlzdEF0dGFjaG1lbnRzUmVxdWVzdBolLm1lbW9zLmFwaS52MS5MaXN0QXR0YWNobWVudHNSZXNwb25zZSIbgtPkkwIVEhMvYXBpL3YxL2F0dGFjaG1lbnRzEnoKDUdldEF0dGFjaG1lbnQSIi5tZW1vcy5hcGkudjEuR2V0QXR0YWNobWVudFJlcXVlc3QaGC5tZW1vcy5hcGkudjEuQXR0YWNobWVudCIr2kEEbmFtZYLT5JMCHhIcL2FwaS92MS97bmFtZT1hdHRhY2htZW50cy8qfRKpAQoQVXBkYXRlQXR0YWNobWVudBIlLm1lbW9zLmFwaS52MS5VcGRhdGVBdHRhY2htZW50UmVxdWVzdBoYLm1lbW9zLmFwaS52MS5BdHRhY2htZW50IlTaQRZhdHRhY2htZW50LHVwZGF0ZV9tYXNrgtPkkwI1OgphdHRhY2htZW50MicvYXBpL3YxL3thdHRhY2htZW50Lm5hbWU9YXR0YWNobWVudHMvKn0SfgoQRGVsZXRlQXR0YWNobWVudBIlLm1lbW9zLmFwaS52MS5EZWxldGVBdHRhY2htZW50UmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSIr2kEEbmFtZYLT5JMCHiocL2FwaS92MS97bmFtZT1hdHRhY2htZW50cy8qfUKxAQoQY29tLm1lbW9zLmFwaS52MUIWQXR0YWNobWVudFNlcnZpY2VQcm90b1ABWjNnaXRodWIuY29tL2hyeWdvL2RpdmluZXNlbnNlL3Byb3RvL2dlbi9hcGkvdjE7YXBpdjGiAgNNQViqAgxNZW1vcy5BcGkuVjHKAgxNZW1vc1xBcGlcVjHiAhhNZW1vc1xBcGlcVjFcR1BCTWV0YWRhdGHqAg5NZW1vczo6QXBpOjpWMWIGcHJvdG8z",[rd,od,sd,id,Il,kl,ul]),yd=pi(vd,0),Ed=Vc(vd,0),Nd=dl("ChNhcGkvdjEvY29tbW9uLnByb3RvEgxtZW1vcy5hcGkudjEiKgoJUGFnZVRva2VuEg0KBWxpbWl0GAEgASgFEg4KBm9mZnNldBgCIAEoBSo4CgVTdGF0ZRIVChFTVEFURV9VTlNQRUNJRklFRBAAEgoKBk5PUk1BTBABEgwKCEFSQ0hJVkVEEAIqOQoJRGlyZWN0aW9uEhkKFURJUkVDVElPTl9VTlNQRUNJRklFRBAAEgcKA0FTQxABEggKBERFU0MQAkKmAQoQY29tLm1lbW9zLmFwaS52MUILQ29tbW9uUHJvdG9QAVozZ2l0aHViLmNvbS9ocnlnby9kaXZpbmVzZW5zZS9wcm90by9nZW4vYXBpL3YxO2FwaXYxogIDTUFYqgIMTWVtb3MuQXBpLlYxygIMTWVtb3NcQXBpXFYx4gIYTWVtb3NcQXBpXFYxXEdQQk1ldGFkYXRh6gIOTWVtb3M6OkFwaTo6VjFiBnByb3RvMw");var wd=(e=>(e[e.STATE_UNSPECIFIED=0]="STATE_UNSPECIFIED",e[e.NORMAL=1]="NORMAL",e[e.ARCHIVED=2]="ARCHIVED",e))(wd||{});const Ad=dl("ChlhcGkvdjEvdXNlcl9zZXJ2aWNlLnByb3RvEgxtZW1vcy5hcGkudjEi4AMKBFVzZXISEQoEbmFtZRgBIAEoCUID4EEIEioKBHJvbGUYAiABKA4yFy5tZW1vcy5hcGkudjEuVXNlci5Sb2xlQgPgQQISFQoIdXNlcm5hbWUYAyABKAlCA+BBAhISCgVlbWFpbBgEIAEoCUID4EEBEhkKDGRpc3BsYXlfbmFtZRgFIAEoCUID4EEBEhcKCmF2YXRhcl91cmwYBiABKAlCA+BBARIYCgtkZXNjcmlwdGlvbhgHIAEoCUID4EEBEhUKCHBhc3N3b3JkGAggASgJQgPgQQQSJwoFc3RhdGUYCSABKA4yEy5tZW1vcy5hcGkudjEuU3RhdGVCA+BBAhI0CgtjcmVhdGVfdGltZRgKIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBCA+BBAxI0Cgt1cGRhdGVfdGltZRgLIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBCA+BBAyI7CgRSb2xlEhQKEFJPTEVfVU5TUEVDSUZJRUQQABIICgRIT1NUEAESCQoFQURNSU4QAhIICgRVU0VSEAM6N+pBNAoRbWVtb3MuYXBpLnYxL1VzZXISDHVzZXJzL3t1c2VyfRoEbmFtZSoFdXNlcnMyBHVzZXIicwoQTGlzdFVzZXJzUmVxdWVzdBIWCglwYWdlX3NpemUYASABKAVCA+BBARIXCgpwYWdlX3Rva2VuGAIgASgJQgPgQQESEwoGZmlsdGVyGAMgASgJQgPgQQESGQoMc2hvd19kZWxldGVkGAQgASgIQgPgQQEiYwoRTGlzdFVzZXJzUmVzcG9uc2USIQoFdXNlcnMYASADKAsyEi5tZW1vcy5hcGkudjEuVXNlchIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkSEgoKdG90YWxfc2l6ZRgDIAEoBSJtCg5HZXRVc2VyUmVxdWVzdBInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9Vc2VyEjIKCXJlYWRfbWFzaxgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2tCA+BBASKIAQoRQ3JlYXRlVXNlclJlcXVlc3QSKAoEdXNlchgBIAEoCzISLm1lbW9zLmFwaS52MS5Vc2VyQgbgQQLgQQQSFAoHdXNlcl9pZBgCIAEoCUID4EEBEhoKDXZhbGlkYXRlX29ubHkYAyABKAhCA+BBARIXCgpyZXF1ZXN0X2lkGAQgASgJQgPgQQEijAEKEVVwZGF0ZVVzZXJSZXF1ZXN0EiUKBHVzZXIYASABKAsyEi5tZW1vcy5hcGkudjEuVXNlckID4EECEjQKC3VwZGF0ZV9tYXNrGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLkZpZWxkTWFza0ID4EECEhoKDWFsbG93X21pc3NpbmcYAyABKAhCA+BBASJQChFEZWxldGVVc2VyUmVxdWVzdBInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9Vc2VyEhIKBWZvcmNlGAIgASgIQgPgQQEi2AMKCVVzZXJTdGF0cxIRCgRuYW1lGAEgASgJQgPgQQgSOwoXbWVtb19kaXNwbGF5X3RpbWVzdGFtcHMYAiADKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEj4KD21lbW9fdHlwZV9zdGF0cxgDIAEoCzIlLm1lbW9zLmFwaS52MS5Vc2VyU3RhdHMuTWVtb1R5cGVTdGF0cxI4Cgl0YWdfY291bnQYBCADKAsyJS5tZW1vcy5hcGkudjEuVXNlclN0YXRzLlRhZ0NvdW50RW50cnkSFAoMcGlubmVkX21lbW9zGAUgAygJEhgKEHRvdGFsX21lbW9fY291bnQYBiABKAUaLwoNVGFnQ291bnRFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAU6AjgBGl8KDU1lbW9UeXBlU3RhdHMSEgoKbGlua19jb3VudBgBIAEoBRISCgpjb2RlX2NvdW50GAIgASgFEhIKCnRvZG9fY291bnQYAyABKAUSEgoKdW5kb19jb3VudBgEIAEoBTo/6kE8ChZtZW1vcy5hcGkudjEvVXNlclN0YXRzEgx1c2Vycy97dXNlcn0qCXVzZXJTdGF0czIJdXNlclN0YXRzIj4KE0dldFVzZXJTdGF0c1JlcXVlc3QSJwoEbmFtZRgBIAEoCUIZ4EEC+kETChFtZW1vcy5hcGkudjEvVXNlciIZChdMaXN0QWxsVXNlclN0YXRzUmVxdWVzdCJCChhMaXN0QWxsVXNlclN0YXRzUmVzcG9uc2USJgoFc3RhdHMYASADKAsyFy5tZW1vcy5hcGkudjEuVXNlclN0YXRzIuADCgtVc2VyU2V0dGluZxIRCgRuYW1lGAEgASgJQgPgQQgSQwoPZ2VuZXJhbF9zZXR0aW5nGAIgASgLMigubWVtb3MuYXBpLnYxLlVzZXJTZXR0aW5nLkdlbmVyYWxTZXR0aW5nSAASRQoQd2ViaG9va3Nfc2V0dGluZxgFIAEoCzIpLm1lbW9zLmFwaS52MS5Vc2VyU2V0dGluZy5XZWJob29rc1NldHRpbmdIABpXCg5HZW5lcmFsU2V0dGluZxITCgZsb2NhbGUYASABKAlCA+BBARIcCg9tZW1vX3Zpc2liaWxpdHkYAyABKAlCA+BBARISCgV0aGVtZRgEIAEoCUID4EEBGj4KD1dlYmhvb2tzU2V0dGluZxIrCgh3ZWJob29rcxgBIAMoCzIZLm1lbW9zLmFwaS52MS5Vc2VyV2ViaG9vayI1CgNLZXkSEwoPS0VZX1VOU1BFQ0lGSUVEEAASCwoHR0VORVJBTBABEgwKCFdFQkhPT0tTEAQ6WepBVgoYbWVtb3MuYXBpLnYxL1VzZXJTZXR0aW5nEh91c2Vycy97dXNlcn0vc2V0dGluZ3Mve3NldHRpbmd9Kgx1c2VyU2V0dGluZ3MyC3VzZXJTZXR0aW5nQgcKBXZhbHVlIkcKFUdldFVzZXJTZXR0aW5nUmVxdWVzdBIuCgRuYW1lGAEgASgJQiDgQQL6QRoKGG1lbW9zLmFwaS52MS9Vc2VyU2V0dGluZyKBAQoYVXBkYXRlVXNlclNldHRpbmdSZXF1ZXN0Ei8KB3NldHRpbmcYASABKAsyGS5tZW1vcy5hcGkudjEuVXNlclNldHRpbmdCA+BBAhI0Cgt1cGRhdGVfbWFzaxgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2tCA+BBAiJ1ChdMaXN0VXNlclNldHRpbmdzUmVxdWVzdBIpCgZwYXJlbnQYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL1VzZXISFgoJcGFnZV9zaXplGAIgASgFQgPgQQESFwoKcGFnZV90b2tlbhgDIAEoCUID4EEBInQKGExpc3RVc2VyU2V0dGluZ3NSZXNwb25zZRIrCghzZXR0aW5ncxgBIAMoCzIZLm1lbW9zLmFwaS52MS5Vc2VyU2V0dGluZxIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkSEgoKdG90YWxfc2l6ZRgDIAEoBSLyAgoTUGVyc29uYWxBY2Nlc3NUb2tlbhIRCgRuYW1lGAEgASgJQgPgQQgSGAoLZGVzY3JpcHRpb24YAiABKAlCA+BBARIzCgpjcmVhdGVkX2F0GAMgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEDEjMKCmV4cGlyZXNfYXQYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQESNQoMbGFzdF91c2VkX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEDOowB6kGIAQogbWVtb3MuYXBpLnYxL1BlcnNvbmFsQWNjZXNzVG9rZW4SOXVzZXJzL3t1c2VyfS9wZXJzb25hbEFjY2Vzc1Rva2Vucy97cGVyc29uYWxfYWNjZXNzX3Rva2VufSoUcGVyc29uYWxBY2Nlc3NUb2tlbnMyE3BlcnNvbmFsQWNjZXNzVG9rZW4ifQofTGlzdFBlcnNvbmFsQWNjZXNzVG9rZW5zUmVxdWVzdBIpCgZwYXJlbnQYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL1VzZXISFgoJcGFnZV9zaXplGAIgASgFQgPgQQESFwoKcGFnZV90b2tlbhgDIAEoCUID4EEBIpIBCiBMaXN0UGVyc29uYWxBY2Nlc3NUb2tlbnNSZXNwb25zZRJBChZwZXJzb25hbF9hY2Nlc3NfdG9rZW5zGAEgAygLMiEubWVtb3MuYXBpLnYxLlBlcnNvbmFsQWNjZXNzVG9rZW4SFwoPbmV4dF9wYWdlX3Rva2VuGAIgASgJEhIKCnRvdGFsX3NpemUYAyABKAUihQEKIENyZWF0ZVBlcnNvbmFsQWNjZXNzVG9rZW5SZXF1ZXN0EikKBnBhcmVudBgBIAEoCUIZ4EEC+kETChFtZW1vcy5hcGkudjEvVXNlchIYCgtkZXNjcmlwdGlvbhgCIAEoCUID4EEBEhwKD2V4cGlyZXNfaW5fZGF5cxgDIAEoBUID4EEBInQKIUNyZWF0ZVBlcnNvbmFsQWNjZXNzVG9rZW5SZXNwb25zZRJAChVwZXJzb25hbF9hY2Nlc3NfdG9rZW4YASABKAsyIS5tZW1vcy5hcGkudjEuUGVyc29uYWxBY2Nlc3NUb2tlbhINCgV0b2tlbhgCIAEoCSJaCiBEZWxldGVQZXJzb25hbEFjY2Vzc1Rva2VuUmVxdWVzdBI2CgRuYW1lGAEgASgJQijgQQL6QSIKIG1lbW9zLmFwaS52MS9QZXJzb25hbEFjY2Vzc1Rva2VuIqoBCgtVc2VyV2ViaG9vaxIMCgRuYW1lGAEgASgJEgsKA3VybBgCIAEoCRIUCgxkaXNwbGF5X25hbWUYAyABKAkSNAoLY3JlYXRlX3RpbWUYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQMSNAoLdXBkYXRlX3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQMiLgoXTGlzdFVzZXJXZWJob29rc1JlcXVlc3QSEwoGcGFyZW50GAEgASgJQgPgQQIiRwoYTGlzdFVzZXJXZWJob29rc1Jlc3BvbnNlEisKCHdlYmhvb2tzGAEgAygLMhkubWVtb3MuYXBpLnYxLlVzZXJXZWJob29rImAKGENyZWF0ZVVzZXJXZWJob29rUmVxdWVzdBITCgZwYXJlbnQYASABKAlCA+BBAhIvCgd3ZWJob29rGAIgASgLMhkubWVtb3MuYXBpLnYxLlVzZXJXZWJob29rQgPgQQIifAoYVXBkYXRlVXNlcldlYmhvb2tSZXF1ZXN0Ei8KB3dlYmhvb2sYASABKAsyGS5tZW1vcy5hcGkudjEuVXNlcldlYmhvb2tCA+BBAhIvCgt1cGRhdGVfbWFzaxgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2siLQoYRGVsZXRlVXNlcldlYmhvb2tSZXF1ZXN0EhEKBG5hbWUYASABKAlCA+BBAiKKBAoQVXNlck5vdGlmaWNhdGlvbhIUCgRuYW1lGAEgASgJQgbgQQPgQQgSKQoGc2VuZGVyGAIgASgJQhngQQP6QRMKEW1lbW9zLmFwaS52MS9Vc2VyEjoKBnN0YXR1cxgDIAEoDjIlLm1lbW9zLmFwaS52MS5Vc2VyTm90aWZpY2F0aW9uLlN0YXR1c0ID4EEBEjQKC2NyZWF0ZV90aW1lGAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEDEjYKBHR5cGUYBSABKA4yIy5tZW1vcy5hcGkudjEuVXNlck5vdGlmaWNhdGlvbi5UeXBlQgPgQQMSHQoLYWN0aXZpdHlfaWQYBiABKAVCA+BBAUgAiAEBIjoKBlN0YXR1cxIWChJTVEFUVVNfVU5TUEVDSUZJRUQQABIKCgZVTlJFQUQQARIMCghBUkNISVZFRBACIi4KBFR5cGUSFAoQVFlQRV9VTlNQRUNJRklFRBAAEhAKDE1FTU9fQ09NTUVOVBABOnDqQW0KHW1lbW9zLmFwaS52MS9Vc2VyTm90aWZpY2F0aW9uEil1c2Vycy97dXNlcn0vbm90aWZpY2F0aW9ucy97bm90aWZpY2F0aW9ufRoEbmFtZSoNbm90aWZpY2F0aW9uczIMbm90aWZpY2F0aW9uQg4KDF9hY3Rpdml0eV9pZCKPAQocTGlzdFVzZXJOb3RpZmljYXRpb25zUmVxdWVzdBIpCgZwYXJlbnQYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL1VzZXISFgoJcGFnZV9zaXplGAIgASgFQgPgQQESFwoKcGFnZV90b2tlbhgDIAEoCUID4EEBEhMKBmZpbHRlchgEIAEoCUID4EEBIm8KHUxpc3RVc2VyTm90aWZpY2F0aW9uc1Jlc3BvbnNlEjUKDW5vdGlmaWNhdGlvbnMYASADKAsyHi5tZW1vcy5hcGkudjEuVXNlck5vdGlmaWNhdGlvbhIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkikAEKHVVwZGF0ZVVzZXJOb3RpZmljYXRpb25SZXF1ZXN0EjkKDG5vdGlmaWNhdGlvbhgBIAEoCzIeLm1lbW9zLmFwaS52MS5Vc2VyTm90aWZpY2F0aW9uQgPgQQISNAoLdXBkYXRlX21hc2sYAiABKAsyGi5nb29nbGUucHJvdG9idWYuRmllbGRNYXNrQgPgQQIiVAodRGVsZXRlVXNlck5vdGlmaWNhdGlvblJlcXVlc3QSMwoEbmFtZRgBIAEoCUIl4EEC+kEfCh1tZW1vcy5hcGkudjEvVXNlck5vdGlmaWNhdGlvbjKDFwoLVXNlclNlcnZpY2USYwoJTGlzdFVzZXJzEh4ubWVtb3MuYXBpLnYxLkxpc3RVc2Vyc1JlcXVlc3QaHy5tZW1vcy5hcGkudjEuTGlzdFVzZXJzUmVzcG9uc2UiFYLT5JMCDxINL2FwaS92MS91c2VycxJiCgdHZXRVc2VyEhwubWVtb3MuYXBpLnYxLkdldFVzZXJSZXF1ZXN0GhIubWVtb3MuYXBpLnYxLlVzZXIiJdpBBG5hbWWC0+STAhgSFi9hcGkvdjEve25hbWU9dXNlcnMvKn0SZQoKQ3JlYXRlVXNlchIfLm1lbW9zLmFwaS52MS5DcmVhdGVVc2VyUmVxdWVzdBoSLm1lbW9zLmFwaS52MS5Vc2VyIiLaQQR1c2VygtPkkwIVOgR1c2VyIg0vYXBpL3YxL3VzZXJzEn8KClVwZGF0ZVVzZXISHy5tZW1vcy5hcGkudjEuVXBkYXRlVXNlclJlcXVlc3QaEi5tZW1vcy5hcGkudjEuVXNlciI82kEQdXNlcix1cGRhdGVfbWFza4LT5JMCIzoEdXNlcjIbL2FwaS92MS97dXNlci5uYW1lPXVzZXJzLyp9EmwKCkRlbGV0ZVVzZXISHy5tZW1vcy5hcGkudjEuRGVsZXRlVXNlclJlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiJdpBBG5hbWWC0+STAhgqFi9hcGkvdjEve25hbWU9dXNlcnMvKn0SfgoQTGlzdEFsbFVzZXJTdGF0cxIlLm1lbW9zLmFwaS52MS5MaXN0QWxsVXNlclN0YXRzUmVxdWVzdBomLm1lbW9zLmFwaS52MS5MaXN0QWxsVXNlclN0YXRzUmVzcG9uc2UiG4LT5JMCFRITL2FwaS92MS91c2VyczpzdGF0cxJ6CgxHZXRVc2VyU3RhdHMSIS5tZW1vcy5hcGkudjEuR2V0VXNlclN0YXRzUmVxdWVzdBoXLm1lbW9zLmFwaS52MS5Vc2VyU3RhdHMiLtpBBG5hbWWC0+STAiESHy9hcGkvdjEve25hbWU9dXNlcnMvKn06Z2V0U3RhdHMSggEKDkdldFVzZXJTZXR0aW5nEiMubWVtb3MuYXBpLnYxLkdldFVzZXJTZXR0aW5nUmVxdWVzdBoZLm1lbW9zLmFwaS52MS5Vc2VyU2V0dGluZyIw2kEEbmFtZYLT5JMCIxIhL2FwaS92MS97bmFtZT11c2Vycy8qL3NldHRpbmdzLyp9EqgBChFVcGRhdGVVc2VyU2V0dGluZxImLm1lbW9zLmFwaS52MS5VcGRhdGVVc2VyU2V0dGluZ1JlcXVlc3QaGS5tZW1vcy5hcGkudjEuVXNlclNldHRpbmciUNpBE3NldHRpbmcsdXBkYXRlX21hc2uC0+STAjQ6B3NldHRpbmcyKS9hcGkvdjEve3NldHRpbmcubmFtZT11c2Vycy8qL3NldHRpbmdzLyp9EpUBChBMaXN0VXNlclNldHRpbmdzEiUubWVtb3MuYXBpLnYxLkxpc3RVc2VyU2V0dGluZ3NSZXF1ZXN0GiYubWVtb3MuYXBpLnYxLkxpc3RVc2VyU2V0dGluZ3NSZXNwb25zZSIy2kEGcGFyZW50gtPkkwIjEiEvYXBpL3YxL3twYXJlbnQ9dXNlcnMvKn0vc2V0dGluZ3MSuQEKGExpc3RQZXJzb25hbEFjY2Vzc1Rva2VucxItLm1lbW9zLmFwaS52MS5MaXN0UGVyc29uYWxBY2Nlc3NUb2tlbnNSZXF1ZXN0Gi4ubWVtb3MuYXBpLnYxLkxpc3RQZXJzb25hbEFjY2Vzc1Rva2Vuc1Jlc3BvbnNlIj7aQQZwYXJlbnSC0+STAi8SLS9hcGkvdjEve3BhcmVudD11c2Vycy8qfS9wZXJzb25hbEFjY2Vzc1Rva2VucxK2AQoZQ3JlYXRlUGVyc29uYWxBY2Nlc3NUb2tlbhIuLm1lbW9zLmFwaS52MS5DcmVhdGVQZXJzb25hbEFjY2Vzc1Rva2VuUmVxdWVzdBovLm1lbW9zLmFwaS52MS5DcmVhdGVQZXJzb25hbEFjY2Vzc1Rva2VuUmVzcG9uc2UiOILT5JMCMjoBKiItL2FwaS92MS97cGFyZW50PXVzZXJzLyp9L3BlcnNvbmFsQWNjZXNzVG9rZW5zEqEBChlEZWxldGVQZXJzb25hbEFjY2Vzc1Rva2VuEi4ubWVtb3MuYXBpLnYxLkRlbGV0ZVBlcnNvbmFsQWNjZXNzVG9rZW5SZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5IjzaQQRuYW1lgtPkkwIvKi0vYXBpL3YxL3tuYW1lPXVzZXJzLyovcGVyc29uYWxBY2Nlc3NUb2tlbnMvKn0SlQEKEExpc3RVc2VyV2ViaG9va3MSJS5tZW1vcy5hcGkudjEuTGlzdFVzZXJXZWJob29rc1JlcXVlc3QaJi5tZW1vcy5hcGkudjEuTGlzdFVzZXJXZWJob29rc1Jlc3BvbnNlIjLaQQZwYXJlbnSC0+STAiMSIS9hcGkvdjEve3BhcmVudD11c2Vycy8qfS93ZWJob29rcxKbAQoRQ3JlYXRlVXNlcldlYmhvb2sSJi5tZW1vcy5hcGkudjEuQ3JlYXRlVXNlcldlYmhvb2tSZXF1ZXN0GhkubWVtb3MuYXBpLnYxLlVzZXJXZWJob29rIkPaQQ5wYXJlbnQsd2ViaG9va4LT5JMCLDoHd2ViaG9vayIhL2FwaS92MS97cGFyZW50PXVzZXJzLyp9L3dlYmhvb2tzEqgBChFVcGRhdGVVc2VyV2ViaG9vaxImLm1lbW9zLmFwaS52MS5VcGRhdGVVc2VyV2ViaG9va1JlcXVlc3QaGS5tZW1vcy5hcGkudjEuVXNlcldlYmhvb2siUNpBE3dlYmhvb2ssdXBkYXRlX21hc2uC0+STAjQ6B3dlYmhvb2syKS9hcGkvdjEve3dlYmhvb2submFtZT11c2Vycy8qL3dlYmhvb2tzLyp9EoUBChFEZWxldGVVc2VyV2ViaG9vaxImLm1lbW9zLmFwaS52MS5EZWxldGVVc2VyV2ViaG9va1JlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiMNpBBG5hbWWC0+STAiMqIS9hcGkvdjEve25hbWU9dXNlcnMvKi93ZWJob29rcy8qfRKpAQoVTGlzdFVzZXJOb3RpZmljYXRpb25zEioubWVtb3MuYXBpLnYxLkxpc3RVc2VyTm90aWZpY2F0aW9uc1JlcXVlc3QaKy5tZW1vcy5hcGkudjEuTGlzdFVzZXJOb3RpZmljYXRpb25zUmVzcG9uc2UiN9pBBnBhcmVudILT5JMCKBImL2FwaS92MS97cGFyZW50PXVzZXJzLyp9L25vdGlmaWNhdGlvbnMSywEKFlVwZGF0ZVVzZXJOb3RpZmljYXRpb24SKy5tZW1vcy5hcGkudjEuVXBkYXRlVXNlck5vdGlmaWNhdGlvblJlcXVlc3QaHi5tZW1vcy5hcGkudjEuVXNlck5vdGlmaWNhdGlvbiJk2kEYbm90aWZpY2F0aW9uLHVwZGF0ZV9tYXNrgtPkkwJDOgxub3RpZmljYXRpb24yMy9hcGkvdjEve25vdGlmaWNhdGlvbi5uYW1lPXVzZXJzLyovbm90aWZpY2F0aW9ucy8qfRKUAQoWRGVsZXRlVXNlck5vdGlmaWNhdGlvbhIrLm1lbW9zLmFwaS52MS5EZWxldGVVc2VyTm90aWZpY2F0aW9uUmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSI12kEEbmFtZYLT5JMCKComL2FwaS92MS97bmFtZT11c2Vycy8qL25vdGlmaWNhdGlvbnMvKn1CqwEKEGNvbS5tZW1vcy5hcGkudjFCEFVzZXJTZXJ2aWNlUHJvdG9QAVozZ2l0aHViLmNvbS9ocnlnby9kaXZpbmVzZW5zZS9wcm90by9nZW4vYXBpL3YxO2FwaXYxogIDTUFYqgIMTWVtb3MuQXBpLlYxygIMTWVtb3NcQXBpXFYx4gIYTWVtb3NcQXBpXFYxXEdQQk1ldGFkYXRh6gIOTWVtb3M6OkFwaTo6VjFiBnByb3RvMw",[Nd,rd,od,sd,id,Il,kl,ul]),Sd=pi(Ad,0);var Vd=(e=>(e[e.ROLE_UNSPECIFIED=0]="ROLE_UNSPECIFIED",e[e.HOST=1]="HOST",e[e.ADMIN=2]="ADMIN",e[e.USER=3]="USER",e))(Vd||{});const Id=pi(Ad,11),kd=pi(Ad,11,0);var Zd=(e=>(e[e.KEY_UNSPECIFIED=0]="KEY_UNSPECIFIED",e[e.GENERAL=1]="GENERAL",e[e.WEBHOOKS=4]="WEBHOOKS",e))(Zd||{}),Wd=(e=>(e[e.STATUS_UNSPECIFIED=0]="STATUS_UNSPECIFIED",e[e.UNREAD=1]="UNREAD",e[e.ARCHIVED=2]="ARCHIVED",e))(Wd||{}),Gd=(e=>(e[e.TYPE_UNSPECIFIED=0]="TYPE_UNSPECIFIED",e[e.MEMO_COMMENT=1]="MEMO_COMMENT",e))(Gd||{});const Rd=Vc(Ad,0),Cd=Vc(dl("ChlhcGkvdjEvYXV0aF9zZXJ2aWNlLnByb3RvEgxtZW1vcy5hcGkudjEiFwoVR2V0Q3VycmVudFVzZXJSZXF1ZXN0IjoKFkdldEN1cnJlbnRVc2VyUmVzcG9uc2USIAoEdXNlchgBIAEoCzISLm1lbW9zLmFwaS52MS5Vc2VyIuwCCg1TaWduSW5SZXF1ZXN0Ek8KFHBhc3N3b3JkX2NyZWRlbnRpYWxzGAEgASgLMi8ubWVtb3MuYXBpLnYxLlNpZ25JblJlcXVlc3QuUGFzc3dvcmRDcmVkZW50aWFsc0gAEkUKD3Nzb19jcmVkZW50aWFscxgCIAEoCzIqLm1lbW9zLmFwaS52MS5TaWduSW5SZXF1ZXN0LlNTT0NyZWRlbnRpYWxzSAAaQwoTUGFzc3dvcmRDcmVkZW50aWFscxIVCgh1c2VybmFtZRgBIAEoCUID4EECEhUKCHBhc3N3b3JkGAIgASgJQgPgQQIabwoOU1NPQ3JlZGVudGlhbHMSEwoGaWRwX2lkGAEgASgFQgPgQQISEQoEY29kZRgCIAEoCUID4EECEhkKDHJlZGlyZWN0X3VyaRgDIAEoCUID4EECEhoKDWNvZGVfdmVyaWZpZXIYBCABKAlCA+BBAUINCgtjcmVkZW50aWFscyKFAQoOU2lnbkluUmVzcG9uc2USIAoEdXNlchgBIAEoCzISLm1lbW9zLmFwaS52MS5Vc2VyEhQKDGFjY2Vzc190b2tlbhgCIAEoCRI7ChdhY2Nlc3NfdG9rZW5fZXhwaXJlc19hdBgDIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAiEAoOU2lnbk91dFJlcXVlc3QiFQoTUmVmcmVzaFRva2VuUmVxdWVzdCJcChRSZWZyZXNoVG9rZW5SZXNwb25zZRIUCgxhY2Nlc3NfdG9rZW4YASABKAkSLgoKZXhwaXJlc19hdBgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAyvwMKC0F1dGhTZXJ2aWNlEnQKDkdldEN1cnJlbnRVc2VyEiMubWVtb3MuYXBpLnYxLkdldEN1cnJlbnRVc2VyUmVxdWVzdBokLm1lbW9zLmFwaS52MS5HZXRDdXJyZW50VXNlclJlc3BvbnNlIheC0+STAhESDy9hcGkvdjEvYXV0aC9tZRJjCgZTaWduSW4SGy5tZW1vcy5hcGkudjEuU2lnbkluUmVxdWVzdBocLm1lbW9zLmFwaS52MS5TaWduSW5SZXNwb25zZSIegtPkkwIYOgEqIhMvYXBpL3YxL2F1dGgvc2lnbmluEl0KB1NpZ25PdXQSHC5tZW1vcy5hcGkudjEuU2lnbk91dFJlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiHILT5JMCFiIUL2FwaS92MS9hdXRoL3NpZ25vdXQSdgoMUmVmcmVzaFRva2VuEiEubWVtb3MuYXBpLnYxLlJlZnJlc2hUb2tlblJlcXVlc3QaIi5tZW1vcy5hcGkudjEuUmVmcmVzaFRva2VuUmVzcG9uc2UiH4LT5JMCGToBKiIUL2FwaS92MS9hdXRoL3JlZnJlc2hCqwEKEGNvbS5tZW1vcy5hcGkudjFCEEF1dGhTZXJ2aWNlUHJvdG9QAVozZ2l0aHViLmNvbS9ocnlnby9kaXZpbmVzZW5zZS9wcm90by9nZW4vYXBpL3YxO2FwaXYxogIDTUFYqgIMTWVtb3MuQXBpLlYxygIMTWVtb3NcQXBpXFYx4gIYTWVtb3NcQXBpXFYxXEdQQk1ldGFkYXRh6gIOTWVtb3M6OkFwaTo6VjFiBnByb3RvMw",[Ad,rd,sd,Il,ul]),0),jd=dl("ChhhcGkvdjEvaWRwX3NlcnZpY2UucHJvdG8SDG1lbW9zLmFwaS52MSLfAgoQSWRlbnRpdHlQcm92aWRlchIRCgRuYW1lGAEgASgJQgPgQQgSNgoEdHlwZRgCIAEoDjIjLm1lbW9zLmFwaS52MS5JZGVudGl0eVByb3ZpZGVyLlR5cGVCA+BBAhISCgV0aXRsZRgDIAEoCUID4EECEh4KEWlkZW50aWZpZXJfZmlsdGVyGAQgASgJQgPgQQESOQoGY29uZmlnGAUgASgLMiQubWVtb3MuYXBpLnYxLklkZW50aXR5UHJvdmlkZXJDb25maWdCA+BBAiIoCgRUeXBlEhQKEFRZUEVfVU5TUEVDSUZJRUQQABIKCgZPQVVUSDIQATpn6kFkCh1tZW1vcy5hcGkudjEvSWRlbnRpdHlQcm92aWRlchIYaWRlbnRpdHktcHJvdmlkZXJzL3tpZHB9GgRuYW1lKhFpZGVudGl0eVByb3ZpZGVyczIQaWRlbnRpdHlQcm92aWRlciJXChZJZGVudGl0eVByb3ZpZGVyQ29uZmlnEjMKDW9hdXRoMl9jb25maWcYASABKAsyGi5tZW1vcy5hcGkudjEuT0F1dGgyQ29uZmlnSABCCAoGY29uZmlnIlsKDEZpZWxkTWFwcGluZxISCgppZGVudGlmaWVyGAEgASgJEhQKDGRpc3BsYXlfbmFtZRgCIAEoCRINCgVlbWFpbBgDIAEoCRISCgphdmF0YXJfdXJsGAQgASgJIrcBCgxPQXV0aDJDb25maWcSEQoJY2xpZW50X2lkGAEgASgJEhUKDWNsaWVudF9zZWNyZXQYAiABKAkSEAoIYXV0aF91cmwYAyABKAkSEQoJdG9rZW5fdXJsGAQgASgJEhUKDXVzZXJfaW5mb191cmwYBSABKAkSDgoGc2NvcGVzGAYgAygJEjEKDWZpZWxkX21hcHBpbmcYByABKAsyGi5tZW1vcy5hcGkudjEuRmllbGRNYXBwaW5nIh4KHExpc3RJZGVudGl0eVByb3ZpZGVyc1JlcXVlc3QiWwodTGlzdElkZW50aXR5UHJvdmlkZXJzUmVzcG9uc2USOgoSaWRlbnRpdHlfcHJvdmlkZXJzGAEgAygLMh4ubWVtb3MuYXBpLnYxLklkZW50aXR5UHJvdmlkZXIiUQoaR2V0SWRlbnRpdHlQcm92aWRlclJlcXVlc3QSMwoEbmFtZRgBIAEoCUIl4EEC+kEfCh1tZW1vcy5hcGkudjEvSWRlbnRpdHlQcm92aWRlciKCAQodQ3JlYXRlSWRlbnRpdHlQcm92aWRlclJlcXVlc3QSPgoRaWRlbnRpdHlfcHJvdmlkZXIYASABKAsyHi5tZW1vcy5hcGkudjEuSWRlbnRpdHlQcm92aWRlckID4EECEiEKFGlkZW50aXR5X3Byb3ZpZGVyX2lkGAIgASgJQgPgQQEilQEKHVVwZGF0ZUlkZW50aXR5UHJvdmlkZXJSZXF1ZXN0Ej4KEWlkZW50aXR5X3Byb3ZpZGVyGAEgASgLMh4ubWVtb3MuYXBpLnYxLklkZW50aXR5UHJvdmlkZXJCA+BBAhI0Cgt1cGRhdGVfbWFzaxgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2tCA+BBAiJUCh1EZWxldGVJZGVudGl0eVByb3ZpZGVyUmVxdWVzdBIzCgRuYW1lGAEgASgJQiXgQQL6QR8KHW1lbW9zLmFwaS52MS9JZGVudGl0eVByb3ZpZGVyMucGChdJZGVudGl0eVByb3ZpZGVyU2VydmljZRKUAQoVTGlzdElkZW50aXR5UHJvdmlkZXJzEioubWVtb3MuYXBpLnYxLkxpc3RJZGVudGl0eVByb3ZpZGVyc1JlcXVlc3QaKy5tZW1vcy5hcGkudjEuTGlzdElkZW50aXR5UHJvdmlkZXJzUmVzcG9uc2UiIoLT5JMCHBIaL2FwaS92MS9pZGVudGl0eS1wcm92aWRlcnMSkwEKE0dldElkZW50aXR5UHJvdmlkZXISKC5tZW1vcy5hcGkudjEuR2V0SWRlbnRpdHlQcm92aWRlclJlcXVlc3QaHi5tZW1vcy5hcGkudjEuSWRlbnRpdHlQcm92aWRlciIy2kEEbmFtZYLT5JMCJRIjL2FwaS92MS97bmFtZT1pZGVudGl0eS1wcm92aWRlcnMvKn0SsAEKFkNyZWF0ZUlkZW50aXR5UHJvdmlkZXISKy5tZW1vcy5hcGkudjEuQ3JlYXRlSWRlbnRpdHlQcm92aWRlclJlcXVlc3QaHi5tZW1vcy5hcGkudjEuSWRlbnRpdHlQcm92aWRlciJJ2kERaWRlbnRpdHlfcHJvdmlkZXKC0+STAi86EWlkZW50aXR5X3Byb3ZpZGVyIhovYXBpL3YxL2lkZW50aXR5LXByb3ZpZGVycxLXAQoWVXBkYXRlSWRlbnRpdHlQcm92aWRlchIrLm1lbW9zLmFwaS52MS5VcGRhdGVJZGVudGl0eVByb3ZpZGVyUmVxdWVzdBoeLm1lbW9zLmFwaS52MS5JZGVudGl0eVByb3ZpZGVyInDaQR1pZGVudGl0eV9wcm92aWRlcix1cGRhdGVfbWFza4LT5JMCSjoRaWRlbnRpdHlfcHJvdmlkZXIyNS9hcGkvdjEve2lkZW50aXR5X3Byb3ZpZGVyLm5hbWU9aWRlbnRpdHktcHJvdmlkZXJzLyp9EpEBChZEZWxldGVJZGVudGl0eVByb3ZpZGVyEisubWVtb3MuYXBpLnYxLkRlbGV0ZUlkZW50aXR5UHJvdmlkZXJSZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5IjLaQQRuYW1lgtPkkwIlKiMvYXBpL3YxL3tuYW1lPWlkZW50aXR5LXByb3ZpZGVycy8qfUKqAQoQY29tLm1lbW9zLmFwaS52MUIPSWRwU2VydmljZVByb3RvUAFaM2dpdGh1Yi5jb20vaHJ5Z28vZGl2aW5lc2Vuc2UvcHJvdG8vZ2VuL2FwaS92MTthcGl2MaICA01BWKoCDE1lbW9zLkFwaS5WMcoCDE1lbW9zXEFwaVxWMeICGE1lbW9zXEFwaVxWMVxHUEJNZXRhZGF0YeoCDk1lbW9zOjpBcGk6OlYxYgZwcm90bzM",[rd,od,sd,id,Il,kl]),Fd=pi(jd,0);var Yd=(e=>(e[e.TYPE_UNSPECIFIED=0]="TYPE_UNSPECIFIED",e[e.OAUTH2=1]="OAUTH2",e))(Yd||{});const Xd=pi(jd,1),Bd=pi(jd,2),Td=pi(jd,3),Md=Vc(jd,0),Ld=dl("Ch1hcGkvdjEvaW5zdGFuY2Vfc2VydmljZS5wcm90bxIMbWVtb3MuYXBpLnYxIlUKD0luc3RhbmNlUHJvZmlsZRINCgVvd25lchgBIAEoCRIPCgd2ZXJzaW9uGAIgASgJEgwKBG1vZGUYAyABKAkSFAoMaW5zdGFuY2VfdXJsGAYgASgJIhsKGUdldEluc3RhbmNlUHJvZmlsZVJlcXVlc3QiswsKD0luc3RhbmNlU2V0dGluZxIRCgRuYW1lGAEgASgJQgPgQQgSRwoPZ2VuZXJhbF9zZXR0aW5nGAIgASgLMiwubWVtb3MuYXBpLnYxLkluc3RhbmNlU2V0dGluZy5HZW5lcmFsU2V0dGluZ0gAEkcKD3N0b3JhZ2Vfc2V0dGluZxgDIAEoCzIsLm1lbW9zLmFwaS52MS5JbnN0YW5jZVNldHRpbmcuU3RvcmFnZVNldHRpbmdIABJQChRtZW1vX3JlbGF0ZWRfc2V0dGluZxgEIAEoCzIwLm1lbW9zLmFwaS52MS5JbnN0YW5jZVNldHRpbmcuTWVtb1JlbGF0ZWRTZXR0aW5nSAAahwMKDkdlbmVyYWxTZXR0aW5nEiIKGmRpc2FsbG93X3VzZXJfcmVnaXN0cmF0aW9uGAIgASgIEh4KFmRpc2FsbG93X3Bhc3N3b3JkX2F1dGgYAyABKAgSGQoRYWRkaXRpb25hbF9zY3JpcHQYBCABKAkSGAoQYWRkaXRpb25hbF9zdHlsZRgFIAEoCRJSCg5jdXN0b21fcHJvZmlsZRgGIAEoCzI6Lm1lbW9zLmFwaS52MS5JbnN0YW5jZVNldHRpbmcuR2VuZXJhbFNldHRpbmcuQ3VzdG9tUHJvZmlsZRIdChV3ZWVrX3N0YXJ0X2RheV9vZmZzZXQYByABKAUSIAoYZGlzYWxsb3dfY2hhbmdlX3VzZXJuYW1lGAggASgIEiAKGGRpc2FsbG93X2NoYW5nZV9uaWNrbmFtZRgJIAEoCBpFCg1DdXN0b21Qcm9maWxlEg0KBXRpdGxlGAEgASgJEhMKC2Rlc2NyaXB0aW9uGAIgASgJEhAKCGxvZ29fdXJsGAMgASgJGroDCg5TdG9yYWdlU2V0dGluZxJOCgxzdG9yYWdlX3R5cGUYASABKA4yOC5tZW1vcy5hcGkudjEuSW5zdGFuY2VTZXR0aW5nLlN0b3JhZ2VTZXR0aW5nLlN0b3JhZ2VUeXBlEhkKEWZpbGVwYXRoX3RlbXBsYXRlGAIgASgJEhwKFHVwbG9hZF9zaXplX2xpbWl0X21iGAMgASgDEkgKCXMzX2NvbmZpZxgEIAEoCzI1Lm1lbW9zLmFwaS52MS5JbnN0YW5jZVNldHRpbmcuU3RvcmFnZVNldHRpbmcuUzNDb25maWcahgEKCFMzQ29uZmlnEhUKDWFjY2Vzc19rZXlfaWQYASABKAkSGQoRYWNjZXNzX2tleV9zZWNyZXQYAiABKAkSEAoIZW5kcG9pbnQYAyABKAkSDgoGcmVnaW9uGAQgASgJEg4KBmJ1Y2tldBgFIAEoCRIWCg51c2VfcGF0aF9zdHlsZRgGIAEoCCJMCgtTdG9yYWdlVHlwZRIcChhTVE9SQUdFX1RZUEVfVU5TUEVDSUZJRUQQABIMCghEQVRBQkFTRRABEgkKBUxPQ0FMEAISBgoCUzMQAxqtAQoSTWVtb1JlbGF0ZWRTZXR0aW5nEiIKGmRpc2FsbG93X3B1YmxpY192aXNpYmlsaXR5GAEgASgIEiAKGGRpc3BsYXlfd2l0aF91cGRhdGVfdGltZRgCIAEoCBIcChRjb250ZW50X2xlbmd0aF9saW1pdBgDIAEoBRIgChhlbmFibGVfZG91YmxlX2NsaWNrX2VkaXQYBCABKAgSEQoJcmVhY3Rpb25zGAcgAygJIkYKA0tleRITCg9LRVlfVU5TUEVDSUZJRUQQABILCgdHRU5FUkFMEAESCwoHU1RPUkFHRRACEhAKDE1FTU9fUkVMQVRFRBADOmHqQV4KHG1lbW9zLmFwaS52MS9JbnN0YW5jZVNldHRpbmcSG2luc3RhbmNlL3NldHRpbmdzL3tzZXR0aW5nfSoQaW5zdGFuY2VTZXR0aW5nczIPaW5zdGFuY2VTZXR0aW5nQgcKBXZhbHVlIk8KGUdldEluc3RhbmNlU2V0dGluZ1JlcXVlc3QSMgoEbmFtZRgBIAEoCUIk4EEC+kEeChxtZW1vcy5hcGkudjEvSW5zdGFuY2VTZXR0aW5nIokBChxVcGRhdGVJbnN0YW5jZVNldHRpbmdSZXF1ZXN0EjMKB3NldHRpbmcYASABKAsyHS5tZW1vcy5hcGkudjEuSW5zdGFuY2VTZXR0aW5nQgPgQQISNAoLdXBkYXRlX21hc2sYAiABKAsyGi5nb29nbGUucHJvdG9idWYuRmllbGRNYXNrQgPgQQEy2wMKD0luc3RhbmNlU2VydmljZRJ+ChJHZXRJbnN0YW5jZVByb2ZpbGUSJy5tZW1vcy5hcGkudjEuR2V0SW5zdGFuY2VQcm9maWxlUmVxdWVzdBodLm1lbW9zLmFwaS52MS5JbnN0YW5jZVByb2ZpbGUiIILT5JMCGhIYL2FwaS92MS9pbnN0YW5jZS9wcm9maWxlEo8BChJHZXRJbnN0YW5jZVNldHRpbmcSJy5tZW1vcy5hcGkudjEuR2V0SW5zdGFuY2VTZXR0aW5nUmVxdWVzdBodLm1lbW9zLmFwaS52MS5JbnN0YW5jZVNldHRpbmciMdpBBG5hbWWC0+STAiQSIi9hcGkvdjEve25hbWU9aW5zdGFuY2Uvc2V0dGluZ3MvKn0StQEKFVVwZGF0ZUluc3RhbmNlU2V0dGluZxIqLm1lbW9zLmFwaS52MS5VcGRhdGVJbnN0YW5jZVNldHRpbmdSZXF1ZXN0Gh0ubWVtb3MuYXBpLnYxLkluc3RhbmNlU2V0dGluZyJR2kETc2V0dGluZyx1cGRhdGVfbWFza4LT5JMCNToHc2V0dGluZzIqL2FwaS92MS97c2V0dGluZy5uYW1lPWluc3RhbmNlL3NldHRpbmdzLyp9Qq8BChBjb20ubWVtb3MuYXBpLnYxQhRJbnN0YW5jZVNlcnZpY2VQcm90b1ABWjNnaXRodWIuY29tL2hyeWdvL2RpdmluZXNlbnNlL3Byb3RvL2dlbi9hcGkvdjE7YXBpdjGiAgNNQViqAgxNZW1vcy5BcGkuVjHKAgxNZW1vc1xBcGlcVjHiAhhNZW1vc1xBcGlcVjFcR1BCTWV0YWRhdGHqAg5NZW1vczo6QXBpOjpWMWIGcHJvdG8z",[rd,od,sd,id,kl]),Ud=pi(Ld,0),zd=pi(Ld,2),Dd=pi(Ld,2,0),Qd=pi(Ld,2,0,0),Jd=pi(Ld,2,1),Kd=pi(Ld,2,1,0);var Od=(e=>(e[e.STORAGE_TYPE_UNSPECIFIED=0]="STORAGE_TYPE_UNSPECIFIED",e[e.DATABASE=1]="DATABASE",e[e.LOCAL=2]="LOCAL",e[e.S3=3]="S3",e))(Od||{});const _d=pi(Ld,2,2);var Hd=(e=>(e[e.KEY_UNSPECIFIED=0]="KEY_UNSPECIFIED",e[e.GENERAL=1]="GENERAL",e[e.STORAGE=2]="STORAGE",e[e.MEMO_RELATED=3]="MEMO_RELATED",e))(Hd||{});const Pd=Vc(Ld,0),$d=dl("ChlhcGkvdjEvbWVtb19zZXJ2aWNlLnByb3RvEgxtZW1vcy5hcGkudjEipwIKCFJlYWN0aW9uEhQKBG5hbWUYASABKAlCBuBBA+BBCBIqCgdjcmVhdG9yGAIgASgJQhngQQP6QRMKEW1lbW9zLmFwaS52MS9Vc2VyEi0KCmNvbnRlbnRfaWQYAyABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL01lbW8SGgoNcmVhY3Rpb25fdHlwZRgEIAEoCUID4EECEjQKC2NyZWF0ZV90aW1lGAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEDOljqQVUKFW1lbW9zLmFwaS52MS9SZWFjdGlvbhIhbWVtb3Mve21lbW99L3JlYWN0aW9ucy97cmVhY3Rpb259GgRuYW1lKglyZWFjdGlvbnMyCHJlYWN0aW9uIv4GCgRNZW1vEhEKBG5hbWUYASABKAlCA+BBCBInCgVzdGF0ZRgCIAEoDjITLm1lbW9zLmFwaS52MS5TdGF0ZUID4EECEioKB2NyZWF0b3IYAyABKAlCGeBBA/pBEwoRbWVtb3MuYXBpLnYxL1VzZXISNAoLY3JlYXRlX3RpbWUYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQESNAoLdXBkYXRlX3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQgPgQQESNQoMZGlzcGxheV90aW1lGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEID4EEBEhQKB2NvbnRlbnQYByABKAlCA+BBAhIxCgp2aXNpYmlsaXR5GAkgASgOMhgubWVtb3MuYXBpLnYxLlZpc2liaWxpdHlCA+BBAhIRCgR0YWdzGAogAygJQgPgQQMSEwoGcGlubmVkGAsgASgIQgPgQQESMgoLYXR0YWNobWVudHMYDCADKAsyGC5tZW1vcy5hcGkudjEuQXR0YWNobWVudEID4EEBEjIKCXJlbGF0aW9ucxgNIAMoCzIaLm1lbW9zLmFwaS52MS5NZW1vUmVsYXRpb25CA+BBARIuCglyZWFjdGlvbnMYDiADKAsyFi5tZW1vcy5hcGkudjEuUmVhY3Rpb25CA+BBAxIyCghwcm9wZXJ0eRgPIAEoCzIbLm1lbW9zLmFwaS52MS5NZW1vLlByb3BlcnR5QgPgQQMSLgoGcGFyZW50GBAgASgJQhngQQP6QRMKEW1lbW9zLmFwaS52MS9NZW1vSACIAQESFAoHc25pcHBldBgRIAEoCUID4EEDEjIKCGxvY2F0aW9uGBIgASgLMhYubWVtb3MuYXBpLnYxLkxvY2F0aW9uQgPgQQFIAYgBARpjCghQcm9wZXJ0eRIQCghoYXNfbGluaxgBIAEoCBIVCg1oYXNfdGFza19saXN0GAIgASgIEhAKCGhhc19jb2RlGAMgASgIEhwKFGhhc19pbmNvbXBsZXRlX3Rhc2tzGAQgASgIOjfqQTQKEW1lbW9zLmFwaS52MS9NZW1vEgxtZW1vcy97bWVtb30aBG5hbWUqBW1lbW9zMgRtZW1vQgkKB19wYXJlbnRCCwoJX2xvY2F0aW9uIlMKCExvY2F0aW9uEhgKC3BsYWNlaG9sZGVyGAEgASgJQgPgQQESFQoIbGF0aXR1ZGUYAiABKAFCA+BBARIWCglsb25naXR1ZGUYAyABKAFCA+BBASJQChFDcmVhdGVNZW1vUmVxdWVzdBIlCgRtZW1vGAEgASgLMhIubWVtb3MuYXBpLnYxLk1lbW9CA+BBAhIUCgdtZW1vX2lkGAIgASgJQgPgQQEiswEKEExpc3RNZW1vc1JlcXVlc3QSFgoJcGFnZV9zaXplGAEgASgFQgPgQQESFwoKcGFnZV90b2tlbhgCIAEoCUID4EEBEicKBXN0YXRlGAMgASgOMhMubWVtb3MuYXBpLnYxLlN0YXRlQgPgQQESFQoIb3JkZXJfYnkYBCABKAlCA+BBARITCgZmaWx0ZXIYBSABKAlCA+BBARIZCgxzaG93X2RlbGV0ZWQYBiABKAhCA+BBASJPChFMaXN0TWVtb3NSZXNwb25zZRIhCgVtZW1vcxgBIAMoCzISLm1lbW9zLmFwaS52MS5NZW1vEhcKD25leHRfcGFnZV90b2tlbhgCIAEoCSI5Cg5HZXRNZW1vUmVxdWVzdBInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9NZW1vInAKEVVwZGF0ZU1lbW9SZXF1ZXN0EiUKBG1lbW8YASABKAsyEi5tZW1vcy5hcGkudjEuTWVtb0ID4EECEjQKC3VwZGF0ZV9tYXNrGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLkZpZWxkTWFza0ID4EECIlAKEURlbGV0ZU1lbW9SZXF1ZXN0EicKBG5hbWUYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL01lbW8SEgoFZm9yY2UYAiABKAhCA+BBASJ4ChlTZXRNZW1vQXR0YWNobWVudHNSZXF1ZXN0EicKBG5hbWUYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL01lbW8SMgoLYXR0YWNobWVudHMYAiADKAsyGC5tZW1vcy5hcGkudjEuQXR0YWNobWVudEID4EECInYKGkxpc3RNZW1vQXR0YWNobWVudHNSZXF1ZXN0EicKBG5hbWUYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL01lbW8SFgoJcGFnZV9zaXplGAIgASgFQgPgQQESFwoKcGFnZV90b2tlbhgDIAEoCUID4EEBImUKG0xpc3RNZW1vQXR0YWNobWVudHNSZXNwb25zZRItCgthdHRhY2htZW50cxgBIAMoCzIYLm1lbW9zLmFwaS52MS5BdHRhY2htZW50EhcKD25leHRfcGFnZV90b2tlbhgCIAEoCSKzAgoMTWVtb1JlbGF0aW9uEjIKBG1lbW8YASABKAsyHy5tZW1vcy5hcGkudjEuTWVtb1JlbGF0aW9uLk1lbW9CA+BBAhI6CgxyZWxhdGVkX21lbW8YAiABKAsyHy5tZW1vcy5hcGkudjEuTWVtb1JlbGF0aW9uLk1lbW9CA+BBAhIyCgR0eXBlGAMgASgOMh8ubWVtb3MuYXBpLnYxLk1lbW9SZWxhdGlvbi5UeXBlQgPgQQIaRQoETWVtbxInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9NZW1vEhQKB3NuaXBwZXQYAiABKAlCA+BBAyI4CgRUeXBlEhQKEFRZUEVfVU5TUEVDSUZJRUQQABINCglSRUZFUkVOQ0UQARILCgdDT01NRU5UEAIidgoXU2V0TWVtb1JlbGF0aW9uc1JlcXVlc3QSJwoEbmFtZRgBIAEoCUIZ4EEC+kETChFtZW1vcy5hcGkudjEvTWVtbxIyCglyZWxhdGlvbnMYAiADKAsyGi5tZW1vcy5hcGkudjEuTWVtb1JlbGF0aW9uQgPgQQIidAoYTGlzdE1lbW9SZWxhdGlvbnNSZXF1ZXN0EicKBG5hbWUYASABKAlCGeBBAvpBEwoRbWVtb3MuYXBpLnYxL01lbW8SFgoJcGFnZV9zaXplGAIgASgFQgPgQQESFwoKcGFnZV90b2tlbhgDIAEoCUID4EEBImMKGUxpc3RNZW1vUmVsYXRpb25zUmVzcG9uc2USLQoJcmVsYXRpb25zGAEgAygLMhoubWVtb3MuYXBpLnYxLk1lbW9SZWxhdGlvbhIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkihgEKGENyZWF0ZU1lbW9Db21tZW50UmVxdWVzdBInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9NZW1vEigKB2NvbW1lbnQYAiABKAsyEi5tZW1vcy5hcGkudjEuTWVtb0ID4EECEhcKCmNvbW1lbnRfaWQYAyABKAlCA+BBASKKAQoXTGlzdE1lbW9Db21tZW50c1JlcXVlc3QSJwoEbmFtZRgBIAEoCUIZ4EEC+kETChFtZW1vcy5hcGkudjEvTWVtbxIWCglwYWdlX3NpemUYAiABKAVCA+BBARIXCgpwYWdlX3Rva2VuGAMgASgJQgPgQQESFQoIb3JkZXJfYnkYBCABKAlCA+BBASJqChhMaXN0TWVtb0NvbW1lbnRzUmVzcG9uc2USIQoFbWVtb3MYASADKAsyEi5tZW1vcy5hcGkudjEuTWVtbxIXCg9uZXh0X3BhZ2VfdG9rZW4YAiABKAkSEgoKdG90YWxfc2l6ZRgDIAEoBSJ0ChhMaXN0TWVtb1JlYWN0aW9uc1JlcXVlc3QSJwoEbmFtZRgBIAEoCUIZ4EEC+kETChFtZW1vcy5hcGkudjEvTWVtbxIWCglwYWdlX3NpemUYAiABKAVCA+BBARIXCgpwYWdlX3Rva2VuGAMgASgJQgPgQQEicwoZTGlzdE1lbW9SZWFjdGlvbnNSZXNwb25zZRIpCglyZWFjdGlvbnMYASADKAsyFi5tZW1vcy5hcGkudjEuUmVhY3Rpb24SFwoPbmV4dF9wYWdlX3Rva2VuGAIgASgJEhIKCnRvdGFsX3NpemUYAyABKAUicwoZVXBzZXJ0TWVtb1JlYWN0aW9uUmVxdWVzdBInCgRuYW1lGAEgASgJQhngQQL6QRMKEW1lbW9zLmFwaS52MS9NZW1vEi0KCHJlYWN0aW9uGAIgASgLMhYubWVtb3MuYXBpLnYxLlJlYWN0aW9uQgPgQQIiSAoZRGVsZXRlTWVtb1JlYWN0aW9uUmVxdWVzdBIrCgRuYW1lGAEgASgJQh3gQQL6QRcKFW1lbW9zLmFwaS52MS9SZWFjdGlvbiJgChpTZWFyY2hXaXRoSGlnaGxpZ2h0UmVxdWVzdBISCgVxdWVyeRgBIAEoCUID4EECEhIKBWxpbWl0GAIgASgFQgPgQQESGgoNY29udGV4dF9jaGFycxgDIAEoBUID4EEBIksKG1NlYXJjaFdpdGhIaWdobGlnaHRSZXNwb25zZRIsCgVtZW1vcxgBIAMoCzIdLm1lbW9zLmFwaS52MS5IaWdobGlnaHRlZE1lbW8igAEKD0hpZ2hsaWdodGVkTWVtbxIMCgRuYW1lGAEgASgJEg8KB3NuaXBwZXQYAiABKAkSDQoFc2NvcmUYAyABKAISKwoKaGlnaGxpZ2h0cxgEIAMoCzIXLm1lbW9zLmFwaS52MS5IaWdobGlnaHQSEgoKY3JlYXRlZF90cxgFIAEoAyI9CglIaWdobGlnaHQSDQoFc3RhcnQYASABKAUSCwoDZW5kGAIgASgFEhQKDG1hdGNoZWRfdGV4dBgDIAEoCSpQCgpWaXNpYmlsaXR5EhoKFlZJU0lCSUxJVFlfVU5TUEVDSUZJRUQQABILCgdQUklWQVRFEAESDQoJUFJPVEVDVEVEEAISCgoGUFVCTElDEAMygxEKC01lbW9TZXJ2aWNlEmUKCkNyZWF0ZU1lbW8SHy5tZW1vcy5hcGkudjEuQ3JlYXRlTWVtb1JlcXVlc3QaEi5tZW1vcy5hcGkudjEuTWVtbyIi2kEEbWVtb4LT5JMCFToEbWVtbyINL2FwaS92MS9tZW1vcxJmCglMaXN0TWVtb3MSHi5tZW1vcy5hcGkudjEuTGlzdE1lbW9zUmVxdWVzdBofLm1lbW9zLmFwaS52MS5MaXN0TWVtb3NSZXNwb25zZSIY2kEAgtPkkwIPEg0vYXBpL3YxL21lbW9zEmIKB0dldE1lbW8SHC5tZW1vcy5hcGkudjEuR2V0TWVtb1JlcXVlc3QaEi5tZW1vcy5hcGkudjEuTWVtbyIl2kEEbmFtZYLT5JMCGBIWL2FwaS92MS97bmFtZT1tZW1vcy8qfRJ/CgpVcGRhdGVNZW1vEh8ubWVtb3MuYXBpLnYxLlVwZGF0ZU1lbW9SZXF1ZXN0GhIubWVtb3MuYXBpLnYxLk1lbW8iPNpBEG1lbW8sdXBkYXRlX21hc2uC0+STAiM6BG1lbW8yGy9hcGkvdjEve21lbW8ubmFtZT1tZW1vcy8qfRJsCgpEZWxldGVNZW1vEh8ubWVtb3MuYXBpLnYxLkRlbGV0ZU1lbW9SZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5IiXaQQRuYW1lgtPkkwIYKhYvYXBpL3YxL3tuYW1lPW1lbW9zLyp9EosBChJTZXRNZW1vQXR0YWNobWVudHMSJy5tZW1vcy5hcGkudjEuU2V0TWVtb0F0dGFjaG1lbnRzUmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSI02kEEbmFtZYLT5JMCJzoBKjIiL2FwaS92MS97bmFtZT1tZW1vcy8qfS9hdHRhY2htZW50cxKdAQoTTGlzdE1lbW9BdHRhY2htZW50cxIoLm1lbW9zLmFwaS52MS5MaXN0TWVtb0F0dGFjaG1lbnRzUmVxdWVzdBopLm1lbW9zLmFwaS52MS5MaXN0TWVtb0F0dGFjaG1lbnRzUmVzcG9uc2UiMdpBBG5hbWWC0+STAiQSIi9hcGkvdjEve25hbWU9bWVtb3MvKn0vYXR0YWNobWVudHMShQEKEFNldE1lbW9SZWxhdGlvbnMSJS5tZW1vcy5hcGkudjEuU2V0TWVtb1JlbGF0aW9uc1JlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiMtpBBG5hbWWC0+STAiU6ASoyIC9hcGkvdjEve25hbWU9bWVtb3MvKn0vcmVsYXRpb25zEpUBChFMaXN0TWVtb1JlbGF0aW9ucxImLm1lbW9zLmFwaS52MS5MaXN0TWVtb1JlbGF0aW9uc1JlcXVlc3QaJy5tZW1vcy5hcGkudjEuTGlzdE1lbW9SZWxhdGlvbnNSZXNwb25zZSIv2kEEbmFtZYLT5JMCIhIgL2FwaS92MS97bmFtZT1tZW1vcy8qfS9yZWxhdGlvbnMSkAEKEUNyZWF0ZU1lbW9Db21tZW50EiYubWVtb3MuYXBpLnYxLkNyZWF0ZU1lbW9Db21tZW50UmVxdWVzdBoSLm1lbW9zLmFwaS52MS5NZW1vIj/aQQxuYW1lLGNvbW1lbnSC0+STAio6B2NvbW1lbnQiHy9hcGkvdjEve25hbWU9bWVtb3MvKn0vY29tbWVudHMSkQEKEExpc3RNZW1vQ29tbWVudHMSJS5tZW1vcy5hcGkudjEuTGlzdE1lbW9Db21tZW50c1JlcXVlc3QaJi5tZW1vcy5hcGkudjEuTGlzdE1lbW9Db21tZW50c1Jlc3BvbnNlIi7aQQRuYW1lgtPkkwIhEh8vYXBpL3YxL3tuYW1lPW1lbW9zLyp9L2NvbW1lbnRzEpUBChFMaXN0TWVtb1JlYWN0aW9ucxImLm1lbW9zLmFwaS52MS5MaXN0TWVtb1JlYWN0aW9uc1JlcXVlc3QaJy5tZW1vcy5hcGkudjEuTGlzdE1lbW9SZWFjdGlvbnNSZXNwb25zZSIv2kEEbmFtZYLT5JMCIhIgL2FwaS92MS97bmFtZT1tZW1vcy8qfS9yZWFjdGlvbnMSiQEKElVwc2VydE1lbW9SZWFjdGlvbhInLm1lbW9zLmFwaS52MS5VcHNlcnRNZW1vUmVhY3Rpb25SZXF1ZXN0GhYubWVtb3MuYXBpLnYxLlJlYWN0aW9uIjLaQQRuYW1lgtPkkwIlOgEqIiAvYXBpL3YxL3tuYW1lPW1lbW9zLyp9L3JlYWN0aW9ucxKIAQoSRGVsZXRlTWVtb1JlYWN0aW9uEicubWVtb3MuYXBpLnYxLkRlbGV0ZU1lbW9SZWFjdGlvblJlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiMdpBBG5hbWWC0+STAiQqIi9hcGkvdjEve25hbWU9bWVtb3MvKi9yZWFjdGlvbnMvKn0SnQEKE1NlYXJjaFdpdGhIaWdobGlnaHQSKC5tZW1vcy5hcGkudjEuU2VhcmNoV2l0aEhpZ2hsaWdodFJlcXVlc3QaKS5tZW1vcy5hcGkudjEuU2VhcmNoV2l0aEhpZ2hsaWdodFJlc3BvbnNlIjHaQQVxdWVyeYLT5JMCIxIhL2FwaS92MS9tZW1vczpzZWFyY2hXaXRoSGlnaGxpZ2h0Eo0BCg9HZXRSZWxhdGVkTWVtb3MSJC5tZW1vcy5hcGkudjEuR2V0UmVsYXRlZE1lbW9zUmVxdWVzdBolLm1lbW9zLmFwaS52MS5HZXRSZWxhdGVkTWVtb3NSZXNwb25zZSIt2kEEbmFtZYLT5JMCIBIeL2FwaS92MS97bmFtZT1tZW1vcy8qfTpyZWxhdGVkQqsBChBjb20ubWVtb3MuYXBpLnYxQhBNZW1vU2VydmljZVByb3RvUAFaM2dpdGh1Yi5jb20vaHJ5Z28vZGl2aW5lc2Vuc2UvcHJvdG8vZ2VuL2FwaS92MTthcGl2MaICA01BWKoCDE1lbW9zLkFwaS5WMcoCDE1lbW9zXEFwaVxWMeICGE1lbW9zXEFwaVxWMVxHUEJNZXRhZGF0YeoCDk1lbW9zOjpBcGk6OlYxYgZwcm90bzM",[cd,vd,Nd,rd,od,sd,id,Il,kl,ul]),qd=pi($d,1),eu=pi($d,1,0),tu=pi($d,2),nu=pi($d,4),au=pi($d,12),ru=pi($d,12,0);var ou=(e=>(e[e.TYPE_UNSPECIFIED=0]="TYPE_UNSPECIFIED",e[e.REFERENCE=1]="REFERENCE",e[e.COMMENT=2]="COMMENT",e))(ou||{}),su=(e=>(e[e.VISIBILITY_UNSPECIFIED=0]="VISIBILITY_UNSPECIFIED",e[e.PRIVATE=1]="PRIVATE",e[e.PROTECTED=2]="PROTECTED",e[e.PUBLIC=3]="PUBLIC",e))(su||{});const iu=Vc($d,0),lu=dl("Ch1hcGkvdjEvc2NoZWR1bGVfc2VydmljZS5wcm90bxIMbWVtb3MuYXBpLnYxIskCCghTY2hlZHVsZRIRCgRuYW1lGAEgASgJQgPgQQISEgoFdGl0bGUYAiABKAlCA+BBAhITCgtkZXNjcmlwdGlvbhgDIAEoCRIQCghsb2NhdGlvbhgEIAEoCRIVCghzdGFydF90cxgFIAEoA0ID4EECEg4KBmVuZF90cxgGIAEoAxIPCgdhbGxfZGF5GAcgASgIEhAKCHRpbWV6b25lGAggASgJEhcKD3JlY3VycmVuY2VfcnVsZRgJIAEoCRIZChFyZWN1cnJlbmNlX2VuZF90cxgKIAEoAxIpCglyZW1pbmRlcnMYCyADKAsyFi5tZW1vcy5hcGkudjEuUmVtaW5kZXISDwoHY3JlYXRvchgMIAEoCRISCgpjcmVhdGVkX3RzGA0gASgDEhIKCnVwZGF0ZWRfdHMYDiABKAMSDQoFc3RhdGUYDyABKAkiNQoIUmVtaW5kZXISDAoEdHlwZRgBIAEoCRINCgV2YWx1ZRgCIAEoBRIMCgR1bml0GAMgASgJIkYKFUNyZWF0ZVNjaGVkdWxlUmVxdWVzdBItCghzY2hlZHVsZRgBIAEoCzIWLm1lbW9zLmFwaS52MS5TY2hlZHVsZUID4EECIn8KFExpc3RTY2hlZHVsZXNSZXF1ZXN0Eg8KB2NyZWF0b3IYASABKAkSEAoIc3RhcnRfdHMYAiABKAMSDgoGZW5kX3RzGAMgASgDEg0KBXN0YXRlGAQgASgJEhEKCXBhZ2Vfc2l6ZRgFIAEoBRISCgpwYWdlX3Rva2VuGAYgASgJIm4KFUxpc3RTY2hlZHVsZXNSZXNwb25zZRIpCglzY2hlZHVsZXMYASADKAsyFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUSFwoPbmV4dF9wYWdlX3Rva2VuGAIgASgJEhEKCXRydW5jYXRlZBgDIAEoCCInChJHZXRTY2hlZHVsZVJlcXVlc3QSEQoEbmFtZRgBIAEoCUID4EECIncKFVVwZGF0ZVNjaGVkdWxlUmVxdWVzdBItCghzY2hlZHVsZRgBIAEoCzIWLm1lbW9zLmFwaS52MS5TY2hlZHVsZUID4EECEi8KC3VwZGF0ZV9tYXNrGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLkZpZWxkTWFzayIqChVEZWxldGVTY2hlZHVsZVJlcXVlc3QSEQoEbmFtZRgBIAEoCUID4EECIlQKFENoZWNrQ29uZmxpY3RSZXF1ZXN0EhUKCHN0YXJ0X3RzGAEgASgDQgPgQQISDgoGZW5kX3RzGAIgASgDEhUKDWV4Y2x1ZGVfbmFtZXMYAyADKAkiQgoVQ2hlY2tDb25mbGljdFJlc3BvbnNlEikKCWNvbmZsaWN0cxgBIAMoCzIWLm1lbW9zLmFwaS52MS5TY2hlZHVsZSJICh1QYXJzZUFuZENyZWF0ZVNjaGVkdWxlUmVxdWVzdBIRCgR0ZXh0GAEgASgJQgPgQQISFAoMYXV0b19jb25maXJtGAIgASgIIq4BCh5QYXJzZUFuZENyZWF0ZVNjaGVkdWxlUmVzcG9uc2USLwoPcGFyc2VkX3NjaGVkdWxlGAEgASgLMhYubWVtb3MuYXBpLnYxLlNjaGVkdWxlEjAKEGNyZWF0ZWRfc2NoZWR1bGUYAiABKAsyFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUSKQoJY29uZmxpY3RzGAMgAygLMhYubWVtb3MuYXBpLnYxLlNjaGVkdWxlInMKF1ByZWNoZWNrU2NoZWR1bGVSZXF1ZXN0Eg0KBXRpdGxlGAEgASgJEhUKCHN0YXJ0X3RzGAIgASgDQgPgQQISDgoGZW5kX3RzGAMgASgDEhAKCGR1cmF0aW9uGAQgASgFEhAKCGxvY2F0aW9uGAUgASgJIr4BChhQcmVjaGVja1NjaGVkdWxlUmVzcG9uc2USDQoFdmFsaWQYASABKAgSKwoGZXJyb3JzGAIgAygLMhsubWVtb3MuYXBpLnYxLlByZWNoZWNrRXJyb3ISLwoId2FybmluZ3MYAyADKAsyHS5tZW1vcy5hcGkudjEuUHJlY2hlY2tXYXJuaW5nEjUKC3N1Z2dlc3Rpb25zGAQgAygLMiAubWVtb3MuYXBpLnYxLlByZWNoZWNrU3VnZ2VzdGlvbiI9Cg1QcmVjaGVja0Vycm9yEgwKBGNvZGUYASABKAkSDwoHbWVzc2FnZRgCIAEoCRINCgVmaWVsZBgDIAEoCSIwCg9QcmVjaGVja1dhcm5pbmcSDAoEY29kZRgBIAEoCRIPCgdtZXNzYWdlGAIgASgJIk8KElByZWNoZWNrU3VnZ2VzdGlvbhIMCgR0eXBlGAEgASgJEisKBHNsb3QYAiABKAsyHS5tZW1vcy5hcGkudjEuQWx0ZXJuYXRpdmVTbG90IkIKD0FsdGVybmF0aXZlU2xvdBIQCghzdGFydF90cxgBIAEoAxIOCgZlbmRfdHMYAiABKAMSDQoFbGFiZWwYAyABKAkiRQoZQmF0Y2hQYXJzZVNjaGVkdWxlUmVxdWVzdBIRCgR0ZXh0GAEgASgJQgPgQQISFQoNcHJldmlld19jb3VudBgCIAEoBSLPAQoaQmF0Y2hQYXJzZVNjaGVkdWxlUmVzcG9uc2USGAoQY2FuX2JhdGNoX2NyZWF0ZRgBIAEoCBItCgRpbmZvGAIgASgLMh8ubWVtb3MuYXBpLnYxLkJhdGNoU2NoZWR1bGVJbmZvEicKB3ByZXZpZXcYAyADKAsyFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUSEwoLdG90YWxfY291bnQYBCABKAUSFgoObWlzc2luZ19maWVsZHMYBSADKAkSEgoKY29uZmlkZW5jZRgGIAEoASKVAQoRQmF0Y2hTY2hlZHVsZUluZm8SDQoFdGl0bGUYASABKAkSEAoIc3RhcnRfdHMYAiABKAMSEAoIZHVyYXRpb24YAyABKAUSEAoIbG9jYXRpb24YBCABKAkSFwoPcmVjdXJyZW5jZV9ydWxlGAUgASgJEhMKC2VuZF9kYXRlX3RzGAYgASgDEg0KBWNvdW50GAcgASgFIm4KG0JhdGNoQ3JlYXRlU2NoZWR1bGVzUmVxdWVzdBIyCgRpbmZvGAEgASgLMh8ubWVtb3MuYXBpLnYxLkJhdGNoU2NoZWR1bGVJbmZvQgPgQQISGwoTc2tpcF9jb25mbGljdF9jaGVjaxgCIAEoCCKLAQocQmF0Y2hDcmVhdGVTY2hlZHVsZXNSZXNwb25zZRIpCglzY2hlZHVsZXMYASADKAsyFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUSFQoNY3JlYXRlZF9jb3VudBgCIAEoBRIpCgljb25mbGljdHMYAyADKAsyFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUytAoKD1NjaGVkdWxlU2VydmljZRJrCg5DcmVhdGVTY2hlZHVsZRIjLm1lbW9zLmFwaS52MS5DcmVhdGVTY2hlZHVsZVJlcXVlc3QaFi5tZW1vcy5hcGkudjEuU2NoZWR1bGUiHILT5JMCFjoBKiIRL2FwaS92MS9zY2hlZHVsZXMScwoNTGlzdFNjaGVkdWxlcxIiLm1lbW9zLmFwaS52MS5MaXN0U2NoZWR1bGVzUmVxdWVzdBojLm1lbW9zLmFwaS52MS5MaXN0U2NoZWR1bGVzUmVzcG9uc2UiGYLT5JMCExIRL2FwaS92MS9zY2hlZHVsZXMSawoLR2V0U2NoZWR1bGUSIC5tZW1vcy5hcGkudjEuR2V0U2NoZWR1bGVSZXF1ZXN0GhYubWVtb3MuYXBpLnYxLlNjaGVkdWxlIiKC0+STAhwSGi9hcGkvdjEve25hbWU9c2NoZWR1bGVzLyp9En0KDlVwZGF0ZVNjaGVkdWxlEiMubWVtb3MuYXBpLnYxLlVwZGF0ZVNjaGVkdWxlUmVxdWVzdBoWLm1lbW9zLmFwaS52MS5TY2hlZHVsZSIugtPkkwIoOgEqMiMvYXBpL3YxL3tzY2hlZHVsZS5uYW1lPXNjaGVkdWxlcy8qfRJxCg5EZWxldGVTY2hlZHVsZRIjLm1lbW9zLmFwaS52MS5EZWxldGVTY2hlZHVsZVJlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkiIoLT5JMCHCoaL2FwaS92MS97bmFtZT1zY2hlZHVsZXMvKn0ShAEKDUNoZWNrQ29uZmxpY3QSIi5tZW1vcy5hcGkudjEuQ2hlY2tDb25mbGljdFJlcXVlc3QaIy5tZW1vcy5hcGkudjEuQ2hlY2tDb25mbGljdFJlc3BvbnNlIiqC0+STAiQ6ASoiHy9hcGkvdjEvc2NoZWR1bGVzOmNoZWNrQ29uZmxpY3QSoAEKFlBhcnNlQW5kQ3JlYXRlU2NoZWR1bGUSKy5tZW1vcy5hcGkudjEuUGFyc2VBbmRDcmVhdGVTY2hlZHVsZVJlcXVlc3QaLC5tZW1vcy5hcGkudjEuUGFyc2VBbmRDcmVhdGVTY2hlZHVsZVJlc3BvbnNlIiuC0+STAiU6ASoiIC9hcGkvdjEvc2NoZWR1bGVzOnBhcnNlQW5kQ3JlYXRlEogBChBQcmVjaGVja1NjaGVkdWxlEiUubWVtb3MuYXBpLnYxLlByZWNoZWNrU2NoZWR1bGVSZXF1ZXN0GiYubWVtb3MuYXBpLnYxLlByZWNoZWNrU2NoZWR1bGVSZXNwb25zZSIlgtPkkwIfOgEqIhovYXBpL3YxL3NjaGVkdWxlczpwcmVjaGVjaxKQAQoSQmF0Y2hQYXJzZVNjaGVkdWxlEicubWVtb3MuYXBpLnYxLkJhdGNoUGFyc2VTY2hlZHVsZVJlcXVlc3QaKC5tZW1vcy5hcGkudjEuQmF0Y2hQYXJzZVNjaGVkdWxlUmVzcG9uc2UiJ4LT5JMCIToBKiIcL2FwaS92MS9zY2hlZHVsZXM6YmF0Y2hQYXJzZRKXAQoUQmF0Y2hDcmVhdGVTY2hlZHVsZXMSKS5tZW1vcy5hcGkudjEuQmF0Y2hDcmVhdGVTY2hlZHVsZXNSZXF1ZXN0GioubWVtb3MuYXBpLnYxLkJhdGNoQ3JlYXRlU2NoZWR1bGVzUmVzcG9uc2UiKILT5JMCIjoBKiIdL2FwaS92MS9zY2hlZHVsZXM6YmF0Y2hDcmVhdGVCrwEKEGNvbS5tZW1vcy5hcGkudjFCFFNjaGVkdWxlU2VydmljZVByb3RvUAFaM2dpdGh1Yi5jb20vaHJ5Z28vZGl2aW5lc2Vuc2UvcHJvdG8vZ2VuL2FwaS92MTthcGl2MaICA01BWKoCDE1lbW9zLkFwaS5WMcoCDE1lbW9zXEFwaVxWMeICGE1lbW9zXEFwaVxWMVxHUEJNZXRhZGF0YeoCDk1lbW9zOjpBcGk6OlYxYgZwcm90bzM",[rd,sd,Il,kl]),cu=pi(lu,0),du=pi(lu,2),uu=pi(lu,3),mu=pi(lu,8),hu=pi(lu,10),gu=Vc(lu,0),pu=dl("Ch1hcGkvdjEvc2hvcnRjdXRfc2VydmljZS5wcm90bxIMbWVtb3MuYXBpLnYxIpoBCghTaG9ydGN1dBIRCgRuYW1lGAEgASgJQgPgQQgSEgoFdGl0bGUYAiABKAlCA+BBAhITCgZmaWx0ZXIYAyABKAlCA+BBATpS6kFPChVtZW1vcy5hcGkudjEvU2hvcnRjdXQSIXVzZXJzL3t1c2VyfS9zaG9ydGN1dHMve3Nob3J0Y3V0fSoJc2hvcnRjdXRzMghzaG9ydGN1dCJFChRMaXN0U2hvcnRjdXRzUmVxdWVzdBItCgZwYXJlbnQYASABKAlCHeBBAvpBFxIVbWVtb3MuYXBpLnYxL1Nob3J0Y3V0IkIKFUxpc3RTaG9ydGN1dHNSZXNwb25zZRIpCglzaG9ydGN1dHMYASADKAsyFi5tZW1vcy5hcGkudjEuU2hvcnRjdXQiQQoSR2V0U2hvcnRjdXRSZXF1ZXN0EisKBG5hbWUYASABKAlCHeBBAvpBFwoVbWVtb3MuYXBpLnYxL1Nob3J0Y3V0IpEBChVDcmVhdGVTaG9ydGN1dFJlcXVlc3QSLQoGcGFyZW50GAEgASgJQh3gQQL6QRcSFW1lbW9zLmFwaS52MS9TaG9ydGN1dBItCghzaG9ydGN1dBgCIAEoCzIWLm1lbW9zLmFwaS52MS5TaG9ydGN1dEID4EECEhoKDXZhbGlkYXRlX29ubHkYAyABKAhCA+BBASJ8ChVVcGRhdGVTaG9ydGN1dFJlcXVlc3QSLQoIc2hvcnRjdXQYASABKAsyFi5tZW1vcy5hcGkudjEuU2hvcnRjdXRCA+BBAhI0Cgt1cGRhdGVfbWFzaxgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2tCA+BBASJEChVEZWxldGVTaG9ydGN1dFJlcXVlc3QSKwoEbmFtZRgBIAEoCUId4EEC+kEXChVtZW1vcy5hcGkudjEvU2hvcnRjdXQy3gUKD1Nob3J0Y3V0U2VydmljZRKNAQoNTGlzdFNob3J0Y3V0cxIiLm1lbW9zLmFwaS52MS5MaXN0U2hvcnRjdXRzUmVxdWVzdBojLm1lbW9zLmFwaS52MS5MaXN0U2hvcnRjdXRzUmVzcG9uc2UiM9pBBnBhcmVudILT5JMCJBIiL2FwaS92MS97cGFyZW50PXVzZXJzLyp9L3Nob3J0Y3V0cxJ6CgtHZXRTaG9ydGN1dBIgLm1lbW9zLmFwaS52MS5HZXRTaG9ydGN1dFJlcXVlc3QaFi5tZW1vcy5hcGkudjEuU2hvcnRjdXQiMdpBBG5hbWWC0+STAiQSIi9hcGkvdjEve25hbWU9dXNlcnMvKi9zaG9ydGN1dHMvKn0SlQEKDkNyZWF0ZVNob3J0Y3V0EiMubWVtb3MuYXBpLnYxLkNyZWF0ZVNob3J0Y3V0UmVxdWVzdBoWLm1lbW9zLmFwaS52MS5TaG9ydGN1dCJG2kEPcGFyZW50LHNob3J0Y3V0gtPkkwIuOghzaG9ydGN1dCIiL2FwaS92MS97cGFyZW50PXVzZXJzLyp9L3Nob3J0Y3V0cxKjAQoOVXBkYXRlU2hvcnRjdXQSIy5tZW1vcy5hcGkudjEuVXBkYXRlU2hvcnRjdXRSZXF1ZXN0GhYubWVtb3MuYXBpLnYxLlNob3J0Y3V0IlTaQRRzaG9ydGN1dCx1cGRhdGVfbWFza4LT5JMCNzoIc2hvcnRjdXQyKy9hcGkvdjEve3Nob3J0Y3V0Lm5hbWU9dXNlcnMvKi9zaG9ydGN1dHMvKn0SgAEKDkRlbGV0ZVNob3J0Y3V0EiMubWVtb3MuYXBpLnYxLkRlbGV0ZVNob3J0Y3V0UmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSIx2kEEbmFtZYLT5JMCJCoiL2FwaS92MS97bmFtZT11c2Vycy8qL3Nob3J0Y3V0cy8qfUKvAQoQY29tLm1lbW9zLmFwaS52MUIUU2hvcnRjdXRTZXJ2aWNlUHJvdG9QAVozZ2l0aHViLmNvbS9ocnlnby9kaXZpbmVzZW5zZS9wcm90by9nZW4vYXBpL3YxO2FwaXYxogIDTUFYqgIMTWVtb3MuQXBpLlYxygIMTWVtb3NcQXBpXFYx4gIYTWVtb3NcQXBpXFYxXEdQQk1ldGFkYXRh6gIOTWVtb3M6OkFwaTo6VjFiBnByb3RvMw",[rd,od,sd,id,Il,kl]),bu=pi(pu,0),fu=Vc(pu,0);let xu={memoRelatedSetting:{disallowPublicVisibility:!1}};const vu={ROOT:"/",HOME:"/home",ATTACHMENTS:"/attachments",INBOX:"/inbox",ARCHIVED:"/archived",SETTING:"/setting",EXPLORE:"/explore",AUTH:"/auth",CHAT:"/chat",SCHEDULE:"/schedule",REVIEW:"/review",KNOWLEDGE_GRAPH:"/knowledge-graph"},yu=[vu.AUTH,vu.EXPLORE,"/u/","/memos/"],Eu=[vu.ROOT,vu.ATTACHMENTS,vu.INBOX,vu.ARCHIVED,vu.SETTING];function Nu(){const e=window.location.pathname;if(t=e,yu.some(e=>t.startsWith(e)))return;var t;const n=xu.memoRelatedSetting.disallowPublicVisibility,a=n?vu.AUTH:vu.EXPLORE;(n||function(e){return Eu.includes(e)}(e))&&window.location.replace(a)}const wu="X-Retry",Au="true",Su=(()=>{let e=!1,t=null;return{refresh:async n=>(e&&t||(e=!0,t=n().finally(()=>{e=!1,t=null})),t)}})(),Vu=(e,t)=>globalThis.fetch(e,{...t,credentials:"include"}),Iu=Nc(Cd,ad({baseUrl:window.location.origin,useBinaryFormat:!0,fetch:Vu,interceptors:[]}));async function ku(){const e=await Iu.refreshToken({});if(!e.accessToken)throw new mc("Refresh token response missing access token",Xr.Internal);const t=e.expiresAt?gl(e.expiresAt):void 0;$c(e.accessToken,t)}var Zu,Wu;const Gu=(Zu=Vu,Wu=6e5,async(e,t)=>{const n=new AbortController,a=setTimeout(()=>n.abort(),Wu);try{const r=await Zu(e,{...t,signal:n.signal});return clearTimeout(a),r}catch(r){if(clearTimeout(a),r instanceof Error&&"AbortError"===r.name)throw new Error(`Request timeout after ${Wu}ms`);throw r}}),Ru=ad({baseUrl:window.location.origin,useBinaryFormat:!1,fetch:Gu,interceptors:[e=>async t=>e(t),e=>async t=>{const n=Pc();n&&t.header.set("Authorization",`Bearer ${n}`);try{return await e(t)}catch(a){if(!(a instanceof mc))throw a;if(a.code!==Xr.Unauthenticated)throw a;if(t.header.get(wu)===Au)throw a;try{await Su.refresh(ku);const n=Pc();if(!n)throw new mc("Token refresh succeeded but no token available",Xr.Internal);return t.header.set("Authorization",`Bearer ${n}`),t.header.set(wu,Au),await e(t)}catch(r){throw Nu(),r}}}]}),Cu=Nc(Pd,Ru),ju=Nc(Cd,Ru),Fu=Nc(Rd,Ru),Yu=Nc(iu,Ru),Xu=Nc(Ed,Ru),Bu=Nc(fu,Ru),Tu=Nc(ld,Ru),Mu=Nc(Md,Ru),Lu=Nc(fd,Ru),Uu=Nc(gu,Ru),zu=Nc(xd,Ru),Du="memos/",Qu="activities/",Ju=e=>e.split(Du).pop()||"",Ku=e=>parseInt(e.split("identity-providers/").pop()||"",10),Ou=e=>`instance/settings/${(e=>Hd[e])(e)}`,_u=(e,t)=>`${e}/settings/${(e=>Zd[e])(t)}`,Hu={all:["users"],details:()=>[...Hu.all,"detail"],detail:e=>[...Hu.details(),e],stats:()=>[...Hu.all,"stats"],userStats:e=>[...Hu.stats(),e],currentUser:()=>[...Hu.all,"current"],shortcuts:()=>[...Hu.all,"shortcuts"],notifications:()=>[...Hu.all,"notifications"],byNames:e=>[...Hu.all,"byNames",...e.sort()]};function Pu(){return u({queryKey:Hu.currentUser(),queryFn:async()=>{const{user:e}=await ju.getCurrentUser({});return e},staleTime:3e5})}function $u(e,t){return u({queryKey:Hu.detail(e),queryFn:async()=>await Fu.getUser({name:e}),enabled:t?.enabled??!0,staleTime:3e5})}function qu(){const{data:e}=Pu();return u({queryKey:Hu.notifications(),queryFn:async()=>{if(!e?.name)return[];const{notifications:t}=await Fu.listUserNotifications({parent:e.name});return t},enabled:!!e?.name,staleTime:3e4})}function em(){const e=m();return h({mutationFn:async({user:e,updateMask:t})=>await Fu.updateUser({user:e,updateMask:fo(Zl,{paths:t})}),onSuccess:t=>{e.setQueryData(Hu.detail(t.name),t),e.invalidateQueries({queryKey:Hu.currentUser()})}})}function tm(){const e=m();return h({mutationFn:async e=>(await Fu.deleteUser({name:e}),e),onSuccess:t=>{e.removeQueries({queryKey:Hu.detail(t)}),e.invalidateQueries({queryKey:Hu.all})}})}function nm(){return u({queryKey:Hu.all,queryFn:async()=>{const{users:e}=await Fu.listUsers({});return e}})}function am(e){const t=m();return h({mutationFn:async({generalSetting:t,updateMask:n})=>{if(!e)throw new Error("No current user");const a=_u(e,Zd.GENERAL),r=fo(Id,{name:a,value:{case:"generalSetting",value:t}});return await Fu.updateUserSetting({setting:r,updateMask:fo(Zl,{paths:n})})},onSuccess:()=>{t.invalidateQueries({queryKey:[...Hu.all,"settings"]})}})}const rm=r.createContext(null);function om({children:e}){const t=m(),[n,a]=r.useState({currentUser:void 0,userGeneralSetting:void 0,userWebhooksSetting:void 0,shortcuts:[],isInitialized:!1,isLoading:!0}),s=r.useCallback(async e=>{const[{settings:t},{shortcuts:n}]=await Promise.all([Fu.listUserSettings({parent:e}),Bu.listShortcuts({parent:e})]),a=t.find(e=>"generalSetting"===e.value.case),r=t.find(e=>"webhooksSetting"===e.value.case);return{userGeneralSetting:"generalSetting"===a?.value.case?a.value.value:void 0,userWebhooksSetting:"webhooksSetting"===r?.value.case?r.value.value:void 0,shortcuts:n}},[]),i=r.useCallback(async()=>{a(e=>({...e,isLoading:!0}));try{const{user:e}=await ju.getCurrentUser({});if(!e)return qc(),void a({currentUser:void 0,userGeneralSetting:void 0,userWebhooksSetting:void 0,shortcuts:[],isInitialized:!0,isLoading:!1});const n=await s(e.name);a({currentUser:e,...n,isInitialized:!0,isLoading:!1}),t.setQueryData(Hu.currentUser(),e),t.setQueryData(Hu.detail(e.name),e)}catch(e){e&&"object"==typeof e&&"code"in e&&(e.code,Xr.Unauthenticated),qc(),a({currentUser:void 0,userGeneralSetting:void 0,userWebhooksSetting:void 0,shortcuts:[],isInitialized:!0,isLoading:!1})}},[s,t]),l=r.useCallback(async()=>{try{await ju.signOut({})}catch(e){}finally{qc(),a({currentUser:void 0,userGeneralSetting:void 0,userWebhooksSetting:void 0,shortcuts:[],isInitialized:!0,isLoading:!1}),t.clear()}},[t]),c=r.useCallback(async()=>{a(e=>e.currentUser?(s(e.currentUser.name).then(e=>{a(t=>({...t,...e}))}),e):e)},[s]),d=r.useMemo(()=>({...n,initialize:i,logout:l,refetchSettings:c}),[n,i,l,c]);return o.jsx(rm.Provider,{value:d,children:e})}function sm(){const e=r.useContext(rm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const im="instance/settings/",lm=e=>{const t=Hd[e];return`${im}${t}`},cm=r.createContext(null);function dm({children:e}){const[t,n]=r.useState({profile:fo(Ud,{}),settings:[],isInitialized:!1,isLoading:!0}),a=r.useMemo(()=>{const e=t.settings.find(e=>e.name===`${im}GENERAL`);return"generalSetting"===e?.value.case?e.value.value:fo(Dd,{})},[t.settings]),s=r.useMemo(()=>{const e=t.settings.find(e=>e.name===`${im}MEMO_RELATED`);return"memoRelatedSetting"===e?.value.case?e.value.value:fo(_d,{})},[t.settings]),i=r.useMemo(()=>{const e=t.settings.find(e=>e.name===`${im}STORAGE`);return"storageSetting"===e?.value.case?e.value.value:fo(Jd,{})},[t.settings]),l=r.useCallback(async()=>{n(e=>({...e,isLoading:!0}));try{const t=await Cu.getInstanceProfile({}),[a,r]=await Promise.all([Cu.getInstanceSetting({name:lm(Hd.GENERAL)}),Cu.getInstanceSetting({name:lm(Hd.MEMO_RELATED)})]);"memoRelatedSetting"===r.value.case&&(e={memoRelatedSetting:{disallowPublicVisibility:r.value.value.disallowPublicVisibility}},xu={...xu,...e}),n({profile:t,settings:[a,r],isInitialized:!0,isLoading:!1})}catch(t){n(e=>({...e,isInitialized:!0,isLoading:!1}))}var e},[]),c=r.useCallback(async e=>{const t=await Cu.getInstanceSetting({name:lm(e)});n(e=>({...e,settings:[...e.settings.filter(e=>e.name!==t.name),t]}))},[]),d=r.useCallback(async e=>{await Cu.updateInstanceSetting({setting:e}),n(t=>({...t,settings:[...t.settings.filter(t=>t.name!==e.name),e]}))},[]),u=r.useMemo(()=>({...t,generalSetting:a,memoRelatedSetting:s,storageSetting:i,initialize:l,fetchSetting:c,updateSetting:d}),[t,a,s,i,l,c,d]);return o.jsx(cm.Provider,{value:u,children:e})}function um(){const e=r.useContext(cm);if(!e)throw new Error("useInstance must be used within InstanceProvider");return e}const mm=r.createContext(null),hm="memos-view-setting";function gm({children:e}){const[t,n]=r.useState(()=>{try{const e=localStorage.getItem(hm);if(e){const t=JSON.parse(e);return{orderByTimeAsc:Boolean(t.orderByTimeAsc??!1),layout:["LIST","MASONRY"].includes(t.layout)?t.layout:"LIST"}}}catch(e){}return{orderByTimeAsc:!1,layout:"LIST"}}),a=e=>{try{localStorage.setItem(hm,JSON.stringify(e))}catch(t){}};return o.jsx(mm.Provider,{value:{...t,toggleSortOrder:()=>{n(e=>{const t={...e,orderByTimeAsc:!e.orderByTimeAsc};return a(t),t})},setLayout:e=>{n(t=>{const n={...t,layout:e};return a(n),n})}},children:e})}function pm(){const e=r.useContext(mm);if(!e)throw new Error("useView must be used within ViewProvider");return e}const bm=new g({defaultOptions:{queries:{staleTime:3e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!0,refetchOnReconnect:!0},mutations:{retry:1}}}),fm=e=>`${e.factor}:${e.value}`,xm=e=>{if(!e)return[];try{return e.split(",").map(e=>{const[t,n]=e.split(":");return{factor:t,value:decodeURIComponent(n||"")}})}catch{return[]}},vm=e=>e.map(e=>`${e.factor}:${encodeURIComponent(e.value)}`).join(","),ym=r.createContext(null);function Em({children:e}){const[t,n]=p(),a=r.useRef(""),s=r.useRef(""),[i,l]=r.useState(()=>xm(t.get("filter"))),[c,d]=r.useState(void 0);r.useEffect(()=>{const e=t.get("filter")||"";if(e!==a.current){a.current=e;const t=xm(e);l(t),s.current=vm(t)}},[t]),r.useEffect(()=>{const e=vm(i);if(e!==s.current&&e!==a.current){s.current=e;const r=new URLSearchParams(t);i.length>0?r.set("filter",e):r.delete("filter"),n(r,{replace:!0}),a.current=i.length>0?e:""}},[i,t,n]);const u=r.useCallback(e=>i.filter(t=>t.factor===e),[i]),m=r.useCallback(e=>{l(e)},[]),h=r.useCallback(e=>{l(t=>Ot([...t,e],fm))},[]),g=r.useCallback(e=>{l(t=>t.filter(t=>!e(t)))},[]),b=r.useCallback(e=>{l(t=>t.filter(t=>t.factor!==e))},[]),f=r.useCallback(()=>{l([]),d(void 0)},[]),x=r.useCallback(e=>{d(e)},[]),v=r.useCallback(e=>i.some(t=>fm(t)===fm(e)),[i]),y=i.length>0||void 0!==c;return o.jsx(ym.Provider,{value:{filters:i,shortcut:c,hasActiveFilters:y,getFiltersByFactor:u,setFilters:m,addFilter:h,removeFilter:g,removeFiltersByFactor:b,clearAllFilters:f,setShortcut:x,hasFilter:v},children:e})}function Nm(){const e=r.useContext(ym);if(!e)throw new Error("useMemoFilterContext must be used within MemoFilterProvider");return e}const wm=()=>{const e=b();return(t,n)=>{window.document.startViewTransition?document.startViewTransition(()=>{e(t,n)}):e(t,n)}},Am=()=>{const{i18n:e}=n(),{userGeneralSetting:t}=sm();r.useEffect(()=>{if(!t)return;const e=(n=t.locale,ra()||(n&&ia(n)?n:oa(navigator.language)));var n;la(e)},[t?.locale]),r.useEffect(()=>{const t=e.language;document.documentElement.setAttribute("lang",t),["ar","fa"].includes(t)?document.documentElement.setAttribute("dir","rtl"):document.documentElement.setAttribute("dir","ltr")},[e.language])},Sm=["system","default","default-dark","midnight","paper","whitewall"],Vm="memos-theme",Im="instance-theme",km={default:null,"default-dark":':root {\n  --background: oklch(0.2 0.003 270);\n  --foreground: oklch(0.92 0.005 270);\n  --card: oklch(0.23 0.003 270);\n  --card-foreground: oklch(0.92 0.005 270);\n  --popover: oklch(0.23 0.003 270);\n  --popover-foreground: oklch(0.9 0.005 270);\n  --primary: oklch(0.6 0.08 250);\n  --primary-foreground: oklch(0.2 0.003 270);\n  --secondary: oklch(0.27 0.005 270);\n  --secondary-foreground: oklch(0.88 0.004 270);\n  --muted: oklch(0.25 0.005 270);\n  --muted-foreground: oklch(0.75 0.004 270);\n  --accent: oklch(0.3 0.008 270);\n  --accent-foreground: oklch(0.8 0.003 270);\n  --destructive: oklch(0.55 0.1 25);\n  --destructive-foreground: oklch(0.92 0.005 270);\n  --border: oklch(0.33 0.005 270);\n  --input: oklch(0.37 0.008 270);\n  --ring: oklch(0.6 0.08 250);\n  --chart-1: oklch(0.65 0.12 30);\n  --chart-2: oklch(0.65 0.12 260);\n  --chart-3: oklch(0.58 0.1 120);\n  --chart-4: oklch(0.62 0.12 300);\n  --chart-5: oklch(0.7 0.15 60);\n  --sidebar: oklch(0.17 0.002 270);\n  --sidebar-foreground: oklch(0.8 0.003 270);\n  --sidebar-primary: oklch(0.6 0.08 250);\n  --sidebar-primary-foreground: oklch(0.2 0.003 270);\n  --sidebar-accent: oklch(0.3 0.008 270);\n  --sidebar-accent-foreground: oklch(0.8 0.003 270);\n  --sidebar-border: oklch(0.33 0.005 270);\n  --sidebar-ring: oklch(0.6 0.08 250);\n  --font-sans:\n    ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    "PingFang SC", "Microsoft YaHei", "Noto Sans SC",\n    "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji";\n  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);\n  --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);\n  --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);\n  --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);\n  --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);\n  --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);\n  --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);\n  --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Semantic spacing variables */\n  --spacing-xs: 0.25rem; /* 4px */\n  --spacing-sm: 0.5rem; /* 8px */\n  --spacing-md: 1rem; /* 16px */\n  --spacing-lg: 1.5rem; /* 24px */\n  --spacing-xl: 2rem; /* 32px */\n\n  /* Component padding */\n  --padding-component-sm: var(--spacing-sm);\n  --padding-component-md: var(--spacing-md);\n  --padding-component-lg: var(--spacing-lg);\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-mono);\n  --font-serif: var(--font-serif);\n\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n\n  --shadow-2xs: var(--shadow-2xs);\n  --shadow-xs: var(--shadow-xs);\n  --shadow-sm: var(--shadow-sm);\n  --shadow: var(--shadow);\n  --shadow-md: var(--shadow-md);\n  --shadow-lg: var(--shadow-lg);\n  --shadow-xl: var(--shadow-xl);\n  --shadow-2xl: var(--shadow-2xl);\n\n  --spacing-xs: var(--spacing-xs);\n  --spacing-sm: var(--spacing-sm);\n  --spacing-md: var(--spacing-md);\n  --spacing-lg: var(--spacing-lg);\n  --spacing-xl: var(--spacing-xl);\n}\n',midnight:':root {\n  --background: oklch(0.14 0.003 270);\n  --foreground: oklch(0.92 0.003 270);\n  --card: oklch(0.18 0.003 270);\n  --card-foreground: oklch(0.92 0.003 270);\n  --popover: oklch(0.18 0.003 270);\n  --popover-foreground: oklch(0.9 0.003 270);\n  --primary: oklch(0.7 0.08 290);\n  --primary-foreground: oklch(0.14 0.003 270);\n  --secondary: oklch(0.2 0.005 290);\n  --secondary-foreground: oklch(0.88 0.003 270);\n  --muted: oklch(0.18 0.005 270);\n  --muted-foreground: oklch(0.7 0.003 270);\n  --accent: oklch(0.22 0.008 295);\n  --accent-foreground: oklch(0.92 0.003 270);\n  --destructive: oklch(0.55 0.1 25);\n  --destructive-foreground: oklch(0.95 0.005 270);\n  --border: oklch(0.25 0.005 270);\n  --input: oklch(0.3 0.008 270);\n  --ring: oklch(0.7 0.08 290);\n  --chart-1: oklch(0.7 0.12 295);\n  --chart-2: oklch(0.7 0.12 285);\n  --chart-3: oklch(0.64 0.1 300);\n  --chart-4: oklch(0.68 0.12 295);\n  --chart-5: oklch(0.75 0.15 305);\n  --sidebar: oklch(0.13 0.002 270);\n  --sidebar-foreground: oklch(0.92 0.003 270);\n  --sidebar-primary: oklch(0.7 0.08 290);\n  --sidebar-primary-foreground: oklch(0.14 0.003 270);\n  --sidebar-accent: oklch(0.22 0.008 295);\n  --sidebar-accent-foreground: oklch(0.92 0.003 270);\n  --sidebar-border: oklch(0.25 0.005 270);\n  --sidebar-ring: oklch(0.7 0.08 290);\n  --font-sans:\n    ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    "PingFang SC", "Microsoft YaHei", "Noto Sans SC",\n    "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji";\n  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);\n  --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);\n  --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);\n  --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 1px 2px -1px hsl(0 0% 0% / 0.1);\n  --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 2px 4px -1px hsl(0 0% 0% / 0.1);\n  --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 4px 6px -1px hsl(0 0% 0% / 0.1);\n  --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.1), 0 8px 10px -1px hsl(0 0% 0% / 0.1);\n  --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Semantic spacing variables */\n  --spacing-xs: 0.25rem; /* 4px */\n  --spacing-sm: 0.5rem; /* 8px */\n  --spacing-md: 1rem; /* 16px */\n  --spacing-lg: 1.5rem; /* 24px */\n  --spacing-xl: 2rem; /* 32px */\n\n  /* Component padding */\n  --padding-component-sm: var(--spacing-sm);\n  --padding-component-md: var(--spacing-md);\n  --padding-component-lg: var(--spacing-lg);\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-mono);\n  --font-serif: var(--font-serif);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --shadow-2xs: var(--shadow-2xs);\n  --shadow-xs: var(--shadow-xs);\n  --shadow-sm: var(--shadow-sm);\n  --shadow: var(--shadow);\n  --shadow-md: var(--shadow-md);\n  --shadow-lg: var(--shadow-lg);\n  --shadow-xl: var(--shadow-xl);\n  --shadow-2xl: var(--shadow-2xl);\n\n  --spacing-xs: var(--spacing-xs);\n  --spacing-sm: var(--spacing-sm);\n  --spacing-md: var(--spacing-md);\n  --spacing-lg: var(--spacing-lg);\n  --spacing-xl: var(--spacing-xl);\n}\n',paper:':root {\n  --background: oklch(0.95 0.015 75);\n  --foreground: oklch(0.25 0.02 65);\n  --card: oklch(0.98 0.008 80);\n  --card-foreground: oklch(0.22 0.015 68);\n  --popover: oklch(0.98 0.008 80);\n  --popover-foreground: oklch(0.25 0.02 65);\n  --primary: oklch(0.45 0.08 45);\n  --primary-foreground: oklch(0.98 0.008 80);\n  --secondary: oklch(0.92 0.025 70);\n  --secondary-foreground: oklch(0.35 0.03 60);\n  --muted: oklch(0.9 0.025 75);\n  --muted-foreground: oklch(0.5 0.02 68);\n  --accent: oklch(0.88 0.035 55);\n  --accent-foreground: oklch(0.25 0.02 65);\n  --destructive: oklch(0.48 0.15 25);\n  --destructive-foreground: oklch(0.98 0.008 80);\n  --border: oklch(0.85 0.025 72);\n  --input: oklch(0.8 0.03 75);\n  --ring: oklch(0.45 0.08 45);\n  --chart-1: oklch(0.5686 0.0549 42.7834);\n  --chart-2: oklch(0.6275 0.0392 85.6723);\n  --chart-3: oklch(0.7843 0.0235 78.9456);\n  --chart-4: oklch(0.7451 0.0314 68.2341);\n  --chart-5: oklch(0.5412 0.0431 55.8934);\n  --sidebar: oklch(0.9647 0.0118 83.7892);\n  --sidebar-foreground: oklch(0.2941 0.0196 67.6524);\n  --sidebar-primary: oklch(0.4627 0.0471 52.3674);\n  --sidebar-primary-foreground: oklch(0.9765 0.0086 85.8732);\n  --sidebar-accent: oklch(0.9412 0.0196 78.9456);\n  --sidebar-accent-foreground: oklch(0.2647 0.0157 71.2341);\n  --sidebar-border: oklch(0.9294 0.0137 80.5674);\n  --sidebar-ring: oklch(0.7647 0.0235 75.8934);\n  --font-sans:\n    ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    "PingFang SC", "Microsoft YaHei", "Noto Sans SC",\n    "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji";\n  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0 1px 3px 0px hsl(34 12% 15% / 0.04);\n  --shadow-xs: 0 1px 3px 0px hsl(34 12% 15% / 0.04);\n  --shadow-sm: 0 1px 3px 0px hsl(34 12% 15% / 0.08), 0 1px 2px -1px hsl(34 12% 15% / 0.08);\n  --shadow: 0 1px 3px 0px hsl(34 12% 15% / 0.08), 0 1px 2px -1px hsl(34 12% 15% / 0.08);\n  --shadow-md: 0 1px 3px 0px hsl(34 12% 15% / 0.08), 0 2px 4px -1px hsl(34 12% 15% / 0.08);\n  --shadow-lg: 0 1px 3px 0px hsl(34 12% 15% / 0.08), 0 4px 6px -1px hsl(34 12% 15% / 0.08);\n  --shadow-xl: 0 1px 3px 0px hsl(34 12% 15% / 0.08), 0 8px 10px -1px hsl(34 12% 15% / 0.08);\n  --shadow-2xl: 0 1px 3px 0px hsl(34 12% 15% / 0.18);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Semantic spacing variables */\n  --spacing-xs: 0.25rem; /* 4px */\n  --spacing-sm: 0.5rem; /* 8px */\n  --spacing-md: 1rem; /* 16px */\n  --spacing-lg: 1.5rem; /* 24px */\n  --spacing-xl: 2rem; /* 32px */\n\n  /* Component padding */\n  --padding-component-sm: var(--spacing-sm);\n  --padding-component-md: var(--spacing-md);\n  --padding-component-lg: var(--spacing-lg);\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-mono);\n  --font-serif: var(--font-serif);\n\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n\n  --shadow-2xs: var(--shadow-2xs);\n  --shadow-xs: var(--shadow-xs);\n  --shadow-sm: var(--shadow-sm);\n  --shadow: var(--shadow);\n  --shadow-md: var(--shadow-md);\n  --shadow-lg: var(--shadow-lg);\n  --shadow-xl: var(--shadow-xl);\n  --shadow-2xl: var(--shadow-2xl);\n\n  --spacing-xs: var(--spacing-xs);\n  --spacing-sm: var(--spacing-sm);\n  --spacing-md: var(--spacing-md);\n  --spacing-lg: var(--spacing-lg);\n  --spacing-xl: var(--spacing-xl);\n}\n',whitewall:':root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.15 0.01 270);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.15 0.01 270);\n  --popover: oklch(0.98 0.001 270);\n  --popover-foreground: oklch(0.15 0.01 270);\n  --primary: oklch(0.4 0.08 250);\n  --primary-foreground: oklch(1 0 0);\n  --secondary: oklch(0.96 0.002 270);\n  --secondary-foreground: oklch(0.25 0.01 270);\n  --muted: oklch(0.96 0.002 270);\n  --muted-foreground: oklch(0.45 0.01 270);\n  --accent: oklch(0.94 0.003 270);\n  --accent-foreground: oklch(0.15 0.01 270);\n  --destructive: oklch(0.5 0.12 25);\n  --destructive-foreground: oklch(1 0 0);\n  --border: oklch(0.9 0.005 270);\n  --input: oklch(0.94 0.003 270);\n  --ring: oklch(0.4 0.08 250);\n  --chart-1: oklch(0.6 0.15 30);\n  --chart-2: oklch(0.6 0.15 260);\n  --chart-3: oklch(0.7 0.1 120);\n  --chart-4: oklch(0.65 0.12 300);\n  --chart-5: oklch(0.55 0.18 60);\n  --sidebar: oklch(0.98 0.001 270);\n  --sidebar-foreground: oklch(0.2 0.01 270);\n  --sidebar-primary: oklch(0.4 0.08 250);\n  --sidebar-primary-foreground: oklch(1 0 0);\n  --sidebar-accent: oklch(0.94 0.003 270);\n  --sidebar-accent-foreground: oklch(0.15 0.01 270);\n  --sidebar-border: oklch(0.9 0.005 270);\n  --sidebar-ring: oklch(0.4 0.08 250);\n  --font-sans:\n    ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    "PingFang SC", "Microsoft YaHei", "Noto Sans SC",\n    "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji";\n  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0 1px 3px 0px hsl(240 10% 0% / 0.02);\n  --shadow-xs: 0 1px 3px 0px hsl(240 10% 0% / 0.03);\n  --shadow-sm: 0 1px 3px 0px hsl(240 10% 0% / 0.05), 0 1px 2px -1px hsl(240 10% 0% / 0.05);\n  --shadow: 0 1px 3px 0px hsl(240 10% 0% / 0.06), 0 1px 2px -1px hsl(240 10% 0% / 0.06);\n  --shadow-md: 0 1px 3px 0px hsl(240 10% 0% / 0.07), 0 2px 4px -1px hsl(240 10% 0% / 0.07);\n  --shadow-lg: 0 1px 3px 0px hsl(240 10% 0% / 0.08), 0 4px 6px -1px hsl(240 10% 0% / 0.08);\n  --shadow-xl: 0 1px 3px 0px hsl(240 10% 0% / 0.09), 0 8px 10px -1px hsl(240 10% 0% / 0.09);\n  --shadow-2xl: 0 1px 3px 0px hsl(240 10% 0% / 0.15);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Semantic spacing variables */\n  --spacing-xs: 0.25rem; /* 4px */\n  --spacing-sm: 0.5rem; /* 8px */\n  --spacing-md: 1rem; /* 16px */\n  --spacing-lg: 1.5rem; /* 24px */\n  --spacing-xl: 2rem; /* 32px */\n\n  /* Component padding */\n  --padding-component-sm: var(--spacing-sm);\n  --padding-component-md: var(--spacing-md);\n  --padding-component-lg: var(--spacing-lg);\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n\n  --font-sans: var(--font-sans);\n  --font-mono: var(--font-mono);\n  --font-serif: var(--font-serif);\n\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n\n  --shadow-2xs: var(--shadow-2xs);\n  --shadow-xs: var(--shadow-xs);\n  --shadow-sm: var(--shadow-sm);\n  --shadow: var(--shadow);\n  --shadow-md: var(--shadow-md);\n  --shadow-lg: var(--shadow-lg);\n  --shadow-xl: var(--shadow-xl);\n  --shadow-2xl: var(--shadow-2xl);\n\n  --spacing-xs: var(--spacing-xs);\n  --spacing-sm: var(--spacing-sm);\n  --spacing-md: var(--spacing-md);\n  --spacing-lg: var(--spacing-lg);\n  --spacing-xl: var(--spacing-xl);\n}\n'},Zm=[{value:"system",label:"Sync with system"},{value:"default",label:"Light"},{value:"default-dark",label:"Dark"},{value:"midnight",label:"Midnight"},{value:"paper",label:"Paper"},{value:"whitewall",label:"Whitewall"}],Wm=e=>Sm.includes(e)?e:"default",Gm=e=>{const t=Wm(e);return"system"===t?"undefined"!=typeof window&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?"default-dark":"default":t},Rm=()=>{try{const e=localStorage.getItem(Vm);return e&&Sm.includes(e)?e:null}catch{return null}},Cm=()=>Rm()??"system",jm=e=>{if(e&&Sm.includes(e))return e;const t=Rm();return t||"system"},Fm=e=>{if(document.getElementById(Im)?.remove(),"default"===e)return;const t=km[e];if(t){const e=document.createElement("style");e.id=Im,e.textContent=t,document.head.appendChild(e)}},Ym=["default-dark","midnight"],Xm=e=>{const t=Wm(e),n=Gm(t);var a;Fm(n),a=n,document.documentElement.setAttribute("data-theme",a);Ym.includes(n)?(document.documentElement.classList.add("dark"),document.documentElement.style.colorScheme="dark"):(document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light"),(e=>{try{localStorage.setItem(Vm,e)}catch{}})(t)},Bm=e=>{if("undefined"==typeof window||!window.matchMedia)return()=>{};const t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener?(t.addEventListener("change",e),()=>t.removeEventListener("change",e)):t.addListener?(t.addListener(e),()=>t.removeListener(e)):()=>{}},Tm="oauth_state",Mm=6e5;function Lm(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Um(e,t){const n=function(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}(),a=function(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Lm(e)}(),r=await async function(e){if(!crypto.subtle)return"";const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t);return Lm(new Uint8Array(n))}(a),o={state:n,identityProviderId:e,timestamp:Date.now(),returnUrl:t,codeVerifier:a};try{sessionStorage.setItem(Tm,JSON.stringify(o))}catch(s){throw new Error("Failed to initialize OAuth flow")}return{state:n,codeChallenge:r}}function zm(e){try{const t=sessionStorage.getItem(Tm);if(!t)return null;const n=JSON.parse(t);return Date.now()-n.timestamp>Mm||n.state!==e?(sessionStorage.removeItem(Tm),null):(sessionStorage.removeItem(Tm),{identityProviderId:n.identityProviderId,returnUrl:n.returnUrl,codeVerifier:n.codeVerifier})}catch(t){return sessionStorage.removeItem(Tm),null}}const Dm=()=>{const e=wm(),{profile:t,generalSetting:n}=um();return Am(),(()=>{const{userGeneralSetting:e}=sm();r.useEffect(()=>{if(!e)return;const t=jm(e.theme);Xm(t)},[e?.theme]),r.useEffect(()=>{const t=jm(e?.theme);if("system"===t)return Bm(()=>{Xm(t)})},[e?.theme])})(),r.useEffect(()=>{!function(){try{const e=sessionStorage.getItem(Tm);if(!e)return;const t=JSON.parse(e);Date.now()-t.timestamp>Mm&&sessionStorage.removeItem(Tm)}catch{sessionStorage.removeItem(Tm)}}()},[]),r.useEffect(()=>{t.owner||e("/auth/signup")},[t.owner,e]),r.useEffect(()=>{if(n.additionalStyle){const e=document.createElement("style");e.innerHTML=n.additionalStyle,e.setAttribute("type","text/css"),document.body.insertAdjacentElement("beforeend",e)}},[n.additionalStyle]),r.useEffect(()=>{if(n.additionalScript){if(e=n.additionalScript,[/<script/i,/javascript:/i,/on\w+\s*=/i,/<iframe/i,/<object/i,/<embed/i,/document\.cookie/i,/document\.write/i,/eval\s*\(/i,/new\s+Function/i].some(t=>t.test(e)))return;const t=document.createElement("script");t.innerHTML=n.additionalScript,document.head.appendChild(t)}var e},[n.additionalScript]),r.useEffect(()=>{if(!n.customProfile)return;document.title=n.customProfile.title;document.querySelector("link[rel~='icon']").href=n.customProfile.logoUrl||"/logo.webp"},[n.customProfile]),o.jsx(Em,{children:o.jsx(f,{})})},Qm=r.createContext(void 0),Jm=()=>{const e=r.useContext(Qm);if(!e)throw new Error("useScheduleContext must be used within ScheduleProvider");return e},Km=({children:e})=>{const[t,n]=r.useState(Qt().format("YYYY-MM-DD")),[a,s]=r.useState(""),[i,l]=r.useState([]),[c,d]=r.useState(!1),[u,m]=r.useState(!1);return o.jsx(Qm.Provider,{value:{selectedDate:t,setSelectedDate:n,searchQuery:a,setSearchQuery:s,filteredSchedules:i,setFilteredSchedules:l,hasSearchFilter:c,setHasSearchFilter:d,quickInputOpen:u,setQuickInputOpen:m},children:e})};function Om(e){return"type"in e&&"context-separator"===e.type}const _m="aichat_conversations",Hm="aichat_current_conversation",Pm="aichat_sidebar_tab";var $m=(e=>(e.MEMO="MEMO",e.SCHEDULE="SCHEDULE",e.AMAZING="AMAZING",e.GEEK="GEEK",e.EVOLUTION="EVOLUTION",e))($m||{});function qm(e){switch(e){case"MEMO":return pd.MEMO;case"SCHEDULE":return pd.SCHEDULE;default:return pd.AMAZING}}const eh={MEMO:{id:"MEMO",name:"memo",icon:"/images/parrots/icons/memo_icon.webp",displayName:"Memo",description:"Note assistant for searching, summarizing, and managing memos",color:"blue",available:!0,examplePrompts:["Search for programming notes","Summarize recent work memos","Find project management notes"],backgroundImage:"/images/parrots/memo_parrot_bg.webp"},SCHEDULE:{id:"SCHEDULE",name:"schedule",icon:"/images/parrots/icons/schedule_icon.webp",displayName:"Schedule",description:"Schedule assistant for creating, querying, and managing schedules",color:"orange",available:!0,examplePrompts:["What's on my schedule today","Am I free tomorrow afternoon","Create a meeting reminder for next week"],backgroundImage:"/images/parrots/schedule_bg.webp"},AMAZING:{id:"AMAZING",name:"amazing",icon:"/assistant-avatar.webp",displayName:"Amazing",description:"Comprehensive assistant combining memo and schedule features",color:"purple",available:!0,examplePrompts:["Summarize today's memos and schedule","Help me plan next week's work","Search recent project-related content"],backgroundImage:"/images/parrots/amazing_bg.webp"},GEEK:{id:"GEEK",name:"geek",icon:"/assistant-avatar.webp",displayName:"Geek",description:"Claude Code CLI integration for coding tasks",color:"violet",available:!0,examplePrompts:["Help me write a React component","Debug this function","Refactor this code"],backgroundImage:"/images/parrots/amazing_bg.webp"},EVOLUTION:{id:"EVOLUTION",name:"evolution",icon:"/assistant-avatar.webp",displayName:"Evolution",description:"System self-improvement mode for code evolution",color:"rose",available:!0,examplePrompts:["Optimize the database queries","Add error handling","Improve the test coverage"],backgroundImage:"/images/parrots/amazing_bg.webp"}},th={MEMO:{bubbleUser:"bg-slate-800 dark:bg-slate-300 text-white dark:text-slate-800",bubbleBg:"bg-white dark:bg-zinc-800",bubbleBorder:"border-slate-200 dark:border-slate-700",text:"text-slate-800 dark:text-slate-100",textSecondary:"text-slate-600 dark:text-slate-400",iconBg:"bg-slate-100 dark:bg-slate-700",iconText:"text-slate-700 dark:text-slate-300",inputBg:"bg-slate-50 dark:bg-slate-900",inputBorder:"border-slate-200 dark:border-slate-700",inputFocus:"focus:ring-slate-500 focus:border-slate-500",cardBg:"bg-white dark:bg-zinc-800",cardBorder:"border-slate-200 dark:border-slate-700",accent:"bg-red-500",accentText:"text-white"},SCHEDULE:{bubbleUser:"bg-cyan-600 dark:bg-cyan-500 text-white",bubbleBg:"bg-white dark:bg-zinc-800",bubbleBorder:"border-cyan-200 dark:border-cyan-700",text:"text-slate-800 dark:text-cyan-50",textSecondary:"text-slate-600 dark:text-cyan-200",iconBg:"bg-cyan-100 dark:bg-cyan-900",iconText:"text-cyan-700 dark:text-cyan-300",inputBg:"bg-cyan-50 dark:bg-cyan-950",inputBorder:"border-cyan-200 dark:border-cyan-700",inputFocus:"focus:ring-cyan-500 focus:border-cyan-500",cardBg:"bg-white dark:bg-zinc-800",cardBorder:"border-cyan-200 dark:border-cyan-700",accent:"bg-cyan-500",accentText:"text-white"},AMAZING:{bubbleUser:"bg-emerald-600 dark:bg-emerald-500 text-white",bubbleBg:"bg-white dark:bg-zinc-800",bubbleBorder:"border-emerald-200 dark:border-emerald-700",text:"text-slate-800 dark:text-emerald-50",textSecondary:"text-slate-600 dark:text-emerald-200",iconBg:"bg-emerald-100 dark:bg-emerald-900",iconText:"text-emerald-700 dark:text-emerald-300",inputBg:"bg-emerald-50 dark:bg-emerald-950",inputBorder:"border-emerald-200 dark:border-emerald-700",inputFocus:"focus:ring-emerald-500 focus:border-emerald-500",cardBg:"bg-white dark:bg-zinc-800",cardBorder:"border-emerald-200 dark:border-emerald-700",accent:"bg-emerald-500",accentText:"text-white"},GEEK:{bubbleUser:"bg-violet-600 dark:bg-violet-500 text-white",bubbleBg:"bg-white dark:bg-zinc-800",bubbleBorder:"border-violet-200 dark:border-violet-700",text:"text-slate-800 dark:text-violet-50",textSecondary:"text-slate-600 dark:text-violet-200",iconBg:"bg-violet-100 dark:bg-violet-900",iconText:"text-violet-700 dark:text-violet-300",inputBg:"bg-violet-50 dark:bg-violet-950",inputBorder:"border-violet-200 dark:border-violet-700",inputFocus:"focus:ring-violet-500 focus:border-violet-500",cardBg:"bg-white dark:bg-zinc-800",cardBorder:"border-violet-200 dark:border-violet-700",accent:"bg-violet-500",accentText:"text-white"},EVOLUTION:{bubbleUser:"bg-rose-600 dark:bg-rose-500 text-white",bubbleBg:"bg-white dark:bg-zinc-800",bubbleBorder:"border-rose-200 dark:border-rose-700",text:"text-slate-800 dark:text-rose-50",textSecondary:"text-slate-600 dark:text-rose-200",iconBg:"bg-rose-100 dark:bg-rose-900",iconText:"text-rose-700 dark:text-rose-300",inputBg:"bg-rose-50 dark:bg-rose-950",inputBorder:"border-rose-200 dark:border-rose-700",inputFocus:"focus:ring-rose-500 focus:border-rose-500",cardBg:"bg-white dark:bg-zinc-800",cardBorder:"border-rose-200 dark:border-rose-700",accent:"bg-rose-500",accentText:"text-white"}},nh={MEMO:"/images/parrots/icons/memo_icon.webp",SCHEDULE:"/images/parrots/icons/schedule_icon.webp",AMAZING:"/assistant-avatar.webp",GEEK:"/assistant-avatar.webp",EVOLUTION:"/assistant-avatar.webp"};var ah=(e=>(e.MEMO="MEMO",e.SCHEDULE="SCHEDULE",e.AMAZING="AMAZING",e.AUTO="AUTO",e))(ah||{});const rh={MEMO:{parrotId:$m.MEMO,name:"笔记",nameAlt:"Memo",description:"搜索与问答",icon:"🦜",color:"slate",soundEffects:{thinking:"嘎...",searching:"扑棱扑棱",found:"嗯嗯~",done:"扑棱！"},catchphrases:["让我想想...","笔记里说...","在记忆里找找..."]},SCHEDULE:{parrotId:$m.SCHEDULE,name:"日程",nameAlt:"Schedule",description:"规划与管理",icon:"⏰",color:"cyan",soundEffects:{checking:"滴答滴答",confirmed:"咔嚓！",scheduled:"安排好了",done:"妥妥的"},catchphrases:["安排好啦","时间搞定","妥妥的"]},AMAZING:{parrotId:$m.AMAZING,name:"综合",nameAlt:"Amazing",description:"笔记 + 日程",icon:"🌟",color:"emerald",soundEffects:{searching:"咻...",insight:"哇哦~",done:"噢！综合完成",multiTask:"同时搜索中"},catchphrases:["看看这个...","综合来看","发现规律了"]},AUTO:{parrotId:$m.AMAZING,name:"自动",nameAlt:"Auto",description:"智能识别",icon:"🤖",color:"emerald",soundEffects:{thinking:"嗯...让我想想",done:"✓"},catchphrases:["看看这个...","我帮你分析一下"]}};function oh(e){return rh[e].parrotId}function sh(e){switch(e){case $m.MEMO:return"MEMO";case $m.SCHEDULE:return"SCHEDULE";default:return"AMAZING"}}const ih="divinesense.ai_mode",lh="divinesense.immersive_mode",ch=()=>`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;function dh(e){return{[$m.MEMO]:"Chat with Memo",[$m.SCHEDULE]:"Chat with Schedule",[$m.AMAZING]:"Chat with Amazing"}[e]||"AI Chat"}const uh={conversations:[],currentConversationId:null,viewMode:"hub",sidebarTab:"history",sidebarOpen:!0,currentCapability:ah.AUTO,capabilityStatus:"idle",currentMode:"normal",geekMode:!1,evolutionMode:!1,immersiveMode:!1},mh=r.createContext(null);function hh(){const e=r.useContext(mh);if(!e)throw new Error("useAIChat must be used within AIChatProvider");return e}function gh(e){const t=[...e].reverse(),n=[];let a=0;for(const r of t)Om(r)?a>0&&n.length>0&&!Om(n[0])&&n.unshift(r):a<100&&(n.unshift(r),a++);return n}function ph({children:e,initialState:t}){const{t:a}=n(),[s,i]=r.useState(()=>{let e="normal",n=!1;if("undefined"!=typeof window)try{const t=localStorage.getItem(ih);e="geek"===t||"evolution"===t?t:"normal",n="true"===localStorage.getItem(lh)}catch{}return{...uh,...t,currentMode:e,geekMode:"geek"===e,evolutionMode:"evolution"===e,immersiveMode:n}}),l=r.useRef(!0);r.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=r.useCallback(e=>{if(!e||!e.startsWith("chat."))return e;try{if("chat.new"===e){return a("chat.new")||"New Chat"}if(e.match(/^chat\.new\.(\d+)$/)){return a("chat.new")||"New Chat"}if(e.endsWith(".title")){const t=a(e);if(t&&t!==e)return t;return{"chat.memo.title":"Memo Chat","chat.schedule.title":"Schedule Chat","chat.amazing.title":"Amazing Chat"}[e]||e}}catch(t){}return e},[a]),d=r.useCallback(e=>e.messages.filter(e=>!Om(e)).length,[]),u=r.useMemo(()=>s.conversations.find(e=>e.id===s.currentConversationId)||null,[s.conversations,s.currentConversationId]),m=r.useMemo(()=>s.conversations.map(e=>({id:e.id,title:e.title,parrotId:e.parrotId,updatedAt:e.updatedAt,messageCount:e.messageCount??d(e)})).sort((e,t)=>t.updatedAt-e.updatedAt),[s.conversations,d]),h=r.useCallback(e=>{if("SEPARATOR"===e.type)return{type:"context-separator",id:String(e.id),uid:e.uid,timestamp:1e3*Number(e.createdTs),synced:!0};let t={};try{t=JSON.parse(e.metadata||"{}")}catch{}return{id:String(e.id),uid:e.uid,role:e.role.toLowerCase(),content:e.content,timestamp:1e3*Number(e.createdTs),metadata:t}},[]),g=r.useCallback(e=>{switch(e){case pd.MEMO:return $m.MEMO;case pd.SCHEDULE:return $m.SCHEDULE;default:return $m.AMAZING}},[]),p=r.useCallback(e=>{switch(e){case $m.MEMO:return pd.MEMO;case $m.SCHEDULE:return pd.SCHEDULE;default:return pd.AMAZING}},[]),b=r.useCallback(e=>({id:String(e.id),title:c(e.title),parrotId:g(e.parrotId),createdAt:1e3*Number(e.createdTs),updatedAt:1e3*Number(e.updatedTs),messages:(e.messages??[]).map(e=>h(e)),referencedMemos:[],messageCount:e.messageCount}),[h,c,g]),f=r.useCallback(async()=>{try{const e=await Lu.listAIConversations({});i(t=>{const n=e.conversations.map(e=>b(e)),a=t.conversations.filter(e=>e.id.startsWith("chat_")),r=n.map(e=>{const n=t.conversations.find(t=>t.id===e.id);return n&&n.messages.length>0&&0===e.messages.length?{...e,messages:n.messages,messageCount:Math.max(e.messageCount??0,n.messageCount??0),messageCache:n.messageCache}:e});return{...t,conversations:[...a,...r]}})}catch(iv){}},[b]),x=r.useCallback(async e=>{for(const t of e)try{const e=p(t.parrotId);await Lu.createAIConversation({title:t.title,parrotId:e})}catch(iv){}localStorage.removeItem(_m)},[p]),v=r.useCallback((e,t)=>{const n=ch(),a=Date.now(),r=t||dh(e),o={id:n,title:r,parrotId:e,createdAt:a,updatedAt:a,messages:[],referencedMemos:[],messageCount:0};i(e=>({...e,conversations:[o,...e.conversations],currentConversationId:n,viewMode:"chat"}));const s=p(e),l=new Promise((e,t)=>{Lu.createAIConversation({title:r,parrotId:s}).then(t=>{const a=b(t);i(e=>{const t=e.conversations.find(e=>e.id===n),r=t?.messages||[],o=e.conversations.filter(e=>e.id!==n&&e.id!==a.id),s={...a,messages:r,messageCount:r.filter(e=>!Om(e)).length,messageCache:{lastMessageUid:"",totalCount:r.filter(e=>!Om(e)).length,hasMore:!1}};return{...e,conversations:[s,...o],currentConversationId:a.id}}),f(),e(a.id)}).catch(e=>{t(e)})});return{id:n,completed:l}},[b,p,f]),y=r.useCallback(e=>{const t=parseInt(e);isNaN(t)||Lu.deleteAIConversation({id:t}).then(()=>{f()}).catch(e=>{}),i(t=>{const n=t.conversations.filter(t=>t.id!==e),a=t.currentConversationId===e?n.length>0?n[0].id:null:t.currentConversationId;return{...t,conversations:n,currentConversationId:a,viewMode:0===n.length&&t.currentConversationId===e?"hub":t.viewMode}})},[f]),E=r.useCallback(e=>{i(t=>({...t,currentConversationId:e,viewMode:"chat"}))},[]),N=r.useCallback((e,t)=>{const n=parseInt(e);isNaN(n)||Lu.updateAIConversation({id:n,title:t}),i(n=>({...n,conversations:n.conversations.map(n=>n.id===e?{...n,title:t,updatedAt:Date.now()}:n)}))},[]),w=r.useCallback((e,t)=>{const n=ch(),a=Date.now();return i(r=>{const o=r.conversations.find(t=>t.id===e);if(!o)return r;const i="user"===t.role&&0===o.messages.filter(e=>!Om(e)&&"user"===e.role).length&&(o.title.startsWith("chat.")||o.title===dh(o.parrotId))&&t.content?function(e){const t=e.replace(/[#@\n\r]/g," ").replace(/\s+/g," ").trim();return 0===t.length?null:t.length<=20?t:t.slice(0,20)+"..."}(t.content):null;if(i){const t=parseInt(e);isNaN(t)||Lu.updateAIConversation({id:t,title:i})}return{...r,conversations:r.conversations.map(r=>{if(r.id!==e)return r;const o=(r.messageCount??0)+1;return{...r,title:i||r.title,messages:[...r.messages,{...t,id:n,timestamp:a,metadata:{...t.metadata,mode:s.currentMode}}],messageCount:o,updatedAt:a}})}}),n},[]),A=r.useCallback((e,t,n)=>{i(a=>({...a,conversations:a.conversations.map(a=>a.id!==e?a:{...a,messages:a.messages.map(e=>Om(e)||e.id!==t?e:n.metadata?{...e,...n,metadata:{...e.metadata,...n.metadata}}:{...e,...n}),updatedAt:Date.now()})}))},[]),S=r.useCallback((e,t)=>{i(n=>({...n,conversations:n.conversations.map(n=>n.id!==e?n:{...n,messages:n.messages.filter(e=>!Om(e)||"id"in e&&e.id!==t),updatedAt:Date.now()})}))},[]),V=r.useCallback(e=>{const t=parseInt(e);i(t=>({...t,conversations:t.conversations.map(t=>t.id===e?{...t,messages:[],messageCount:0,updatedAt:Date.now()}:t)})),isNaN(t)||Lu.clearConversationMessages({conversationId:t}).catch(e=>{})},[]),I=r.useCallback((e,t="manual")=>{const n=parseInt(e);return isNaN(n)||Lu.addContextSeparator({conversationId:n}).then(()=>{Lu.getAIConversation({id:n}).then(t=>{const n=b(t);i(t=>({...t,conversations:t.conversations.map(t=>t.id===e?n:t)}))})}).catch(e=>{}),""},[b]);function k(e,t,n,a){const r=n.messages.map(e=>a(e));return{...e,conversations:e.conversations.map(e=>{if(e.id!==t)return e;if(!e.messageCache)return{...e,messages:gh(r),messageCache:{lastMessageUid:n.latestMessageUid,totalCount:n.totalCount,hasMore:n.hasMore}};const a=e.messages||[],o=[...a],s=new Set(a.filter(e=>!Om(e)).map(e=>"uid"in e?e.uid:e.id));for(const t of r){if(Om(t)){o.push(t);continue}const e="uid"in t?t.uid:t.id;if(s.has(e))continue;const n=o.findIndex(e=>!Om(e)&&e.id.startsWith("chat_")&&e.role===t.role&&e.content===t.content);if(-1!==n){const a=o[n];o[n]={...t,metadata:{...a.metadata,...t.metadata}},s.add(e)}else o.push(t),s.add(e)}return{...e,messages:gh(o),messageCache:{lastMessageUid:n.latestMessageUid,totalCount:n.totalCount,hasMore:n.hasMore}}})}}const Z=r.useCallback(async e=>{const t=parseInt(e);isNaN(t)||i(n=>{const a=n.conversations.find(t=>t.id===e),r=a?.messageCache?.lastMessageUid||"";return Lu.listMessages({conversationId:t,lastMessageUid:r,limit:100}).then(n=>{l.current&&(n.syncRequired?(i(t=>({...t,conversations:t.conversations.map(t=>t.id!==e?t:{...t,messages:[],messageCache:void 0})})),Lu.listMessages({conversationId:t,lastMessageUid:"",limit:100}).then(t=>{l.current&&i(n=>k(n,e,t,h))})):i(t=>k(t,e,n,h)))}).catch(e=>{}),n})},[h]),W=r.useCallback(async e=>{const t=parseInt(e);isNaN(t)||i(n=>{const a=n.conversations.find(t=>t.id===e);if(!a?.messageCache?.hasMore)return n;const r=a.messages.find(e=>!Om(e));if(!r)return n;const o="uid"in r?r.uid:r.id;return Lu.listMessages({conversationId:t,lastMessageUid:o,limit:100}).then(t=>{if(!l.current)return;const n=t.messages.map(e=>h(e));i(a=>({...a,conversations:a.conversations.map(a=>a.id!==e?a:{...a,messages:[...n,...a.messages],messageCache:a.messageCache?{...a.messageCache,hasMore:t.hasMore}:void 0})}))}).catch(e=>{}),n})},[h]),G=r.useCallback((e,t)=>{i(n=>({...n,conversations:n.conversations.map(n=>{if(n.id!==e)return n;const a=new Set(n.referencedMemos.map(e=>e.uid)),r=t.filter(e=>!a.has(e.uid));return{...n,referencedMemos:[...n.referencedMemos,...r]}})}))},[]),R=r.useCallback(e=>{i(t=>({...t,viewMode:e}))},[]),C=r.useCallback(e=>{i(t=>({...t,sidebarTab:e}))},[]),j=r.useCallback(e=>{i(t=>({...t,sidebarOpen:e}))},[]),F=r.useCallback(()=>{i(e=>({...e,sidebarOpen:!e.sidebarOpen}))},[]),Y=r.useCallback(e=>{i(t=>({...t,currentCapability:e}))},[]),X=r.useCallback(e=>{i(t=>({...t,capabilityStatus:e}))},[]),B=r.useCallback(e=>{if(i(t=>({...t,currentMode:e,geekMode:"geek"===e,evolutionMode:"evolution"===e})),"undefined"!=typeof window)try{localStorage.setItem(ih,e)}catch(iv){}},[]),T=r.useCallback(e=>{B(e?"geek":"normal")},[B]),M=r.useCallback(e=>{B(e?"evolution":"normal")},[B]),L=r.useCallback(e=>{if(i(t=>({...t,immersiveMode:e})),"undefined"!=typeof window)try{localStorage.setItem(lh,String(e))}catch(iv){}},[]),U=r.useCallback(()=>{try{localStorage.setItem(Hm,s.currentConversationId||""),localStorage.setItem(Pm,s.sidebarTab)}catch(iv){}},[s.currentConversationId,s.sidebarTab]),z=r.useCallback(async()=>{try{const e=localStorage.getItem(_m),t=localStorage.getItem(Hm),n=localStorage.getItem(Pm);if(e){const t=JSON.parse(e);t.length>0&&await x(t)}await f(),i(e=>({...e,currentConversationId:t||null,sidebarTab:"history"===n||"memos"===n?n:"history"}))}catch(iv){f()}},[x,f]),D=r.useCallback(()=>{try{localStorage.removeItem(_m),localStorage.removeItem(Hm),localStorage.removeItem(Pm),i({...uh})}catch(iv){}},[]);r.useEffect(()=>{const e=setTimeout(()=>{U()},500);return()=>clearTimeout(e)},[s,U]),r.useEffect(()=>{z()},[]),r.useEffect(()=>{if(s.currentConversationId){const e=parseInt(s.currentConversationId);isNaN(e)||Z(s.currentConversationId)}},[s.currentConversationId]);const Q={state:s,currentConversation:u,conversations:s.conversations,conversationSummaries:m,createConversation:v,deleteConversation:y,selectConversation:E,updateConversationTitle:N,addMessage:w,updateMessage:A,deleteMessage:S,clearMessages:V,addContextSeparator:I,addReferencedMemos:G,setViewMode:R,setSidebarTab:C,setSidebarOpen:j,toggleSidebar:F,setCurrentCapability:Y,setCapabilityStatus:X,setMode:B,toggleGeekMode:T,toggleEvolutionMode:M,toggleImmersiveMode:L,saveToStorage:U,loadFromStorage:z,clearStorage:D,syncMessages:Z,loadMoreMessages:W};return o.jsx(mh.Provider,{value:Q,children:e})}const bh=A,fh=S,xh=v,vh=E,yh=r.forwardRef(({className:e,...t},n)=>o.jsx(x,{ref:n,"data-slot":"dialog-overlay",className:Zr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));yh.displayName=x.displayName;const Eh=pa(["bg-background rounded-lg border shadow-lg","flex flex-col p-6","w-full mx-4","max-h-[85vh]","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","duration-200"].join(" "),{variants:{size:{sm:"max-w-[24rem]",md:"max-w-[28rem]",default:"max-w-[32rem]",lg:"max-w-[32rem]",xl:"max-w-[36rem]","2xl":"max-w-[42rem]",full:"max-w-none mx-0"}},defaultVariants:{size:"default"}}),Nh=r.forwardRef(({className:e,children:t,showCloseButton:n=!0,size:a,...r},s)=>o.jsxs(xh,{children:[o.jsx(yh,{}),o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:o.jsxs(y,{ref:s,className:Zr("pointer-events-auto relative",Eh({size:a}),e),onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents="auto"},...r,children:[o.jsx("div",{className:"w-full overflow-y-auto overflow-x-hidden flex flex-col gap-4",children:t}),n&&o.jsxs(E,{className:"absolute top-4 right-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(c,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})})]}));Nh.displayName=y.displayName;const wh=r.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Zr("flex flex-col gap-2 text-center sm:text-left",e),...t}));wh.displayName="DialogHeader";const Ah=r.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Zr("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t}));Ah.displayName="DialogFooter";const Sh=r.forwardRef(({className:e,...t},n)=>o.jsx(N,{ref:n,className:Zr("text-lg font-semibold leading-none tracking-tight",e),...t}));Sh.displayName=N.displayName;const Vh=r.forwardRef(({className:e,...t},n)=>o.jsx(w,{ref:n,className:Zr("text-sm text-muted-foreground",e),...t}));function Ih({open:e,onOpenChange:t,title:a,description:s,confirmLabel:i,cancelLabel:l,onConfirm:c,confirmVariant:d="default"}){const{t:u}=n(),[m,h]=r.useState(!1);return o.jsx(bh,{open:e,onOpenChange:e=>!m&&t(e),children:o.jsxs(Nh,{size:"md",children:[o.jsxs(wh,{children:[o.jsx(Sh,{children:a}),o.jsx(Vh,{className:s?"":"sr-only",children:s||u("common.confirm")})]}),o.jsxs(Ah,{children:[o.jsx(Gr,{variant:"ghost",disabled:m,onClick:()=>t(!1),children:l}),o.jsx(Gr,{variant:d,disabled:m,onClick:async()=>{try{h(!0),await c(),t(!1)}catch(iv){}finally{h(!1)}},"data-loading":m,children:i})]})]})})}function kh({conversation:e,isActive:t,onSelect:a,onDelete:r,className:s,isLoaded:i=!1}){const{t:l}=n(),c=eh[e.parrotId],d=nh[e.parrotId]||c?.icon||"🤖",u=th[e.parrotId]||th.AMAZING,m=i?e.messageCount:"...";return o.jsxs("div",{className:Zr("group relative rounded-lg transition-all",t?"bg-accent":"hover:bg-muted",s),children:[o.jsx("button",{onClick:()=>a(e.id),className:"w-full text-left px-3 py-2.5 pr-12","aria-label":`Select conversation: ${e.title}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:Zr("w-10 h-10 rounded-xl flex items-center justify-center text-lg shrink-0",!d.startsWith("/")&&u.iconBg),children:d.startsWith("/")?o.jsx("img",{src:d,alt:c?.displayName||"",className:"w-6 h-6 object-contain"}):d}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium text-sm text-foreground truncate",children:e.title}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[l("ai.aichat.sidebar.message-count","..."===m?{count:0}:{count:m})," ","· ",Wh(e.updatedAt,l)]})]})]})}),o.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Zh,{conversationId:e.id,onDelete:r})})]})}function Zh({conversationId:e,onDelete:t}){const{t:a}=n();return o.jsx("button",{onClick:n=>{n.stopPropagation(),t(e)},className:Zr("flex items-center justify-center","w-8 h-8 rounded-lg","text-muted-foreground","hover:text-destructive","hover:bg-destructive/10","transition-all duration-200"),"aria-label":a("common.delete"),title:a("common.delete"),children:o.jsx(V,{className:"w-4 h-4"})})}function Wh(e,t){const n=new Date(e),a=(new Date).getTime()-n.getTime(),r=Math.floor(a/6e4),o=Math.floor(a/36e5),s=Math.floor(a/864e5);return r<1?t("ai.aichat.sidebar.time-just-now"):r<60?t("ai.aichat.sidebar.time-minutes-ago",{count:r}):o<24?t("ai.aichat.sidebar.time-hours-ago",{count:o}):s<7?t("ai.aichat.sidebar.time-days-ago",{count:s}):n.toLocaleDateString()}function Gh({className:e,onSelectConversation:t}){const{t:a}=n(),{conversationSummaries:s,conversations:i,state:l,deleteConversation:c,selectConversation:d}=hh(),[u,m]=r.useState(!1),[h,g]=r.useState(null),p=r.useMemo(()=>new Set(i.filter(e=>e.messages.length>0).map(e=>e.id)),[i]),b=r.useMemo(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),n=t-864e5,r=t-6048e5,o=[{key:"today",label:a("ai.aichat.sidebar.time-group-today"),conversations:[]},{key:"yesterday",label:a("ai.aichat.sidebar.time-group-yesterday"),conversations:[]},{key:"thisWeek",label:a("ai.aichat.sidebar.time-group-this-week"),conversations:[]},{key:"earlier",label:a("ai.aichat.sidebar.time-group-earlier"),conversations:[]}];return s.forEach(e=>{const a=e.updatedAt;a>=t?o[0].conversations.push(e):a>=n?o[1].conversations.push(e):a>=r?o[2].conversations.push(e):o[3].conversations.push(e)}),o.filter(e=>e.conversations.length>0)},[s,a]),f=e=>{d(e),t?.(e)},x=e=>{g(e),m(!0)},v=s.length>0;return o.jsxs("div",{className:Zr("flex flex-col h-full",e),children:[o.jsx("div",{className:"flex-1 overflow-y-auto",children:v?o.jsx("div",{className:"flex flex-col py-1",children:b.map(e=>o.jsxs("div",{className:"mb-1",children:[o.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:e.label}),o.jsx("div",{className:"flex flex-col gap-0.5 px-2",children:e.conversations.map(e=>o.jsx(kh,{conversation:e,isActive:e.id===l.currentConversationId,onSelect:f,onDelete:x,isLoaded:p.has(e.id)},e.id))})]},e.key))}):o.jsx(Rh,{})}),o.jsx(Ih,{open:u,onOpenChange:e=>{m(e),e||g(null)},onConfirm:()=>{h&&c(h),m(!1),g(null)},title:a("ai.aichat.delete-conversation-title"),description:a("ai.aichat.delete-conversation-confirm"),confirmLabel:a("common.delete"),cancelLabel:a("common.cancel"),confirmVariant:"destructive"})]})}function Rh(){const{t:e}=n();return o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-muted flex items-center justify-center mb-3",children:o.jsx(I,{className:"w-5 h-5 text-muted-foreground"})}),o.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:e("ai.aichat.sidebar.no-conversations")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e("ai.aichat.sidebar.start-new-chat")})]})}function Ch({memo:e,rank:t,showRank:a=!0,className:r}){const{t:s}=n(),i=Math.round(100*e.score),l=(c=e.score)>=.9?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":c>=.7?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":c>=.5?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-muted text-muted-foreground";var c;return o.jsx(k,{to:`/memos/${e.uid}`,className:Zr("block p-2.5 rounded-lg border hover:bg-muted transition-colors group","bg-card border-border",r),children:o.jsxs("div",{className:"flex items-start gap-2",children:[a&&void 0!==t&&o.jsx("div",{className:Zr("flex-shrink-0 w-5 h-5 rounded flex items-center justify-center text-xs font-medium",t<=3?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-muted text-muted-foreground"),children:t}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3 leading-relaxed",children:e.content}),o.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp?jh(e.timestamp,s):""}),o.jsxs("span",{className:Zr("text-xs px-1.5 py-0.5 rounded",l),children:[i,"%"]})]})]})]})})}function jh(e,t){const n=new Date(e),a=(new Date).getTime()-n.getTime(),r=Math.floor(a/6e4),o=Math.floor(a/36e5),s=Math.floor(a/864e5);return r<1?t("ai.mini_memo_card.just_now"):r<60?t("ai.mini_memo_card.minutes_ago",{count:r}):o<24?t("ai.mini_memo_card.hours_ago",{count:o}):s<7?t("ai.mini_memo_card.days_ago",{count:s}):n.toLocaleDateString()}function Fh({className:e}){const{t:t}=n(),{currentConversation:a}=hh(),[s,i]=r.useState(""),l=a?.referencedMemos||[],c=[...l.filter(e=>e.content.toLowerCase().includes(s.toLowerCase()))].sort((e,t)=>t.score-e.score),d=c.length>0;return o.jsxs("div",{className:Zr("flex flex-col h-full",e),children:[o.jsxs("div",{className:"px-3 py-2 border-b border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("h2",{className:"text-sm font-semibold text-foreground",children:t("ai.aichat.sidebar.memos")})]}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 ml-6",children:[l.length," ",1===l.length?"memo":"memos"]})]}),(d||s)&&o.jsx("div",{className:"p-2 border-b border-border",children:o.jsxs("div",{className:"relative",children:[o.jsx(W,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground"}),o.jsx("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:t("ai.aichat.sidebar.search-placeholder"),className:"w-full pl-8 pr-3 py-1.5 text-sm bg-muted border-0 rounded-md outline-none focus:ring-2 focus:ring-blue-500 text-foreground placeholder:text-muted-foreground"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:d?o.jsx("div",{className:"p-2 space-y-2",children:c.map((e,t)=>o.jsx(Ch,{memo:e,rank:t+1,showRank:!!s},e.uid))}):o.jsx(Yh,{searchQuery:s,hasMemos:l.length>0})})]})}function Yh({searchQuery:e,hasMemos:t}){const{t:a}=n();return e?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[o.jsx(W,{className:"w-8 h-8 text-muted-foreground/50 mb-3"}),o.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:a("ai.aichat.sidebar.no-results")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:a("ai.aichat.sidebar.try-different-search")})]}):t?null:o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[o.jsx(Z,{className:"w-8 h-8 text-muted-foreground/50 mb-3"}),o.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:a("ai.aichat.sidebar.no-referenced-memos")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:a("ai.aichat.sidebar.search-memos-hint")})]})}function Xh({activeTab:e,onTabChange:t,className:a}){const{t:r}=n();return o.jsx("div",{className:Zr("w-full",a),children:o.jsxs("div",{className:"flex p-1 bg-muted rounded-xl",children:[o.jsx(Bh,{active:"history"===e,onClick:()=>t("history"),icon:o.jsx(G,{className:"w-4 h-4"}),label:r("ai.aichat.sidebar.history")}),o.jsx(Bh,{active:"memos"===e,onClick:()=>t("memos"),icon:o.jsx(Z,{className:"w-4 h-4"}),label:r("ai.aichat.sidebar.memos")})]})})}function Bh({active:e,onClick:t,icon:n,label:a}){return o.jsxs("button",{onClick:t,className:Zr("flex-1 flex items-center justify-center gap-2","py-2 px-3 rounded-lg","text-sm font-medium","transition-all duration-200 ease-in-out","focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-blue-500",e?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),"aria-pressed":e,children:[n,o.jsx("span",{className:"truncate",children:a})]})}function Th({className:e,onClose:t}){const{t:a}=n(),{state:r,setSidebarTab:s,createConversation:i}=hh(),{sidebarTab:l}=r;return o.jsxs("aside",{className:Zr("flex flex-col h-full bg-sidebar",e),children:[o.jsx("div",{className:"px-4 pt-4 pb-2 shrink-0",children:o.jsxs("button",{onClick:()=>{i($m.AMAZING),t?.()},className:Zr("w-full flex items-center justify-center gap-2 px-3 py-2","bg-sidebar-primary hover:bg-sidebar-primary/90","text-sidebar-primary-foreground text-sm font-medium rounded-lg transition-all","shadow-sm active:scale-[0.98]"),children:[o.jsx(I,{className:"w-4 h-4"}),a("ai.aichat.sidebar.new-chat")]})}),o.jsx("div",{className:"px-4 pb-2 flex-shrink-0",children:o.jsx(Xh,{activeTab:l,onTabChange:e=>{s(e)}})}),o.jsxs("div",{className:"flex-1 overflow-hidden min-h-0",children:["history"===l&&o.jsx(Gh,{className:"h-full",onSelectConversation:t}),"memos"===l&&o.jsx(Fh,{className:"h-full"})]})]})}function Mh({currentMode:e,onModeChange:t,disabled:a=!1,variant:r="header",isAdmin:s=!0}){const{t:i}=n(),l="toolbar"===r,c="mobile"===r,d=()=>{const n=["normal","geek","evolution"],a=n.indexOf(e),r=n[(a+1)%n.length];t(r)},u={normal:{icon:j,label:i("ai.mode.normal"),tooltip:i("ai.mode.normal_tooltip"),color:"text-muted-foreground",bgColor:"hover:bg-muted",borderColor:""},geek:{icon:C,label:i("ai.mode.geek"),tooltip:i("ai.mode.geek_tooltip"),color:"text-green-600 dark:text-green-400",bgColor:"bg-green-500/10 hover:bg-green-500/15",borderColor:"border-green-500/30"},evolution:{icon:R,label:i(s?"ai.mode.evolution":"ai.mode.evolution_locked"),tooltip:i(s?"ai.mode.evolution_tooltip":"ai.mode.evolution_locked_tooltip"),color:s?"text-purple-600 dark:text-purple-400":"text-muted-foreground opacity-50",bgColor:s?"bg-purple-500/10 hover:bg-purple-500/15":"bg-muted/50",borderColor:s?"border-purple-500/30":""}}[e],m=u.icon;return c?o.jsxs("button",{onClick:d,disabled:a,className:Zr("flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",u.color,u.bgColor),title:u.tooltip,"aria-label":u.tooltip,children:[o.jsx(m,{className:"w-4 h-4 shrink-0"}),o.jsx("span",{className:"text-sm font-medium",children:u.label})]}):l?o.jsxs("button",{onClick:d,disabled:a,className:Zr("flex items-center gap-1 h-7 px-2 rounded transition-all","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",u.color,u.bgColor),title:u.tooltip,"aria-label":u.tooltip,children:[o.jsx(m,{className:"w-3.5 h-3.5 shrink-0"}),o.jsx("span",{className:"text-xs whitespace-nowrap",children:u.label})]}):o.jsxs("button",{onClick:d,disabled:a,className:Zr("flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg transition-all","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","normal"!==e&&"border",u.color,u.bgColor,u.borderColor),title:u.tooltip,"aria-label":u.tooltip,"aria-pressed":"normal"!==e,children:[o.jsx(m,{className:"w-4 h-4 shrink-0"}),o.jsx("span",{className:"text-sm font-medium hidden sm:inline whitespace-nowrap",children:u.label})]})}Vh.displayName=w.displayName;const Lh="geek-mode",Uh="evolution-mode";function zh(){const{state:e}=hh(),t=e.currentMode||"normal";return r.useEffect(()=>{if("undefined"==typeof document)return;const e=document.body;return e.classList.remove(Lh,Uh),"geek"===t?e.classList.add(Lh):"evolution"===t&&e.classList.add(Uh),()=>{e.classList.remove(Lh,Uh)}},[t]),null}const Dh=r.forwardRef(({...e},t)=>o.jsx(A,{"data-slot":"sheet",...e}));Dh.displayName="Sheet";const Qh=r.forwardRef(({...e},t)=>o.jsx(S,{ref:t,"data-slot":"sheet-trigger",...e}));Qh.displayName="SheetTrigger";r.forwardRef(({...e},t)=>o.jsx(E,{ref:t,"data-slot":"sheet-close",...e})).displayName="SheetClose";const Jh=({...e})=>o.jsx(v,{"data-slot":"sheet-portal",...e}),Kh=r.forwardRef(({className:e,...t},n)=>o.jsx(x,{ref:n,"data-slot":"sheet-overlay",className:Zr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-foreground/50",e),...t}));Kh.displayName="SheetOverlay";const Oh=r.forwardRef(({className:e,children:t,side:n="right",...a},r)=>o.jsxs(Jh,{children:[o.jsx(Kh,{}),o.jsxs(y,{ref:r,"data-slot":"sheet-content",className:Zr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===n&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-[24rem]","left"===n&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-[24rem]","top"===n&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===n&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents="auto"},...a,children:[t,o.jsxs(E,{className:"ring-offset-background data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-60 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[o.jsx(c,{className:"size-5"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oh.displayName="SheetContent";const _h=r.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-slot":"sheet-header",className:Zr("flex flex-col gap-1.5 px-4 pt-2 pb-4",e),...t}));_h.displayName="SheetHeader";const Hh=r.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-slot":"sheet-footer",className:Zr("mt-auto flex flex-col gap-2 p-4",e),...t}));Hh.displayName="SheetFooter";const Ph=r.forwardRef(({className:e,...t},n)=>o.jsx(N,{ref:n,"data-slot":"sheet-title",className:Zr("text-foreground font-semibold",e),...t}));Ph.displayName="SheetTitle";const $h=r.forwardRef(({className:e,...t},n)=>o.jsx(w,{ref:n,"data-slot":"sheet-description",className:Zr("text-muted-foreground text-sm",e),...t}));$h.displayName="SheetDescription";const qh=r.forwardRef(({delayDuration:e=0,...t},n)=>o.jsx(F,{"data-slot":"tooltip-provider",delayDuration:e,...t}));qh.displayName="TooltipProvider";const eg=r.forwardRef(({...e},t)=>o.jsx(qh,{children:o.jsx(Y,{"data-slot":"tooltip",...e})}));eg.displayName="Tooltip";const tg=r.forwardRef(({...e},t)=>o.jsx(X,{ref:t,"data-slot":"tooltip-trigger",...e}));tg.displayName="TooltipTrigger";const ng=r.forwardRef(({className:e,sideOffset:t=0,children:n,...a},r)=>o.jsx(B,{children:o.jsxs(T,{ref:r,"data-slot":"tooltip-content",sideOffset:t,className:Zr("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[70] w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[n,o.jsx(M,{className:"bg-primary fill-primary z-[70] size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})}));ng.displayName="TooltipContent";const ag=()=>{const{currentUser:e}=sm();return e},rg=e=>{const{avatarUrl:t,className:n}=e;return o.jsx("div",{className:Zr("w-8 h-8 overflow-clip rounded-xl border border-border",n),children:o.jsx("img",{className:"w-full h-auto shadow min-w-full min-h-full object-cover",src:t||"/user-avatar.webp",decoding:"async",loading:"lazy",alt:""})})};function og(e){const{collapsed:t}=e,{generalSetting:a}=um(),{i18n:r}=n(),s=a.customProfile?.title||"Memos",i=a.customProfile?.logoUrl||"/logo.webp",l=r.language.startsWith("zh")?"-zh":"";return o.jsx("div",{className:Zr("relative w-full h-auto shrink-0",e.className),children:o.jsx("div",{className:Zr("w-auto flex flex-row justify-start items-center text-foreground",t?"px-1":"px-2"),children:t?o.jsx(rg,{className:"shrink-0",avatarUrl:i}):o.jsxs(o.Fragment,{children:[o.jsx("img",{src:`/full-logo-light${l}.svg`,alt:s,className:"h-10 w-auto object-contain dark:hidden"}),o.jsx("img",{src:`/full-logo-dark${l}.svg`,alt:s,className:"h-10 w-auto object-contain hidden dark:block"})]})})})}const sg=()=>{const[e,t]=r.useState(()=>"undefined"!=typeof window&&window.innerWidth<768);return r.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),n=e=>{t(e.matches)};return t(e.matches),e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}},[]),e},ig=r.forwardRef(({...e},t)=>o.jsx(L,{"data-slot":"dropdown-menu",...e}));ig.displayName="DropdownMenu";const lg=r.forwardRef(({...e},t)=>o.jsx(U,{ref:t,"data-slot":"dropdown-menu-trigger",...e}));lg.displayName="DropdownMenuTrigger";const cg=r.forwardRef(({className:e,sideOffset:t=4,...n},a)=>o.jsx(z,{children:o.jsx(D,{ref:a,"data-slot":"dropdown-menu-content",sideOffset:t,className:Zr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[60] max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})}));function dg({className:e,inset:t,variant:n="default",...a}){return o.jsx(Q,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Zr("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function ug({...e}){return o.jsx(J,{"data-slot":"dropdown-menu-sub",...e})}function mg({className:e,inset:t,children:n,...a}){return o.jsxs(K,{"data-slot":"dropdown-menu-sub-trigger","data-inset":t,className:Zr("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[n,o.jsx(O,{className:"ml-auto size-4"})]})}function hg({className:e,...t}){return o.jsx(_,{"data-slot":"dropdown-menu-sub-content",className:Zr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[60] min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",e),...t})}cg.displayName="DropdownMenuContent";const gg=e=>{const{collapsed:t}=e,a=sg(),{t:s,i18n:i}=n(),l=wm(),c=ag(),{userGeneralSetting:d,refetchSettings:u,logout:m}=sm(),{mutate:h}=am(c?.name),g=i.language,p=jm(d?.theme),[b,f]=r.useState(!1),[x,v]=r.useState(!1),y=async()=>{const e="en"===g?"zh-Hans":"en";c&&(la(e),h({generalSetting:{locale:e},updateMask:["locale"]},{onSuccess:()=>{u()}}))},E=async e=>{Xm(e),h({generalSetting:{theme:e},updateMask:["theme"]},{onSuccess:()=>{u()}}),v(!1),setTimeout(()=>f(!0),100)},N=async()=>{await m();try{const e=["memos-theme","memos-locale","memos-view-setting","tag-view-as-tree","tag-tree-auto-expand"],t=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);a&&!e.includes(a)&&t.push(a)}t.forEach(e=>localStorage.removeItem(e))}catch{}window.location.replace(ev.AUTH)};return o.jsxs(o.Fragment,{children:[!a&&o.jsxs(ig,{children:[o.jsx(lg,{asChild:!0,disabled:!c,children:o.jsxs("div",{className:Zr("min-h-[44px] w-auto flex flex-row justify-start items-center cursor-pointer text-foreground",t?"px-1":"px-3"),children:[c?.avatarUrl?o.jsx(rg,{className:"shrink-0",avatarUrl:c?.avatarUrl}):o.jsx(H,{className:"w-6 mx-auto h-auto text-muted-foreground"}),!t&&o.jsx("span",{className:"ml-2 text-lg font-medium text-foreground grow truncate",children:c?.displayName||c?.username})]})}),o.jsxs(cg,{align:"start",children:[o.jsxs(dg,{onClick:()=>l(`/u/${encodeURIComponent(c?.username??"")}`),children:[o.jsx(P,{className:"size-4 text-muted-foreground"}),s("common.profile")]}),o.jsxs(dg,{onClick:()=>l(ev.ARCHIVED),children:[o.jsx($,{className:"size-4 text-muted-foreground"}),s("common.archived")]}),o.jsxs(dg,{onClick:y,children:[o.jsx(q,{className:"size-4 text-muted-foreground bg-transparent"}),o.jsx("span",{className:"text-sm",children:"en"===g?"中文":"English"})]}),o.jsxs(ug,{children:[o.jsxs(mg,{children:[o.jsx(ee,{className:"size-4 text-muted-foreground"}),s("setting.preference-section.theme")]}),o.jsx(hg,{children:Zm.map(e=>o.jsxs(dg,{onClick:()=>E(e.value),children:[p===e.value&&o.jsx(te,{className:"w-4 h-auto"}),p!==e.value&&o.jsx("span",{className:"w-4"}),e.label]},e.value))})]}),o.jsxs(dg,{onClick:()=>l(ev.SETTING),children:[o.jsx(ne,{className:"size-4 text-muted-foreground"}),s("common.settings")]}),o.jsxs(dg,{onClick:N,children:[o.jsx(ae,{className:"size-4 text-muted-foreground"}),s("common.sign-out")]})]})]}),a&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>f(!0),className:Zr("min-h-[44px] w-auto flex flex-row justify-start items-center cursor-pointer text-foreground bg-transparent",t?"px-1":"px-3"),children:[c?.avatarUrl?o.jsx(rg,{className:"shrink-0",avatarUrl:c?.avatarUrl}):o.jsx(H,{className:"w-6 mx-auto h-auto text-muted-foreground"}),!t&&o.jsx("span",{className:"ml-2 text-lg font-medium text-foreground grow truncate",children:c?.displayName||c?.username})]}),o.jsx(Dh,{open:b,onOpenChange:f,children:o.jsxs(Oh,{side:"bottom",className:"px-4 pb-6",children:[o.jsx(_h,{children:o.jsx(Ph,{children:c?.displayName||c?.username})}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("button",{onClick:()=>{l(`/u/${encodeURIComponent(c?.username??"")}`),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsx(P,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:s("common.profile")})]}),o.jsxs("button",{onClick:()=>{l(ev.ARCHIVED),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsx($,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:s("common.archived")})]}),o.jsxs("button",{onClick:()=>{y(),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsx(q,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:"en"===g?"中文":"English"})]}),o.jsxs("button",{onClick:()=>{f(!1),setTimeout(()=>v(!0),100)},className:"w-full flex items-center justify-between px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ee,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:s("setting.preference-section.theme")})]}),o.jsx(O,{className:"w-5 h-5 text-muted-foreground"})]}),o.jsxs("button",{onClick:()=>{l(ev.SETTING),f(!1)},className:"w-full flex items-center gap-3 px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsx(ne,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:s("common.settings")})]}),o.jsxs("button",{onClick:N,className:"w-full flex items-center gap-3 px-4 py-3 active:bg-muted/50 text-destructive",children:[o.jsx(ae,{className:"w-5 h-5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-sm",children:s("common.sign-out")})]})]})]})}),o.jsx(Dh,{open:x,onOpenChange:v,children:o.jsxs(Oh,{side:"bottom",className:"px-4 pb-6",children:[o.jsx(_h,{children:o.jsx(Ph,{children:s("setting.preference-section.theme")})}),o.jsx("div",{className:"mt-4",children:Zm.filter(e=>["system","default","default-dark"].includes(e.value)).map(e=>o.jsxs("button",{onClick:()=>E(e.value),className:"w-full flex items-center justify-between px-4 py-3 border-b border-border last:border-0 active:bg-muted/50",children:[o.jsx("span",{className:"text-sm",children:e.label}),p===e.value&&o.jsx(te,{className:"w-5 h-5 text-green-600"})]},e.value))})]})})]})]})},pg=e=>{const{collapsed:t,className:n}=e,a=sa(),r=ag(),{data:s=[]}=qu(),i={id:"header-memos",path:ev.HOME,title:a("common.memos"),icon:o.jsx(oe,{className:"w-6 h-auto shrink-0"})},l={id:"header-explore",path:ev.EXPLORE,title:a("common.explore"),icon:o.jsx(de,{className:"w-6 h-auto shrink-0"})},c={id:"header-attachments",path:ev.ATTACHMENTS,title:a("common.attachments"),icon:o.jsx(ue,{className:"w-6 h-auto shrink-0"})},d={id:"header-chat",path:ev.CHAT,title:a("common.ai-assistant"),icon:o.jsx(se,{className:"w-6 h-auto shrink-0"})},u={id:"header-schedule",path:ev.SCHEDULE,title:a("schedule.title"),icon:o.jsx(ie,{className:"w-6 h-auto shrink-0"})},m={id:"header-review",path:ev.REVIEW,title:a("review.title"),icon:o.jsx(le,{className:"w-6 h-auto shrink-0"})},h={id:"header-knowledge-graph",path:ev.KNOWLEDGE_GRAPH,title:a("ai.knowledge-graph.title")||"Graph",icon:o.jsx(ce,{className:"w-6 h-auto shrink-0"})},g=s.filter(e=>e.status===Wd.UNREAD).length,p={id:"header-inbox",path:ev.INBOX,title:a("common.inbox"),icon:o.jsxs("div",{className:"relative",children:[o.jsx(me,{className:"w-6 h-auto shrink-0"}),g>0&&o.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 flex items-center justify-center bg-primary text-primary-foreground text-[10px] font-semibold rounded-full border-2 border-background",children:g>99?"99+":g})]})},b={id:"header-auth",path:ev.AUTH,title:a("common.sign-in"),icon:o.jsx(he,{className:"w-6 h-auto shrink-0"})},f=r?[i,d,u,m,h,l,c,p]:[l,b];return o.jsxs("header",{className:Zr("w-full h-full overflow-auto flex flex-col justify-between items-start gap-4 hide-scrollbar",n),children:[o.jsxs("nav",{"aria-label":a("common.navigation")||"Main navigation",className:"w-full px-1 flex flex-col justify-start items-start space-y-2 overflow-auto overflow-x-hidden hide-scrollbar shrink",children:[o.jsx(re,{className:"mb-1 cursor-pointer",to:r?ev.CHAT:ev.EXPLORE,children:o.jsx(og,{collapsed:t})}),f.map(n=>o.jsxs(re,{className:({isActive:e})=>Zr("min-h-[44px] px-2 py-2 rounded-2xl border flex flex-row items-center text-lg text-sidebar-foreground transition-colors cursor-pointer",t?"":"w-full px-4",e?"bg-sidebar-accent text-sidebar-accent-foreground border-sidebar-accent-border drop-shadow":"border-transparent hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:border-sidebar-accent-border opacity-80"),"aria-label":n.title,to:n.path,id:n.id,viewTransition:!0,children:[e.collapsed?o.jsx(qh,{children:o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:o.jsx("div",{children:n.icon})}),o.jsx(ng,{side:"right",children:o.jsx("p",{children:n.title})})]})}):n.icon,!e.collapsed&&o.jsx("span",{className:"ml-3 truncate",children:n.title})]},n.id))]}),r&&o.jsx("div",{className:Zr("w-full flex flex-col justify-end",e.collapsed?"items-center":"items-start pl-3"),children:o.jsx(gg,{collapsed:t})})]})},bg=()=>{const e=ge(),[t,n]=r.useState(!1),{generalSetting:a}=um(),s=a.customProfile?.title||"Memos";return r.useEffect(()=>{n(!1)},[e.key]),o.jsxs(Dh,{open:t,onOpenChange:n,children:[o.jsx(Qh,{asChild:!0,children:o.jsx(Gr,{variant:"ghost",className:"min-h-[44px] min-w-[44px] px-0 hover:bg-transparent cursor-pointer",children:o.jsx("img",{src:"/logo.webp",alt:s,className:"h-10 w-auto object-contain"})})}),o.jsxs(Oh,{side:"left",className:"w-72 max-w-full overflow-auto px-4 pt-2 bg-background [&_.absolute.top-4.right-4]:hidden",children:[o.jsx(Ph,{className:"sr-only",children:"Navigation"}),o.jsx(pg,{className:"pb-4"})]})]})},fg=({mode:e="normal"})=>{const t=ge(),{i18n:a,t:r}=n(),s=t.pathname,i=a.language.startsWith("zh")?"-zh":"";let l="",c="";if(s===ev.HOME?l="memos":s.startsWith(ev.EXPLORE)?l="explore":s.startsWith(ev.ARCHIVED)||s.startsWith("/u/")?l="memos":s.startsWith(ev.CHAT)?l="ai":s.startsWith(ev.SCHEDULE)?l="schedule":s.startsWith(ev.REVIEW)?l="review":s.startsWith(ev.KNOWLEDGE_GRAPH)?l="knowledge":s.startsWith(ev.ATTACHMENTS)?l="files":s.startsWith(ev.INBOX)?l="inbox":s.startsWith(ev.SETTING)?c=r("setting.settings"):s.startsWith("/memos/")&&(l="memos"),c)return o.jsx("span",{className:"text-lg font-semibold",children:c});if(!l)return null;const d=`/headers/header-${l}${i}.svg`;return o.jsx("img",{src:d,alt:"Page Header",className:Zr("h-8 w-auto object-contain select-none opacity-90 dark:opacity-100",(e=>{switch(e){case"geek":return"divine-logo-geek";case"evolution":return"divine-logo-evolution";default:return"divine-logo-normal"}})(e))})},xg={sm:640,md:768,lg:1024},vg=e=>{const[t,n]=r.useState(()=>"undefined"!=typeof window&&window.matchMedia(`(min-width: ${xg[e]}px)`).matches);return r.useEffect(()=>{const t=window.matchMedia(`(min-width: ${xg[e]}px)`),a=e=>{n(e.matches)};return t.addEventListener("change",a),()=>{t.removeEventListener("change",a)}},[e]),t};const yg=()=>{const e=vg("lg"),[t,n]=r.useState(!1),{state:a,setMode:s}=hh(),i=a.currentMode||"normal",l=a.immersiveMode||!1,c=function(e){switch(e){case"geek":return{headerBorder:"border-green-500/30",headerBg:"bg-green-950/20 dark:bg-green-950/40",headerAccent:"after:bg-gradient-to-r after:from-transparent via-green-500 to-transparent",sidebarBorder:"border-green-500/30",sidebarBg:"bg-green-950/10 dark:bg-green-950/20",contentBg:"bg-green-50/30 dark:bg-green-950/10",iconColor:"text-green-600 dark:text-green-400",dotColor:"bg-green-500",monoFont:!0,modeLabel:"GEEK"};case"evolution":return{headerBorder:"border-purple-500/30",headerBg:"bg-purple-950/20 dark:bg-purple-950/40",headerAccent:"after:bg-gradient-to-r after:from-transparent via-purple-500 to-transparent",sidebarBorder:"border-purple-500/30",sidebarBg:"bg-purple-950/10 dark:bg-purple-950/20",contentBg:"bg-purple-50/30 dark:bg-purple-950/10",iconColor:"text-purple-600 dark:text-purple-400",dotColor:"bg-purple-500",monoFont:!0,modeLabel:"EVOLUTION"};default:return{headerBorder:"border-zinc-200 dark:border-zinc-800",headerBg:"bg-white dark:bg-zinc-900",headerAccent:"",sidebarBorder:"border-zinc-200/80 dark:border-zinc-800/80",sidebarBg:"bg-zinc-50/95 dark:bg-zinc-900/95",contentBg:"bg-white dark:bg-zinc-900",iconColor:"",dotColor:"",monoFont:!1,modeLabel:""}}}(i),d="normal"!==i;return o.jsxs("section",{className:Zr("@container w-full h-screen flex flex-col lg:h-screen overflow-hidden bg-zinc-50 dark:bg-zinc-950",(e=>{switch(e){case"geek":return"geek-matrix-bg";case"evolution":return"evo-bio-bg";default:return""}})(i)),children:[o.jsxs("div",{className:Zr("lg:hidden flex-none relative flex items-center justify-center px-4 h-14 shrink-0 border-b transition-colors",!d&&c.headerBorder,!d&&c.headerBg,d&&[c.headerBorder,c.headerBg,c.headerAccent&&"after:content-[''] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-[2px]",c.headerAccent]),children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 flex items-center",children:o.jsx(bg,{})}),o.jsxs("div",{className:Zr("flex items-center gap-2",c.monoFont&&"font-mono"),children:[d&&o.jsxs("span",{className:Zr("flex items-center gap-1 text-xs",c.iconColor),children:[o.jsx("span",{className:Zr("w-2 h-2 rounded-full animate-pulse",c.dotColor)}),o.jsx("span",{className:"hidden sm:inline",children:c.modeLabel})]}),o.jsx(fg,{mode:i})]}),o.jsxs("div",{className:"absolute right-0 top-0 bottom-0 px-3 flex items-center gap-1",children:[o.jsx("div",{className:"lg:hidden",children:o.jsx(Mh,{currentMode:i,onModeChange:s,variant:"mobile",isAdmin:!0})}),o.jsx(Dh,{open:t,onOpenChange:n,children:o.jsxs(Oh,{side:"right",className:Zr("w-80 max-w-full [&_.absolute.top-4.right-4]:hidden border-l",!d&&"bg-zinc-50 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",d&&[c.sidebarBg,c.sidebarBorder],"gap-0"),children:[o.jsx(_h,{className:"p-0",children:o.jsx(Ph,{className:"sr-only",children:"AI Assistant"})}),o.jsx(Th,{className:"h-full",onClose:()=>n(!1)})]})}),o.jsx(Gr,{variant:"ghost",size:"icon",onClick:()=>n(!0),"aria-label":"Open sidebar",className:"h-9 w-9",children:o.jsx(pe,{className:Zr("w-5 h-5",d&&c.iconColor)})})]})]}),o.jsx("div",{className:Zr("fixed top-0 left-16 shrink-0 h-svh border-r backdrop-blur-sm w-72 overflow-hidden pt-2 transition-colors",!e||l?"hidden":"",c.sidebarBorder,c.sidebarBg),children:o.jsx(Th,{className:"h-full"})}),o.jsx("div",{className:Zr("flex-1 min-h-0 overflow-hidden transition-all duration-300",c.contentBg,e&&!l?"pl-72":""),children:o.jsx(f,{})})]})},Eg=()=>o.jsxs(ph,{children:[o.jsx(zh,{}),o.jsx(yg,{})]}),Ng=()=>{const e=vg("sm");return o.jsxs("section",{className:"w-full h-full flex flex-col justify-start items-center overflow-hidden",children:[!e&&o.jsxs("div",{className:"w-full flex items-center justify-center px-4 py-3 border-b bg-background sticky top-0 z-10 shrink-0 h-14 overflow-hidden relative",children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 flex items-center",children:o.jsx(bg,{})}),o.jsx(fg,{})]}),o.jsx("div",{className:"w-full h-full overflow-y-auto",children:o.jsx("div",{className:"w-full min-h-full px-4 sm:px-6 pt-4 md:pt-6 pb-8",children:o.jsx(f,{})})})]})},wg=e=>{if(void 0===e)return;const t=BigInt(Number.MAX_SAFE_INTEGER),n=BigInt(Number.MIN_SAFE_INTEGER);return e>t||e<n?e>t?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER:Number(e)},Ag=6e5,Sg=3e5,Vg={all:["ai"],search:()=>[...Vg.all,"search"],searchQuery:e=>[...Vg.search(),e],related:e=>[...Vg.all,"related",e],knowledgeGraph:e=>[...Vg.all,"knowledgeGraph",e]};function Ig(e,t={}){return u({queryKey:Vg.related(e),queryFn:async()=>{const n=fo(hd,{name:e,limit:t.limit??5});return await Lu.getRelatedMemos(n)},enabled:(t.enabled??!0)&&!!e&&e.startsWith("memos/"),staleTime:Sg})}function kg(){const e=m(),t=r.useRef(null),n=r.useRef(null);return{stream:async(e,a)=>{const r=fo(md,{message:e.message,history:e.history??[],agentType:void 0!==e.agentType?qm(e.agentType):void 0,userTimezone:e.userTimezone,conversationId:e.conversationId,geekMode:e.geekMode??!1,evolutionMode:e.evolutionMode??!1,deviceContext:JSON.stringify({userAgent:navigator.userAgent,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),screenWidth:window.screen.width,screenHeight:window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:navigator.language,platform:navigator.platform||"unknown"})});e.evolutionMode&&void 0===r.evolutionMode&&(r.evolutionMode=!0),t.current&&t.current.abort(),t.current=new AbortController;const o=t.current.signal;n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{t.current&&t.current.abort(),n.current=null},Ag);const s=Date.now();try{const e=Lu.chat(r,{signal:o}),t=[];let s="",i=!1,l=0;0;for await(const n of e){if(l++,n.sources.length>0&&(t.push(...n.sources),a?.onSources?.(n.sources)),n.content&&(s+=n.content,a?.onContent?.(n.content)),n.scheduleCreationIntent?.detected&&a?.onScheduleIntent?.({detected:n.scheduleCreationIntent.detected,scheduleDescription:n.scheduleCreationIntent.scheduleDescription||""}),n.scheduleQueryResult?.detected){const e=(n.scheduleQueryResult.schedules||[]).map(e=>({uid:e.uid||"",title:e.title||"",startTs:e.startTs?BigInt(e.startTs):BigInt(0),endTs:e.endTs?BigInt(e.endTs):BigInt(0),allDay:e.allDay||!1,location:e.location||"",recurrenceRule:e.recurrenceRule||"",status:e.status||"ACTIVE"}));a?.onScheduleQueryResult?.({detected:n.scheduleQueryResult.detected,schedules:e,timeRangeDescription:n.scheduleQueryResult.timeRangeDescription||"",queryType:n.scheduleQueryResult.queryType||""})}if(n.eventType&&n.eventData)switch(n.eventType){case"thinking":a?.onThinking?.(n.eventData);break;case"tool_use":{const e=n.eventMeta?{durationMs:wg(n.eventMeta.durationMs),totalDurationMs:wg(n.eventMeta.totalDurationMs),toolName:n.eventMeta.toolName,toolId:n.eventMeta.toolId,status:n.eventMeta.status,errorMsg:n.eventMeta.errorMsg,inputTokens:n.eventMeta.inputTokens,outputTokens:n.eventMeta.outputTokens,cacheWriteTokens:n.eventMeta.cacheWriteTokens,cacheReadTokens:n.eventMeta.cacheReadTokens,inputSummary:n.eventMeta.inputSummary,outputSummary:n.eventMeta.outputSummary,filePath:n.eventMeta.filePath,lineCount:n.eventMeta.lineCount}:void 0;a?.onToolUse?.(n.eventData,e);break}case"tool_result":{const e=n.eventMeta?{durationMs:wg(n.eventMeta.durationMs),totalDurationMs:wg(n.eventMeta.totalDurationMs),toolName:n.eventMeta.toolName,toolId:n.eventMeta.toolId,status:n.eventMeta.status,errorMsg:n.eventMeta.errorMsg,inputTokens:n.eventMeta.inputTokens,outputTokens:n.eventMeta.outputTokens,cacheWriteTokens:n.eventMeta.cacheWriteTokens,cacheReadTokens:n.eventMeta.cacheReadTokens,inputSummary:n.eventMeta.inputSummary,outputSummary:n.eventMeta.outputSummary,filePath:n.eventMeta.filePath,lineCount:n.eventMeta.lineCount}:void 0;a?.onToolResult?.(n.eventData,e);break}case"answer":s+=n.eventData,a?.onContent?.(n.eventData);break;case"memo_query_result":try{const e=JSON.parse(n.eventData);a?.onMemoQueryResult?.(e)}catch(iv){0}break;case"schedule_query_result":try{const e=JSON.parse(n.eventData),t={detected:!0,schedules:(e.schedules||[]).map(e=>({uid:e.uid||"",title:e.title||"",startTs:BigInt(e.start_ts||0),endTs:BigInt(e.end_ts||0),allDay:e.all_day||!1,location:e.location||"",recurrenceRule:"",status:e.status||"ACTIVE"})),timeRangeDescription:e.time_range_description||"",queryType:e.query_type||"range"};a?.onScheduleQueryResult?.(t)}catch(iv){0}break;case"ui_memo_preview":try{const e=JSON.parse(n.eventData);a?.onUIMemoPreview?.(e)}catch(iv){0}}if(!0===n.done){if(i=!0,n.sessionSummary){const e={sessionId:n.sessionSummary.sessionId,mode:n.sessionSummary.mode,totalDurationMs:n.sessionSummary.totalDurationMs?Number(n.sessionSummary.totalDurationMs):void 0,thinkingDurationMs:n.sessionSummary.thinkingDurationMs?Number(n.sessionSummary.thinkingDurationMs):void 0,toolDurationMs:n.sessionSummary.toolDurationMs?Number(n.sessionSummary.toolDurationMs):void 0,generationDurationMs:n.sessionSummary.generationDurationMs?Number(n.sessionSummary.generationDurationMs):void 0,totalInputTokens:n.sessionSummary.totalInputTokens,totalOutputTokens:n.sessionSummary.totalOutputTokens,totalCacheWriteTokens:n.sessionSummary.totalCacheWriteTokens,totalCacheReadTokens:n.sessionSummary.totalCacheReadTokens,toolCallCount:n.sessionSummary.toolCallCount,toolsUsed:n.sessionSummary.toolsUsed,filesModified:n.sessionSummary.filesModified,filePaths:n.sessionSummary.filePaths,totalCostUSD:n.sessionSummary.totalCostUsd,status:n.sessionSummary.status,errorMsg:n.sessionSummary.errorMsg};a?.onSessionSummary?.(e)}a?.onDone?.();break}}i||a?.onDone?.(),n.current&&(clearTimeout(n.current),n.current=null);Date.now();return{content:s,sources:t}}catch(i){if(n.current&&(clearTimeout(n.current),n.current=null),i instanceof Error&&"AbortError"===i.name){const e=new Error("AI chat timeout after 600000ms");throw a?.onError?.(e),e}const e=i instanceof Error?i:new Error(String(i));throw a?.onError?.(e),e}},stop:()=>{t.current&&(t.current.abort(),t.current=null),n.current&&(clearTimeout(n.current),n.current=null)},invalidate:()=>{e.invalidateQueries({queryKey:Vg.all})}}}function Zg(e,t={}){return u({queryKey:Vg.knowledgeGraph(e),queryFn:async()=>{const t=fo(gd,{tags:e.tags,minImportance:e.minImportance,clusters:e.clusters});return await Lu.getKnowledgeGraph(t)},enabled:t.enabled??!0,staleTime:Sg})}function Wg({...e}){return o.jsx(be,{"data-slot":"select",...e})}function Gg({...e}){return o.jsx(ye,{"data-slot":"select-value",...e})}function Rg({className:e,size:t="default",children:n,...a}){return o.jsxs(fe,{"data-slot":"select-trigger","data-size":t,className:Zr("border-border data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex w-fit items-center justify-between rounded-md border bg-transparent text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-8 data-[size=default]:gap-2 data-[size=default]:px-2 data-[size=default]:py-1 data-[size=sm]:h-7 data-[size=sm]:gap-2 data-[size=sm]:px-2 data-[size=sm]:py-1 data-[size=xs]:h-6 data-[size=xs]:gap-1 data-[size=xs]:px-1 data-[size=xs]:py-0.5 data-[size=xs]:text-xs *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[n,o.jsx(xe,{asChild:!0,children:o.jsx(ve,{className:"size-4 opacity-50"})})]})}function Cg({className:e,children:t,position:n="popper",...a}){return o.jsx(Ee,{children:o.jsxs(Ne,{"data-slot":"select-content",className:Zr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[60] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...a,children:[o.jsx(Fg,{}),o.jsx(we,{className:Zr("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),o.jsx(Yg,{})]})})}function jg({className:e,children:t,...n}){return o.jsxs(Ae,{"data-slot":"select-item",className:Zr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[o.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:o.jsx(Se,{children:o.jsx(te,{className:"size-4"})})}),o.jsx(Ve,{children:t})]})}function Fg({className:e,...t}){return o.jsx(Ie,{"data-slot":"select-scroll-up-button",className:Zr("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(ke,{className:"size-4"})})}function Yg({className:e,...t}){return o.jsx(Ze,{"data-slot":"select-scroll-down-button",className:Zr("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(ve,{className:"size-4"})})}const Xg=r.forwardRef(({...e},t)=>o.jsx(We,{"data-slot":"popover",...e}));Xg.displayName="Popover";const Bg=r.forwardRef(({...e},t)=>o.jsx(Ge,{ref:t,"data-slot":"popover-trigger",...e}));Bg.displayName="PopoverTrigger";const Tg=r.forwardRef(({className:e,align:t="center",sideOffset:n=4,...a},r)=>o.jsx(Re,{children:o.jsx(Ce,{ref:r,"data-slot":"popover-content",align:t,sideOffset:n,className:Zr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[60] w-auto origin-(--radix-popover-content-transform-origin) rounded-md border p-1 shadow-md outline-hidden",e),...a})}));Tg.displayName="PopoverContent";function Mg({className:e}){const t=sa(),{orderByTimeAsc:n,layout:a,toggleSortOrder:r,setLayout:s}=pm(),i=!1!==n||"LIST"!==a;return o.jsxs(Xg,{children:[o.jsx(Bg,{className:Zr("min-h-[36px] min-w-[36px] flex items-center justify-center",e,i?"text-primary bg-primary/10 rounded":"opacity-40"),children:o.jsx(Fe,{className:"w-4 h-auto shrink-0"})}),o.jsx(Tg,{align:"end",alignOffset:-12,sideOffset:14,children:o.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[o.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[o.jsx("span",{className:"text-sm shrink-0 mr-3 text-foreground",children:t("memo.direction")}),o.jsxs(Wg,{value:n.toString(),onValueChange:e=>{"true"===e!==n&&r()},children:[o.jsx(Rg,{size:"sm",children:o.jsx(Gg,{})}),o.jsxs(Cg,{children:[o.jsx(jg,{value:"false",children:t("memo.direction-desc")}),o.jsx(jg,{value:"true",children:t("memo.direction-asc")})]})]})]}),o.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[o.jsx("span",{className:"text-sm shrink-0 mr-3 text-foreground",children:t("common.layout")}),o.jsxs(Wg,{value:a,onValueChange:e=>s(e),children:[o.jsx(Rg,{size:"sm",children:o.jsx(Gg,{})}),o.jsxs(Cg,{children:[o.jsx(jg,{value:"LIST",children:t("memo.list")}),o.jsx(jg,{value:"MASONRY",children:t("memo.masonry")})]})]})]})]})})]})}r.forwardRef(({...e},t)=>o.jsx(je,{ref:t,"data-slot":"popover-anchor",...e})).displayName="PopoverAnchor";const Lg=()=>{const{t:e}=n(),{addFilter:t}=Nm(),[a,s]=r.useState(""),[l,c]=r.useState(!0),m=r.useRef(null),h=wm(),{data:g,isLoading:p,isError:b}=function(e,t={}){return u({queryKey:Vg.searchQuery(e),queryFn:async()=>{const t=fo(dd,{query:e,limit:10});return await Lu.semanticSearch(t)},enabled:(t.enabled??!0)&&e.length>2,staleTime:6e4})}(a,{enabled:l&&a.length>1}),f=()=>{c(!l)},x=l?se:W;return o.jsxs("div",{className:"relative w-full h-auto flex flex-col z-20",children:[o.jsx("div",{className:Zr("relative w-full flex flex-row items-center rounded-lg transition-all duration-200",l&&"bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-blue-500/10 p-[1px]"),children:o.jsxs("div",{className:"relative w-full flex flex-row items-center bg-sidebar rounded-lg",children:[o.jsx("button",{onClick:f,className:Zr("absolute left-2 p-0.5 rounded transition-colors z-10",l?"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300":"text-sidebar-foreground/40 hover:text-sidebar-foreground/60"),"aria-label":e(l?"search.switch-to-keyword":"search.switch-to-ai"),title:e(l?"search.ai-mode":"search.keyword-mode"),children:o.jsx(x,{className:"w-4 h-4"})}),o.jsx("input",{className:Zr("w-full text-sidebar-foreground leading-6 bg-transparent border border-transparent text-sm rounded-lg p-1.5 pl-8 pr-9 outline-0",!l&&"border-border"),placeholder:e(l?"search.ai-placeholder":"memo.search-placeholder"),value:a,onChange:e=>{s(e.currentTarget.value)},onKeyDown:e=>{if("Enter"===e.key&&(e.preventDefault(),!l)){const e=a.trim();if(""!==e){e.split(/\s+/).forEach(e=>{t({factor:"contentSearch",value:e})}),s("")}}},ref:m}),o.jsx("div",{className:"absolute right-1.5 top-1/2 -translate-y-1/2",children:o.jsx(Mg,{className:"text-sidebar-foreground/60 hover:text-sidebar-foreground"})})]})}),l&&a.length>1&&o.jsxs("div",{className:"absolute top-full mt-2 w-full bg-background border border-border rounded-lg shadow-xl overflow-hidden max-h-80 overflow-y-auto",children:[p&&o.jsxs("div",{className:"p-4 flex items-center justify-center text-muted-foreground",children:[o.jsx(d,{className:"w-4 h-4 animate-spin mr-2"}),e("search.ai-searching")]}),b&&o.jsxs("div",{className:"p-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center text-amber-600 dark:text-amber-400 mb-2",children:[o.jsx(i,{className:"w-4 h-4 mr-2"}),e("search.ai-error")]}),o.jsx("button",{onClick:f,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:e("search.fallback-to-keyword")})]}),!p&&!b&&0===g?.results?.length&&o.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:e("search.no-results")}),!p&&!b&&g?.results?.map(t=>o.jsxs("div",{className:"p-3 border-b last:border-0 hover:bg-muted/50 cursor-pointer group",onClick:()=>(e=>{const t=e.split("/").pop();t&&(h(`/m/${t}`),s(""))})(t.name),children:[o.jsx("div",{className:"flex items-center justify-between mb-1",children:o.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[o.jsx(Z,{className:"w-3 h-3 mr-1"}),e("search.score"),": ",(100*t.score).toFixed(0),"%"]})}),o.jsx("div",{className:"text-sm line-clamp-2 text-foreground group-hover:text-blue-600 dark:group-hover:text-blue-400",children:t.snippet})]},t.name))]})]})},Ug=[0,6],zg=.75,Dg=.5,Qg=.25,Jg="bg-primary text-primary-foreground shadow-sm",Kg="bg-primary/80 text-primary-foreground shadow-sm",Og="bg-primary/60 text-primary-foreground shadow-sm",_g="bg-primary/40 text-foreground",Hg="bg-secondary/30 text-muted-foreground hover:bg-secondary/50",Pg={font:"text-xs",dimensions:"w-8 h-8 mx-auto",borderRadius:"rounded-md",gap:"gap-1"},$g={font:"text-xs",borderRadius:"rounded-md",gap:"gap-1.5"};var qg,ep={exports:{}};const tp=$t(qg?ep.exports:(qg=1,ep.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}));var np,ap={exports:{}};const rp=$t(np?ap.exports:(np=1,ap.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}));Qt.extend(tp),Qt.extend(rp);const op=e=>Qt(e).format("MMM"),sp=r.memo(e=>{const{day:t,maxCount:n,tooltipText:a,onClick:r,size:s="default",scheduleCount:i=0}=e,l=sa(),c="small"===s?Pg:$g,d=Zr("aspect-square w-full flex items-center justify-center text-center transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/60 focus-visible:ring-offset-2 select-none",c.font,c.borderRadius,"small"===s?`${Pg.dimensions} min-h-0`:""),u=Boolean(r&&t.count>0),m=i>0?l("schedule.schedule-count",{count:i}):"",h=m?`${a}. ${m}`:a,g=t.isSelected?`${h} (selected)`:h;if(!t.isCurrentMonth)return o.jsx("div",{className:Zr(d,"text-muted-foreground/30 bg-transparent cursor-default"),children:t.label});const p=((e,t)=>{if(!e.isCurrentMonth||0===e.count)return Hg;const n=e.count/t;return n>zg?Jg:n>Dg?Kg:n>Qg?Og:_g})(t,n),b=Zr(d,p,t.isToday&&"ring-2 ring-primary/30 ring-offset-1 font-semibold z-10",t.isSelected&&"ring-2 ring-primary ring-offset-1 font-bold z-10",u?"cursor-pointer hover:scale-110 hover:shadow-md hover:z-20":"cursor-default"),f=o.jsx("button",{type:"button",onClick:()=>{t.count>0&&r&&r(t.date)},tabIndex:u?0:-1,"aria-label":g,"aria-current":t.isToday?"date":void 0,"aria-disabled":!u,className:b,children:o.jsxs("span",{className:"relative",children:[t.label,i>0&&o.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-blue-500 z-10","aria-hidden":"true"})]})}),x=a&&t.count>0||i>0,v=i>0?`\n📅 ${l("schedule.schedule-count",{count:i})}`:"";return x?o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:f}),o.jsx(ng,{side:"top",children:o.jsxs("p",{className:"whitespace-pre-line",children:[a,v]})})]}):f});sp.displayName="CalendarCell";const ip=(e,t,n,a,r,o)=>{const s=e.format("YYYY-MM-DD"),i=e.format("YYYY-MM")===t,l=n[s]??0,c=(o?.[s]??[]).length;return{date:s,label:e.date(),count:l,isCurrentMonth:i,isToday:s===a,isSelected:s===r,isWeekend:Ug.includes(e.day()),scheduleCount:c,hasSchedule:c>0}},lp=r.memo(e=>{const{month:t,data:n,maxCount:a,size:s="default",onClick:i,className:l,schedulesByDate:c}=e,d=sa(),{generalSetting:u}=um(),m=u.weekStartDayOffset,h=Qt().format("YYYY-MM-DD"),g=(()=>{const e=sa();return r.useMemo(()=>[e("days.sun"),e("days.mon"),e("days.tue"),e("days.wed"),e("days.thu"),e("days.fri"),e("days.sat")],[e])})(),{weeks:p,weekDays:b}=(({month:e,data:t,weekDays:n,weekStartDayOffset:a,today:o,selectedDate:s,schedulesByDate:i})=>r.useMemo(()=>{const r=Qt(e).startOf("month"),l=r.format("YYYY-MM"),c=n.slice(a).concat(n.slice(0,a)),{calendarStart:d,dayCount:u}=((e,t)=>{const n=e.endOf("month"),a=(e.day()-t+7)%7,r=(t+6-n.day()+7)%7,o=e.subtract(a,"day");return{calendarStart:o,dayCount:n.add(r,"day").diff(o,"day")+1}})(r,a),m=[];let h=0;for(let e=0;e<u;e+=1){const n=d.add(e,"day"),a=Math.floor(e/7);m[a]||(m[a]={days:[]});const r=ip(n,l,t,o,s,i);m[a].days.push(r),h=Math.max(h,r.count)}return{weeks:m,weekDays:c,maxCount:Math.max(h,1)}},[e,t,n,a,o,s,i]))({month:t,data:n,weekDays:g,weekStartDayOffset:m,today:h,selectedDate:"",schedulesByDate:c}),f="small"===s?Pg:$g;return o.jsxs("div",{className:Zr("flex flex-col gap-2",l),children:[o.jsx("div",{className:Zr("grid grid-cols-7",f.gap,"text-muted-foreground mb-1","small"===s?"text-[10px]":"text-xs"),children:b.map((e,t)=>o.jsx("div",{className:"flex h-4 items-center justify-center text-muted-foreground/60 font-medium",children:e},t))}),o.jsx("div",{className:Zr("grid grid-cols-7",f.gap),children:p.map((e,t)=>e.days.map((e,n)=>{const r=((e,t,n)=>0===e?t:n("memo.count-memos-in-date",{count:e,memos:n(1===e?"common.memo":"common.memos"),date:t}).toLowerCase())(e.count,e.date,d),l=c?.[e.date]?.length??0;return o.jsx(sp,{day:e,maxCount:a,tooltipText:r,onClick:i,size:s,scheduleCount:l},`${t}-${n}-${e.date}`)}))})]})});lp.displayName="MonthCalendar";const cp=({selectedYear:e,data:t,onYearChange:n,onDateClick:a,className:s})=>{const i=sa(),l=r.useMemo(()=>(new Date).getFullYear(),[]),c=r.useMemo(()=>((e,t)=>{if(!e)return{};const n={},a=Qt(`${t}-01-01`),r=Qt(`${t}-12-31`);for(const[o,s]of Object.entries(e)){const e=Qt(o);e.isSameOrAfter(a,"day")&&e.isSameOrBefore(r,"day")&&(n[o]=s)}return n})(t,e),[t,e]),d=r.useMemo(()=>{return t=e,Array.from({length:12},(e,n)=>Qt(`${t}-01-01`).add(n,"month").format("YYYY-MM"));var t},[e]),u=r.useMemo(()=>(e=>{let t=0;for(const n of Object.values(e))t=Math.max(t,n);return Math.max(t,1)})(c),[c]),m=e>2e3,h=e<(new Date).getFullYear()+1,g=e===l;return o.jsxs("div",{className:Zr("w-full flex flex-col gap-6 p-2 md:p-0 select-none",s),children:[o.jsxs("div",{className:"flex items-center justify-between pb-4 px-2 pt-2",children:[o.jsx("h2",{className:"text-3xl font-bold text-foreground tracking-tight leading-none",children:e}),o.jsxs("div",{className:"inline-flex items-center gap-1 shrink-0",children:[o.jsx(Gr,{variant:"ghost",size:"sm",onClick:()=>m&&n(e-1),disabled:!m,"aria-label":"Previous year",className:"h-9 w-9 p-0 rounded-md hover:bg-secondary/80 text-muted-foreground hover:text-foreground",children:o.jsx(Ye,{className:"w-5 h-5"})}),o.jsx(Gr,{variant:"ghost",size:"sm",onClick:()=>n(l),disabled:g,"aria-label":i("common.today"),className:Zr("h-9 px-4 rounded-md text-sm font-medium transition-colors",g?"bg-secondary/50 text-muted-foreground cursor-default":"hover:bg-secondary/80 text-foreground"),children:i("common.today")}),o.jsx(Gr,{variant:"ghost",size:"sm",onClick:()=>h&&n(e+1),disabled:!h,"aria-label":"Next year",className:"h-9 w-9 p-0 rounded-md hover:bg-secondary/80 text-muted-foreground hover:text-foreground",children:o.jsx(O,{className:"w-5 h-5"})})]})]}),o.jsx(qh,{children:o.jsx("div",{className:"w-full animate-fade-in",children:o.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3",children:d.map(e=>o.jsxs("div",{className:"flex flex-col gap-3 rounded-lg p-3 hover:bg-secondary/40 transition-colors cursor-default border border-transparent hover:border-border/50",children:[o.jsx("div",{className:"text-xs font-bold text-foreground/80 uppercase tracking-widest pl-1",children:op(e)}),o.jsx(lp,{month:e,data:c,maxCount:u,size:"small",onClick:a})]},e))})})})]})},dp={all:["memos"],lists:()=>[...dp.all,"list"],list:e=>[...dp.lists(),e],details:()=>[...dp.all,"detail"],detail:e=>[...dp.details(),e],comments:e=>[...dp.all,"comments",e]};function up(e={}){return Xe({queryKey:dp.list(e),queryFn:async({pageParam:t})=>await Yu.listMemos(fo(nu,{...e,pageToken:t||""})),initialPageParam:"",getNextPageParam:e=>e.nextPageToken||void 0,staleTime:6e4,gcTime:3e5})}function mp(e,t){return u({queryKey:dp.detail(e),queryFn:async()=>await Yu.getMemo({name:e}),enabled:t?.enabled??!0,staleTime:1e4})}function hp(){const e=m();return h({mutationFn:async({update:e,updateMask:t})=>await Yu.updateMemo({memo:fo(qd,e),updateMask:fo(Zl,{paths:t})}),onMutate:async({update:t})=>{if(!t.name)return{previousMemo:void 0};await e.cancelQueries({queryKey:dp.detail(t.name)});const n=e.getQueryData(dp.detail(t.name));return n&&e.setQueryData(dp.detail(t.name),{...n,...t}),{previousMemo:n}},onError:(t,{update:n},a)=>{a?.previousMemo&&n.name&&e.setQueryData(dp.detail(n.name),a.previousMemo)},onSuccess:t=>{e.setQueryData(dp.detail(t.name),t),e.invalidateQueries({queryKey:dp.lists()}),e.invalidateQueries({queryKey:Hu.stats()})}})}function gp(e,t){return u({queryKey:dp.comments(e),queryFn:async()=>await Yu.listMemoComments({name:e}),enabled:t?.enabled??!0,staleTime:6e4})}const pp=(e={})=>{const{userName:t}=e,{data:n,isLoading:a}=u({queryKey:(o=t)?Hu.userStats(o):Hu.stats(),queryFn:async()=>{if(!o)throw new Error("Username is required");return await Fu.getUserStats({name:o})},enabled:!!o});var o;const{data:s,isLoading:i}=function(e={}){return u({queryKey:dp.list(e),queryFn:async()=>await Yu.listMemos(fo(nu,e))})}({});return r.useMemo(()=>{const e=a||i;let r={},o={};if(t&&n)n.memoDisplayTimestamps&&n.memoDisplayTimestamps.length>0&&(r=_t(n.memoDisplayTimestamps.map(e=>e?gl(e):void 0).filter(e=>void 0!==e).map(e=>Qt(e).format("YYYY-MM-DD")))),n.tagCount&&(o=n.tagCount);else if(s?.memos){const e=[],t=s.memos;for(const n of t){const t=n.displayTime?gl(n.displayTime):void 0;if(t&&e.push(t),n.tags&&n.tags.length>0)for(const e of n.tags)o[e]=(o[e]||0)+1}r=_t(e.map(e=>Qt(e).format("YYYY-MM-DD")))}return{statistics:{activityStats:r},tags:o,loading:e}},[t,n,s,a,i])},bp=(e=!0)=>{const[t,n]=r.useState({isLoading:e,isFailed:!1,isSucceed:!1});return{...t,setLoading:()=>{n({...t,isLoading:!0,isFailed:!1,isSucceed:!1})},setFinish:()=>{n({...t,isLoading:!1,isFailed:!1,isSucceed:!0})},setError:()=>{n({...t,isLoading:!1,isFailed:!0,isSucceed:!1})}}},fp=(e={})=>{const{creatorName:t,includeShortcuts:n=!1,includePinned:a=!1,visibilities:o}=e,{shortcuts:s}=sm(),{filters:i,shortcut:l}=Nm(),{memoRelatedSetting:c}=um(),d=r.useMemo(()=>{if(n)return s.find(e=>(e=>{const t=e.split("/");return 4===t.length?t[3]:""})(e.name)===l)},[n,l,s]);return r.useMemo(()=>{const e=[];t&&e.push(`creator_id == ${(e=>{const t=e.match(/users\/(\d+)/);return t?t[1]:""})(t)}`),n&&d?.filter&&e.push(d.filter);for(const t of i)if("contentSearch"===t.factor)e.push(`content.contains("${t.value}")`);else if("tagSearch"===t.factor)e.push(`tag in ["${t.value}"]`);else if("pinned"===t.factor)a&&e.push("pinned");else if("property.hasLink"===t.factor)e.push("has_link");else if("property.hasTaskList"===t.factor)e.push("has_task_list");else if("property.hasCode"===t.factor)e.push("has_code");else if("displayTime"===t.factor){const n=c?.displayWithUpdateTime??!1?"updated_ts":"created_ts",a=new Date(t.value),r=(a.getTime()+60*a.getTimezoneOffset()*1e3)/1e3;e.push(`${n} >= ${r} && ${n} < ${r+86400}`)}if(o&&o.length>0){const t=o.map(e=>`"${(e=>{switch(e){case su.PUBLIC:return"PUBLIC";case su.PROTECTED:return"PROTECTED";case su.PRIVATE:default:return"PRIVATE"}})(e)}"`).join(", ");e.push(`visibility in [${t}]`)}return e.length>0?e.join(" && "):void 0},[t,n,a,o,d,i,c])},xp=(e={})=>{const{pinnedFirst:t=!1,state:n=wd.NORMAL}=e,{orderByTimeAsc:a}=pm(),o=r.useMemo(()=>{const e=a?"display_time asc":"display_time desc";return t?`pinned desc, ${e}`:e},[t,a]);return{listSort:r.useMemo(()=>e=>e.filter(e=>e.state===n).sort((e,n)=>{if(t&&e.pinned!==n.pinned)return n.pinned?1:-1;const r=e.displayTime?gl(e.displayTime):void 0,o=n.displayTime?gl(n.displayTime):void 0;return a?Qt(r).unix()-Qt(o).unix():Qt(o).unix()-Qt(r).unix()}),[t,n,a]),orderBy:o}};function vp(){const e=m(),[t,n]=r.useState({isStreaming:!1,events:[],currentStep:"",finalAnswer:"",error:null,uiEvents:[]}),a=r.useRef(null);return{...t,startChat:r.useCallback(async(t,r="Asia/Shanghai")=>{n({isStreaming:!0,events:[],currentStep:"",finalAnswer:"",error:null,uiEvents:[]}),a.current=new AbortController;try{const{scheduleAgentChatStream:o}=await Jt(async()=>{const{scheduleAgentChatStream:e}=await import("./useScheduleAgent-BKnBVHtP.js");return{scheduleAgentChatStream:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),s=e=>{const t={type:e.type,data:e.data,timestamp:Date.now(),uiType:e.uiType,uiData:e.uiData};n(n=>{const a={...n,events:[...n.events,t],currentStep:yp(e.type,e.data)};return e.uiType&&e.uiData&&(a.uiEvents=[...n.uiEvents,{type:e.type,data:e.data,uiType:e.uiType,uiData:e.uiData}]),a})};let i="";for await(const e of o(t,r,s)){if(a.current?.signal.aborted)break;e.done?i=e.content||i:e.content&&(i=e.content)}return n(e=>({...e,isStreaming:!1,finalAnswer:i})),e.invalidateQueries({queryKey:["schedules"]}),i}catch(o){const e=o instanceof Error?o.message:"Unknown error";throw n(t=>({...t,isStreaming:!1,error:e})),o}},[e]),cancelChat:r.useCallback(()=>{a.current?.abort(),n(e=>({...e,isStreaming:!1}))},[]),reset:r.useCallback(()=>{n({isStreaming:!1,events:[],currentStep:"",finalAnswer:"",error:null,uiEvents:[]})},[])}}function yp(e,t){switch(e){case"thinking":return t||"Thinking...";case"tool_use":{const e=t.match(/^(\w+)(?::|$)/),n=e?e[1]:"tool";switch(n){case"schedule_query":return"Checking schedules...";case"schedule_add":return"Creating schedule...";case"schedule_update":return"Updating schedule...";case"find_free_time":return"Finding free time...";default:return`Using ${n}...`}}case"tool_result":return"Processing result...";default:return""}}const Ep={all:["schedules"],lists:()=>[...Ep.all,"list"],list:e=>[...Ep.lists(),e],details:()=>[...Ep.all,"detail"],detail:e=>[...Ep.details(),e],conflicts:()=>[...Ep.all,"conflicts"]};function Np(e){const t=e||new Date,n=new Date(t);n.setDate(t.getDate()-15),n.setHours(0,0,0,0);const a=new Date(t);a.setDate(t.getDate()+15),a.setHours(23,59,59,999);return function(e={}){return u({queryKey:Ep.list(e),queryFn:async()=>{try{const t={...e,startTs:e.startTs?BigInt(e.startTs):void 0,endTs:e.endTs?BigInt(e.endTs):void 0};return await Uu.listSchedules(fo(uu,t))}catch(t){throw t}},staleTime:3e4})}({startTs:Math.floor(n.getTime()/1e3).toString(),endTs:Math.floor(a.getTime()/1e3).toString()})}function wp(){const e=m();return h({mutationFn:async e=>{const t=fo(cu,e),n=fo(du,{schedule:t});return await Uu.createSchedule(n)},onSuccess:t=>{e.invalidateQueries({queryKey:Ep.lists()}),e.setQueryData(Ep.detail(t.name),t)}})}function Ap(){const e=m();return h({mutationFn:async({schedule:e,updateMask:t})=>await Uu.updateSchedule({schedule:e,updateMask:{paths:t}}),onMutate:async({schedule:t})=>{if(!t.name)return{previousSchedule:void 0};await e.cancelQueries({queryKey:Ep.detail(t.name)});return{previousSchedule:e.getQueryData(Ep.detail(t.name))}},onError:(t,{schedule:n},a)=>{a?.previousSchedule&&n.name&&e.setQueryData(Ep.detail(n.name),a.previousSchedule)},onSuccess:t=>{e.setQueryData(Ep.detail(t.name),t),e.invalidateQueries({queryKey:Ep.lists()})}})}function Sp(){const e=m();return h({mutationFn:async e=>(await Uu.deleteSchedule({name:e}),e),onSuccess:t=>{e.removeQueries({queryKey:Ep.detail(t)}),e.invalidateQueries({queryKey:Ep.lists()})}})}function Vp(){return h({mutationFn:async e=>await Uu.checkConflict(fo(mu,e))})}const Ip="YYYY-MM",kp=(e,t)=>Qt(e).add(t,"month").format(Ip),Zp=({visibleMonth:e,onMonthChange:t,activityStats:n})=>{const[a,s]=r.useState(!1),i=new Date(e),l=Qt(e).year();const c=(e=>Qt(e).month())(e);return o.jsxs("div",{className:"w-full mb-2 flex flex-row justify-between items-center gap-1",children:[o.jsxs(bh,{open:a,onOpenChange:s,children:[o.jsx(fh,{asChild:!0,children:o.jsxs("button",{className:"px-2 py-1 -ml-2 rounded-md hover:bg-secondary/50 text-sm text-foreground font-semibold transition-colors flex items-center gap-1 select-none group",children:[i.toLocaleString(Kt.language,{year:"numeric",month:"long"}),o.jsx(ve,{className:"w-3.5 h-3.5 text-muted-foreground group-hover:text-foreground transition-colors"})]})}),o.jsxs(Nh,{className:"p-0 border-none bg-background md:max-w-4xl",size:"2xl",showCloseButton:!1,children:[o.jsx(Sh,{className:"sr-only",children:"Select Month"}),o.jsx(cp,{selectedYear:l,data:n,onYearChange:e=>{t(((e,t)=>Qt().year(e).month(t).format(Ip))(e,c))},onDateClick:e=>{t((e=>Qt(e).format(Ip))(e)),s(!1)}})]})]}),o.jsxs("div",{className:"flex justify-end items-center shrink-0 gap-0.5",children:[o.jsx("button",{className:"p-1 rounded-md hover:bg-secondary/50 text-muted-foreground hover:text-foreground transition-all",onClick:()=>{t(kp(e,-1))},"aria-label":"Previous month",children:o.jsx(Ye,{className:"w-4 h-4"})}),o.jsx("button",{className:"p-1 rounded-md hover:bg-secondary/50 text-muted-foreground hover:text-foreground transition-all",onClick:()=>{t(kp(e,1))},"aria-label":"Next month",children:o.jsx(O,{className:"w-4 h-4"})})]})]})},Wp=e=>{const{statisticsData:t}=e,{activityStats:n}=t,a=(()=>{const e=b();return r.useCallback(t=>{const n=vm([{factor:"displayTime",value:t}]);e(`${ev.HOME}?filter=${n}`)},[e])})(),[s,i]=r.useState(Qt().format("YYYY-MM")),{data:l}=(c=s,u({queryKey:Ep.list({month:c}),queryFn:async()=>{const e=Qt(c).startOf("month"),t=Qt(c).endOf("month"),n=e.subtract(7,"day").unix().toString(),a=t.add(7,"day").unix().toString(),r=[];let o,s;do{const e=await Uu.listSchedules(fo(uu,{startTs:n,endTs:a,pageSize:1e3,pageToken:o}));s=e,r.push(...e.schedules||[]),o=e.nextPageToken}while(o);return{...s,schedules:r}},enabled:!!c,staleTime:3e5,gcTime:6e5}));var c;const d=r.useMemo(()=>{if(!l?.schedules)return{};const e={};for(const t of l.schedules){const n=Qt(Number(t.startTs)),a=Qt(Number(t.endTs));if(!n.isValid()||!a.isValid())continue;if(a.isBefore(n))continue;let r=n,o=0;for(;(r.isBefore(a)||r.isSame(a,"day"))&&!(++o>365);){const n=r.format("YYYY-MM-DD");e[n]||(e[n]=[]),e[n].push({uid:t.name,title:t.title,startTs:t.startTs,endTs:t.endTs,allDay:t.allDay,location:t.location}),r=r.add(1,"day")}}return e},[l]),m=r.useMemo(()=>{const e=Object.values(n);return Math.max(...e,1)},[n]);return o.jsxs("div",{className:"group w-full mt-2 flex flex-col text-muted-foreground animate-fade-in",children:[o.jsx(Zp,{visibleMonth:s,onMonthChange:i,activityStats:n}),o.jsx("div",{className:"w-full animate-scale-in",children:o.jsx(lp,{month:s,data:n,maxCount:m,onClick:a,schedulesByDate:d})})]})};function Gp({className:e,type:t,...n}){return o.jsx("input",{type:t,"data-slot":"input",className:Zr("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground border-border flex h-8 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-all file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","hover:border-muted-foreground/50","focus-visible:border-primary focus-visible:ring-4 focus-visible:ring-primary/10 focus-visible:outline-none",e),...n})}function Rp({className:e,...t}){return o.jsx(Be,{"data-slot":"label",className:Zr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Cp=r.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{ref:n,"data-slot":"textarea",className:Zr("border-border placeholder:text-muted-foreground flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-sm transition-all disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","hover:border-muted-foreground/50","focus-visible:border-primary focus-visible:ring-4 focus-visible:ring-primary/10 focus-visible:outline-none",e),...t}));function jp(e,t="Unknown error"){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):t}function Fp(e,t,n){const a=n?.context?`${n.context}: `:"",r=n?.fallbackMessage;t(n?.context?`${a}${jp(e,r)}`:jp(e,r)),n?.onError?.(e)}function Yp({open:e,onOpenChange:t,shortcut:n,onSuccess:a}){const s=sa(),i=ag(),{refetchSettings:l}=sm(),[c,d]=r.useState(fo(bu,{name:n?.name||"",title:n?.title||"",filter:n?.filter||""})),u=bp(!1),m=""===c.name;r.useEffect(()=>{c.name&&d(c)},[c.name,c.title,c.filter]);const h=e=>{d({...c,...e})};return o.jsx(bh,{open:e,onOpenChange:t,children:o.jsxs(Nh,{children:[o.jsx(wh,{children:o.jsx(Sh,{children:`${s(m?"common.create":"common.edit")} ${s("common.shortcuts")}`})}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Rp,{htmlFor:"title",children:s("common.title")}),o.jsx(Gp,{id:"title",type:"text",placeholder:"",value:c.title,onChange:e=>{h({title:e.target.value})}})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(Rp,{htmlFor:"filter",children:s("common.filter")}),o.jsx(Cp,{id:"filter",rows:3,placeholder:s("common.shortcut-filter"),value:c.filter,onChange:e=>{h({filter:e.target.value})}})]})]}),o.jsxs(Ah,{children:[o.jsx(Gr,{variant:"ghost",disabled:u.isLoading,onClick:()=>t(!1),children:s("common.cancel")}),o.jsx(Gr,{disabled:u.isLoading,onClick:async()=>{if(c.title&&c.filter)try{u.setLoading(),m?(await Bu.createShortcut({parent:i?.name,shortcut:{name:"",title:c.title,filter:c.filter}}),Te.success("Create shortcut successfully")):(await Bu.updateShortcut({shortcut:{...c,name:n.name},updateMask:fo(Zl,{paths:["title","filter"]})}),Te.success("Update shortcut successfully")),await l(),u.setFinish(),a?.(),t(!1)}catch(e){await Fp(e,Te.error,{context:m?"Create shortcut":"Update shortcut",onError:()=>u.setError()})}else Te.error("Title and filter cannot be empty")},children:s("common.save")})]})]})})}Cp.displayName="Textarea";const Xp=/^(\p{Emoji_Presentation}|\p{Emoji}\uFE0F)$/u;function Bp(){const e=sa(),{shortcuts:t,refetchSettings:n}=sm(),{shortcut:a,setShortcut:s}=Nm(),[i,l]=r.useState(!1),[c,d]=r.useState(),[u,m]=r.useState();r.useEffect(()=>{n()},[n]);return o.jsxs("div",{className:"w-full flex flex-col justify-start items-start mt-3 px-1 h-auto shrink-0 flex-nowrap hide-scrollbar",children:[o.jsxs("div",{className:"flex flex-row justify-between items-center w-full gap-1 mb-1 text-sm leading-6 text-muted-foreground select-none",children:[o.jsx("span",{children:e("common.shortcuts")}),o.jsx(qh,{children:o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:o.jsx(Me,{className:"w-4 h-auto cursor-pointer",onClick:()=>{m(void 0),l(!0)}})}),o.jsx(ng,{children:o.jsx("p",{children:e("common.create")})})]})})]}),o.jsx("div",{className:"w-full flex flex-row justify-start items-center relative flex-wrap gap-x-2 gap-y-1",children:t.map(t=>{const n=(e=>{const t=e.split("/");return 4===t.length?t[3]:""})(t.name),r=t.title.split(" ")[0],i=Xp.test(r)?r:void 0,c=i?t.title.replace(i,""):t.title,u=a===n;return o.jsxs("div",{className:"shrink-0 w-full text-sm rounded-md leading-6 flex flex-row justify-between items-center select-none gap-2 text-muted-foreground",children:[o.jsxs("span",{className:Zr("truncate cursor-pointer text-muted-foreground",u&&"text-primary font-medium"),onClick:()=>s(u?void 0:n),children:[i&&o.jsx("span",{className:"text-base mr-1",children:i}),c.trim()]}),o.jsxs(ig,{children:[o.jsx(lg,{asChild:!0,children:o.jsx(Le,{className:"w-4 h-auto shrink-0 text-muted-foreground cursor-pointer hover:text-foreground"})}),o.jsxs(cg,{align:"end",alignOffset:-12,children:[o.jsxs(dg,{onClick:()=>(e=>{m(e),l(!0)})(t),children:[o.jsx(Ue,{className:"w-4 h-auto"}),e("common.edit")]}),o.jsxs(dg,{onClick:()=>(async e=>{d(e)})(t),children:[o.jsx(ze,{className:"w-4 h-auto"}),e("common.delete")]})]})]})]},n)})}),o.jsx(Yp,{open:i,onOpenChange:l,shortcut:u,onSuccess:()=>{l(!1),m(void 0)}}),o.jsx(Ih,{open:!!c,onOpenChange:e=>!e&&d(void 0),title:e("setting.shortcut.delete-confirm",{title:c?.title??""}),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),onConfirm:async()=>{c&&(await Bu.deleteShortcut({name:c.name}),await n(),De.success(e("setting.shortcut.delete-success",{title:c.title})),d(void 0))},confirmVariant:"destructive"})]})}function Tp({className:e,...t}){return o.jsx(Qe,{"data-slot":"switch",className:Zr("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Je,{"data-slot":"switch-thumb",className:Zr("bg-background pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Mp=({tagAmounts:e,expandSubTags:t})=>{const[n,a]=r.useState([]);return r.useEffect(()=>{const t=Array.from(e).sort(),n={subTags:[]};for(const e of t){const a=e[0].split("/");let r=n,o="";for(let n=0;n<a.length;n++){const s=a[n];let i=0;o+=0===n?s:"/"+s,t.some(([e,t])=>e===o&&t>1)&&(i=e[1]);let l=null;for(const e of r.subTags)if(e.text===o){l=e;break}l||(l={key:s,text:o,amount:i,subTags:[]},r.subTags.push(l)),r=l}}a(n.subTags)},[e]),o.jsx("div",{className:"flex flex-col justify-start items-start relative w-full h-auto flex-nowrap gap-2 mt-1",children:n.map((e,n)=>o.jsx(Lp,{tag:e,expandSubTags:t},e.text+"-"+n))})},Lp=e=>{const{tag:t,expandSubTags:n}=e,{getFiltersByFactor:a,addFilter:s,removeFilter:i}=Nm(),l=a("tagSearch").some(e=>e.value===t.text),c=t.subTags.length>0,[d,u]=Ke(!1);r.useEffect(()=>{u(n)},[n]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative flex flex-row justify-between items-center w-full leading-6 py-0 mt-px text-sm select-none shrink-0",children:[o.jsxs("div",{className:"flex flex-row justify-start items-center truncate shrink leading-5 mr-1 cursor-pointer transition-colors "+(l?"text-primary":"text-muted-foreground"),onClick:()=>{l?i(e=>"tagSearch"===e.factor&&e.value===t.text):(i(e=>"tagSearch"===e.factor),s({factor:"tagSearch",value:t.text}))},children:[o.jsx(Oe,{className:"w-4 h-auto shrink-0 mr-1"}),o.jsxs("span",{className:"truncate hover:opacity-80 "+(l?"font-medium":""),children:[t.key," ",t.amount>1&&o.jsxs("span",{className:"opacity-60",children:["(",t.amount,")"]})]})]}),o.jsx("div",{className:"flex flex-row justify-end items-center",children:c?o.jsx("span",{className:`flex flex-row justify-center items-center w-6 h-6 shrink-0 transition-all rotate-0 cursor-pointer ${d&&"rotate-90"}`,onClick:e=>{e.stopPropagation(),u()},children:o.jsx(O,{className:"w-5 h-5 text-muted-foreground hover:text-foreground"})}):null})]}),c?o.jsx("div",{className:`w-[calc(100%-0.5rem)] flex flex-col justify-start items-start h-auto ml-2 pl-2 border-l-2 border-l-border ${!d&&"hidden"}`,children:t.subTags.map((e,t)=>o.jsx(Lp,{tag:e,expandSubTags:n},e.text+"-"+t))}):null]})},Up=e=>{const t=sa(),{getFiltersByFactor:n,addFilter:a,removeFilter:r}=Nm(),[s,i]=_e("tag-view-as-tree",!1),[l,c]=_e("tag-tree-auto-expand",!1),d=Object.entries(e.tagCount).sort((e,t)=>e[0].localeCompare(t[0])).sort((e,t)=>t[1]-e[1]);return o.jsxs("div",{className:"w-full flex flex-col justify-start items-start mt-3 px-1 h-auto shrink-0 flex-nowrap hide-scrollbar",children:[o.jsxs("div",{className:"flex flex-row justify-between items-center w-full gap-1 mb-1 text-sm leading-6 text-muted-foreground select-none",children:[o.jsx("span",{children:t("common.tags")}),d.length>0&&o.jsxs(Xg,{children:[o.jsx(Bg,{children:o.jsx(Le,{className:"w-4 h-auto shrink-0 text-muted-foreground cursor-pointer hover:text-foreground"})}),o.jsxs(Tg,{align:"end",alignOffset:-12,children:[o.jsxs("div",{className:"w-auto flex flex-row justify-between items-center gap-2 p-1",children:[o.jsx("span",{className:"text-sm shrink-0",children:t("common.tree-mode")}),o.jsx(Tp,{checked:s,onCheckedChange:e=>i(e)})]}),o.jsxs("div",{className:"w-auto flex flex-row justify-between items-center gap-2 p-1",children:[o.jsx("span",{className:"text-sm shrink-0",children:t("common.auto-expand")}),o.jsx(Tp,{disabled:!s,checked:l,onCheckedChange:e=>c(e)})]})]})]})]}),d.length>0?s?o.jsx(Mp,{tagAmounts:d,expandSubTags:!!l}):o.jsx("div",{className:"w-full flex flex-row justify-start items-center relative flex-wrap gap-x-2 gap-y-1.5",children:d.map(([e,t])=>{const s=n("tagSearch").some(t=>t.value===e);return o.jsxs("div",{className:Zr("shrink-0 w-auto max-w-full text-sm rounded-md leading-6 flex flex-row justify-start items-center select-none cursor-pointer transition-colors","hover:opacity-80",s?"text-primary":"text-muted-foreground"),onClick:()=>(e=>{n("tagSearch").some(t=>t.value===e)?r(t=>"tagSearch"===t.factor&&t.value===e):(r(e=>"tagSearch"===e.factor),a({factor:"tagSearch",value:e}))})(e),children:[o.jsx(Oe,{className:"w-4 h-auto shrink-0"}),o.jsxs("div",{className:"inline-flex flex-nowrap ml-0.5 gap-0.5 max-w-[calc(100%-16px)]",children:[o.jsx("span",{className:Zr("truncate",s?"font-medium":""),children:e}),t>1&&o.jsxs("span",{className:"opacity-60 shrink-0",children:["(",t,")"]})]})]},e)})}):!e.readonly&&o.jsxs("div",{className:"p-2 border border-dashed rounded-md flex flex-row justify-start items-start gap-2 text-muted-foreground",children:[o.jsx(He,{className:"w-5 h-5 shrink-0"}),o.jsx("p",{className:"text-sm leading-snug italic",children:t("tag.create-tags-guide")})]})]})},zp=e=>{switch(e){case"explore":case"archived":case"profile":return{search:!0,statistics:!0,shortcuts:!1,tags:!0};default:return{search:!0,statistics:!0,shortcuts:!0,tags:!0}}},Dp=e=>{const{className:t,context:n="home",features:a={},statisticsData:r,tagCount:s}=e,i=ag(),l={...zp(n),...a};return o.jsxs("aside",{className:Zr("relative w-full h-full overflow-auto flex flex-col justify-start items-start bg-background text-sidebar-foreground",t),children:[l.search&&o.jsx(Lg,{}),o.jsxs("div",{className:"mt-1 px-1 w-full",children:[l.statistics&&o.jsx(Wp,{statisticsData:r}),l.shortcuts&&i&&o.jsx(Bp,{}),l.tags&&o.jsx(Up,{readonly:"explore"===n,tagCount:s})]})]})},Qp=e=>{const{context:t,features:n,statisticsData:a,tagCount:s}=e,i=ge(),[l,c]=r.useState(!1);return r.useEffect(()=>{c(!1)},[i.pathname]),o.jsxs(Dh,{open:l,onOpenChange:c,children:[o.jsx(Qh,{asChild:!0,children:o.jsx(Gr,{variant:"ghost",children:o.jsx(pe,{className:"size-5 text-foreground"})})}),o.jsxs(Oh,{side:"right",className:"w-80 max-w-full bg-background [&_.absolute.top-4.right-4]:hidden",children:[o.jsx(_h,{children:o.jsx(Ph,{})}),o.jsx(Dp,{className:"px-4",context:t,features:n,statisticsData:a,tagCount:s})]})]})},Jp=e=>{const{className:t,children:n}=e,{y:a}=Pe(),r=vg("md"),s=vg("sm");return r?null:o.jsxs("div",{className:Zr("sticky top-0 pt-3 pb-2 sm:pt-2 px-4 sm:px-6 sm:mb-1 bg-background bg-opacity-80 backdrop-blur-lg flex flex-row justify-between items-center w-full h-14 flex-nowrap shrink-0 z-1 relative",a>0&&"shadow-md",t),children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 flex items-center",children:!s&&o.jsx(bg,{})}),o.jsx("div",{className:"w-full flex justify-center items-center",children:o.jsx(fg,{})}),o.jsx("div",{className:"absolute right-4 top-0 bottom-0 flex items-center",children:n})]})},Kp=()=>{const e=vg("md"),t=vg("lg"),n=ge(),a=ag(),[s,i]=r.useState(),l=r.useMemo(()=>n.pathname===ev.ROOT?"home":n.pathname===ev.EXPLORE?"explore":$e("/archived",n.pathname)?"archived":$e("/u/:username",n.pathname)?"profile":"home",[n.pathname]);r.useEffect(()=>{const e=$e("/u/:username",n.pathname);if(e&&"profile"===l){const t=e.params.username;t&&Fu.getUser({name:`users/${t}`}).then(e=>{i(e.name)}).catch(e=>{i(void 0)})}else i(void 0)},[n.pathname,l]);const c=r.useMemo(()=>"home"===l?a?.name:"profile"===l?s:void 0,[l,a,s]),{statistics:d,tags:u}=pp({userName:c});return o.jsxs("section",{className:"@container w-full h-full flex flex-col justify-start items-center overflow-hidden",children:[!e&&n.pathname!==ev.ROOT&&o.jsx(Jp,{children:o.jsx(Qp,{context:l,statisticsData:d,tagCount:u})}),e&&o.jsx("div",{className:Zr("fixed top-0 left-16 shrink-0 h-svh transition-all","border-r border-border",t?"w-72":"w-56"),children:o.jsx(Dp,{className:Zr("px-3 py-6"),context:l,statisticsData:d,tagCount:u})}),o.jsx("div",{className:Zr("flex-1 min-h-0 overflow-y-auto w-full",t?"pl-72":e?"pl-56":""),children:o.jsx("div",{className:Zr("w-full mx-auto px-4 sm:px-6 md:pt-6 pb-8","max-w-[100rem]"),children:o.jsx(f,{})})})]})},Op=r.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Zr("inline-flex items-center justify-center rounded-md border border-border bg-muted px-2 py-1 text-xs font-medium text-foreground shadow-sm",e),...t}));Op.displayName="Kbd";const _p=()=>{const{t:e}=n(),[t,a]=r.useState(!1);r.useEffect(()=>{const e=e=>{"?"!==e.key||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||(e.preventDefault(),a(!0)),"Escape"===e.key&&a(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const s=[{title:e("shortcuts.editor")||"Editor",shortcuts:[{key:"Cmd/Ctrl + Enter",description:e("shortcuts.save-memo")||"Save memo"},{key:"Esc",description:e("shortcuts.cancel-edit")||"Cancel edit"}]},{title:e("shortcuts.formatting")||"Formatting",shortcuts:[{key:"Cmd/Ctrl + B",description:e("shortcuts.bold")||"Bold text"},{key:"Cmd/Ctrl + I",description:e("shortcuts.italic")||"Italic text"},{key:"Cmd/Ctrl + K",description:e("shortcuts.link")||"Insert link"}]},{title:e("shortcuts.navigation")||"Navigation",shortcuts:[{key:"?",description:e("shortcuts.show-help")||"Show keyboard shortcuts"},{key:"Esc",description:e("shortcuts.close-dialog")||"Close dialog/drawer"}]}];return o.jsx(bh,{open:t,onOpenChange:a,children:o.jsxs(Nh,{size:"md","aria-describedby":"keyboard-shortcuts-description",children:[o.jsxs(wh,{children:[o.jsx(Sh,{children:e("shortcuts.title")||"Keyboard Shortcuts"}),o.jsx(Vh,{id:"keyboard-shortcuts-description",children:e("shortcuts.description")||"Press ? to open this help dialog anytime"})]}),o.jsx("div",{className:"flex flex-col gap-4",children:s.map(e=>o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-2",children:e.title}),o.jsx("div",{className:"space-y-2",children:e.shortcuts.map(e=>{return o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:e.description}),o.jsx("div",{className:"flex items-center",children:(t=e.key,t.split("/").map((e,n)=>o.jsxs("span",{className:Zr("flex items-center gap-1",n>0&&"ml-1"),children:[e.split(" + ").map((t,n)=>o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Op,{children:t}),n<e.split(" + ").length-1&&o.jsx("span",{className:"text-muted-foreground text-xs",children:"+"})]},n)),n<t.split("/").length-1&&o.jsx("span",{className:"text-muted-foreground text-xs mx-1",children:"or"})]},n)))})]},e.key);var t})})]},e.title))})]})})},Hp=()=>{const e=ge(),[t]=p(),n=vg("sm"),a=ag(),{memoRelatedSetting:s}=um(),{removeFilter:i}=Nm(),l=r.useMemo(()=>e.pathname,[e.pathname]),c=qe(l);return r.useEffect(()=>{!a&&s.disallowPublicVisibility&&Nu()},[a,s.disallowPublicVisibility]),r.useEffect(()=>{c===l||t.has("filter")||i(()=>!0)},[c,l,t,i]),o.jsxs("div",{className:"w-full h-full flex flex-row justify-start items-stretch sm:pl-16 overflow-hidden",children:[o.jsx(_p,{}),n&&o.jsx("div",{className:Zr("group flex flex-col justify-start items-start fixed top-0 left-0 select-none h-full bg-sidebar","w-16 px-2","border-r border-border"),children:o.jsx(pg,{className:"py-3",collapsed:!0})}),o.jsx("main",{className:"w-full h-full grow shrink flex flex-col justify-start items-center overflow-hidden",children:o.jsx(r.Suspense,{fallback:o.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:o.jsx(Yr,{size:"lg"})}),children:o.jsx(f,{})})})]})},Pp=({schedules:e,selectedDate:t,onDateClick:n,className:a="",showMobileHint:s=!1})=>{const i=sa(),[l,c]=r.useState(Qt()),d=[i("days.mon"),i("days.tue"),i("days.wed"),i("days.thu"),i("days.fri"),i("days.sat"),i("days.sun")],u=(e=>{const t=e.startOf("month"),n=e.endOf("month"),a=[];for(let o=(t.day()+6)%7-1;o>=0;o--)a.push(t.subtract(o+1,"day"));for(let o=0;o<n.date();o++)a.push(t.add(o,"day"));const r=7-a.length%7;if(r<7)for(let o=1;o<=r;o++)a.push(n.add(o,"day"));return a})(l),m=Math.ceil(u.length/7);return o.jsxs("div",{className:Zr("flex flex-col gap-1.5",a),role:"region","aria-label":i("schedule.calendar-view"),children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold","aria-live":"polite",children:l.format("YYYY MMMM")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gr,{variant:"ghost",size:"sm",onClick:()=>{c(Qt()),n?.(Qt().format("YYYY-MM-DD"))},className:"h-8 min-h-[44px] sm:min-h-0 px-3 text-muted-foreground hover:text-foreground cursor-pointer focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2","aria-label":i("schedule.jump-to-today"),children:i("common.today")||"Today"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Gr,{variant:"ghost",size:"icon",onClick:()=>{c(l.subtract(1,"month"))},className:"h-9 w-9 min-h-[44px] min-w-[44px] sm:min-h-0 sm:min-w-0 cursor-pointer focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2","aria-label":i("schedule.previous-month"),children:o.jsx(Ye,{className:"h-4 w-4","aria-hidden":"true"})}),o.jsx(Gr,{variant:"ghost",size:"icon",onClick:()=>{c(l.add(1,"month"))},className:"h-9 w-9 min-h-[44px] min-w-[44px] sm:min-h-0 sm:min-w-0 cursor-pointer focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2","aria-label":i("schedule.next-month"),children:o.jsx(O,{className:"h-4 w-4","aria-hidden":"true"})})]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col gap-1 min-h-0",role:"grid","aria-label":i("schedule.calendar"),children:[o.jsx("div",{className:"grid grid-cols-7 gap-1 flex-none",role:"row",children:d.map((e,t)=>o.jsx("div",{className:"py-1 text-center text-xs font-medium text-muted-foreground",role:"columnheader","aria-label":String(e),children:e},t))}),o.jsx("div",{className:"grid grid-cols-7 gap-1 flex-1 min-h-0",style:{gridTemplateRows:`repeat(${m}, minmax(0, 1fr))`},role:"rowgroup",children:u.map((a,r)=>{const s=(t=>{const n=t.format("YYYY-MM-DD");return e.filter(e=>Qt(gl(fo(ml,{seconds:e.startTs,nanos:0}))).format("YYYY-MM-DD")===n).length})(a),i=(e=>e.format("YYYY-MM-DD")===Qt().format("YYYY-MM-DD"))(a),c=(e=>e.format("YYYY-MM-DD")===t)(a),d=(e=>e.month()===l.month())(a),u=`${a.format("YYYY年M月D日")}${i?"，今天":""}${d?"":"，非本月"}${s>0?`，${s} 个日程`:""}`;return o.jsxs("button",{role:"gridcell","aria-selected":c,"aria-label":u,onClick:()=>(e=>{n?.(e.format("YYYY-MM-DD"))})(a),className:Zr("relative w-full h-full min-h-[3rem] rounded-lg p-1 text-sm transition-colors cursor-pointer flex flex-col items-center justify-start pt-1 gap-1","focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2 focus-visible:outline-none",!d&&"text-muted-foreground/30","hover:bg-accent/30"),children:[o.jsx("span",{className:Zr("flex items-center justify-center w-8 h-8 rounded-full transition-colors font-medium",c&&!i&&"bg-primary text-primary-foreground shadow-sm",c&&i&&"bg-orange-600 text-white shadow-sm",!c&&i&&"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300",!c&&!i&&"text-foreground"),"aria-hidden":"true",children:a.format("D")}),s>0&&o.jsx("div",{className:"flex justify-center gap-0.5","aria-hidden":"true",children:Array.from({length:Math.min(s,3)}).map((e,t)=>o.jsx("div",{className:Zr("h-1 w-1 rounded-full bg-primary/70")},t))})]},r)})})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",role:"legend","aria-label":i("schedule.legend"),children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"h-2 w-2 rounded-full bg-primary","aria-hidden":"true"}),o.jsx("span",{children:i("schedule.has-schedules")||"Has schedules"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"h-2 w-2 rounded-full bg-orange-200 border border-orange-300 dark:bg-orange-900/50 dark:border-orange-800","aria-hidden":"true"}),o.jsx("span",{children:i("common.today")||"Today"})]})]}),s&&o.jsx("div",{className:"md:hidden mt-3 pt-3 border-t border-border/50",role:"note","aria-label":i("schedule.hint"),children:o.jsxs("p",{className:"text-xs text-center text-muted-foreground flex items-center justify-center gap-1.5",children:[o.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-primary animate-pulse","aria-hidden":"true"}),i("schedule.tap-to-view")||"Tap a date to view schedule details"]})})]})},$p=({schedules:e,onFilteredChange:t,onHasFilterChange:n,className:a,autoFocus:s})=>{const i=sa(),[l,d]=r.useState(""),[u,m]=r.useState(null),{mutateAsync:g,isPending:p}=h({mutationFn:async e=>(await Uu.parseAndCreateSchedule(fo(hu,{text:e,autoConfirm:!1}))).parsedSchedule});r.useEffect(()=>{const e=setTimeout(async()=>{const e=l.trim();if(!e||e.length<4)m(null);else try{const t=await g(e);m(t?{startTs:t.startTs,endTs:t.endTs,label:Qt.unix(Number(t.startTs)).format("MM-DD HH:mm")}:null)}catch(t){m(null)}},800);return()=>clearTimeout(e)},[l,g]);const b=r.useMemo(()=>{let t=e;if(u&&(t=t.filter(e=>{const t=Number(e.startTs),n=Number(e.endTs),a=Number(u.startTs);return t<Number(u.endTs)&&n>a}),0===t.length&&(t=e)),l.trim()){const e=l.toLowerCase().trim();t=t.filter(t=>{const n=t.title.toLowerCase(),a=(t.location||"").toLowerCase(),r=(t.description||"").toLowerCase();return n.includes(e)||a.includes(e)||r.includes(e)})}return t},[e,l,u]),f=r.useRef(0),x=r.useRef("");r.useEffect(()=>{const e=b.length,n=b.map(e=>e.name).sort().join(",");e===f.current&&n===x.current||(f.current=e,x.current=n,t?.(b))},[b,t]);const v=l.trim().length>0,y=r.useRef(!1);r.useEffect(()=>{v!==y.current&&(y.current=v,n?.(v))},[v,n]);const E=r.useCallback(()=>{d(""),m(null)},[]),N=b.length,w=e.length;return o.jsxs("div",{className:Zr("relative w-full",a),role:"search",children:[o.jsx("div",{className:"relative flex items-center gap-2",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(W,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none","aria-hidden":"true"}),o.jsx("input",{type:"text",id:"schedule-search-input",role:"searchbox",value:l,autoFocus:s,onChange:e=>d(e.target.value),placeholder:i("schedule.search-placeholder")||"Search schedules...","aria-label":i("schedule.search-schedule"),"aria-describedby":v?"search-result-count":void 0,className:Zr("h-9 w-full pl-9 pr-20 rounded-lg border border-border bg-background text-sm","focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary","focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2","transition-colors")}),p&&o.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:o.jsx("span",{className:"w-4 h-4 block rounded-full border-2 border-primary/30 border-t-primary animate-spin"})}),v&&!p&&o.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",id:"search-result-count",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"text-xs text-muted-foreground","aria-label":`找到 ${N} 个结果，共 ${w} 个日程`,children:[N,"/",w]}),o.jsx("button",{type:"button",onClick:E,className:"p-1.5 rounded-md hover:bg-muted text-muted-foreground hover:text-foreground transition-colors min-h-[36px] min-w-[36px] focus-visible:ring-2 focus-visible:ring-border focus-visible:ring-offset-2 flex items-center justify-center","aria-label":i("schedule.clear-search"),children:o.jsx(c,{className:"w-3.5 h-3.5"})})]})]})}),u&&o.jsxs("div",{className:"mt-2 flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[o.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[i("schedule.time_filter"),":"]}),o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-primary/10 text-primary border border-primary/20",children:u.label})]})]})},qp=()=>{const{selectedDate:e,setSelectedDate:t}=Jm(),n=e?new Date(e+"T00:00:00"):new Date,{data:a}=Np(n),r=a?.schedules||[];return o.jsx("div",{className:"h-full overflow-y-auto py-4 px-3",children:o.jsx(Pp,{schedules:r,selectedDate:e,onDateClick:t,showMobileHint:!1})})},eb=()=>{const e=vg("lg"),{setFilteredSchedules:t,setHasSearchFilter:n}=Jm(),[a,s]=r.useState(!1),i=new Date,{data:l}=Np(i),d=l?.schedules||[];return o.jsxs("section",{className:"@container w-full h-screen flex flex-col lg:h-screen overflow-hidden",children:[o.jsx("div",{className:"lg:hidden flex-none relative flex items-center justify-center px-4 h-14 shrink-0 border-b border-border/50 bg-background",children:a?o.jsxs("div",{className:"flex items-center w-full gap-2",children:[o.jsx($p,{schedules:d,onFilteredChange:t,onHasFilterChange:n,className:"flex-1 min-w-0",autoFocus:!0}),o.jsx(Gr,{variant:"ghost",size:"icon",onClick:()=>{s(!1),n(!1)},children:o.jsx(c,{className:"w-5 h-5"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 flex items-center",children:o.jsx(bg,{})}),o.jsx(fg,{}),o.jsx("div",{className:"absolute right-4 top-0 bottom-0 flex items-center",children:o.jsx(Gr,{variant:"ghost",size:"icon",onClick:()=>s(!0),children:o.jsx(W,{className:"w-5 h-5"})})})]})}),e&&o.jsx("div",{className:"fixed top-0 left-16 shrink-0 h-svh border-r border-border bg-background w-80 overflow-y-auto",children:o.jsx(qp,{})}),o.jsx("div",{className:Zr("flex-1 min-h-0 overflow-hidden",e?"pl-80":""),children:o.jsx(f,{})})]})},tb="bg-card border border-border rounded-lg",nb="bg-card border border-border rounded-lg hover:bg-muted/50 transition-colors",ab="px-4 py-3",rb=Zr(tb,ab,"relative group flex flex-col justify-start items-start w-full mb-2 gap-2 text-card-foreground transition-colors"),ob=Zr(tb,"px-4 pt-3 pb-1","group relative w-full flex flex-col justify-between items-start gap-2"),sb=Zr(tb,ab,"relative flex flex-col justify-start items-start w-full mb-2 gap-2 animate-pulse"),ib=Zr(nb,"p-3 group"),lb=e=>{switch(e){case"PUBLIC":default:return su.PUBLIC;case"PROTECTED":return su.PROTECTED;case"PRIVATE":return su.PRIVATE}},cb=e=>{switch(e){case su.PUBLIC:return"PUBLIC";case su.PROTECTED:return"PROTECTED";case su.PRIVATE:default:return"PRIVATE"}},db=pa("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-destructive-foreground [a&]:hover:bg-destructive/90",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ub({className:e,variant:t,asChild:n=!1,...a}){const r=n?s:"span";return o.jsx(r,{"data-slot":"badge",className:Zr(db({variant:t}),e),...a})}const mb=({content:e,onInsertTags:t,disabled:n})=>{const a=sa(),[s,i]=r.useState(!1),[l,c]=r.useState([]),[u,m]=r.useState(new Set),{mutate:g,isPending:p}=h({mutationFn:async e=>{const t=fo(ud,{content:e.content,limit:e.limit??5});return(await Lu.suggestTags(t)).tags}}),b=r.useCallback(e=>{const t=/#([^\s#]+)/g,n=new Set;let a;for(;null!==(a=t.exec(e));)n.add(a[1].toLowerCase());return n},[]),f=e=>{m(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},x=e.length<5;return o.jsxs(Xg,{open:s,onOpenChange:t=>{i(t),t&&e.length>=5&&g({content:e},{onSuccess:t=>{const n=b(e),a=t.filter(e=>!n.has(e.toLowerCase()));c(a),m(new Set(a))},onError:e=>{Te.error(a("editor.ai-suggest-tags-error")),i(!1)}})},children:[o.jsx(Bg,{asChild:!0,children:o.jsx(Gr,{variant:"ghost",size:"icon",className:"w-8 h-8 text-muted-foreground hover:text-blue-500",disabled:n||x,title:a(x?"editor.content-too-short":"editor.ai-suggest-tags"),children:o.jsx(se,{className:"w-4 h-4"})})}),o.jsx(Tg,{align:"end",className:"w-64 p-3",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:a("editor.ai-suggest-tags-title")}),p?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx(d,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):0===l.length?o.jsx("p",{className:"text-sm text-muted-foreground py-2",children:a("editor.ai-suggest-tags-empty")}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(e=>{const t=u.has(e);return o.jsxs(ub,{role:"button",tabIndex:0,variant:t?"default":"outline",className:Zr("cursor-pointer select-none",t&&"pr-1"),onClick:()=>f(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),f(e))},children:["#",e,t&&o.jsx(te,{className:"w-3 h-3 ml-1"})]},e)})}),o.jsxs(Gr,{size:"sm",className:"w-full",onClick:()=>{u.size>0&&(t(Array.from(u)),Te.success(a("editor.ai-suggest-tags-inserted"))),i(!1),c([]),m(new Set)},disabled:0===u.size,children:[a("editor.ai-suggest-tags-insert")," (",u.size,")"]})]})]})})]})};function hb(e){if(0===e)return"0 B";if(e<0)return"Invalid size";const t=Math.floor(Math.log(e)/Math.log(1024)),n=e/Math.pow(1024,t);return`${0===t?n.toString():n.toFixed(1)} ${["B","KB","MB","GB","TB"][t]}`}function gb(e){if(!e)return"File";const[t,n]=e.split("/"),a={"application/pdf":"PDF","application/zip":"ZIP","application/x-zip-compressed":"ZIP","application/json":"JSON","application/xml":"XML","text/plain":"TXT","text/html":"HTML","text/css":"CSS","text/javascript":"JS","application/javascript":"JS"};if(a[e])return a[e];if("image"===t){return{jpeg:"JPEG",jpg:"JPEG",png:"PNG",gif:"GIF",webp:"WebP",svg:"SVG","svg+xml":"SVG",bmp:"BMP",ico:"ICO"}[n]||n.toUpperCase()}if("video"===t){return{mp4:"MP4",webm:"WebM",ogg:"OGG",avi:"AVI",mov:"MOV",quicktime:"MOV"}[n]||n.toUpperCase()}if("audio"===t){return{mp3:"MP3",mpeg:"MP3",wav:"WAV",ogg:"OGG",webm:"WebM"}[n]||n.toUpperCase()}return n?n.toUpperCase():t.toUpperCase()}const pb=e=>e.externalLink?e.externalLink:`${window.location.origin}/file/${e.name}/${e.filename}`,bb=e=>`${window.location.origin}/file/${e.name}/${e.filename}?thumbnail=true`,fb=e=>xb(e.type)?"image/*":e.type.startsWith("video")?"video/*":e.type.startsWith("audio")&&!vb(e.type)?"audio/*":e.type.startsWith("text")?"text/*":e.type.startsWith("application/epub+zip")?"application/epub+zip":e.type.startsWith("application/pdf")?"application/pdf":e.type.includes("word")?"application/msword":e.type.includes("excel")?"application/msexcel":e.type.startsWith("application/zip")?"application/zip":e.type.startsWith("application/x-java-archive")?"application/x-java-archive":"application/octet-stream",xb=e=>e.startsWith("image/")&&!yb(e),vb=e=>"audio/midi"===e||"audio/mid"===e||"audio/x-midi"===e||"application/x-midi"===e,yb=e=>"image/vnd.adobe.photoshop"===e||"image/x-photoshop"===e||"image/photoshop"===e;function Eb(e){return e.startsWith("image/")?"image":e.startsWith("video/")?"video":"document"}function Nb(e){const t=fb(e),n=pb(e);return{id:e.name,filename:e.filename,category:Eb(e.type),mimeType:e.type,thumbnailUrl:"image/*"===t?bb(e):n,sourceUrl:n,size:Number(e.size),isLocal:!1}}function wb(e,t=[]){return[...e.map(Nb),...t.map(({file:e,previewUrl:t})=>function(e,t){return{id:t,filename:e.name,category:Eb(e.type),mimeType:e.type,thumbnailUrl:t,sourceUrl:t,size:e.size,isLocal:!0}}(e,t))]}const Ab=({item:e,onRemove:t,onMoveUp:n,onMoveDown:a,canMoveUp:r=!0,canMoveDown:s=!0})=>{const{category:i,filename:l,thumbnailUrl:d,mimeType:u,size:m}=e,h=gb(u),g=m?hb(m):void 0;return o.jsxs("div",{className:"relative flex items-center gap-1.5 px-1.5 py-1 rounded border border-transparent hover:border-border hover:bg-accent/20 transition-all",children:[o.jsx("div",{className:"shrink-0 w-6 h-6 rounded overflow-hidden bg-muted/40 flex items-center justify-center",children:"image"===i&&d?o.jsx("img",{src:d,alt:"",className:"w-full h-full object-cover"}):o.jsx(et,{className:"w-3.5 h-3.5 text-muted-foreground"})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col sm:flex-row sm:items-baseline gap-0.5 sm:gap-1.5",children:[o.jsx("span",{className:"text-xs truncate",title:l,children:l}),o.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-muted-foreground shrink-0",children:[o.jsx("span",{children:h}),g&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-muted-foreground/50 hidden sm:inline",children:"•"}),o.jsx("span",{className:"hidden sm:inline",children:g})]})]})]}),o.jsxs("div",{className:"shrink-0 flex items-center gap-0.5",children:[n&&o.jsx("button",{type:"button",onClick:n,disabled:!r,className:Zr("p-0.5 rounded hover:bg-accent active:bg-accent transition-colors touch-manipulation",!r&&"opacity-20 cursor-not-allowed hover:bg-transparent"),title:"Move up","aria-label":"Move attachment up",children:o.jsx(ke,{className:"w-3 h-3 text-muted-foreground"})}),a&&o.jsx("button",{type:"button",onClick:a,disabled:!s,className:Zr("p-0.5 rounded hover:bg-accent active:bg-accent transition-colors touch-manipulation",!s&&"opacity-20 cursor-not-allowed hover:bg-transparent"),title:"Move down","aria-label":"Move attachment down",children:o.jsx(ve,{className:"w-3 h-3 text-muted-foreground"})}),t&&o.jsx("button",{type:"button",onClick:t,className:"p-0.5 rounded hover:bg-destructive/10 active:bg-destructive/10 transition-colors ml-0.5 touch-manipulation",title:"Remove","aria-label":"Remove attachment",children:o.jsx(c,{className:"w-3 h-3 text-muted-foreground hover:text-destructive"})})]})]})},Sb=({attachments:e,localFiles:t=[],onAttachmentsChange:n,onRemoveLocalFile:a})=>{if(0===e.length&&0===t.length)return null;const r=wb(e,t),s=t=>{var r;t.isLocal?a?.(t.id):(r=t.id,n&&n(e.filter(e=>e.name!==r)))};return o.jsxs("div",{className:"w-full rounded-lg border border-border bg-muted/20 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 border-b border-border bg-muted/30",children:[o.jsx(ue,{className:"w-3.5 h-3.5 text-muted-foreground"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Attachments (",r.length,")"]})]}),o.jsx("div",{className:"p-1 sm:p-1.5 flex flex-col gap-0.5",children:r.map(t=>{const a=t.isLocal,r=a?-1:e.findIndex(e=>e.name===t.id);return o.jsx(Ab,{item:t,onRemove:()=>s(t),onMoveUp:a?void 0:()=>(t=>{if(0===t||!n)return;const a=[...e];[a[t-1],a[t]]=[a[t],a[t-1]],n(a)})(r),onMoveDown:a?void 0:()=>(t=>{if(t===e.length-1||!n)return;const a=[...e];[a[t],a[t+1]]=[a[t+1],a[t]],n(a)})(r),canMoveUp:!a&&r>0,canMoveDown:!a&&r<e.length-1},t.id)})})]})};var Vb,Ib,kb,Zb,Wb,Gb={exports:{}};const Rb=$t((Vb||(Vb=1,Ib=Gb,kb=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],Zb="undefined"!=typeof window,Wb=Zb&&null!=window.mozInnerScreenX,Ib.exports=function(e,t,n){if(!Zb)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=n&&n.debug||!1;if(a){var r=document.querySelector("#input-textarea-caret-position-mirror-div");r&&r.parentNode.removeChild(r)}var o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);var s=o.style,i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,l="INPUT"===e.nodeName;s.whiteSpace="pre-wrap",l||(s.wordWrap="break-word"),s.position="absolute",a||(s.visibility="hidden"),kb.forEach(function(e){l&&"lineHeight"===e?s.lineHeight=i.height:s[e]=i[e]}),Wb?e.scrollHeight>parseInt(i.height)&&(s.overflowY="scroll"):s.overflow="hidden",o.textContent=e.value.substring(0,t),l&&(o.textContent=o.textContent.replace(/\s/g," "));var c=document.createElement("span");c.textContent=e.value.substring(t)||".",o.appendChild(c);var d={top:c.offsetTop+parseInt(i.borderTopWidth),left:c.offsetLeft+parseInt(i.borderLeftWidth),height:parseInt(i.lineHeight)};return a?c.style.backgroundColor="#aaa":document.body.removeChild(o),d}),Gb.exports)),Cb="fixed inset-0 bg-black/20 backdrop-blur-sm z-40",jb={base:"fixed z-50 w-auto max-w-5xl mx-auto shadow-2xl border-border h-auto overflow-y-auto",spacing:"top-2 left-2 right-2 bottom-2 sm:top-4 sm:left-4 sm:right-4 sm:bottom-4 md:top-8 md:left-8 md:right-8 md:bottom-8"},Fb="transition-all duration-300 ease-in-out",Yb="absolute top-2 right-2 z-10 opacity-60 hover:opacity-100",Xb="max-h-[50vh]",Bb=[{name:"todo",run:()=>"- [ ] ",cursorOffset:6},{name:"code",run:()=>"```\n\n```",cursorOffset:4},{name:"link",run:()=>"[text](url)",cursorOffset:1},{name:"table",run:()=>"| Header | Header |\n| ------ | ------ |\n| Cell   | Cell |",cursorOffset:1}],Tb="z-20 absolute p-1 mt-1 -ml-2 max-w-48 max-h-60 rounded border bg-popover text-popover-foreground shadow-lg font-mono flex flex-col overflow-y-auto overflow-x-hidden",Mb="rounded p-1 px-2 w-full text-sm cursor-pointer transition-colors select-none hover:bg-accent hover:text-accent-foreground";function Lb({position:e,suggestions:t,selectedIndex:n,onItemSelect:a,renderItem:s,getItemKey:i}){const l=r.useRef(null),c=r.useRef(null);return r.useEffect(()=>{c.current?.scrollIntoView({block:"nearest",behavior:"smooth"})},[n]),o.jsx("div",{ref:l,className:Tb,style:{left:e.left,top:e.top+e.height},children:t.map((e,t)=>o.jsx("div",{ref:t===n?c:null,onMouseDown:()=>a(e),className:Zr(Mb,t===n&&"bg-accent text-accent-foreground"),children:s(e,t===n)},i(e,t)))})}function Ub({editorRef:e,editorActions:t,triggerChar:n,items:a,filterItems:o,onAutocomplete:s}){const[i,l]=r.useState(null),[c,d]=r.useState(0),u=r.useRef(!1),m=r.useRef(c);m.current=c;const h=()=>{const t=e.current;if(!t)return["",0];const n=t.selectionEnd,a=t.value.slice(0,n).match(/\S*$/)||{0:"",index:n},r=t.value.slice(n).match(/^\S*/)||{0:""};return[a[0]+r[0],a.index??n]},g=()=>l(null),p=r.useRef([]);p.current=(()=>{const[e]=h();if(!e.startsWith(n))return[];const t=e.slice(n.length).toLowerCase();return o(a,t)})();const b=r.useRef(!1);b.current=!!(i&&p.current.length>0);const f=e=>{if(!t||!("current"in t)||!t.current)return;u.current=!0;const[n,a]=h();s(e,n,a,t.current),g(),queueMicrotask(()=>{u.current=!1})},x=e=>{if(!b.current)return;const t=p.current,n=m.current;["Escape","ArrowLeft","ArrowRight"].includes(e.code)?g():["ArrowDown","ArrowUp"].includes(e.code)?((e,t,n)=>{"ArrowDown"===e.code?(d((t+1)%n),e.preventDefault(),e.stopPropagation()):"ArrowUp"===e.code&&(d((t-1+n)%n),e.preventDefault(),e.stopPropagation())})(e,n,t.length):["Enter","Tab"].includes(e.code)&&(f(t[n]),e.preventDefault(),e.stopImmediatePropagation())},v=()=>{if(u.current)return;const t=e.current;if(!t)return;d(0);const[a,r]=h(),o=t.value[t.selectionEnd];if(a.startsWith(n)&&o!==n){const e=Rb(t,r);e.top-=t.scrollTop,l(e)}else g()};return r.useEffect(()=>{const t=e.current;if(!t)return;const n={click:g,blur:g,keydown:x,input:v};return Object.entries(n).forEach(([e,n])=>{t.addEventListener(e,n)}),()=>{Object.entries(n).forEach(([e,n])=>{t.removeEventListener(e,n)})}},[]),{position:i,suggestions:p.current,selectedIndex:c,isVisible:b.current,handleItemSelect:f}}const zb=({editorRef:e,editorActions:t,commands:n})=>{const{position:a,suggestions:r,selectedIndex:s,isVisible:i,handleItemSelect:l}=Ub({editorRef:e,editorActions:t,triggerChar:"/",items:n,filterItems:(e,t)=>t?e.filter(e=>e.name.toLowerCase().startsWith(t)):e,onAutocomplete:(e,t,n,a)=>{a.removeText(n,t.length),a.insertText(e.run()),e.cursorOffset&&a.setCursorPosition(n+e.cursorOffset)}});return i&&a?o.jsx(Lb,{position:a,suggestions:r,selectedIndex:s,onItemSelect:l,getItemKey:e=>e.name,renderItem:e=>o.jsxs("span",{className:"tracking-wide",children:[o.jsx("span",{className:"text-muted-foreground",children:"/"}),e.name]})}):null},Db=({children:e,className:t})=>{const[n,a]=r.useState(!1),s=r.useRef(null);return r.useEffect(()=>{s.current&&a(s.current.scrollWidth>s.current.clientWidth)},[]),o.jsx(qh,{children:o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:o.jsx("div",{ref:s,className:Zr("truncate",t),children:e})}),n&&o.jsx(ng,{children:o.jsx("p",{children:e})})]})})};function Qb({editorRef:e,editorActions:t}){const n=Boolean($e(ev.EXPLORE,window.location.pathname)),{data:a={}}=function(e=!1){const{data:t}=Pu();return u({queryKey:e?[...Hu.stats(),"tagCounts","current"]:[...Hu.stats(),"tagCounts","all"],queryFn:async()=>{if(e)return t?.name&&(await Fu.getUserStats({name:t.name})).tagCount||{};{const{stats:e}=await Fu.listAllUserStats({}),t={};for(const n of e)if(n.tagCount)for(const[e,a]of Object.entries(n.tagCount))t[e]=(t[e]||0)+a;return t}},enabled:!e||!!t?.name,staleTime:12e4})}(!n),s=r.useMemo(()=>Object.entries(a).sort((e,t)=>t[1]-e[1]||e[0].localeCompare(t[0])).map(([e])=>e),[a]),{position:i,suggestions:l,selectedIndex:c,isVisible:d,handleItemSelect:m}=Ub({editorRef:e,editorActions:t,triggerChar:"#",items:s,filterItems:(e,t)=>t?e.filter(e=>e.toLowerCase().includes(t)):e,onAutocomplete:(e,t,n,a)=>{a.removeText(n,t.length),a.insertText(`#${e} `)}});return d&&i?o.jsx(Lb,{position:i,suggestions:l,selectedIndex:c,onItemSelect:m,getItemKey:e=>e,renderItem:e=>o.jsxs(Db,{children:[o.jsx("span",{className:"text-muted-foreground mr-1",children:"#"}),e]})}):null}const Jb=[/^(\s*)([-*+])\s*$/,/^(\s*)([-*+])\s+\[([ xX])\]\s*$/,/^(\s*)(\d+)[.)]\s*$/];function Kb({editorRef:e,editorActions:t,isInIME:n}){const a=r.useRef(n);a.current=n;const o=r.useRef(t);o.current=t;const s=r.useRef(0);r.useEffect(()=>{const t=e.current;if(!t)return;const n=()=>{s.current=Date.now()},r=e=>{if("Enter"!==e.key||a.current||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)return;if(Date.now()-s.current<100)return;const t=o.current,n=t.getCursorPosition(),r=t.getContent().substring(0,n),i=function(e){const t=e.split("\n"),n=t[t.length-1],a=n.match(/^(\s*)/),r=a?a[1]:"",o=n.match(/^(\s*)([-*+])\s+\[([ xX])\]\s+/);if(o)return{type:"task",symbol:o[2],indent:r};const s=n.match(/^(\s*)([-*+])\s+/);if(s)return{type:"unordered",symbol:s[2],indent:r};const i=n.match(/^(\s*)(\d+)[.)]\s+/);return i?{type:"ordered",number:parseInt(i[2]),indent:r}:{type:null,indent:r}}(r);if(!i.type)return;e.preventDefault();const l=r.split("\n"),c=l[l.length-1];if(d=c,Jb.some(e=>e.test(d))){const e=n-c.length;t.removeText(e,c.length)}else{const e=function(e){const t=e.indent||"";switch(e.type){case"task":return`${t}${e.symbol} [ ] `;case"unordered":return`${t}${e.symbol} `;case"ordered":return`${t}${(e.number||0)+1}. `;default:return t}}(i);t.insertText("\n"+e),setTimeout(()=>t.scrollToCursor(),0)}var d};return t.addEventListener("compositionend",n),t.addEventListener("keydown",r),()=>{t.removeEventListener("compositionend",n),t.removeEventListener("keydown",r)}},[])}const Ob=r.forwardRef(function(e,t){const{className:n,initialContent:a,placeholder:s,onPaste:i,onContentChange:l,isFocusMode:c,isInIME:d=!1,onCompositionStart:u,onCompositionEnd:m}=e,h=r.useRef(null),g=r.useCallback(()=>{h.current&&(h.current.style.height="auto",h.current.style.height=`${h.current.scrollHeight??0}px`)},[]),p=r.useCallback(()=>{h.current&&(l(h.current.value),g())},[l,g]),b=r.useCallback((e={})=>{const t=h.current;if(!t)return;const{force:n=!1}=e,a=Rb(t,t.selectionEnd);if(n)return void(t.scrollTop=Math.max(0,a.top-t.clientHeight/2));const r=parseFloat(getComputedStyle(t).lineHeight)||24,o=t.scrollTop+t.clientHeight;a.top+2*r>o&&(t.scrollTop=Math.max(0,a.top-t.clientHeight/2))},[]);r.useEffect(()=>{h.current&&a&&(h.current.value=a,l(a),g())},[]),r.useEffect(()=>{h.current&&h.current.value!==a&&(h.current.value=a,g())},[a,g]);const f=r.useMemo(()=>({getEditor:()=>h.current,focus:()=>h.current?.focus(),scrollToCursor:()=>{b({force:!0})},insertText:(e="",t="",n="")=>{const a=h.current;if(!a)return;const r=a.selectionStart,o=a.selectionEnd,s=a.value,i=e||s.slice(r,o);a.value=s.slice(0,r)+t+i+n+s.slice(o),a.focus(),a.setSelectionRange(r+t.length+i.length,r+t.length+i.length),p()},removeText:(e,t)=>{const n=h.current;n&&(n.value=n.value.slice(0,e)+n.value.slice(e+t),n.focus(),n.setSelectionRange(e,e),p())},setContent:e=>{const t=h.current;t&&(t.value=e,p())},getContent:()=>h.current?.value??"",getCursorPosition:()=>h.current?.selectionStart??0,getSelectedContent:()=>{const e=h.current;return e?e.value.slice(e.selectionStart,e.selectionEnd):""},setCursorPosition:(e,t)=>{const n=h.current;if(!n)return;const a=void 0===t||Number.isNaN(t)?e:t;n.setSelectionRange(e,a)},getCursorLineNumber:()=>{const e=h.current;if(!e)return 0;return e.value.slice(0,e.selectionStart).split("\n").length-1},getLine:e=>h.current?.value.split("\n")[e]??"",setLine:(e,t)=>{const n=h.current;if(!n)return;const a=n.value.split("\n");a[e]=t,n.value=a.join("\n"),n.focus(),p()}}),[p,b]);r.useImperativeHandle(t,()=>f,[f]);const x=r.useCallback(()=>{h.current&&(l(h.current.value),g(),b())},[l,g,b]);return Kb({editorRef:h,editorActions:f,isInIME:d}),o.jsxs("div",{className:Zr("flex flex-col justify-start items-start relative w-full bg-inherit",c?"flex-1":`h-auto ${Xb}`,n),children:[o.jsx("textarea",{className:Zr("w-full my-1 text-base resize-none overflow-x-hidden overflow-y-auto bg-transparent outline-none placeholder:opacity-70 whitespace-pre-wrap break-words",c?"flex-1 h-0":"h-full"),rows:1,placeholder:s,ref:h,onPaste:i,onInput:x,onCompositionStart:u,onCompositionEnd:m}),o.jsx(Qb,{editorRef:h,editorActions:t}),o.jsx(zb,{editorRef:h,editorActions:t,commands:Bb})]})}),_b={key:(e,t)=>`${e}-${t||""}`,save:Ht((e,t)=>{t.trim()?localStorage.setItem(e,t):localStorage.removeItem(e)},500),load:e=>localStorage.getItem(e)||"",clear(e){localStorage.removeItem(e)}},Hb={getErrorMessage:e=>e&&"object"==typeof e&&"details"in e?e.details||"An error occurred":e instanceof Error?e.message:"An unknown error occurred"},Pb={async uploadFiles(e){if(0===e.length)return[];const t=[];for(const{file:n}of e){const e=new Uint8Array(await n.arrayBuffer()),a=await Xu.createAttachment({attachment:fo(yd,{filename:n.name,size:BigInt(n.size),type:n.type,content:e})});t.push(a)}return t}};function $b(e){return e.map(e=>fo(yd,{name:e.name}))}const qb={async save(e,t){const n=await Pb.uploadFiles(e.localFiles),a=[...e.metadata.attachments,...n];if(t.memoName){const n=await Yu.getMemo({name:t.memoName}),{mask:r,patch:o}=function(e,t,n){const a=new Set,r={name:e.name,content:t.content};if(Pt(t.content,e.content)||(a.add("content"),r.content=t.content),Pt(t.metadata.visibility,e.visibility)||(a.add("visibility"),r.visibility=t.metadata.visibility),Pt(n,e.attachments)||(a.add("attachments"),r.attachments=$b(n)),Pt(t.metadata.relations,e.relations)||(a.add("relations"),r.relations=t.metadata.relations),Pt(t.metadata.location,e.location)||(a.add("location"),r.location=t.metadata.location),["content","attachments","relations","location"].some(e=>a.has(e))&&a.add("update_time"),t.timestamps.createTime){const n=e.createTime?gl(e.createTime):void 0;Pt(t.timestamps.createTime,n)||(a.add("create_time"),r.createTime=hl(t.timestamps.createTime))}if(t.timestamps.updateTime){const n=e.updateTime?gl(e.updateTime):void 0;Pt(t.timestamps.updateTime,n)||(a.add("update_time"),r.updateTime=hl(t.timestamps.updateTime))}return{mask:a,patch:r}}(n,e,a);if(0===r.size)return{memoName:n.name,hasChanges:!1};return{memoName:(await Yu.updateMemo({memo:fo(qd,o),updateMask:fo(Zl,{paths:Array.from(r)})})).name,hasChanges:!0}}const r=fo(qd,{content:e.content,visibility:e.metadata.visibility,attachments:$b(a),relations:e.metadata.relations,location:e.metadata.location,createTime:e.timestamps.createTime?hl(e.timestamps.createTime):void 0,updateTime:e.timestamps.updateTime?hl(e.timestamps.updateTime):void 0});return{memoName:(t.parentMemoName?await Yu.createMemoComment({name:t.parentMemoName,comment:r}):await Yu.createMemo({memo:r})).name,hasChanges:!0}},async load(e){const t=await Yu.getMemo({name:e});return{content:t.content,metadata:{visibility:t.visibility,attachments:t.attachments,relations:t.relations,location:t.location},ui:{isFocusMode:!1,isLoading:{saving:!1,uploading:!1,loading:!1},isDragging:!1,isComposing:!1},timestamps:{createTime:t.createTime?gl(t.createTime):void 0,updateTime:t.updateTime?gl(t.updateTime):void 0},localFiles:[]}}},ef={canSave:e=>e.content.trim()||0!==e.metadata.attachments.length||0!==e.localFiles.length?e.ui.isLoading.uploading?{valid:!1,reason:"Wait for upload to complete"}:e.ui.isLoading.saving?{valid:!1,reason:"Save in progress"}:{valid:!0}:{valid:!1,reason:"Content, attachment, or file required"}};const tf={initMemo:e=>({type:"INIT_MEMO",payload:e}),updateContent:e=>({type:"UPDATE_CONTENT",payload:e}),setMetadata:e=>({type:"SET_METADATA",payload:e}),addAttachment:e=>({type:"ADD_ATTACHMENT",payload:e}),removeAttachment:e=>({type:"REMOVE_ATTACHMENT",payload:e}),addRelation:e=>({type:"ADD_RELATION",payload:e}),removeRelation:e=>({type:"REMOVE_RELATION",payload:e}),addLocalFile:e=>({type:"ADD_LOCAL_FILE",payload:e}),removeLocalFile:e=>({type:"REMOVE_LOCAL_FILE",payload:e}),clearLocalFiles:()=>({type:"CLEAR_LOCAL_FILES"}),toggleFocusMode:()=>({type:"TOGGLE_FOCUS_MODE"}),setLoading:(e,t)=>({type:"SET_LOADING",payload:{key:e,value:t}}),setDragging:e=>({type:"SET_DRAGGING",payload:e}),setComposing:e=>({type:"SET_COMPOSING",payload:e}),reset:()=>({type:"RESET"})},nf={content:"",metadata:{visibility:su.PRIVATE,attachments:[],relations:[],location:void 0},ui:{isFocusMode:!1,isLoading:{saving:!1,uploading:!1,loading:!1},isDragging:!1,isComposing:!1},timestamps:{createTime:void 0,updateTime:void 0},localFiles:[]};function af(e,t){switch(t.type){case"INIT_MEMO":return{...e,content:t.payload.content,metadata:t.payload.metadata,timestamps:t.payload.timestamps};case"UPDATE_CONTENT":return{...e,content:t.payload};case"SET_METADATA":return{...e,metadata:{...e.metadata,...t.payload}};case"ADD_ATTACHMENT":return{...e,metadata:{...e.metadata,attachments:[...e.metadata.attachments,t.payload]}};case"REMOVE_ATTACHMENT":return{...e,metadata:{...e.metadata,attachments:e.metadata.attachments.filter(e=>e.name!==t.payload)}};case"ADD_RELATION":return{...e,metadata:{...e.metadata,relations:[...e.metadata.relations,t.payload]}};case"REMOVE_RELATION":return{...e,metadata:{...e.metadata,relations:e.metadata.relations.filter(e=>e.relatedMemo?.name!==t.payload)}};case"ADD_LOCAL_FILE":return{...e,localFiles:[...e.localFiles,t.payload]};case"REMOVE_LOCAL_FILE":return{...e,localFiles:e.localFiles.filter(e=>e.previewUrl!==t.payload)};case"CLEAR_LOCAL_FILES":return{...e,localFiles:[]};case"TOGGLE_FOCUS_MODE":return{...e,ui:{...e.ui,isFocusMode:!e.ui.isFocusMode}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:{...e.ui.isLoading,[t.payload.key]:t.payload.value}}};case"SET_DRAGGING":return{...e,ui:{...e.ui,isDragging:t.payload}};case"SET_COMPOSING":return{...e,ui:{...e.ui,isComposing:t.payload}};case"RESET":return{...nf};default:return e}}const rf=r.createContext(null),of=()=>{const e=r.useContext(rf);if(!e)throw new Error("useEditorContext must be used within EditorProvider");return e},sf=({children:e,initialEditorState:t})=>{const[n,a]=r.useReducer(af,t||nf),s=r.useMemo(()=>({state:n,dispatch:a,actions:tf}),[n]);return o.jsx(rf.Provider,{value:s,children:e})},lf=r.forwardRef(({placeholder:e},t)=>{const{state:n,actions:a,dispatch:s}=of(),{createBlobUrl:i}=function(){const e=r.useRef(new Set);return r.useEffect(()=>()=>{for(const t of e.current)URL.revokeObjectURL(t)},[]),{createBlobUrl:t=>{const n=URL.createObjectURL(t);return e.current.add(n),n},revokeBlobUrl:t=>{e.current.has(t)&&(URL.revokeObjectURL(t),e.current.delete(t))}}}(),{dragHandlers:l}=(c=e=>{Array.from(e).map(e=>({file:e,previewUrl:i(e)})).forEach(e=>s(a.addLocalFile(e)))},{dragHandlers:{onDragOver:e=>{e.dataTransfer?.types.includes("Files")&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},onDragLeave:e=>{e.preventDefault()},onDrop:e=>{e.dataTransfer?.files.length&&(e.preventDefault(),c(e.dataTransfer.files))}}});var c;return o.jsx("div",{className:"w-full flex flex-col flex-1",...l,children:o.jsx(Ob,{ref:t,className:"memo-editor-content",initialContent:n.content,placeholder:e||"",isFocusMode:n.ui.isFocusMode,isInIME:n.ui.isComposing,onContentChange:e=>{s(a.updateContent(e))},onPaste:()=>{},onCompositionStart:()=>{s(a.setComposing(!0))},onCompositionEnd:()=>{s(a.setComposing(!1))}})})});lf.displayName="EditorContent";const cf=({location:e,onRemove:t,className:n})=>{const a=e.placeholder||`${e.latitude.toFixed(6)}, ${e.longitude.toFixed(6)}`;return o.jsxs("div",{className:Zr("relative flex items-center gap-1.5 px-1.5 py-1 rounded border border-border bg-background hover:bg-accent/20 transition-all w-full",n),children:[o.jsx(nt,{className:"w-3.5 h-3.5 shrink-0 text-muted-foreground"}),o.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[o.jsx("span",{className:"text-xs truncate",title:a,children:a}),o.jsxs("span",{className:"text-[11px] text-muted-foreground shrink-0 hidden sm:inline",children:[e.latitude.toFixed(4),"°, ",e.longitude.toFixed(4),"°"]})]}),t&&o.jsx("button",{type:"button",onClick:t,className:"p-0.5 rounded hover:bg-destructive/10 active:bg-destructive/10 transition-colors touch-manipulation shrink-0 ml-auto",title:"Remove","aria-label":"Remove location",children:o.jsx(c,{className:"w-3 h-3 text-muted-foreground hover:text-destructive"})})]})},df=({memo:e,parentPage:t,className:n})=>{const a=Ju(e.name);return o.jsxs(k,{className:Zr("flex items-center gap-1 px-1 py-1 rounded text-xs text-muted-foreground hover:text-foreground hover:bg-accent/20 transition-colors group",n),to:`/${e.name}`,viewTransition:!0,state:{from:t},children:[o.jsx("span",{className:"text-[8px] font-mono px-1 py-0.5 rounded border border-border bg-muted/40 group-hover:bg-accent/30 transition-colors shrink-0",children:a.slice(0,6)}),o.jsx("span",{className:"truncate",children:e.snippet})]})},uf=({memo:e,onRemove:t,parentPage:n})=>o.jsxs("div",{className:"group relative flex items-center justify-between w-full rounded hover:bg-accent/20 transition-colors",children:[o.jsx(df,{memo:e,parentPage:n,className:"flex-1 hover:bg-transparent"}),t&&o.jsx("button",{type:"button",onClick:t,className:"p-1 mr-0.5 rounded opacity-0 group-hover:opacity-100 hover:bg-destructive/10 active:bg-destructive/10 transition-all touch-manipulation",title:"Remove","aria-label":"Remove relation",children:o.jsx(c,{className:"w-3 h-3 text-muted-foreground hover:text-destructive"})})]}),mf=({relations:e,onRelationsChange:t,parentPage:n,memoName:a})=>{const s=e.filter(e=>e.type===ou.REFERENCE&&(!a||e.memo?.name===a)),[i,l]=r.useState({});r.useEffect(()=>{(async()=>{const e=s.filter(e=>!e.relatedMemo?.snippet&&e.relatedMemo?.name);if(e.length>0){const t=e.map(async e=>{const t=await Yu.getMemo({name:e.relatedMemo.name});return fo(ru,{name:t.name,snippet:t.snippet})}),n=await Promise.all(t);l(e=>{const t={...e};for(const a of n)t[a.name]=a;return t})}})()},[s]);return 0===s.length?null:o.jsxs("div",{className:"w-full rounded-lg border border-border bg-muted/20 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 border-b border-border bg-muted/30",children:[o.jsx(at,{className:"w-3.5 h-3.5 text-muted-foreground"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Relations (",s.length,")"]})]}),o.jsx("div",{className:"p-1 sm:p-1.5 flex flex-col gap-0.5",children:s.map(a=>{const r=a.relatedMemo,s=r.snippet?r:i[r.name]||r;return o.jsx(uf,{memo:s,onRemove:()=>{return n=s.name,void(t&&t(e.filter(e=>e.relatedMemo?.name!==n)));var n},parentPage:n},s.name)})})]})},hf=({memoName:e})=>{const{state:t,actions:n,dispatch:a}=of();return o.jsxs("div",{className:"w-full flex flex-col gap-2",children:[o.jsx(Sb,{attachments:t.metadata.attachments,localFiles:t.localFiles,onAttachmentsChange:e=>a(n.setMetadata({attachments:e})),onRemoveLocalFile:e=>a(n.removeLocalFile(e))}),o.jsx(mf,{relations:t.metadata.relations,onRelationsChange:e=>a(n.setMetadata({relations:e})),memoName:e}),t.metadata.location&&o.jsx(cf,{location:t.metadata.location,onRemove:()=>a(n.setMetadata({location:void 0}))})]})},gf="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",pf="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",bf=()=>{const{userGeneralSetting:e}=sm(),t=r.useMemo(()=>Gm(e?.theme||"system").includes("dark"),[e?.theme]);return o.jsx(ot,{url:t?pf:gf})},ff=(()=>{const{fill:e="orange",size:t=28,className:n=""}={};return new qt.DivIcon({className:"relative border-none",html:rt.renderToString(o.jsx(nt,{className:`absolute bottom-1/2 -left-1/2 ${n}`.trim(),fill:e,size:t}))})})(),xf=e=>{const[t,n]=r.useState(e.position),a=r.useRef(!1),s=it({click(t){e.readonly||(n(t.latlng),s.locate(),e.onChange(t.latlng))},locationfound(){}});return r.useEffect(()=>{a.current||(s.locate(),a.current=!0)},[s]),r.useEffect(()=>{e.position?(n(e.position),s.setView(e.position)):n(void 0)},[e.position,s]),void 0===t?null:o.jsx(lt,{position:t,icon:ff})},vf=({icon:e,onClick:t,ariaLabel:n,title:a})=>o.jsx("button",{type:"button",onClick:t,"aria-label":n,title:a,className:Zr("h-8 w-8 flex items-center justify-center rounded-lg","cursor-pointer transition-all duration-200","bg-white/80 backdrop-blur-md border border-white/30 shadow-lg","hover:bg-white/90 hover:scale-105 active:scale-95","dark:bg-black/80 dark:border-white/10 dark:hover:bg-black/90","focus:outline-none focus:ring-2 focus:ring-blue-500"),children:e}),yf=({position:e,onZoomIn:t,onZoomOut:n,onOpenGoogleMaps:a})=>o.jsxs("div",{className:"flex flex-col gap-1.5",children:[e&&o.jsx(vf,{icon:o.jsx(ut,{size:16,className:"text-foreground"}),onClick:a,ariaLabel:"Open location in Google Maps",title:"Open in Google Maps"}),o.jsx(vf,{icon:o.jsx(Me,{size:16,className:"text-foreground"}),onClick:t,ariaLabel:"Zoom in",title:"Zoom in"}),o.jsx(vf,{icon:o.jsx(mt,{size:16,className:"text-foreground"}),onClick:n,ariaLabel:"Zoom out",title:"Zoom out"})]});class Ef extends en.Control{constructor(){super(...arguments),t(this,"container")}onAdd(){return this.container=en.DomUtil.create("div",""),this.container.style.pointerEvents="auto",en.DomEvent.disableClickPropagation(this.container),en.DomEvent.disableScrollPropagation(this.container),this.container}onRemove(){this.container=void 0}getContainer(){return this.container}}const Nf=({position:e})=>{const t=ct(),n=r.useRef(null),a=r.useRef(null),s=()=>{if(!e)return;const t=`https://www.google.com/maps?q=${e.lat},${e.lng}`;window.open(t,"_blank","noopener,noreferrer")},i=()=>{t.zoomIn()},l=()=>{t.zoomOut()};return r.useEffect(()=>{const r=new Ef({position:"topright"});n.current=r,r.addTo(t);const c=r.getContainer();return c&&(a.current=dt.createRoot(c),a.current.render(o.jsx(yf,{position:e,onZoomIn:i,onZoomOut:l,onOpenGoogleMaps:s}))),()=>{setTimeout(()=>{a.current&&(a.current.unmount(),a.current=null),n.current&&(n.current.remove(),n.current=null)},0)}},[t]),r.useEffect(()=>{a.current&&a.current.render(o.jsx(yf,{position:e,onZoomIn:i,onZoomOut:l,onOpenGoogleMaps:s}))},[e]),null},wf=()=>{const e=ct();return r.useEffect(()=>()=>{setTimeout(()=>{if(e)try{e.remove()}catch{}},0)},[e]),null},Af=new qt.LatLng(48.8584,2.2945),Sf=e=>{const t=e.latlng||Af;return o.jsxs(st,{className:"w-full h-72",center:t,zoom:13,scrollWheelZoom:!1,zoomControl:!1,attributionControl:!1,children:[o.jsx(bf,{}),o.jsx(xf,{position:t,readonly:e.readonly,onChange:e.onChange?e.onChange:()=>{}}),o.jsx(Nf,{position:e.latlng}),o.jsx(wf,{})]})},Vf="https://nominatim.openstreetmap.org/reverse",If="DivineSense/1.0 (https://github.com/hrygo/divinesense)",kf="json",Zf=r.lazy(()=>Jt(()=>import("./LocationDialog-DV3bNKl6.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,10,11,12])).then(e=>({default:e.LocationDialog}))),Wf=e=>{const t=sa(),{state:n,actions:a,dispatch:s}=of(),[i,l]=r.useState(!1),[c,m]=r.useState(!1),[h,g]=r.useState(!1),{handleTriggerEnter:p,handleTriggerLeave:b,handleContentEnter:f,handleContentLeave:x}=function(e=150,t){const n=r.useRef(null),a=()=>{n.current&&(clearTimeout(n.current),n.current=null)},o=(e=0)=>{a(),n.current=window.setTimeout(()=>t?.(!1),e)};return r.useEffect(()=>()=>a(),[]),{handleTriggerEnter:()=>{a(),t?.(!0)},handleTriggerLeave:()=>{o(e)},handleContentEnter:()=>{a()},handleContentLeave:()=>{o()}}}(150,g),{fileInputRef:v,selectingFlag:y,handleFileInputChange:E,handleUploadClick:N}=(e=>{const t=r.useRef(null),n=r.useRef(!1);return{fileInputRef:t,selectingFlag:n.current,handleFileInputChange:a=>{const r=Array.from(t.current?.files||a?.target.files||[]);if(0===r.length||n.current)return;n.current=!0;const o=r.map(e=>({file:e,previewUrl:URL.createObjectURL(e)}));e(o),n.current=!1,t.current&&(t.current.value="")},handleUploadClick:()=>{t.current?.click()}}})(e=>{e.forEach(e=>s(a.addLocalFile(e)))}),w=(({isOpen:e,currentMemoName:t,existingRelations:n,onAddRelation:a})=>{const o=ag(),[s,i]=r.useState(""),[l,c]=r.useState(!0),[d,u]=r.useState([]),m=d.filter(e=>e.name!==t&&!n.some(t=>t.relatedMemo?.name===e.name));return tt(async()=>{if(e){c(!0);try{const e=[`creator_id == ${t=o?.name??"",t.split("users/").pop()||""}`];s&&e.push(`content.contains("${s}")`);const{memos:n}=await Yu.listMemos({pageSize:16,filter:e.join(" && ")});u(n)}catch(n){}finally{c(!1)}var t}},300,[e,s]),{searchText:s,setSearchText:i,isFetching:l,filteredMemos:m,addMemoRelation:e=>{const t=fo(au,{type:ou.REFERENCE,relatedMemo:fo(ru,{name:e.name,snippet:e.snippet})});a(t)}}})({isOpen:i,currentMemoName:e.memoName,existingRelations:n.metadata.relations,onAddRelation:e=>{s(a.setMetadata({relations:Ot([...n.metadata.relations,e],e=>e.relatedMemo?.name)})),l(!1)}}),A=(e=>{const[t,n]=r.useState(!1),[a,o]=r.useState({placeholder:e?.placeholder||"",position:e?{lat:e.latitude,lng:e.longitude}:void 0,latInput:e?String(e.latitude):"",lngInput:e?String(e.longitude):""}),s=e=>{o(t=>({...t,position:e,latInput:e?String(e.lat):"",lngInput:e?String(e.lng):""}))};return{state:a,locationInitialized:t,handlePositionChange:e=>{t||n(!0),s(e)},updateCoordinate:(e,t)=>{o(n=>({...n,["lat"===e?"latInput":"lngInput"]:t}));const n=parseFloat(t);("lat"===e?!isNaN(n)&&n>=-90&&n<=90:!isNaN(n)&&n>=-180&&n<=180)&&a.position&&s("lat"===e?{lat:n,lng:a.position.lng}:{lat:a.position.lat,lng:n})},setPlaceholder:e=>{o(t=>({...t,placeholder:e}))},reset:()=>{o({placeholder:"",position:void 0,latInput:"",lngInput:""}),n(!1)},getLocation:()=>{if(a.position&&a.placeholder.trim())return fo(tu,{latitude:a.position.lat,longitude:a.position.lng,placeholder:a.placeholder})}}})(e.location),[S,V]=r.useState(void 0);ht(()=>{V(A.state.position)},1e3,[A.state.position]);const{data:I}=(k=S?.lat,Z=S?.lng,u({queryKey:["geocoding",k,Z],queryFn:async()=>{const e=`${k?.toFixed(6)}, ${Z?.toFixed(6)}`;if(void 0===k||void 0===Z)return"";try{const t=`${Vf}?lat=${k}&lon=${Z}&format=${kf}`,n=await fetch(t,{headers:{"User-Agent":If,Accept:"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a?.display_name||e}catch(t){return e}},enabled:void 0!==k&&void 0!==Z,staleTime:1/0}));var k,Z;r.useEffect(()=>{I&&A.setPlaceholder(I)},[I]);const W=y||e.isUploading;return o.jsxs(o.Fragment,{children:[o.jsxs(ig,{modal:!1,children:[o.jsx(lg,{asChild:!0,children:o.jsx(Gr,{variant:"outline",size:"icon",className:"shadow-none",disabled:W,children:W?o.jsx(d,{className:"size-4 animate-spin"}):o.jsx(Me,{className:"size-4"})})}),o.jsxs(cg,{align:"start",children:[o.jsxs(dg,{onClick:N,children:[o.jsx(et,{className:"w-4 h-4"}),t("common.upload")]}),o.jsxs(dg,{onClick:()=>l(!0),children:[o.jsx(at,{className:"w-4 h-4"}),t("tooltip.link-memo")]}),o.jsxs(dg,{onClick:()=>{m(!0),e.location||A.locationInitialized||navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{A.handlePositionChange({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{})},children:[o.jsx(nt,{className:"w-4 h-4"}),t("tooltip.select-location")]}),o.jsxs(ug,{open:h,onOpenChange:g,children:[o.jsxs(mg,{onPointerEnter:p,onPointerLeave:b,children:[o.jsx(gt,{className:"w-4 h-4"}),t("common.more")]}),o.jsx(hg,{onPointerEnter:f,onPointerLeave:x,children:o.jsxs(dg,{onClick:()=>{e.onToggleFocusMode?.(),g(!1)},children:[o.jsx(pt,{className:"w-4 h-4"}),t("editor.focus-mode"),o.jsx("span",{className:"ml-auto text-xs text-muted-foreground opacity-60",children:"⌘⇧F"})]})})]}),o.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground opacity-80",children:t("editor.slash-commands")})]})]}),o.jsx("input",{className:"hidden",ref:v,disabled:W,onChange:E,type:"file",multiple:!0,accept:"*"}),o.jsx(Xf,{open:i,onOpenChange:l,searchText:w.searchText,onSearchChange:w.setSearchText,filteredMemos:w.filteredMemos,isFetching:w.isFetching,onSelectMemo:w.addMemoRelation}),c&&o.jsx(r.Suspense,{fallback:null,children:o.jsx(Zf,{open:c,onOpenChange:m,state:A.state,locationInitialized:A.locationInitialized,onPositionChange:e=>{A.handlePositionChange(e)},onUpdateCoordinate:A.updateCoordinate,onPlaceholderChange:A.setPlaceholder,onCancel:()=>{A.reset(),m(!1)},onConfirm:()=>{const t=A.getLocation();t&&(e.onLocationChange(t),m(!1))}})})]})},Gf=e=>{const{className:t,visibility:n}=e;let a=null;return n===su.PRIVATE?a=bt:n===su.PROTECTED?a=ft:n===su.PUBLIC&&(a=de),a?o.jsx(a,{className:Zr("w-4 h-auto text-muted-foreground",t)}):null},Rf=e=>{const{value:t,onChange:n}=e,a=sa(),r=[{value:su.PRIVATE,label:a("memo.visibility.private")},{value:su.PROTECTED,label:a("memo.visibility.protected")},{value:su.PUBLIC,label:a("memo.visibility.public")}],s=r.find(e=>e.value===t)?.label||"";return o.jsxs(ig,{onOpenChange:e.onOpenChange,children:[o.jsx(lg,{asChild:!0,children:o.jsxs("button",{className:"inline-flex items-center px-2 text-sm text-muted-foreground opacity-80 hover:opacity-100 transition-colors",children:[o.jsx(Gf,{visibility:t,className:"opacity-60 mr-1.5"}),o.jsx("span",{children:s}),o.jsx(ve,{className:"ml-0.5 w-4 h-4 opacity-60"})]})}),o.jsx(cg,{align:"end",children:r.map(e=>o.jsxs(dg,{className:"cursor-pointer gap-2",onClick:()=>n(e.value),children:[o.jsx(Gf,{visibility:e.value}),o.jsx("span",{className:"flex-1",children:e.label}),t===e.value&&o.jsx(te,{className:"w-4 h-4 text-primary"})]},e.value))})]})},Cf=({onSave:e,onCancel:t,memoName:n})=>{const a=sa(),{state:r,actions:s,dispatch:i}=of(),{valid:l}=ef.canSave(r),c=r.ui.isLoading.saving;return o.jsxs("div",{className:"w-full flex flex-row justify-between items-center mb-2",children:[o.jsx("div",{className:"flex flex-row justify-start items-center",children:o.jsx(Wf,{isUploading:r.ui.isLoading.uploading,location:r.metadata.location,onLocationChange:e=>{i(s.setMetadata({location:e}))},onToggleFocusMode:()=>{i(s.toggleFocusMode())},memoName:n})}),o.jsxs("div",{className:"flex flex-row justify-end items-center gap-2",children:[o.jsx(mb,{content:r.content,onInsertTags:e=>{if(e.length>0){const t=e.map(e=>`#${e}`).join(" "),n=r.content+(r.content.endsWith("\n")?"":"\n")+t;i(s.updateContent(n))}},disabled:c}),o.jsx(Rf,{value:r.metadata.visibility,onChange:e=>{i(s.setMetadata({visibility:e}))}}),t&&o.jsx(Gr,{variant:"ghost",onClick:t,disabled:c,children:a("common.cancel")}),o.jsx(Gr,{onClick:e,disabled:!l||c,children:a(c?"common.saving":"editor.save")})]})]})};function jf({isActive:e,onToggle:t}){return e?o.jsx("button",{type:"button",className:Cb,onClick:t,"aria-label":"Exit focus mode"}):null}function Ff({isActive:e,onToggle:t,title:n}){return e?o.jsx(Gr,{variant:"ghost",size:"icon",className:Yb,onClick:t,title:n,children:o.jsx(xt,{className:"w-4 h-4"})}):null}function Yf(e,t){if(!t)return e;const n=e.toLowerCase().indexOf(t.toLowerCase());if(-1===n)return e;let a=e.slice(0,n);a.length>20&&(a="..."+a.slice(a.length-20));const r=e.slice(n,n+t.length);let s=e.slice(n+t.length);return s.length>20&&(s=s.slice(0,20)+"..."),o.jsxs(o.Fragment,{children:[a,o.jsx("mark",{className:"font-medium",children:r}),s]})}const Xf=({open:e,onOpenChange:t,searchText:n,onSearchChange:a,filteredMemos:r,isFetching:s,onSelectMemo:i})=>{const l=sa();return o.jsx(bh,{open:e,onOpenChange:t,children:o.jsxs(Nh,{children:[o.jsx(wh,{children:o.jsx(Sh,{children:l("tooltip.link-memo")})}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(Gp,{placeholder:l("reference.search-placeholder"),value:n,onChange:e=>a(e.target.value),className:"!text-sm"}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto border rounded-md",children:0===r.length?o.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:s?"Loading...":l("reference.no-memos-found")}):r.map(e=>o.jsx("div",{className:"relative flex cursor-pointer items-start gap-2 border-b last:border-b-0 px-3 py-2 hover:bg-accent hover:text-accent-foreground",onClick:()=>i(e),children:o.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[o.jsx("p",{className:"text-xs text-muted-foreground select-none",children:e.displayTime&&gl(e.displayTime).toLocaleString()}),o.jsx("p",{className:"mt-0.5 text-sm leading-5 line-clamp-2",children:n?Yf(e.content,n):e.snippet})]})},e.name))})]})]})})},Bf=r.forwardRef(({children:e,...t},n)=>o.jsx("span",{ref:n,className:"absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0",style:{clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)"},...t,children:e}));Bf.displayName="VisuallyHidden";const Tf=e=>{const{className:t,cacheKey:n,memoName:a,parentMemoName:r,autoFocus:s,placeholder:i,onConfirm:l,onCancel:c}=e;return o.jsx(sf,{children:o.jsx(Mf,{className:t,cacheKey:n,memoName:a,parentMemoName:r,autoFocus:s,placeholder:i,onConfirm:l,onCancel:c})})},Mf=({className:e,cacheKey:t,memoName:n,parentMemoName:a,autoFocus:s,placeholder:i,onConfirm:l,onCancel:c})=>{const d=sa(),u=m(),h=ag(),g=r.useRef(null),{state:p,actions:b,dispatch:f}=of(),{userGeneralSetting:x}=sm(),v=x?.memoVisibility?lb(x.memoVisibility):void 0;((e,t,n,a,o,s)=>{const{actions:i,dispatch:l}=of(),c=m(),d=r.useRef(!1);r.useEffect(()=>{d.current||(d.current=!0,(async()=>{l(i.setLoading("loading",!0));try{if(t){await c.invalidateQueries({queryKey:dp.detail(t)});const e=await qb.load(t);l(i.initMemo({content:e.content,metadata:e.metadata,timestamps:e.timestamps}))}else{const e=_b.load(_b.key(a,n));e&&l(i.updateContent(e)),void 0!==s&&l(i.setMetadata({visibility:s}))}}catch(r){}finally{l(i.setLoading("loading",!1)),o&&setTimeout(()=>{e.current?.focus()},100)}})())},[t,n,a,o,s,i,l,e,c])})(g,n,t,h?.name??"",s,v),((e,t,n)=>{r.useEffect(()=>{const a=_b.key(t,n);_b.save(a,e)},[e,t,n])})(p.content,h?.name??"",t);const y=(()=>{const[e,t]=r.useState(0);return r.useEffect(()=>{if("undefined"==typeof window||!window.visualViewport)return;const e=()=>{const e=window.visualViewport;if(!e)return;const n=window.innerHeight,a=e.height<.85*n?n-e.height:0;t(a)};return window.visualViewport.addEventListener("resize",e),e(),()=>window.visualViewport?.removeEventListener("resize",e)},[]),e})();var E;E=p.ui.isFocusMode,r.useEffect(()=>(document.body.style.overflow=E?"hidden":"",()=>{document.body.style.overflow=""}),[E]);const N=()=>{f(b.toggleFocusMode())};var w;async function A(){const{valid:e,reason:r}=ef.canSave(p);if(e){f(b.setLoading("saving",!0));try{const e=await qb.save(p,{memoName:n,parentMemoName:a});if(!e.hasChanges)return Te.error(d("editor.no-changes-detected")),void c?.();_b.clear(_b.key(h?.name??"",t));const r=[u.invalidateQueries({queryKey:dp.lists()}),u.invalidateQueries({queryKey:Hu.stats()})];a&&r.push(u.invalidateQueries({queryKey:dp.comments(a)})),await Promise.all(r),f(b.reset()),l?.(e.memoName)}catch(o){Fp(o,Te.error,{context:"Failed to save memo",fallbackMessage:Hb.getErrorMessage(o)})}finally{f(b.setLoading("saving",!1))}}else Te.error(r||"Cannot save")}return w={onSave:A},r.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),w.onSave())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]),o.jsxs(o.Fragment,{children:[o.jsx(jf,{isActive:p.ui.isFocusMode,onToggle:N}),o.jsxs("div",{className:Zr(ob,Fb,p.ui.isFocusMode&&Zr(jb.base,jb.spacing),e),style:{paddingBottom:y>0?`${y+16}px`:void 0},children:[o.jsx(Ff,{isActive:p.ui.isFocusMode,onToggle:N,title:d("editor.exit-focus-mode")}),o.jsx(lf,{ref:g,placeholder:i,autoFocus:s}),o.jsxs("div",{className:"w-full flex flex-col gap-2",children:[o.jsx(hf,{memoName:n}),o.jsx(Cf,{onSave:A,onCancel:c,memoName:n})]})]})]})};function Lf({open:e,onOpenChange:t,imgUrls:n,initialIndex:a=0}){const[s,i]=r.useState(a);r.useEffect(()=>{i(a)},[a]),r.useEffect(()=>{const n=n=>{if(e&&"Escape"===n.key)t(!1)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]);const l=()=>{t(!1)};if(!n.length)return null;const d=Math.max(0,Math.min(s,n.length-1));return o.jsx(bh,{open:e,onOpenChange:t,children:o.jsxs(Nh,{className:"!w-[100vw] !h-[100vh] !max-w-[100vw] !max-h-[100vw] p-0 border-0 shadow-none bg-transparent [&>button]:hidden","aria-describedby":"image-preview-description",children:[o.jsx("div",{className:"fixed top-4 right-4 z-50",children:o.jsx(Gr,{onClick:l,variant:"secondary",size:"icon",className:"rounded-full bg-popover/20 hover:bg-popover/30 border-border/20 backdrop-blur-sm","aria-label":"Close image preview",children:o.jsx(c,{className:"h-4 w-4 text-popover-foreground"})})}),o.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 sm:p-8 overflow-auto cursor-pointer",onClick:e=>{e.target===e.currentTarget&&l()},children:o.jsx("img",{src:n[d],alt:`Preview image ${d+1} of ${n.length}`,className:"max-w-full max-h-full object-contain select-none",draggable:!1,loading:"eager",decoding:"async"})}),o.jsx("div",{id:"image-preview-description",className:"sr-only",children:"Image preview dialog. Press Escape to close or click outside the image."})]})})}const Uf=e=>{const t=e;return String(t?.props?.children||"").replace(/\n$/,"")},zf=r.lazy(()=>Jt(()=>import("./MermaidBlock-VvWBk8cn.js"),__vite__mapDeps([14,8,9,3,4,1,2,5,6,7,10,11,12])).then(e=>({default:e.MermaidBlock}))),Df=e=>{const{children:t,className:n,hideCopy:a,...s}=e,{userGeneralSetting:i}=sm(),[l,c]=r.useState(!1),[d,u]=r.useState(""),m=t,h=m?.props?.className||"",g=Uf(t),p=(e=>{const t=/language-(\w+)/.exec(e);return t?t[1]:""})(h);if("mermaid"===p)return o.jsx("pre",{className:"relative",children:o.jsx(r.Suspense,{fallback:o.jsx("div",{className:"text-sm text-muted-foreground p-2",children:"Loading Diagram..."}),children:o.jsx(zf,{className:Zr(n),...s,children:t})})});const b=jm(i?.theme),f=Gm(b),x=f.includes("dark");r.useEffect(()=>{(async()=>{const e=document.querySelector("style[data-hljs-theme]");e&&e.remove();try{const e=x?await Jt(()=>import("./markdown-vendor-DtAGkuPo.js").then(e=>e.z),__vite__mapDeps([5,6,7,3,4])):await Jt(()=>import("./markdown-vendor-DtAGkuPo.js").then(e=>e.A),__vite__mapDeps([5,6,7,3,4])),t=document.createElement("style");t.textContent=e.default,t.setAttribute("data-hljs-theme",x?"dark":"light"),document.head.appendChild(t)}catch(t){}})()},[f,x]),r.useEffect(()=>{let e=!0;return(async()=>{const t=Object.assign(document.createElement("span"),{textContent:g}).innerHTML;try{const t=(await Jt(async()=>{const{default:e}=await import("./markdown-vendor-DtAGkuPo.js").then(e=>e.B);return{default:e}},__vite__mapDeps([5,6,7,3,4]))).default;if(t.getLanguage(p)&&e){const n=t.highlight(g,{language:p}).value;if(e)return void u(n)}}catch(n){}e&&u(t)})(),()=>{e=!1}},[p,g]);return o.jsxs("pre",{className:"relative overflow-x-auto",children:[o.jsxs("div",{className:"absolute right-2 leading-3 top-1.5 flex flex-row justify-end items-center gap-1 opacity-60 hover:opacity-80",children:[o.jsx("span",{className:"text-[10px] font-medium text-muted-foreground/60 uppercase tracking-wider select-none",children:p}),!a&&o.jsx("button",{onClick:async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(g),c(!0),setTimeout(()=>c(!1),2e3);else{yt(g)&&(c(!0),setTimeout(()=>c(!1),2e3))}}catch(e){yt(g)&&(c(!0),setTimeout(()=>c(!1),2e3))}},className:Zr("rounded-md transition-all","hover:bg-accent/50",l?"text-primary":"text-muted-foreground"),"aria-label":l?"Copied":"Copy code",title:l?"Copied!":"Copy code",children:l?o.jsx(te,{className:"w-3 h-3"}):o.jsx(vt,{className:"w-3 h-3"})})]}),o.jsx("div",{className:n,...s,children:o.jsx("code",{className:`language-${p}`,dangerouslySetInnerHTML:{__html:d}})})]})};const Qf={ALL:{textKey:"memo.show-more",next:"SNIPPET"},SNIPPET:{textKey:"memo.show-less",next:"ALL"}},Jf={...tn,attributes:{...tn.attributes,div:[...tn.attributes?.div||[],"className"],span:[...tn.attributes?.span||[],"className","style",["aria*"],["data*"]],iframe:["src","width","height","frameborder","allowfullscreen","allow","title","referrerpolicy","loading"],annotation:["encoding"],math:["xmlns"],mi:[],mn:[],mo:[],mrow:[],mspace:[],mstyle:[],msup:[],msub:[],msubsup:[],mfrac:[],mtext:[],semantics:[]},tagNames:[...tn.tagNames||[],"iframe","math","annotation","semantics","mi","mn","mo","mrow","mspace","mstyle","msup","msub","msubsup","mfrac","mtext"],protocols:{...tn.protocols,iframe:{src:["https"]}}},Kf=rb,Of=r.createContext(null),_f=()=>{const e=r.useContext(Of);if(!e)throw new Error("useMemoViewContext must be used within MemoViewContext.Provider");return e},Hf=()=>{const{memo:e,isArchived:t,readonly:n}=_f(),a=ge().pathname.startsWith(`/${e.name}`),r=e.relations.filter(t=>t.type===ou.COMMENT&&t.relatedMemo?.name===e.name).length,o=e.displayTime?gl(e.displayTime):void 0;return{isArchived:t,readonly:n,isInMemoDetailPage:a,commentAmount:r,relativeTimeFormat:o&&Date.now()-o.getTime()>864e5?"datetime":"auto"}},Pf=({"data-tag":e,children:t,className:n,...a})=>{const{parentPage:r}=_f(),s=ge(),i=wm(),{getFiltersByFactor:l,removeFilter:c,addFilter:d}=Nm(),u=e||"";return o.jsx("span",{className:Zr("inline-block w-auto text-primary cursor-pointer hover:opacity-80 transition-colors",n),"data-tag":u,...a,onClick:e=>{if(e.stopPropagation(),s.pathname.startsWith("/m")){const e=r||ev.ROOT,t=new URLSearchParams;return t.set("filter",vm([{factor:"tagSearch",value:u}])),void i(`${e}?${t.toString()}`)}l("tagSearch").some(e=>e.value===u)?c(e=>"tagSearch"===e.factor&&e.value===u):(c(e=>"tagSearch"===e.factor),d({factor:"tagSearch",value:u}))},children:t})},$f=r.forwardRef(({className:e,...t},n)=>o.jsx(Et,{ref:n,"data-slot":"checkbox",className:Zr("peer border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Nt,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(te,{className:"size-3.5"})})}));function qf(e){const t=nn(e,{extensions:[rn()],mdastExtensions:[an()]}),n=[];return on(t,"listItem",e=>{"boolean"==typeof e.checked&&e.position?.start.line&&n.push({lineNumber:e.position.start.line-1,checked:e.checked})}),n}$f.displayName="Checkbox";const ex=({checked:e,...t})=>{const{memo:n}=_f(),{readonly:a}=Hf(),s=r.useRef(null),{mutate:i}=hp();return o.jsx($f,{ref:s,checked:e,disabled:a,onCheckedChange:async e=>{if(a||!n)return;const t=s.current?.closest("li.task-list-item");if(!t)return;const r=t.getAttribute("data-task-index");let o=0;if(null!==r)o=parseInt(r);else{const e=t.closest(".markdown-content");if(!e)return;const n=e.querySelectorAll("li.task-list-item");for(let a=0;a<n.length;a++)if(n[a]===t){o=a;break}}const l=function(e,t,n){const a=qf(e);return t<0||t>=a.length?e:function(e,t,n){const a=e.split("\n");if(t<0||t>=a.length)return e;const r=a[t].match(/^(\s*[-*+]\s+)\[([ xX])\](\s+.*)$/);if(!r)return e;const[,o,,s]=r,i=n?"x":" ";return a[t]=`${o}[${i}]${s}`,a.join("\n")}(e,a[t].lineNumber,n)}(n.content,o,e);i({update:{name:n.name,content:l},updateMask:["content"]})},className:t.className})},tx=r.memo(e=>{const{className:t,contentClassName:n,content:a,onClick:s,onDoubleClick:i}=e,l=sa(),{containerRef:c,mode:d,toggle:u}=(e=>{const t=r.useRef(null),[n,a]=r.useState(void 0);r.useEffect(()=>{e&&t.current&&t.current.getBoundingClientRect().height>256&&a("ALL")},[e]);const o=r.useCallback(()=>{n&&a(Qf[n].next)},[n]);return{containerRef:t,mode:n,toggle:o}})(Boolean(e.compact)),m=((e,t)=>e?t(Qf[e].textKey):"")(d,l);return o.jsxs("div",{className:`w-full flex flex-col justify-start items-start text-foreground ${t||""}`,children:[o.jsx("div",{ref:c,className:Zr("markdown-content relative w-full max-w-full wrap-break-word text-base leading-6","ALL"===d&&"line-clamp-6 max-h-60",n),onMouseUp:s,onDoubleClick:i,children:o.jsx(wt,{remarkPlugins:[dn,un,mn,hn,gn,pn],rehypePlugins:[sn,ln,[cn,Jf]],components:{input:e=>e.node&&function(e){const t=e.properties?.type;return"string"==typeof t&&"checkbox"===t}(e.node)?o.jsx(ex,{...e}):o.jsx("input",{...e}),span:e=>{const{node:t,...n}=e;return t&&function(e){if(function(e){return"object"==typeof e&&null!==e&&"data"in e&&"object"==typeof e.data}(e)&&"tagNode"===e.data.mdastType)return!0;const t=e.properties?.className;return!(!Array.isArray(t)||!t.includes("tag"))}(t)?o.jsx(Pf,{...e}):o.jsx("span",{...n})},pre:Df,a:({href:e,children:t,...n})=>o.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",...n,children:t})},children:a})}),"ALL"===d&&o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-linear-to-b from-transparent to-background pointer-events-none"}),void 0!==d&&o.jsx("div",{className:"w-full mt-1",children:o.jsx("button",{type:"button",className:"w-auto flex flex-row justify-start items-center cursor-pointer text-sm text-primary hover:opacity-80 text-left",onClick:u,children:m})})]})}),nx=e=>{const t=r.useMemo(()=>e.map(e=>e.creator),[e]),{data:n}=function(e){const t=e.length>0,n=Array.from(new Set(e));return u({queryKey:Hu.byNames(n),queryFn:async()=>{const e=await Promise.all(n.map(async e=>{try{return{name:e,user:await Fu.getUser({name:e})}}catch{return{name:e,user:void 0}}})),t=new Map;for(const{name:n,user:a}of e)t.set(n,a);return t},enabled:t,staleTime:3e5})}(t);return r.useMemo(()=>{const t=new Map;for(const a of e){const e=n?.get(a.creator);if(!e)continue;const r=t.get(a.reactionType)||[];r.push(e),t.set(a.reactionType,r)}return t},[e,n])},ax=({memo:e,onComplete:t})=>{const n=ag(),a=m(),r=t=>e.reactions.some(e=>e.reactionType===t&&e.creator===n?.name);return{hasReacted:r,handleReactionClick:async o=>{if(n){try{if(r(o)){const t=e.reactions.filter(e=>e.reactionType===o&&e.creator===n.name);for(const e of t)await Yu.deleteMemoReaction({name:e.name})}else await Yu.upsertMemoReaction({name:e.name,reaction:{contentId:e.name,reactionType:o}});const t=await Yu.getMemo({name:e.name});a.setQueryData(dp.detail(e.name),t),a.invalidateQueries({queryKey:dp.lists()})}catch{}t?.()}}}},rx=(e,t)=>{if(0===e.length)return"";const n=e=>e.displayName||e.username;return e.length<5?`${e.map(n).join(", ")} reacted with ${t.toLowerCase()}`:`${e.slice(0,4).map(n).join(", ")} and ${e.length-4} more reacted with ${t.toLowerCase()}`},ox=e=>{const{memo:t,className:n,onOpenChange:a}=e,[s,i]=r.useState(!1),{memoRelatedSetting:l}=um(),c=e=>{i(e),a?.(e)},{hasReacted:d,handleReactionClick:u}=ax({memo:t,onComplete:()=>c(!1)});return o.jsxs(Xg,{open:s,onOpenChange:c,children:[o.jsx(Bg,{asChild:!0,children:o.jsx("span",{className:Zr("h-7 w-7 flex justify-center items-center rounded-full border cursor-pointer transition-all hover:opacity-80",n),children:o.jsx(At,{className:"w-4 h-4 mx-auto text-muted-foreground"})})}),o.jsx(Tg,{align:"center",className:"max-w-[90vw] sm:max-w-md",children:o.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-1 max-h-64 overflow-y-auto",children:l.reactions.map(e=>o.jsx("button",{type:"button",className:Zr("inline-flex w-auto text-base cursor-pointer rounded px-1 text-muted-foreground hover:opacity-80 transition-colors",d(e)&&"bg-secondary text-secondary-foreground"),onClick:()=>u(e),children:e},e))})})]})},sx=e=>{const{memo:t,reactionType:n,users:a}=e,r=ag(),s=a.some(e=>r&&e.username===r.username),i=t.state===wd.ARCHIVED,{handleReactionClick:l}=ax({memo:t}),c=r&&!i;return o.jsx(qh,{children:o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:o.jsxs("button",{type:"button",className:Zr("h-7 border px-2 py-0.5 rounded-full flex flex-row justify-center items-center gap-1","text-sm text-muted-foreground",c&&"cursor-pointer",!c&&"cursor-default",s&&"bg-accent border-border"),onClick:()=>{r&&!i&&l(n)},disabled:!c,children:[o.jsx("span",{children:n}),o.jsx("span",{className:"opacity-60",children:a.length})]})}),o.jsx(ng,{children:o.jsx("p",{children:rx(a,n)})})]})})},ix=r.memo(e=>{const{memo:t,reactions:n}=e,a=ag(),r=nx(n),s=t.state===wd.ARCHIVED;return 0===n.length?null:o.jsxs("div",{className:"w-full flex flex-row justify-start items-start flex-wrap gap-1 select-none",children:[Array.from(r).map(([e,n])=>o.jsx(sx,{memo:t,reactionType:e,users:n},`${e.toString()} ${n.length}`)),!s&&a&&o.jsx(ox,{memo:t})]})}),lx=({attachment:e,onClick:t,className:n})=>{const a=fb(e),r=pb(e);return"image/*"===a?o.jsx("img",{src:r,alt:e.filename,className:Zr("w-full h-full object-cover rounded-lg cursor-pointer",n),onClick:t,loading:"lazy"}):"video/*"===a?o.jsx("video",{src:r,className:Zr("w-full h-full object-cover rounded-lg",n),controls:!0,preload:"metadata"}):null},cx=({icon:e,title:t,count:n,tabs:a})=>o.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 border-b border-border bg-muted/30",children:[o.jsx(e,{className:"w-3.5 h-3.5 text-muted-foreground"}),a&&a.length>1?o.jsx("div",{className:"flex items-center gap-0.5",children:a.map((e,t)=>o.jsxs("div",{className:"flex items-center gap-0.5",children:[o.jsxs("button",{onClick:e.onClick,className:Zr("text-xs px-0 py-0 transition-colors",e.active?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[e.label," (",e.count,")"]}),t<a.length-1&&o.jsx("span",{className:"text-muted-foreground/40 font-mono text-xs",children:"/"})]},e.id))}):o.jsxs("span",{className:"text-xs text-foreground",children:[t," (",n,")"]})]}),dx=({attachment:e})=>{const t=gb(e.type),n=e.size?hb(Number(e.size)):void 0;return o.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-1 rounded hover:bg-accent/20 transition-colors whitespace-nowrap",children:[o.jsx("div",{className:"shrink-0 w-5 h-5 rounded overflow-hidden bg-muted/40 flex items-center justify-center",children:o.jsx(et,{className:"w-3 h-3 text-muted-foreground"})}),o.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[o.jsx("span",{className:"text-xs truncate",title:e.filename,children:e.filename}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground shrink-0",children:[o.jsx("span",{className:"text-muted-foreground/50",children:"•"}),o.jsx("span",{children:t}),n&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-muted-foreground/50",children:"•"}),o.jsx("span",{children:n})]})]})]})]})},ux=({attachments:e,onImageClick:t})=>o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:e.map(e=>o.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-muted/40 border border-border hover:border-accent/50 transition-all cursor-pointer group",onClick:()=>t(pb(e)),children:o.jsxs("div",{className:"w-full h-full relative",children:[o.jsx(lx,{attachment:e,className:"rounded-none"}),"video/*"===fb(e)&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-white/80 flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-black fill-current ml-0.5",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5v14l11-7z"})})})})]})},e.name))}),mx=({attachments:e})=>o.jsx("div",{className:"flex flex-col gap-0.5",children:e.map(e=>o.jsx("a",{href:pb(e),download:!0,title:`Download ${e.filename}`,children:o.jsx(dx,{attachment:e})},e.name))}),hx=({attachments:e})=>{const[t,n]=r.useState({open:!1,urls:[],index:0,mimeType:void 0}),{media:a,docs:s}=(e=>{const t=[],n=[];for(const a of e){const e=fb(a);"image/*"===e||"video/*"===e?t.push(a):n.push(a)}return{media:t,docs:n}})(e);if(0===e.length)return null;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"w-full rounded-lg border border-border bg-muted/20 overflow-hidden",children:[o.jsx(cx,{icon:ue,title:"Attachments",count:e.length}),o.jsxs("div",{className:"p-2 flex flex-col gap-1",children:[a.length>0&&o.jsx(ux,{attachments:a,onImageClick:e=>{const t=a.filter(e=>"image/*"===fb(e)),r=t.map(e=>pb(e)),o=r.findIndex(t=>t===e),s=t[o]?.type;n({open:!0,urls:r,index:o,mimeType:s})}}),a.length>0&&s.length>0&&o.jsx("div",{className:"border-t mt-1 border-border opacity-60"}),s.length>0&&o.jsx(mx,{attachments:s})]})]}),o.jsx(Lf,{open:t.open,onOpenChange:e=>n(t=>({...t,open:e})),imgUrls:t.urls,initialIndex:t.index})]})},gx=({location:e,className:t})=>{const[n,a]=r.useState(!1);if(!e)return null;const s=e.placeholder||`Position: [${e.latitude}, ${e.longitude}]`;return o.jsxs(Xg,{open:n,onOpenChange:a,children:[o.jsx(Bg,{asChild:!0,children:o.jsxs("div",{className:Zr("w-auto max-w-full flex flex-row gap-2 cursor-pointer","relative inline-flex items-center gap-1.5 px-2 h-7 rounded-md border border-border bg-background hover:bg-accent text-secondary-foreground text-xs transition-colors",t),onClick:()=>a(!0),children:[o.jsx("span",{className:"shrink-0 text-muted-foreground",children:o.jsx(nt,{className:"w-3.5 h-3.5"})}),o.jsxs("span",{className:"text-nowrap opacity-80",children:["[",e.latitude.toFixed(2),"°, ",e.longitude.toFixed(2),"°]"]}),o.jsx("span",{className:"text-nowrap truncate",children:s})]})}),o.jsx(Tg,{align:"start",children:o.jsx("div",{className:"min-w-80 sm:w-lg flex flex-col justify-start items-start",children:o.jsx(Sf,{latlng:new qt.LatLng(e.latitude,e.longitude),readonly:!0})})})]})};function px({relations:e,currentMemoName:t,parentPage:n,className:a}){const s=sa(),[i,l]=r.useState("referencing"),{referencingRelations:c,referencedRelations:d}=r.useMemo(()=>({referencingRelations:e.filter(e=>e.type===ou.REFERENCE&&e.memo?.name===t&&e.relatedMemo?.name!==t),referencedRelations:e.filter(e=>e.type===ou.REFERENCE&&e.memo?.name!==t&&e.relatedMemo?.name===t)}),[e,t]);if(0===c.length&&0===d.length)return null;const u=c.length>0&&d.length>0,m=c.length>0?"referencing":"referenced",h="referencing"===(u?i:m),g=h?at:St,p=h?c:d;return o.jsxs("div",{className:Zr("w-full rounded-lg border border-border bg-muted/20 overflow-hidden",a),children:[o.jsx(cx,{icon:g,title:s(h?"common.referencing":"common.referenced-by"),count:p.length,tabs:u?[{id:"referencing",label:s("common.referencing"),count:c.length,active:h,onClick:()=>l("referencing")},{id:"referenced",label:s("common.referenced-by"),count:d.length,active:!h,onClick:()=>l("referenced")}]:void 0}),o.jsx("div",{className:"p-1.5 flex flex-col gap-0",children:p.map(e=>o.jsx(df,{memo:h?e.relatedMemo:e.memo,parentPage:n},h?e.relatedMemo.name:e.memo.name))})]})}const bx=({compact:e,onContentClick:t,onContentDoubleClick:n,onToggleNsfwVisibility:a})=>{const r=sa(),{memo:s,parentPage:i,showNSFWContent:l,nsfw:c}=_f(),d=s.relations.filter(e=>e.type===ou.REFERENCE);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:Zr("w-full flex flex-col justify-start items-start gap-2",c&&!l&&"blur-lg transition-all duration-200"),children:[o.jsx(tx,{content:s.content,onClick:t,onDoubleClick:n,compact:!s.pinned&&e},`${s.name}-${s.updateTime}`),o.jsx(hx,{attachments:s.attachments}),o.jsx(px,{relations:d,currentMemoName:s.name,parentPage:i}),s.location&&o.jsx(gx,{location:s.location}),o.jsx(ix,{memo:s,reactions:s.reactions})]}),c&&!l&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 bg-transparent"}),o.jsx("button",{type:"button",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 py-2 px-4 text-sm text-muted-foreground hover:text-foreground hover:bg-accent hover:border-accent border border-border rounded-lg bg-card transition-colors",onClick:a,children:r("memo.click-to-show-nsfw-content")})]})]})},fx=({memo:e,onEdit:t,setDeleteDialogOpen:n,setRemoveTasksDialogOpen:a})=>{const o=sa(),s=ge(),i=wm(),l=m(),{profile:c}=um(),{mutateAsync:d}=hp(),{mutateAsync:u}=function(){const e=m();return h({mutationFn:async e=>(await Yu.deleteMemo({name:e}),e),onSuccess:t=>{e.removeQueries({queryKey:dp.detail(t)}),e.invalidateQueries({queryKey:dp.lists()}),e.invalidateQueries({queryKey:Hu.stats()})}})}(),g=s.pathname.startsWith(`/${e.name}`),p=r.useCallback(()=>{l.invalidateQueries({queryKey:Hu.stats()})},[l]);return{handleTogglePinMemoBtnClick:r.useCallback(async()=>{try{await d({update:{name:e.name,pinned:!e.pinned},updateMask:["pinned"]})}catch{}},[e.name,e.pinned,d]),handleEditMemoClick:r.useCallback(()=>{t?.()},[t]),handleToggleMemoStatusClick:r.useCallback(async()=>{const t=e.state!==wd.ARCHIVED,n=e.state===wd.ARCHIVED?wd.NORMAL:wd.ARCHIVED,a=e.state===wd.ARCHIVED?o("message.restored-successfully"):o("message.archived-successfully");try{await d({update:{name:e.name,state:n},updateMask:["state"]}),De.success(a)}catch(r){return void Fp(r,De.error,{context:(t?"Archive":"Restore")+" memo",fallbackMessage:"An error occurred"})}g&&i(e.state===wd.ARCHIVED?"/":"/archived"),p()},[e.name,e.state,o,g,i,p,d]),handleCopyLink:r.useCallback(()=>{let t=c.instanceUrl;""===t&&(t=window.location.origin),yt(`${t}/${e.name}`),De.success(o("message.succeed-copy-link"))},[e.name,o,c.instanceUrl]),handleCopyContent:r.useCallback(()=>{yt(e.content),De.success(o("message.succeed-copy-content"))},[e.content,o]),handleDeleteMemoClick:r.useCallback(()=>{n(!0)},[n]),confirmDeleteMemo:r.useCallback(async()=>{await u(e.name),De.success(o("message.deleted-successfully")),g&&i("/"),p()},[e.name,o,g,i,p,u]),handleRemoveCompletedTaskListItemsClick:r.useCallback(()=>{a(!0)},[a]),confirmRemoveCompletedTaskListItems:r.useCallback(async()=>{const t=function(e){const t=qf(e),n=new Set(t.filter(e=>e.checked).map(e=>e.lineNumber));if(0===n.size)return e;const a=e.split("\n"),r=[];for(let o=0;o<a.length;o++)n.has(o)?o+1<a.length&&""===a[o+1].trim()&&o++:r.push(a[o]);return r.join("\n")}(e.content);await d({update:{name:e.name,content:t},updateMask:["content"]}),De.success(o("message.remove-completed-task-list-items-successfully")),p()},[e.name,e.content,o,p,d])}},xx=e=>{const{memo:t,readonly:n}=e,a=sa(),[s,i]=r.useState(!1),[l,c]=r.useState(!1),d=qf(t.content).some(e=>e.checked);const u=Boolean(t.parent),m=t.state===wd.ARCHIVED,{handleTogglePinMemoBtnClick:h,handleEditMemoClick:g,handleToggleMemoStatusClick:p,handleCopyLink:b,handleCopyContent:f,handleDeleteMemoClick:x,confirmDeleteMemo:v,handleRemoveCompletedTaskListItemsClick:y,confirmRemoveCompletedTaskListItems:E}=fx({memo:t,onEdit:e.onEdit,setDeleteDialogOpen:i,setRemoveTasksDialogOpen:c});return o.jsxs(ig,{children:[o.jsx(lg,{asChild:!0,children:o.jsx(Gr,{variant:"ghost",size:"icon",className:"size-4",children:o.jsx(Le,{className:"text-muted-foreground"})})}),o.jsxs(cg,{align:"end",sideOffset:2,children:[!n&&!m&&o.jsxs(o.Fragment,{children:[!u&&o.jsxs(dg,{onClick:h,children:[t.pinned?o.jsx(Vt,{className:"w-4 h-auto"}):o.jsx(It,{className:"w-4 h-auto"}),t.pinned?a("common.unpin"):a("common.pin")]}),o.jsxs(dg,{onClick:g,children:[o.jsx(Ue,{className:"w-4 h-auto"}),a("common.edit")]})]}),!m&&o.jsxs(ug,{children:[o.jsxs(mg,{children:[o.jsx(vt,{className:"w-4 h-auto"}),a("common.copy")]}),o.jsxs(hg,{children:[o.jsxs(dg,{onClick:b,children:[o.jsx(at,{className:"w-4 h-auto"}),a("memo.copy-link")]}),o.jsxs(dg,{onClick:f,children:[o.jsx(Z,{className:"w-4 h-auto"}),a("memo.copy-content")]})]})]}),!n&&o.jsxs(o.Fragment,{children:[!m&&!u&&d&&o.jsxs(dg,{onClick:y,children:[o.jsx(kt,{className:"w-4 h-auto"}),a("memo.remove-completed-task-list-items")]}),!u&&o.jsxs(dg,{onClick:p,children:[m?o.jsx(Zt,{className:"w-4 h-auto"}):o.jsx($,{className:"w-4 h-auto"}),a(m?"common.restore":"common.archive")]}),o.jsxs(dg,{onClick:x,children:[o.jsx(ze,{className:"w-4 h-auto"}),a("common.delete")]})]})]}),o.jsx(Ih,{open:s,onOpenChange:i,title:a("memo.delete-confirm"),confirmLabel:a("common.delete"),description:a("memo.delete-confirm-description"),cancelLabel:a("common.cancel"),onConfirm:v,confirmVariant:"destructive"}),o.jsx(Ih,{open:l,onOpenChange:c,title:a("memo.remove-completed-task-list-items-confirm"),confirmLabel:a("common.confirm"),cancelLabel:a("common.cancel"),onConfirm:E,confirmVariant:"destructive"})]})},vx=({showCreator:e,showVisibility:t,showPinned:n,onEdit:a,onGotoDetail:s,onUnpin:i,onToggleNsfwVisibility:l})=>{const c=sa(),[d,u]=r.useState(!1),{memo:m,creator:h,currentUser:g,parentPage:p,isArchived:b,readonly:f,showNSFWContent:x,nsfw:v}=_f(),{isInMemoDetailPage:y,commentAmount:E,relativeTimeFormat:N}=Hf(),w=b?(m.displayTime?gl(m.displayTime):void 0)?.toLocaleString(Kt.language):o.jsx("relative-time",{datetime:(m.displayTime?gl(m.displayTime):void 0)?.toISOString(),lang:Kt.language,format:N});return o.jsxs("div",{className:"w-full flex flex-row justify-between items-center gap-2",children:[o.jsx("div",{className:"w-auto max-w-[calc(100%-8rem)] grow flex flex-row justify-start items-center",children:e&&h?o.jsx(yx,{creator:h,displayTime:w,onGotoDetail:s}):o.jsx(Ex,{displayTime:w,onGotoDetail:s})}),o.jsxs("div",{className:"flex flex-row justify-end items-center select-none shrink-0 gap-2",children:[g&&!b&&o.jsx(ox,{className:Zr("border-none w-auto h-auto",d&&"block!","block sm:hidden sm:group-hover:block"),memo:m,onOpenChange:u}),!y&&E>0&&o.jsxs(k,{className:Zr("flex flex-row justify-start items-center rounded-md px-1 hover:opacity-80 gap-0.5"),to:`/${m.name}#comments`,viewTransition:!0,state:{from:p},children:[o.jsx(Wt,{className:"w-4 h-4 mx-auto text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:E})]}),t&&m.visibility!==su.PRIVATE&&o.jsxs(eg,{children:[o.jsx(tg,{children:o.jsx("span",{className:"flex justify-center items-center rounded-md hover:opacity-80",children:o.jsx(Gf,{visibility:m.visibility})})}),o.jsx(ng,{children:c(`memo.visibility.${cb(m.visibility).toLowerCase()}`)})]}),n&&m.pinned&&o.jsx(qh,{children:o.jsxs(eg,{children:[o.jsx(tg,{asChild:!0,children:o.jsx("span",{className:"cursor-pointer",children:o.jsx(Gt,{className:"w-4 h-auto text-primary",onClick:i})})}),o.jsx(ng,{children:o.jsx("p",{children:c("common.unpin")})})]})}),v&&x&&l&&o.jsx("span",{className:"cursor-pointer",children:o.jsx(Rt,{className:"w-4 h-auto text-primary",onClick:l})}),o.jsx(xx,{memo:m,readonly:f,onEdit:a})]})]})},yx=({creator:e,displayTime:t,onGotoDetail:n})=>o.jsxs("div",{className:"w-full flex flex-row justify-start items-center",children:[o.jsx(k,{className:"w-auto hover:opacity-80 rounded-md transition-colors",to:`/u/${encodeURIComponent(e.username)}`,viewTransition:!0,children:o.jsx(rg,{className:"mr-2 shrink-0",avatarUrl:e.avatarUrl})}),o.jsxs("div",{className:"w-full flex flex-col justify-center items-start",children:[o.jsx(k,{className:"block leading-tight hover:opacity-80 rounded-md transition-colors truncate text-muted-foreground",to:`/u/${encodeURIComponent(e.username)}`,viewTransition:!0,children:e.displayName||e.username}),o.jsx("button",{type:"button",className:"w-auto -mt-0.5 text-xs leading-tight text-muted-foreground select-none cursor-pointer hover:opacity-80 transition-colors text-left",onClick:n,children:t})]})]}),Ex=({displayTime:e,onGotoDetail:t})=>o.jsx("button",{type:"button",className:"w-full text-sm leading-tight text-muted-foreground select-none cursor-pointer hover:text-foreground transition-colors text-left",onClick:t,children:e}),Nx=r.memo(e=>{const{memo:t,className:n,parentPage:a}=e,s=r.useRef(null),[i,l]=r.useState(!1),c=ag(),d=$u(t.creator).data,u=t.state===wd.ARCHIVED,m=t.creator!==c?.name&&!((h=c)&&(h.role===Vd.ADMIN||h.role===Vd.HOST));var h;const g=a||"/",{nsfw:p,showNSFWContent:b,toggleNsfwVisibility:f}=((e,t)=>{const[n,a]=r.useState(t??!1);return{nsfw:e.tags?.includes("NSFW")??!1,showNSFWContent:n,toggleNsfwVisibility:()=>a(e=>!e)}})(t,e.showNsfwContent),{previewState:x,openPreview:v,setPreviewOpen:y}=(()=>{const[e,t]=r.useState({open:!1,urls:[],index:0});return{previewState:e,openPreview:e=>t({open:!0,urls:[e],index:0}),closePreview:()=>t({open:!1,urls:[],index:0}),setPreviewOpen:e=>t(t=>({...t,open:e}))}})(),{unpinMemo:E}=((e,t)=>{const n=sa(),{mutateAsync:a}=hp();return{archiveMemo:async()=>{if(!t)try{await a({update:{name:e.name,state:wd.ARCHIVED},updateMask:["state"]}),De.success(n("message.archived-successfully"))}catch(r){Fp(r,De.error,{context:"Archive memo",fallbackMessage:"Failed to archive memo"})}},unpinMemo:async()=>{e.pinned&&await a({update:{name:e.name,pinned:!1},updateMask:["pinned"]})}}})(t,u),N=()=>l(!1),w=()=>l(!1),A=()=>l(!0),{handleGotoMemoDetailPage:S,handleMemoContentClick:V,handleMemoContentDoubleClick:I}=(e=>{const{memoName:t,parentPage:n,readonly:a,openEditor:o,openPreview:s}=e,i=wm(),{memoRelatedSetting:l}=um();return{handleGotoMemoDetailPage:r.useCallback(()=>{i(`/${t}`,{state:{from:n}})},[t,n,i]),handleMemoContentClick:r.useCallback(e=>{const t=e.target;if("IMG"===t.tagName){if(t.closest("a"))return;const e=t.getAttribute("src");e&&s(e)}},[s]),handleMemoContentDoubleClick:r.useCallback(e=>{a||l.enableDoubleClickEdit&&(e.preventDefault(),o())},[a,o,l.enableDoubleClickEdit])}})({memoName:t.name,parentPage:g,readonly:m,openEditor:A,openPreview:v}),k=r.useMemo(()=>({memo:t,creator:d,currentUser:c,parentPage:g,isArchived:u,readonly:m,showNSFWContent:b,nsfw:p}),[t,d,c,g,u,m,b,p]);return i?o.jsx(Tf,{autoFocus:!0,className:"mb-2",cacheKey:`inline-memo-editor-${t.name}`,memoName:t.name,onConfirm:N,onCancel:w}):o.jsx(Of.Provider,{value:k,children:o.jsxs("article",{className:Zr(Kf,n),ref:s,role:"article","aria-label":`Memo by ${d?.displayName||d?.username||"Unknown"}`,tabIndex:m?-1:0,children:[o.jsx(vx,{showCreator:e.showCreator,showVisibility:e.showVisibility,showPinned:e.showPinned,onEdit:A,onGotoDetail:S,onUnpin:E,onToggleNsfwVisibility:f}),o.jsx(bx,{compact:e.compact,onContentClick:V,onContentDoubleClick:I,onToggleNsfwVisibility:f}),o.jsx(Lf,{open:x.open,onOpenChange:y,imgUrls:x.urls,initialIndex:x.index})]})})}),wx=()=>o.jsx("div",{className:"mx-auto",children:o.jsx(Ct,{strokeWidth:.5,absoluteStrokeWidth:!0,className:"w-24 h-auto text-muted-foreground"})});function Ax(e,t,n,a=0){if(1===t){const t=e.reduce((e,t)=>e+(n.get(t.name)||0),a);return{distribution:[Array.from({length:e.length},(e,t)=>t)],columnHeights:[t]}}const r=Array.from({length:t},()=>[]),o=Array(t).fill(0),s=Array(t).fill(0);a>0&&(o[0]=a);let i=0;if(e.length>0){const t=n.get(e[0].name)||0;r[0].push(0),o[0]+=t,s[0]+=1,i=1}for(let l=i;l<e.length;l++){const t=e[l],a=n.get(t.name)||0,i=Sx(o,s);r[i].push(l),o[i]+=a,s[i]+=1}return{distribution:r,columnHeights:o}}function Sx(e,t){let n=0,a=e[0];for(let r=1;r<e.length;r++){const o=e[r];o<a?(a=o,n=r):o===a&&t[r]<t[n]&&(n=r)}return n}function Vx({memo:e,renderer:t,renderContext:n,onHeightChange:a}){const s=r.useRef(null),i=r.useRef(null);return r.useEffect(()=>{if(!s.current)return;const t=()=>{if(s.current){const t=s.current.offsetHeight;a(e.name,t)}};return t(),i.current=new ResizeObserver(t),i.current.observe(s.current),()=>{i.current?.disconnect()}},[e.name,a]),o.jsx("div",{ref:s,children:t(e,n)})}function Ix({memoIndices:e,memoList:t,renderer:n,renderContext:a,onHeightChange:r,isFirstColumn:s,prefixElement:i,prefixElementRef:l}){return o.jsxs("div",{className:"min-w-0 w-full",children:[s&&i&&o.jsx("div",{ref:l,children:i}),e?.map(e=>{const s=t[e];return s?o.jsx(Vx,{memo:s,renderer:n,renderContext:a,onHeightChange:r},`${s.name}-${s.displayTime}`):null})]})}const kx=({memoList:e,renderer:t,prefixElement:n,listMode:a=!1})=>{const s=r.useRef(null),i=r.useRef(null),{columns:l,distribution:c,handleHeightChange:d}=function(e,t,n,a){const[o,s]=r.useState(1),[i,l]=r.useState(new Map),[c,d]=r.useState([[]]),u=r.useRef(null),m=r.useRef(i);r.useEffect(()=>{m.current=i},[i]);const h=r.useCallback(()=>{if(!n.current||t)return 1;const e=n.current.offsetWidth/512;return e>=1.2?Math.ceil(e):1},[n,t]),g=r.useCallback(()=>{const t=a.current?.offsetHeight||0;d(()=>{const{distribution:n}=Ax(e,o,m.current,t);return n})},[e,o,a]),p=r.useCallback(t=>{u.current&&clearTimeout(u.current),u.current=window.setTimeout(()=>{const n=a.current?.offsetHeight||0;d(()=>{const{distribution:a}=Ax(e,o,t,n);return a})},100)},[e,o,a]),b=r.useCallback((e,t)=>{l(n=>{const a=new Map(n);return n.get(e)===t?n:(a.set(e,t),p(a),a)})},[p]);return r.useEffect(()=>{const e=()=>{if(!n.current)return;const e=h();e!==o&&s(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[h,o,n]),r.useEffect(()=>{g()},[o,e,g]),r.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]),{columns:o,distribution:c,handleHeightChange:b}}(e,a,s,i),u=r.useMemo(()=>({compact:l>1,columns:l}),[l]);return o.jsx("div",{ref:s,className:Zr("w-full grid gap-2"),style:{gridTemplateColumns:`repeat(${l}, 1fr)`},children:Array.from({length:l}).map((a,r)=>o.jsx(Ix,{memoIndices:c[r]||[],memoList:e,renderer:t,renderContext:u,onHeightChange:d,isFirstColumn:0===r,prefixElement:n,prefixElementRef:i},r))})},Zx={tagSearch:{icon:Oe,getLabel:e=>e},visibility:{icon:Xt,getLabel:e=>e},contentSearch:{icon:W,getLabel:e=>e},displayTime:{icon:Yt,getLabel:e=>e},pinned:{icon:Gt,getLabel:e=>e},"property.hasLink":{icon:at,getLabel:(e,t)=>t("filters.has-link")},"property.hasTaskList":{icon:Ft,getLabel:(e,t)=>t("filters.has-task-list")},"property.hasCode":{icon:jt,getLabel:(e,t)=>t("filters.has-code")}},Wx=()=>{const e=sa(),{filters:t,removeFilter:n}=Nm(),a=t=>{const n=Zx[t.factor];return n?n.getLabel(t.value,e):t.value||t.factor};return 0===t.length?null:o.jsx("div",{className:"w-full mb-2 flex flex-row justify-start items-center flex-wrap gap-2",children:t.map(e=>{const t=Zx[e.factor],r=t?.icon;return o.jsxs("div",{className:"group inline-flex items-center gap-1.5 h-7 px-2.5 bg-accent/50 hover:bg-accent border border-border/50 rounded-full text-sm transition-all duration-200 hover:shadow-sm",children:[r&&o.jsx(r,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),o.jsx("span",{className:"text-foreground/80 font-medium max-w-32 truncate",children:a(e)}),o.jsx("button",{onClick:()=>(e=>{n(t=>Pt(t,e))})(e),className:"ml-0.5 -mr-1 p-0.5 text-muted-foreground/60 hover:text-destructive hover:bg-destructive/10 rounded-full transition-colors","aria-label":"Remove filter",children:o.jsx(c,{className:"w-3 h-3"})})]},fm(e))})})};Wx.displayName="MemoFilters";const Gx=({showCreator:e=!1,index:t=0})=>o.jsxs("div",{className:sb,children:[o.jsxs("div",{className:"w-full flex flex-row justify-between items-center gap-2",children:[o.jsx("div",{className:"w-auto max-w-[calc(100%-8rem)] grow flex flex-row justify-start items-center",children:e?o.jsxs("div",{className:"w-full flex flex-row justify-start items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-muted shrink-0"}),o.jsxs("div",{className:"w-full flex flex-col justify-center items-start gap-1",children:[o.jsx("div",{className:"h-4 w-24 bg-muted rounded"}),o.jsx("div",{className:"h-3 w-16 bg-muted rounded"})]})]}):o.jsx("div",{className:"h-4 w-32 bg-muted rounded"})}),o.jsxs("div",{className:"flex flex-row gap-2",children:[o.jsx("div",{className:"w-4 h-4 bg-muted rounded"}),o.jsx("div",{className:"w-4 h-4 bg-muted rounded"})]})]}),o.jsx("div",{className:"w-full flex flex-col gap-2",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:Zr("h-4 bg-muted rounded",t%3==0?"w-full":t%3==1?"w-4/5":"w-5/6")}),o.jsx("div",{className:Zr("h-4 bg-muted rounded",t%2==0?"w-3/4":"w-4/5")}),t%2==0&&o.jsx("div",{className:"h-4 w-2/3 bg-muted rounded"})]})})]}),Rx=({showCreator:e=!1,count:t=4})=>o.jsx("div",{className:"w-full max-w-2xl mx-auto",children:Array.from({length:t}).map((t,n)=>o.jsx(Gx,{showCreator:e,index:n},n))});const Cx=e=>{const t=sa(),{layout:n}=pm(),a=m(),s=Boolean($e(ev.ROOT,window.location.pathname))||Boolean($e(ev.HOME,window.location.pathname)),{data:i,fetchNextPage:l,hasNextPage:c,isFetchingNextPage:d,isLoading:u}=up({state:e.state||wd.NORMAL,orderBy:e.orderBy||"display_time desc",filter:e.filter,pageSize:e.pageSize||16}),h=r.useMemo(()=>i?.pages.flatMap(e=>e.memos)||[],[i]),g=r.useMemo(()=>e.listSort?e.listSort(h):h,[h,e.listSort]);r.useEffect(()=>{if(!i?.pages||!e.showCreator)return;const t=i.pages[i.pages.length-1];if(!t?.memos)return;const n=Array.from(new Set(t.memos.map(e=>e.creator)));for(const e of n)a.prefetchQuery({queryKey:Hu.detail(e),queryFn:async()=>await Fu.getUser({name:e}),staleTime:3e5})},[i?.pages,e.showCreator,a]),function({hasNextPage:e,isFetchingNextPage:t,memoCount:n,onFetchNext:a}){const o=r.useRef(null),s=r.useCallback(()=>Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>window.innerHeight+100,[]),i=r.useCallback(async()=>{o.current&&clearTimeout(o.current),await new Promise(e=>setTimeout(e,200)),!s()&&e&&!t&&n>0&&(await a(),o.current=window.setTimeout(()=>{i()},500))},[e,t,n,s,a]);r.useEffect(()=>{!t&&n>0&&i()},[n,t,i]),r.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[])}({hasNextPage:c,isFetchingNextPage:d,memoCount:g.length,onFetchNext:l}),r.useEffect(()=>{if(!c)return;const e=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-300&&!d&&l()};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[c,d,l]);return o.jsx("div",{className:"flex flex-col justify-start items-start w-full max-w-full",children:u?o.jsx(Rx,{showCreator:e.showCreator,count:4}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{memoList:g,renderer:e.renderer,prefixElement:o.jsxs(o.Fragment,{children:[s?o.jsx(Tf,{className:"mb-2",cacheKey:"home-memo-editor",placeholder:t("editor.any-thoughts")}):void 0,o.jsx(Wx,{})]}),listMode:"LIST"===n}),d&&o.jsx(Rx,{showCreator:e.showCreator,count:2}),!d&&o.jsx(o.Fragment,{children:c||0!==g.length?o.jsx("div",{className:"w-full opacity-70 flex flex-row justify-center items-center my-4",children:o.jsx(jx,{})}):o.jsxs("div",{className:"w-full mt-12 mb-8 flex flex-col justify-center items-center italic",children:[o.jsx(wx,{}),o.jsx("p",{className:"mt-2 text-muted-foreground",children:t("message.no-data")})]})})]})})},jx=()=>{const e=sa(),[t,n]=r.useState(!1);r.useEffect(()=>{const e=()=>{const e=window.scrollY>400;n(e)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);return t?o.jsxs(Gr,{variant:"ghost",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:[e("router.back-to-top"),o.jsx(Bt,{className:"ml-1 w-4 h-auto"})]}):null},Fx=()=>{const e=ag(),t=fp({creatorName:e?.name,includeShortcuts:!0,includePinned:!0}),{listSort:n,orderBy:a}=xp({pinnedFirst:!0,state:wd.NORMAL});return o.jsx("div",{className:"w-full min-h-full bg-background text-foreground relative",children:o.jsx(Cx,{renderer:(e,t)=>o.jsx(Nx,{memo:e,showVisibility:!0,showPinned:!0,compact:t?.compact},`${e.name}-${e.displayTime}`),listSort:n,orderBy:a,filter:t})})},Yx=r.lazy(()=>Jt(()=>import("./AdminSignIn-BuNI9ZA4.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10,12,16,17,18,11]))),Xx=r.lazy(()=>Jt(()=>import("./Archived-DS-Zkal_.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12]))),Bx=r.lazy(()=>Jt(()=>import("./AuthCallback-Cht0KVm-.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,21,11,12]))),Tx=r.lazy(()=>Jt(()=>import("./Explore-CA_Ur35J.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12]))),Mx=r.lazy(()=>Jt(()=>import("./Inboxes-BDNAVr5g.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12]))),Lx=r.lazy(()=>Jt(()=>import("./MemoDetail-DWBv-r3C.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12]))),Ux=r.lazy(()=>Jt(()=>import("./NotFound-F1lTKk_M.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12]))),zx=r.lazy(()=>Jt(()=>import("./PermissionDenied-Dtxobzuq.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12]))),Dx=r.lazy(()=>Jt(()=>import("./Attachments-Br5kF_Gq.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,28,29,12,11]))),Qx=r.lazy(()=>Jt(()=>import("./Setting-Brruf8M1.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,29,28,21,17,11,12]))),Jx=r.lazy(()=>Jt(()=>import("./SignIn-gDvnlQNx.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,16,17,32,18,28,21,11,12]))),Kx=r.lazy(()=>Jt(()=>import("./SignUp-CvlBBEwU.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,16,17,32,11,12]))),Ox=r.lazy(()=>Jt(()=>import("./UserProfile-CcStlpqC.js"),__vite__mapDeps([34,8,9,3,4,1,2,5,6,7,10,11,12]))),_x=r.lazy(()=>Jt(()=>import("./MemoDetailRedirect-DXRmYb-E.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10]))),Hx=r.lazy(()=>Jt(()=>import("./AIChat-af2GJr8d.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8,9,10,37,11,12,38]))),Px=r.lazy(()=>Jt(()=>import("./Schedule-BaMu6Yfu.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,9,10,12,37,11]))),$x=r.lazy(()=>Jt(()=>import("./Review-SWI4paWK.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,9,10,11,12]))),qx=r.lazy(()=>Jt(()=>import("./KnowledgeGraph-CF3Ow81Z.js"),__vite__mapDeps([41,8,9,3,4,1,2,5,6,7,10]))),ev=vu,tv=({component:e})=>o.jsx(r.Suspense,{fallback:o.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:o.jsx(Yr,{size:"lg"})}),children:o.jsx(e,{})}),nv=Tt([{path:"/",element:o.jsx(Dm,{}),children:[{path:ev.AUTH,children:[{path:"",element:o.jsx(tv,{component:Jx})},{path:"admin",element:o.jsx(tv,{component:Yx})},{path:"signup",element:o.jsx(tv,{component:Kx})},{path:"callback",element:o.jsx(tv,{component:Bx})}]},{path:ev.ROOT,element:o.jsx(Hp,{}),children:[{index:!0,element:o.jsx(Mt,{to:ev.CHAT,replace:!0})},{element:o.jsx(Kp,{}),children:[{path:ev.HOME,element:o.jsx(Fx,{})},{path:ev.EXPLORE,element:o.jsx(tv,{component:Tx})},{path:ev.ARCHIVED,element:o.jsx(tv,{component:Xx})},{path:"u/:username",element:o.jsx(tv,{component:Ox})}]},{path:ev.SCHEDULE,element:o.jsx(Km,{children:o.jsx(eb,{})}),children:[{index:!0,element:o.jsx(tv,{component:Px})}]},{path:ev.CHAT,element:o.jsx(Rr,{children:o.jsx(Eg,{})}),children:[{index:!0,element:o.jsx(tv,{component:Hx})}]},{element:o.jsx(Ng,{}),children:[{path:ev.KNOWLEDGE_GRAPH,element:o.jsx(tv,{component:qx})},{path:ev.ATTACHMENTS,element:o.jsx(tv,{component:Dx})},{path:ev.REVIEW,element:o.jsx(tv,{component:$x})},{path:ev.INBOX,element:o.jsx(tv,{component:Mx})},{path:ev.SETTING,element:o.jsx(tv,{component:Qx})},{path:"memos/:uid",element:o.jsx(tv,{component:Lx})},{path:"m/:uid",element:o.jsx(tv,{component:_x})},{path:"403",element:o.jsx(tv,{component:zx})},{path:"404",element:o.jsx(tv,{component:Ux})},{path:"*",element:o.jsx(tv,{component:Ux})}]}]}]}]),av=(...e)=>{};function rv({children:e}){const{isInitialized:t,initialize:n}=sm(),{isInitialized:a,initialize:s}=um(),i=r.useRef(!1);return r.useEffect(()=>{if(i.current)return;i.current=!0;(async()=>{await Promise.all([s(),n()])})()},[n,s]),t&&a?o.jsx(o.Fragment,{children:e}):o.jsx("div",{className:"w-full h-screen flex items-center justify-center",children:o.jsx(Yr,{size:"lg"})})}function ov(){return o.jsx("div",{className:"w-full h-full",children:o.jsx(Rr,{children:o.jsx(Lt,{client:bm,children:o.jsx(dm,{children:o.jsx(om,{children:o.jsx(gm,{children:o.jsxs(rv,{children:[o.jsx(Ut,{router:nv}),o.jsx(zt,{position:"top-right"}),o.jsx(Fr,{})]})})})})})})})}(()=>{const e=Cm();Xm(e)})(),(()=>{const e=ra()??oa(navigator.language);la(e)})(),(()=>{if("undefined"==typeof window||!("serviceWorker"in navigator))return;let e;window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&window.dispatchEvent(new CustomEvent("sw-update-available"))})}),e=window.setInterval(()=>{t.update()},36e5)}).catch(e=>{av("Service Worker registration failed:",e)})});let t=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{t||(t=!0,window.location.reload())}),window.addEventListener("beforeunload",()=>{void 0!==e&&clearInterval(e)})})();const sv=document.getElementById("root");dt.createRoot(sv).render(o.jsx(ov,{}));export{Ph as $,Ig as A,mp as B,gp as C,Du as D,wx as E,Zl as F,Gr as G,Tf as H,Jp as I,fb as J,pb as K,bb as L,Nx as M,Lf as N,Xu as O,Cx as P,bp as Q,ib as R,wd as S,Gp as T,Wd as U,su as V,Ih as W,sg as X,Dh as Y,Oh as Z,_h as _,ag as a,sh as a$,$h as a0,Rp as a1,Wg as a2,Rg as a3,Gg as a4,Cg as a5,jg as a6,Hh as a7,bh as a8,Nh as a9,em as aA,am as aB,kd as aC,Zm as aD,Gf as aE,lb as aF,cb as aG,la as aH,Xm as aI,Yd as aJ,Bd as aK,Td as aL,Xd as aM,Fd as aN,Od as aO,Jd as aP,Kd as aQ,ev as aR,Ku as aS,Um as aT,Cm as aU,Mh as aV,ah as aW,th as aX,$m as aY,Df as aZ,Om as a_,wh as aa,Sh as ab,Vh as ac,Ah as ad,Qd as ae,Cp as af,zd as ag,Ou as ah,Hd as ai,qh as aj,eg as ak,tg as al,ng as am,Mu as an,Tp as ao,Dd as ap,Sd as aq,Vd as ar,nm as as,tm as at,ig as au,lg as av,cg as aw,dg as ax,ub as ay,_d as az,fp as b,oh as b0,kg as b1,hh as b2,ml as b3,wp as b4,Ap as b5,Sp as b6,Vp as b7,cu as b8,vp as b9,Jm as ba,Np as bb,$p as bc,Pp as bd,Lu as be,bd as bf,zu as bg,Bf as bh,vh as bi,Sf as bj,Uf as bk,jm as bl,Gm as bm,Bm as bn,Ju as bo,up as bp,bf as bq,ff as br,Zg as bs,Xg as bt,Bg as bu,Tg as bv,$f as bw,xp as c,wm as d,sm as e,ju as f,Yr as g,Fp as h,sa as i,$u as j,Tu as k,Qu as l,Yu as m,Zr as n,rg as o,Fu as p,fo as q,vg as r,$c as s,gl as t,um as u,zm as v,qu as w,Gd as x,eu as y,ou as z};
