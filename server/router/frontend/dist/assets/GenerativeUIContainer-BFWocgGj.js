import{r as e,aB as s,j as t,bU as r,X as a,bo as n,p as i,F as o,aK as d,$ as l,a$ as c,bJ as m,ci as u,C as x,c8 as h,aS as p}from"./react-vendor-LyyF-653.js";import{i as f,n as g}from"./index-D99LTaa7.js";import{g as b}from"./mermaid-vendor-B1M2OtO5.js";const j=()=>"false"!==localStorage.getItem("schedule.autoResolve");function N({data:o,onAction:d,onDismiss:l,isLoading:c=!1}){const m=f(),[u,x]=e.useState(null),[h,p]=e.useState(!1),N=e.useRef(!1);if(e.useEffect(()=>{if(N.current||!j())return;if(!o.auto_resolved)return;N.current=!0;const e=o.auto_resolved,r={label:e.label,start_ts:e.start_ts,end_ts:e.end_ts,duration:e.end_ts-e.start_ts,reason:e.reason};d("reschedule",r),s(r=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-sm",children:m("schedule.conflict.auto-resolved",{time:e.label})||`已调整到 ${e.label}`}),t.jsx("button",{type:"button",onClick:()=>{s.dismiss(r.id),p(!0)},className:"text-xs font-medium text-primary hover:underline",children:m("common.undo")||"撤销"})]}),{duration:4e3})},[o.auto_resolved,d,m]),e.useEffect(()=>{h&&null===u&&o.suggested_slots?.length>0&&x(0)},[h,u,o.suggested_slots]),o.auto_resolved&&!h&&j())return null;const v=o.conflicting_schedules?.[0],y=o.conflicting_schedules?.length??0,w=o.suggested_slots??[];return t.jsxs("div",{className:"bg-amber-500/10 rounded-xl border border-amber-500/20 p-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(r,{className:"w-5 h-5 text-amber-500"}),t.jsx("h4",{className:"font-semibold text-amber-600 dark:text-amber-400",children:m("schedule.conflict.title")})]}),t.jsx("button",{type:"button",onClick:l,disabled:c,className:g("p-1 rounded-md transition-colors","hover:bg-amber-500/20","disabled:opacity-50 disabled:cursor-not-allowed"),children:t.jsx(a,{className:"w-4 h-4 text-muted-foreground"})})]}),v&&t.jsxs("div",{className:"mb-3 p-2.5 bg-background/50 rounded-lg",children:[t.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:y>1?m("schedule.conflict.multiple-conflicts",{count:y}):m("schedule.conflict.single-conflict")}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(n,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"font-medium",children:v.title}),t.jsx(i,{className:"w-4 h-4 text-muted-foreground ml-2"}),t.jsxs("span",{className:"text-muted-foreground",children:[b.unix(v.start_time).format("HH:mm")," - ",b.unix(v.end_time).format("HH:mm")]})]})]}),w.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:m("schedule.ai.alternatives")}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:w.map((e,s)=>{const r=u===s;return t.jsx("button",{type:"button",onClick:()=>x(s),disabled:c,className:g("p-2.5 rounded-lg border text-center transition-all text-sm","hover:bg-background",r?"bg-primary text-primary-foreground border-primary":"bg-background border-border","disabled:opacity-50 disabled:cursor-not-allowed"),children:e.label},s)})})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{null!==u&&o.suggested_slots?.[u]&&d("reschedule",o.suggested_slots[u])},disabled:c||null===u,className:g("py-2 px-3 rounded-lg font-medium text-sm transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:m("schedule.conflict.manual-resolve")}),t.jsx("button",{type:"button",onClick:()=>{d("override")},disabled:c,className:g("py-2 px-3 rounded-lg font-medium text-sm transition-colors","bg-amber-500 text-white hover:bg-amber-600","disabled:opacity-50 disabled:cursor-not-allowed"),children:m("schedule.conflict.override")}),t.jsx("button",{type:"button",onClick:()=>{d("cancel")},disabled:c,className:g("py-2 px-3 rounded-lg font-medium text-sm transition-colors","bg-muted text-muted-foreground hover:bg-muted/70","disabled:opacity-50 disabled:cursor-not-allowed"),children:m("common.cancel")})]})]})}function v({data:s,onConfirm:r,onDismiss:n,isLoading:i=!1}){const c=f(),[m,u]=e.useState(!1);e.useEffect(()=>{!i&&m&&u(!1)},[i,m]);const x=c("memo.preview.confirm"),h=c("memo.preview.cancel"),p=c("schedule.quick-input.creating"),b=c("memo.preview.title"),j=c("memo.preview.content"),N=c("memo.preview.tags"),v=c("memo.preview.confidence"),y=i||m,w=Math.round(100*s.confidence);return t.jsxs("div",{className:g("rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2","bg-muted/50 border-border"),children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:t.jsx(o,{className:"w-4 h-4 text-primary"})}),t.jsx("h4",{className:"font-semibold text-foreground",children:b})]}),n&&t.jsx("button",{type:"button",onClick:n,className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(a,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-base text-foreground mb-1",children:s.title}),s.reason&&t.jsx("p",{className:"text-xs text-muted-foreground",children:s.reason})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[t.jsx(o,{className:"w-3 h-3"}),j]}),t.jsx("p",{className:"text-sm text-foreground mt-1 whitespace-pre-wrap",children:s.content})]}),s.tags&&s.tags.length>0&&t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[t.jsx(d,{className:"w-3 h-3"}),N]}),t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:s.tags.map((e,s)=>t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs bg-primary/10 text-primary",children:["#",e]},s))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-muted-foreground",children:[v,":"]}),t.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:t.jsx("div",{className:g("h-full rounded-full transition-all duration-300",w>=80?"bg-green-500":w>=60?"bg-yellow-500":"bg-orange-500"),style:{width:`${w}%`}})}),t.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[w,"%"]})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx("button",{type:"button",onClick:()=>{if(!i&&!m){u(!0);try{r(s)}catch(e){u(!1)}}},disabled:y,className:g("flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors",y?"bg-green-500/20 text-green-600 dark:text-green-400 cursor-default":"bg-primary text-primary-foreground hover:bg-primary/90","disabled:cursor-default"),children:y?t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"w-4 h-4"}),p]}):x}),n&&!y&&t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:h})]})]})]})}const y=e.memo(function({data:e,onDismiss:s}){const r=f(),n=r("memo.search.content"),i=r("memo.search.tags"),l=r("memo.search.confidence"),m=r("memo.search.view-memo"),u=Math.round(100*e.confidence),x=`/m/${e.uid}`;return t.jsxs("div",{className:g("rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2","bg-muted/30 border-border hover:bg-muted/50","relative group"),children:[s&&t.jsx("button",{type:"button",onClick:s,className:g("absolute top-2 right-2 p-1 rounded-md","text-muted-foreground hover:text-foreground","hover:bg-muted transition-colors","opacity-0 group-hover:opacity-100 focus:opacity-100"),"aria-label":"Dismiss",children:t.jsx(a,{className:"w-4 h-4"})}),t.jsxs("div",{className:"space-y-3 pr-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:t.jsx(o,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-base text-foreground",children:e.title}),e.reason&&t.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.reason})]})]}),t.jsxs("a",{href:x,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-primary hover:bg-primary/10 transition-colors",children:[t.jsx(c,{className:"w-3.5 h-3.5"}),m]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[t.jsx(o,{className:"w-3 h-3"}),n]}),t.jsx("p",{className:"text-sm text-foreground mt-1 whitespace-pre-wrap line-clamp-4",children:e.content})]}),e.tags&&e.tags.length>0&&t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1",children:[t.jsx(d,{className:"w-3 h-3"}),i]}),t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:e.tags.map((e,s)=>t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs bg-primary/10 text-primary",children:["#",e]},s))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-muted-foreground",children:[l,":"]}),t.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:t.jsx("div",{className:g("h-full rounded-full transition-all duration-300",u>=80?"bg-green-500":u>=60?"bg-yellow-500":"bg-orange-500"),style:{width:`${u}%`}})}),t.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[u,"%"]})]})]})]})});function w({data:e,onCancel:s,onDismiss:r}){const n=f(),i=n("progress.tracker.title")||e.title||"Processing",o=n("progress.tracker.cancel")||"Cancel",d={pending:n("progress.tracker.steps.pending")||"Pending",in_progress:n("progress.tracker.steps.in_progress")||"Processing",completed:n("progress.tracker.steps.completed")||"Completed",failed:n("progress.tracker.steps.failed")||"Failed"},l=e.steps.filter(e=>"completed"===e.status).length,c=e.steps.length,u=c>0?l/c*100:0;return t.jsxs("div",{className:g("rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2","bg-muted/50 border-border"),children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:t.jsx(m,{className:"w-4 h-4 text-primary animate-spin"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground",children:i}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[l," / ",c," ",d.completed]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.can_cancel&&s&&t.jsx("button",{type:"button",onClick:s,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:o}),r&&t.jsx("button",{type:"button",onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(a,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${u}%`}})})}),t.jsx("div",{className:"space-y-2",children:e.steps.map(e=>t.jsx(_,{step:e,statusTexts:d},e.id))})]})}function _({step:e,statusTexts:s}){return t.jsxs("div",{className:g("flex items-start gap-3 p-2 rounded-lg transition-colors","in_progress"===e.status&&"bg-primary/10","failed"===e.status&&"bg-destructive/10"),children:[t.jsx(k,{status:e.status}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:g("text-sm font-medium","completed"===e.status&&"text-foreground line-through","in_progress"===e.status&&"text-foreground","failed"===e.status&&"text-destructive","pending"===e.status&&"text-muted-foreground"),children:e.label}),"in_progress"===e.status&&t.jsx("span",{className:"text-xs text-muted-foreground",children:s.in_progress})]}),e.error&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:e.error})]}),"in_progress"===e.status&&t.jsx(u,{className:"w-4 h-4 text-primary animate-pulse"})]})}function k({status:e}){switch(e){case"completed":return t.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0",children:t.jsx(l,{className:"w-3 h-3 text-green-600 dark:text-green-400"})});case"in_progress":return t.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:t.jsx(m,{className:"w-3 h-3 text-primary animate-spin"})});case"failed":return t.jsx("div",{className:"w-5 h-5 rounded-full bg-destructive/20 flex items-center justify-center flex-shrink-0",children:t.jsx(x,{className:"w-3 h-3 text-destructive"})});default:return t.jsx("div",{className:"w-5 h-5 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:t.jsx(i,{className:"w-3 h-3 text-muted-foreground"})})}}function C({data:e,onAction:s,onDismiss:r}){const a=f()("quick.actions.title")||e.title;return t.jsxs("div",{className:g("rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2","bg-muted/50 border-border"),children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:t.jsx(h,{className:"w-4 h-4 text-primary"})}),t.jsx("h4",{className:"font-semibold text-foreground",children:a})]}),r&&t.jsx("button",{type:"button",onClick:r,"aria-label":"Dismiss",className:"text-muted-foreground hover:text-foreground transition-colors",children:"×"})]}),e.description&&t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent",children:e.actions.map(e=>t.jsx(D,{action:e,onClick:()=>s(e)},e.id))})]})}function D({action:e,onClick:s}){return t.jsxs("button",{type:"button",onClick:s,className:g("flex-shrink-0 min-w-[7rem] flex flex-col items-start gap-2 p-3 rounded-lg","bg-background hover:bg-primary/10","border border-border hover:border-primary/30","transition-all duration-200","text-left group"),children:[t.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.icon&&t.jsx("span",{className:"text-lg",role:"img","aria-label":e.label,children:e.icon}),t.jsx("span",{className:"font-medium text-sm text-foreground flex-1",children:e.label}),t.jsx(u,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors"})]}),e.description&&t.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]})}function $({data:e,onDismiss:s}){const r=f(),o=e.schedules.reduce((e,s)=>{const t=b.unix(s.start_ts).format("YYYY-MM-DD");return e[t]||(e[t]=[]),e[t].push(s),e},{}),d=Object.keys(o).sort();return t.jsxs("div",{className:g("rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2","bg-muted/50 border-border"),children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:t.jsx(n,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground",children:e.title}),e.time_range&&t.jsx("p",{className:"text-xs text-muted-foreground",children:e.time_range})]})]}),s&&t.jsx("button",{type:"button",onClick:s,className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(a,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"mb-3 text-sm text-muted-foreground",children:r("schedule.list.summary",{count:e.count})||`共找到 ${e.count} 个日程`}),t.jsx("div",{className:"space-y-3",children:d.map(e=>{const s=o[e],r=b(e).format("MM月DD日"),a=b(e).isSame(b(),"day"),n=b(e).isSame(b().add(1,"day"),"day");let d=r;return a?d=`今天 (${r})`:n&&(d=`明天 (${r})`),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:d}),t.jsx("div",{className:"space-y-2",children:s.map(e=>t.jsx("div",{className:g("p-3 rounded-lg border transition-colors","bg-background border-border hover:border-primary/50"),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h5",{className:"font-medium text-foreground truncate",children:e.title}),t.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(i,{className:"w-3 h-3"}),t.jsxs("span",{children:[b.unix(e.start_ts).format("HH:mm")," - ",b.unix(e.end_ts).format("HH:mm")]})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(p,{className:"w-3 h-3"}),t.jsx("span",{className:"truncate",children:e.location})]})]})]}),"CANCELLED"===e.status&&t.jsx("span",{className:"text-xs text-muted-foreground line-through",children:"已取消"})]})},e.uid))})]},e)})}),0===e.count&&t.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[t.jsx(n,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:r("schedule.list.empty")||"该时间段没有找到日程"})]})]})}function A({data:s,onConfirm:r,isLoading:a=!1}){const o=f(),[d,c]=e.useState(!1),m=b.unix(s.start_ts).format("HH:mm"),u=b.unix(s.end_ts).format("HH:mm"),x=b.unix(s.start_ts).format("YYYY-MM-DD"),h=o("schedule.suggestion.click-to-create")||"Click to create",j=o("schedule.quick-input.creating")||"Creating...",N=a||d;return t.jsx("button",{type:"button",onClick:()=>{a||d||(c(!0),r(s))},disabled:N,className:g("w-full text-left rounded-xl border p-4 transition-all duration-200","animate-in fade-in slide-in-from-top-2",N?"bg-green-500/10 border-green-500/30 scale-[0.98]":"bg-primary/10 border-primary/20 hover:bg-primary/15 hover:border-primary/30 hover:shadow-md cursor-pointer","disabled:cursor-default"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:g("flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors duration-200",N?"bg-green-500/20":"bg-primary/20"),children:N?t.jsx(l,{className:"w-5 h-5 text-green-600 dark:text-green-400 animate-in zoom-in duration-200"}):t.jsx(n,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-semibold text-foreground",children:s.title}),!N&&t.jsx("span",{className:"text-xs text-primary/70 hidden sm:inline",children:h}),N&&t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:j})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(i,{className:"w-4 h-4"}),t.jsxs("span",{children:[x," ",m," - ",u]})]}),s.location&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(p,{className:"w-4 h-4"}),t.jsx("span",{children:s.location})]})]}),s.reason&&t.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:s.reason})]})]})})}function H({data:s,onSelect:r,onDismiss:n,isLoading:o=!1}){const d=f(),[l,c]=e.useState(s.default_idx??0),m=d("schedule.ai.select-time")||"Select a time",u=d("schedule.ai.confirm-slot")||"Confirm";return t.jsxs("div",{className:"bg-muted/50 rounded-xl border border-border p-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[t.jsx(i,{className:"w-4 h-4 text-primary"}),m]}),t.jsx("button",{type:"button",onClick:n,disabled:o,className:g("p-1 rounded-md transition-colors","hover:bg-muted-foreground/20","disabled:opacity-50 disabled:cursor-not-allowed"),children:t.jsx(a,{className:"w-4 h-4 text-muted-foreground"})})]}),s.reason&&t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.reason}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-3",children:s.slots.map((e,s)=>{const r=s===l;return t.jsxs("button",{type:"button",onClick:()=>c(s),disabled:o,className:g("p-3 rounded-lg border text-center transition-all","hover:bg-background",r?"bg-primary text-primary-foreground border-primary":"bg-background border-border","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-background"),children:[t.jsx("div",{className:"font-medium text-sm",children:e.label}),e.reason&&t.jsx("div",{className:"text-xs opacity-70 mt-1",children:e.reason})]},s)})}),t.jsx("button",{type:"button",onClick:()=>{r(s.slots[l])},disabled:o,className:g("w-full py-2 px-4 rounded-lg font-medium text-sm transition-colors","bg-primary text-primary-foreground hover:bg-primary/90","disabled:opacity-50 disabled:cursor-not-allowed"),children:u})]})}function S(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function I(e){return"string"==typeof e}function M(e){return"number"==typeof e&&!isNaN(e)}function Y(e){const s=[];return S(e)?(I(e.title)||s.push("title must be a string"),M(e.start_ts)||s.push("start_ts must be a number"),M(e.end_ts)||s.push("end_ts must be a number"),void 0===e.location||I(e.location)||s.push("location must be a string if provided"),void 0===e.description||I(e.description)||s.push("description must be a string if provided"),void 0!==e.all_day&&"boolean"!=typeof e.all_day&&s.push("all_day must be a boolean if provided"),void 0===e.confidence||M(e.confidence)||s.push("confidence must be a number if provided"),void 0===e.reason||I(e.reason)||s.push("reason must be a string if provided"),s.length>0?{valid:!1,errors:s}:{valid:!0,data:e,errors:[]}):{valid:!1,errors:["Data must be an object"]}}function q(e){const s=[];return S(e)?(void 0===e.uid||I(e.uid)||s.push("uid must be a string if provided"),I(e.title)||s.push("title must be a string"),I(e.content)||s.push("content must be a string"),void 0===e.tags||Array.isArray(e.tags)||s.push("tags must be an array if provided"),void 0===e.confidence||M(e.confidence)||s.push("confidence must be a number if provided"),void 0===e.reason||I(e.reason)||s.push("reason must be a string if provided"),s.length>0?{valid:!1,errors:s}:{valid:!0,data:e,errors:[]}):{valid:!1,errors:["Data must be an object"]}}function E(e,s,t){const r=s(e);return r.valid?r.data??null:null}function L(e){const s=[];if(!S(e))return{valid:!1,errors:["Data must be an object"]};if(I(e.title)||s.push("title must be a string"),I(e.query)||s.push("query must be a string"),M(e.count)||s.push("count must be a number"),Array.isArray(e.schedules))for(let t=0;t<e.schedules.length;t++){const r=e.schedules[t];S(r)?(I(r.uid)||s.push(`schedules[${t}].uid must be a string`),I(r.title)||s.push(`schedules[${t}].title must be a string`),M(r.start_ts)||s.push(`schedules[${t}].start_ts must be a number`),M(r.end_ts)||s.push(`schedules[${t}].end_ts must be a number`)):s.push(`schedules[${t}] must be an object`)}else s.push("schedules must be an array");return void 0===e.time_range||I(e.time_range)||s.push("time_range must be a string if provided"),void 0===e.reason||I(e.reason)||s.push("reason must be a string if provided"),s.length>0?{valid:!1,errors:s}:{valid:!0,data:e,errors:[]}}function T({tools:s,onAction:r,onDismiss:a,className:n}){return e.useEffect(()=>{const e=s.map(e=>{const s=3e5-(Date.now()-e.timestamp);return s<=0?(a?.(e.id),null):setTimeout(()=>{a?.(e.id)},s)});return()=>{e.forEach(e=>{e&&clearTimeout(e)})}},[s,a]),0===s.length?null:t.jsx("div",{className:g("space-y-3",n),children:s.map(e=>t.jsx(F,{tool:e,onAction:s=>r({...s,toolId:e.id}),onDismiss:()=>a?.(e.id)},e.id))})}function F({tool:e,onAction:s,onDismiss:r}){const a=t=>{s({type:"confirm",toolId:e.id,data:t})},n=t=>{s({type:"select_slot",toolId:e.id,data:t})},i=(t,r)=>{s({type:t,toolId:e.id,data:r})},o=t=>{s({type:"confirm",toolId:e.id,data:t})},d=t=>{s({type:"quick_action",toolId:e.id,data:t})},l=()=>{s({type:"cancel",toolId:e.id})};switch(e.type){case"schedule_suggestion":{const s=E(e.data,Y);return s?t.jsx(A,{data:s,onConfirm:a}):null}case"time_slot_picker":return t.jsx(H,{data:e.data,onSelect:n,onDismiss:r});case"conflict_resolution":return t.jsx(N,{data:e.data,onAction:i,onDismiss:r});case"memo_preview":{const s=E(e.data,q);return s?s.uid?t.jsx(y,{data:s,onDismiss:r}):t.jsx(v,{data:s,onConfirm:o,onDismiss:r}):null}case"quick_actions":return t.jsx(C,{data:e.data,onAction:d,onDismiss:r});case"schedule_list":{const s=E(e.data,L);return s?t.jsx($,{data:s,onDismiss:r}):null}case"progress_tracker":return t.jsx(w,{data:e.data,onCancel:l,onDismiss:r});default:return null}}export{T as G,Y as a,E as v};
