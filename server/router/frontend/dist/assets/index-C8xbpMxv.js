import{r as e,j as o,ck as a}from"./react-vendor-LyyF-653.js";import{d as t,n as r,bo as n,z as s}from"./index-D99LTaa7.js";import"./ui-vendor-ByoYm48K.js";import"./leaflet-vendor-Cu4zZue4.js";import"./markdown-vendor-DtAGkuPo.js";import"./math-vendor-JUchi9-2.js";import"./mermaid-vendor-B1M2OtO5.js";import"./lodash-vendor-DIRPa7cU.js";import"./polyfills-RlNY0w59.js";import"./i18n-vendor-Cyfgqt0p.js";const i=e=>{const o=new Map,a=[];return e.forEach(e=>{const t=e.memo,r=e.relatedMemo;o.has(t.name)||o.set(t.name,{id:t.name,memo:t}),o.has(r.name)||o.set(r.name,{id:r.name,memo:r}),a.push({source:t.name,target:r.name,type:e.type})}),{nodes:Array.from(o.values()),links:a}},m=({className:m,memo:l,parentPage:d})=>{const c=t(),[h]=e.useState("light"),p=e.useRef(null),u=e.useRef(void 0),[f,j]=e.useState({width:0,height:0});e.useEffect(()=>{p.current&&j(p.current.getBoundingClientRect())},[]);return o.jsx("div",{ref:p,className:r("opacity-80",m),children:o.jsx(a,{ref:u,width:f.width,height:f.height,enableZoomInteraction:!0,cooldownTicks:0,nodeColor:e=>e.id===l.name?"#14b8a6":"#a1a1aa",nodeRelSize:3,nodeLabel:e=>n(e.memo.name).slice(0,6).toLowerCase(),linkColor:()=>"light"===h?"#e4e4e7":"#3f3f46",graphData:i(l.relations.filter(e=>e.type===s.REFERENCE)),onNodeClick:e=>{e.memo.name!==l.name&&c(`/${l.name}`,{state:{from:d}})},linkDirectionalArrowLength:3,linkDirectionalArrowRelPos:1,linkCurvature:.25})})};export{i as convertMemoRelationsToGraphData,m as default};
