const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid-vendor-B1M2OtO5.js","assets/lodash-vendor-DIRPa7cU.js","assets/leaflet-vendor-Cu4zZue4.js","assets/leaflet-vendor-Dyj9FDc_.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./mermaid-vendor-B1M2OtO5.js";import{r,j as t}from"./react-vendor-LyyF-653.js";import{e as s,bk as a,bl as i,bm as n,bn as m,n as o}from"./index-D99LTaa7.js";import"./lodash-vendor-DIRPa7cU.js";import"./leaflet-vendor-Cu4zZue4.js";import"./ui-vendor-ByoYm48K.js";import"./markdown-vendor-DtAGkuPo.js";import"./math-vendor-JUchi9-2.js";import"./polyfills-RlNY0w59.js";import"./i18n-vendor-Cyfgqt0p.js";const d=({children:d,className:l})=>{const{userGeneralSetting:c}=s(),u=r.useRef(null),[f,p]=r.useState(""),[j,v]=r.useState(""),[h,g]=r.useState(0),x=a(d),y=i(c?.theme),b=r.useMemo(()=>n(y),[y,h]);return r.useEffect(()=>{if("system"===y)return m(()=>{g(e=>e+1)})},[y]),r.useEffect(()=>{if(!x||!u.current)return;(async()=>{try{const r=(await e(async()=>{const{default:e}=await import("./mermaid-vendor-B1M2OtO5.js").then(e=>e.h);return{default:e}},__vite__mapDeps([0,1,2,3]))).default,t=`mermaid-${Math.random().toString(36).substring(7)}`,s="default-dark"===b?"dark":"default";r.initialize({startOnLoad:!1,theme:s,securityLevel:"strict",fontFamily:"inherit"});const{svg:a}=await r.render(t,x),i=(e=>e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/\bon\w+\s*=/gi,""))(a);p(i),v("")}catch(r){v(r instanceof Error?r.message:"Failed to render diagram")}})()},[x,b]),j?t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"text-sm text-destructive mb-2",children:["Mermaid Error: ",j]}),t.jsx("pre",{className:l,children:t.jsx("code",{className:"language-mermaid",children:x})})]}):t.jsx("div",{ref:u,className:o("mermaid-diagram w-full flex justify-center items-center my-4 overflow-x-auto",l),dangerouslySetInnerHTML:{__html:f}})};export{d as MermaidBlock};
