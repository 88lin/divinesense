import{bg as t}from"./index-D99LTaa7.js";import"./react-vendor-LyyF-653.js";import"./ui-vendor-ByoYm48K.js";import"./leaflet-vendor-Cu4zZue4.js";import"./markdown-vendor-DtAGkuPo.js";import"./math-vendor-JUchi9-2.js";import"./mermaid-vendor-B1M2OtO5.js";import"./lodash-vendor-DIRPa7cU.js";import"./polyfills-RlNY0w59.js";import"./i18n-vendor-Cyfgqt0p.js";function e(t){try{const e=JSON.parse(t);if(e.type&&e.type.startsWith("ui_")){let t;try{t=JSON.parse(e.data)}catch{t=e.data}return{type:e.type,data:e.data,uiType:e.type,uiData:t}}return{type:e.type,data:e.data}}catch(e){return null}}async function*a(a,r="Asia/Shanghai",n){const o=await t.chatStream({message:a,userTimezone:r});for await(const t of o){if(t.event){const a=e(t.event);if(a){const t={type:a.type,data:a.data,uiType:a.uiType,uiData:a.uiData};n?.(t),yield t}}yield{type:t.event?"raw":"data",data:t.event||"",content:t.content,done:t.done}}}export{e as parseEvent,a as scheduleAgentChatStream};
