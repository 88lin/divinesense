# ==============================================================================
# DivineSense 生产环境配置 (单机 2C2G 部署)
# ==============================================================================
# 使用:
#   1. 复制: cp .env.prod.example .env.prod
#   2. 修改密码和 API Keys
#   3. 不要将 .env.prod 提交到 Git

# ==============================================================================
# [必填] 服务配置
# ==============================================================================

# 服务端口
DIVINESENSE_PORT=5230

# 时区
TZ=Asia/Shanghai

# 实例 URL (公网访问地址，用于 API 回调)
DIVINESENSE_INSTANCE_URL=http://your-server-ip:5230

# ==============================================================================
# [必填] PostgreSQL 配置
# ==============================================================================

POSTGRES_DB=divinesense
POSTGRES_USER=divinesense
POSTGRES_PASSWORD=your_secure_password

# 外部数据库连接 (可选，需要 pgAdmin/DataGrip 时开启)
# POSTGRES_PORT_MAPPING=127.0.0.1:25432:5432

# ==============================================================================
# [必填] AI 功能 - 推荐配置
# ==============================================================================
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 推荐方案: SiliconFlow + 智谱 Z.AI Claude                                   │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 获取 API Keys:                                                              │
# │   - SiliconFlow: https://cloud.siliconflow.cn/account/ak                   │
# │   - 智谱 Z.AI:   https://open.bigmodel.cn/usercenter/apikeys                 │
# └─────────────────────────────────────────────────────────────────────────────┘

DIVINESENSE_AI_ENABLED=true

# LLM 对话 (智谱 Z.AI 提供的 Claude，支持简化别名)
DIVINESENSE_AI_LLM_PROVIDER=anthropic
DIVINESENSE_AI_LLM_MODEL=opus
DIVINESENSE_AI_ANTHROPIC_API_KEY=sk-ant-your-key
DIVINESENSE_AI_ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic

# 向量 + 重排 (SiliconFlow)
DIVINESENSE_AI_EMBEDDING_PROVIDER=siliconflow
DIVINESENSE_AI_EMBEDDING_MODEL=BAAI/bge-m3
DIVINESENSE_AI_RERANK_MODEL=BAAI/bge-reranker-v2-m3
DIVINESENSE_AI_SILICONFLOW_API_KEY=sk-your-siliconflow-key

# ==============================================================================
# [可选] Geek Mode - Claude Code CLI 集成
# ==============================================================================
#
# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ Geek Mode 允许用户在聊天中调用 Claude Code CLI 处理通用任务                  │
# │                                                                             │
# │ 核心能力: 代码开发 • 系统运维 • 文件管理 • 数据维护 • 自动化               │
# │                                                                             │
# │ 前置条件:                                                                   │
# │   1. npm install -g @anthropic-ai/claude-code                               │
# │   2. npx @z_ai/coding-helper  (智谱适配，推荐)                              │
# │   3. claude --version  (验证安装)                                           │
# └─────────────────────────────────────────────────────────────────────────────┘

# 启用 Geek Mode
DIVINESENSE_CLAUDE_CODE_ENABLED=false

# 工作目录 (可选，默认: ~/.divinesense/claude)
# DIVINESENSE_CLAUDE_CODE_WORKDIR=/opt/divinesense/data

# 启用 Evolution Mode (进化模式 - 可修改项目源码)
DIVINESENSE_EVOLUTION_ENABLED=false

# Evolution Mode 仅限管理员
# DIVINESENSE_EVOLUTION_ADMIN_ONLY=true

# ==============================================================================
# [可选] AI 配置方案速查
# ==============================================================================

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 方案 A: SiliconFlow + Z.AI Claude [★ 默认推荐]                              │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 最佳组合：SiliconFlow 提供向量和重排，智谱 Z.AI 提供 Claude 服务             │
# │                                                                             │
# │ LLM:    opus (Claude Opus 4.6，最高能力)                                  │
# │ Embed:  BAAI/bge-m3                                                        │
# │ Rerank: BAAI/bge-reranker-v2-m3                                            │
# │                                                                             │
# │ 配置:                                                                       │
# │   DIVINESENSE_AI_LLM_PROVIDER=anthropic                                    │
# │   DIVINESENSE_AI_ANTHROPIC_API_KEY=sk-ant-xxx                              │
# │   DIVINESENSE_AI_LLM_MODEL=opus                                            │
# │   DIVINESENSE_AI_ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic  │
# │   DIVINESENSE_AI_EMBEDDING_PROVIDER=siliconflow                             │
# │   DIVINESENSE_AI_SILICONFLOW_API_KEY=sk-xxx                                │
# └─────────────────────────────────────────────────────────────────────────────┘

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 方案 B: SiliconFlow + DeepSeek                                             │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 成本最优，国内访问稳定                                                      │
# │                                                                             │
# │ LLM:    deepseek-chat                                                      │
# │ Embed:  BAAI/bge-m3                                                        │
# │ Rerank: BAAI/bge-reranker-v2-m3                                            │
# │                                                                             │
# │ 配置:                                                                       │
# │   DIVINESENSE_AI_LLM_PROVIDER=deepseek                                     │
# │   DIVINESENSE_AI_DEEPSEEK_API_KEY=sk-xxx                                   │
# │   DIVINESENSE_AI_EMBEDDING_PROVIDER=siliconflow                             │
# │   DIVINESENSE_AI_SILICONFLOW_API_KEY=sk-xxx                                │
# └─────────────────────────────────────────────────────────────────────────────┘

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 方案 C: 纯 SiliconFlow                                                    │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 单一供应商，管理简单                                                        │
# │                                                                             │
# │ LLM:    Qwen/Qwen2.5-72B-Instruct                                          │
# │ Embed:  BAAI/bge-m3                                                        │
# │ Rerank: BAAI/bge-reranker-v2-m3                                            │
# │                                                                             │
# │ 配置:                                                                       │
# │   DIVINESENSE_AI_LLM_PROVIDER=siliconflow                                  │
# │   DIVINESENSE_AI_LLM_MODEL=Qwen/Qwen2.5-72B-Instruct                       │
# │   DIVINESENSE_AI_SILICONFLOW_API_KEY=sk-xxx                                │
# └─────────────────────────────────────────────────────────────────────────────┘

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 方案 D: OpenAI 全家桶                                                      │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 海外用户，追求效果                                                          │
# │                                                                             │
# │ LLM:    gpt-4o                                                             │
# │ Embed:  text-embedding-3-small                                             │
# │ Rerank: (使用 SiliconFlow)                                                  │
# │                                                                             │
# │ 配置:                                                                       │
# │   DIVINESENSE_AI_LLM_PROVIDER=openai                                       │
# │   DIVINESENSE_AI_OPENAI_API_KEY=sk-xxx                                     │
# │   DIVINESENSE_AI_LLM_MODEL=gpt-4o                                          │
# │   DIVINESENSE_AI_EMBEDDING_PROVIDER=openai                                 │
# │   DIVINESENSE_AI_EMBEDDING_MODEL=text-embedding-3-small                    │
# └─────────────────────────────────────────────────────────────────────────────┘

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 方案 E: 本地 Ollama                                                       │
# │ ─────────────────────────────────────────────────────────────────────────── │
# │ 完全离线，数据私密                                                          │
# │                                                                             │
# │ LLM:    llama3.1                                                           │
# │ Embed:  nomic-embed-text                                                   │
# │ Rerank: (不支持)                                                            │
# │                                                                             │
# │ 配置:                                                                       │
# │   DIVINESENSE_AI_LLM_PROVIDER=ollama                                       │
# │   DIVINESENSE_AI_OLLAMA_BASE_URL=http://localhost:11434                    │
# │   DIVINESENSE_AI_LLM_MODEL=llama3.1                                        │
# │   DIVINESENSE_AI_EMBEDDING_PROVIDER=ollama                                 │
# │   DIVINESENSE_AI_EMBEDDING_MODEL=nomic-embed-text                           │
# └─────────────────────────────────────────────────────────────────────────────┘

# ==============================================================================
# [可选] Chat Apps 聊天应用集成
# ==============================================================================
#
# 用于加密存储 Telegram, WhatsApp, DingTalk 的访问令牌 (AES-256-GCM)
#
# ⚠️ 重要: 密钥长度必须严格为 32 字节
# 生成命令: openssl rand -base64 32 | cut -c1-32
#
# DIVINESENSE_CHAT_APPS_SECRET_KEY=change_me_to_a_random_32_byte_string

# WhatsApp 桥接服务地址 (可选)
# DIVINESENSE_WHATSAPP_BRIDGE_URL=http://localhost:3001

# ==============================================================================
# [可选] 附件处理
# ==============================================================================

# OCR 图片文字提取 (需安装 Tesseract)
# DIVINESENSE_OCR_ENABLED=true
# DIVINESENSE_OCR_LANGUAGES=chi_sim+eng

# 文档文本提取 (需部署 Apache Tika)
# DIVINESENSE_TEXTEXTRACT_ENABLED=true
# DIVINESENSE_TEXTEXTRACT_TIKA_URL=http://localhost:9998

# ==============================================================================
# [可选] Docker 镜像配置
# ==============================================================================

# DivineSense 镜像 (可选值)
# - 官方镜像: ghcr.io/hrygo/divinesense:latest
# - 自定义镜像: ghcr.io/hrygo/divinesense:custom
USER_IMAGE=ghcr.io/hrygo/divinesense:latest

# PostgreSQL 镜像 (默认 pgvector/pgvector:pg16)
# POSTGRES_IMAGE=pgvector/pgvector:pg16
