//go:build e2e_manual
// +build e2e_manual

package fixtures

import (
	"time"

	"github.com/hrygo/divinesense/store"
)

// Fixed time anchor for reproducible tests
// Base time: 2026-02-15 10:00:00 UTC
var (
	testBaseTime = time.Date(2026, 2, 15, 10, 0, 0, 0, time.UTC)
	testNow     = testBaseTime.Unix()
)

// ============================================================================
// Test User
// ============================================================================

// TestUser 测试用户数据
var TestUser = &store.User{
	ID:        1,
	Username:  "test_user",
	Nickname:  "Test User",
	Email:     "test@example.com",
	Role:      store.RoleUser,
	CreatedTs: testNow,
	UpdatedTs: testNow,
	RowStatus: store.Normal,
}

// ============================================================================
// Test Memos (50+ notes for comprehensive testing)
// ============================================================================

// TestMemos 测试笔记数据 - 完整覆盖各种搜索场景
var TestMemos = []*store.Memo{
	// Go 相关笔记 (10 条)
	{
		ID:         1,
		UID:        "e2e_memo_001",
		CreatorID:  1,
		Content:    "Go 语言学习笔记：今天学习了 Go 的并发编程，包括 goroutine 和 channel 的使用。goroutine 是轻量级线程，由 Go 运行时管理。channel 用于 goroutine 之间的通信和同步。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         2,
		UID:        "e2e_memo_002",
		CreatorID:  1,
		Content:    "Go 进阶：深入理解 Go 的调度器、GMP 模型和垃圾回收机制。G 代表 goroutine，M 代表线程，P 代表处理器，三者共同构成了 Go 的并发模型。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         3,
		UID:        "e2e_memo_003",
		CreatorID:  1,
		Content:    "Go 项目架构：DDD 领域驱动设计在 Go 项目中的实践。包括实体、值对象、聚合根、领域服务等概念的应用。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         4,
		UID:        "e2e_memo_004",
		CreatorID:  1,
		Content:    "Go 标准库学习：context 包的使用。context 用于在 API 边界之间传递截止时间、取消信号和其他请求范围的值。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         5,
		UID:        "e2e_memo_005",
		CreatorID:  1,
		Content:    "Go 测试：单元测试、集成测试和基准测试的编写。使用 testing 包和 testify 框架编写高质量测试。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         6,
		UID:        "e2e_memo_006",
		CreatorID:  1,
		Content:    "Go 性能优化：pprof 性能分析、内存分配优化、并发模式优化。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},
	{
		ID:         7,
		UID:        "e2e_memo_007",
		CreatorID:  1,
		Content:    "Go Web 开发：使用 Gin 框架构建 RESTful API。路由、中间件、参数绑定、响应封装。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 518400,
		UpdatedTs:  testNow - 518400,
		RowStatus:  store.Normal,
	},
	{
		ID:         8,
		UID:        "e2e_memo_008",
		CreatorID:  1,
		Content:    "Go gRPC：Protocol Buffers 和 gRPC 的使用。定义 .proto 文件，生成 Go 代码，双向流通信。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 604800,
		UpdatedTs:  testNow - 604800,
		RowStatus:  store.Normal,
	},
	{
		ID:         9,
		UID:        "e2e_memo_009",
		CreatorID:  1,
		Content:    "Go 数据库编程：使用 GORM 和 sqlx 操作数据库。连接池、事务、预编译语句。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 691200,
		UpdatedTs:  testNow - 691200,
		RowStatus:  store.Normal,
	},
	{
		ID:         10,
		UID:        "e2e_memo_010",
		CreatorID:  1,
		Content:    "Go 错误处理：使用 errors 包和 wrap 错误。自定义错误类型、错误检查模式。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 777600,
		UpdatedTs:  testNow - 777600,
		RowStatus:  store.Normal,
	},

	// Python 相关笔记 (10 条)
	{
		ID:         11,
		UID:        "e2e_memo_011",
		CreatorID:  1,
		Content:    "Python 入门指南：变量、数据类型、条件语句和循环的基础用法。Python 是动态类型语言，语法简洁优雅。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         12,
		UID:        "e2e_memo_012",
		CreatorID:  1,
		Content:    "Python 进阶：装饰器、生成器、上下文管理器的使用。装饰器是高阶函数，用于扩展函数功能。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         13,
		UID:        "e2e_memo_013",
		CreatorID:  1,
		Content:    "Python 数据分析：Pandas、NumPy、Matplotlib 使用笔记。数据处理、可视化、统计分析。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         14,
		UID:        "e2e_memo_014",
		CreatorID:  1,
		Content:    "Python Web 开发：Django 和 Flask 框架对比。Django 是全栈框架，Flask 是微框架。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         15,
		UID:        "e2e_memo_015",
		CreatorID:  1,
		Content:    "Python 异步编程：asyncio 模块的使用。async/await 语法、事件循环、协程。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         16,
		UID:        "e2e_memo_016",
		CreatorID:  1,
		Content:    "Python 类型提示：typing 模块的使用。泛型、Protocol、TypeVar。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},
	{
		ID:         17,
		UID:        "e2e_memo_017",
		CreatorID:  1,
		Content:    "Python 单元测试：pytest 框架的使用。fixture、parametrize、mock。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 518400,
		UpdatedTs:  testNow - 518400,
		RowStatus:  store.Normal,
	},
	{
		ID:         18,
		UID:        "e2e_memo_018",
		CreatorID:  1,
		Content:    "Python 机器学习：scikit-learn 入门。分类、回归、聚类算法。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 604800,
		UpdatedTs:  testNow - 604800,
		RowStatus:  store.Normal,
	},
	{
		ID:         19,
		UID:        "e2e_memo_019",
		CreatorID:  1,
		Content:    "Python 爬虫：Scrapy 框架使用。爬取网页、解析内容、存储数据。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 691200,
		UpdatedTs:  testNow - 691200,
		RowStatus:  store.Normal,
	},
	{
		ID:         20,
		UID:        "e2e_memo_020",
		CreatorID:  1,
		Content:    "Python 面试题整理：常见编程题和算法题解法。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 777600,
		UpdatedTs:  testNow - 777600,
		RowStatus:  store.Normal,
	},

	// 会议纪要 (8 条)
	{
		ID:         21,
		UID:        "e2e_memo_021",
		CreatorID:  1,
		Content:    "会议纪要：Q1 规划会议，讨论了产品路线图和技术债务。会议确定了 Q1 的三个主要目标：性能优化、新功能开发、代码重构。",
		Visibility: store.Private,
		Pinned:     true,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         22,
		UID:        "e2e_memo_022",
		CreatorID:  1,
		Content:    "项目会议：Sprint 3 评审会议纪要，总结本周完成的工作和下週计划。本周完成了用户认证模块、搜索功能优化。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         23,
		UID:        "e2e_memo_023",
		CreatorID:  1,
		Content:    "团队例会：关于代码审查规范的讨论，最终确定了审查清单。包括命名规范、注释要求、测试覆盖率要求。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         24,
		UID:        "e2e_memo_024",
		CreatorID:  1,
		Content:    "技术评审会：微服务架构方案评审。讨论了服务拆分、API 设计、熔断降级策略。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         25,
		UID:        "e2e_memo_025",
		CreatorID:  1,
		Content:    "产品需求会：讨论了下个版本的功能需求。用户反馈集中在性能、用户体验两个方面。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         26,
		UID:        "e2e_memo_026",
		CreatorID:  1,
		Content:    "设计评审会：数据库 schema 优化方案。讨论了索引设计、分表策略、缓存方案。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},
	{
		ID:         27,
		UID:        "e2e_memo_027",
		CreatorID:  1,
		Content:    "运维会议：监控告警和故障复盘。总结了最近一次线上故障的原因和改进措施。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 518400,
		UpdatedTs:  testNow - 518400,
		RowStatus:  store.Normal,
	},
	{
		ID:         28,
		UID:        "e2e_memo_028",
		CreatorID:  1,
		Content:    "项目启动会：新项目 Kickoff 会议。确定了项目目标、人员分工、时间计划。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 604800,
		UpdatedTs:  testNow - 604800,
		RowStatus:  store.Normal,
	},

	// 读书笔记 (6 条)
	{
		ID:         29,
		UID:        "e2e_memo_029",
		CreatorID:  1,
		Content:    "《代码整洁之道》读书笔记：代码可读性的重要性及实践方法。命名规范、函数设计、注释技巧。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         30,
		UID:        "e2e_memo_030",
		CreatorID:  1,
		Content:    "《架构整洁之道》笔记：分层架构、依赖倒置原则的理解。整洁架构的四个层次：实体、用例、接口适配器、框架驱动。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         31,
		UID:        "e2e_memo_031",
		CreatorID:  1,
		Content:    "《人月神话》笔记：软件项目管理的心得体会。没有银弹、 Brooks 法则、原型设计的重要性。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         32,
		UID:        "e2e_memo_032",
		CreatorID:  1,
		Content:    "《设计模式》笔记：GOF 23 种设计模式。创建型、结构型、行为型模式的应用场景。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         33,
		UID:        "e2e_memo_033",
		CreatorID:  1,
		Content:    "《深入理解计算机系统》笔记：程序的机器级表示、处理器架构、优化程序性能。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         34,
		UID:        "e2e_memo_034",
		CreatorID:  1,
		Content:    "《算法导论》笔记：排序、搜索、图算法。复杂度分析、算法设计技巧。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},

	// 学习笔记 (10 条)
	{
		ID:         35,
		UID:        "e2e_memo_035",
		CreatorID:  1,
		Content:    "学习笔记：HTTP 协议详解，包括请求方法、状态码、缓存机制。GET、POST、PUT、DELETE 方法的使用场景。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         36,
		UID:        "e2e_memo_036",
		CreatorID:  1,
		Content:    "学习笔记：Git 工作流最佳实践，Gitflow vs Trunk-based。分支策略、代码审查、合并冲突处理。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         37,
		UID:        "e2e_memo_037",
		CreatorID:  1,
		Content:    "学习笔记：Docker 容器化技术，镜像构建和网络配置。Dockerfile 最佳实践、Compose 编排。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         38,
		UID:        "e2e_memo_038",
		CreatorID:  1,
		Content:    "学习笔记：Kubernetes 入门。Pod、Deployment、Service、ConfigMap 的使用。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         39,
		UID:        "e2e_memo_039",
		CreatorID:  1,
		Content:    "学习笔记：Redis 缓存策略。缓存穿透、缓存击穿、缓存雪崩的解决方案。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         40,
		UID:        "e2e_memo_040",
		CreatorID:  1,
		Content:    "学习笔记：消息队列 Kafka。分区、消费者组、Exactly-Once 语义。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},
	{
		ID:         41,
		UID:        "e2e_memo_041",
		CreatorID:  1,
		Content:    "学习笔记：微服务架构。服务注册与发现、负载均衡、熔断降级、链路追踪。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 518400,
		UpdatedTs:  testNow - 518400,
		RowStatus:  store.Normal,
	},
	{
		ID:         42,
		UID:        "e2e_memo_042",
		CreatorID:  1,
		Content:    "学习笔记：OAuth 2.0 授权流程。授权码模式、隐式模式、客户端凭证模式。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 604800,
		UpdatedTs:  testNow - 604800,
		RowStatus:  store.Normal,
	},
	{
		ID:         43,
		UID:        "e2e_memo_043",
		CreatorID:  1,
		Content:    "学习笔记：PostgreSQL 高级特性。JSONB、数组类型、窗口函数、CTE。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 691200,
		UpdatedTs:  testNow - 691200,
		RowStatus:  store.Normal,
	},
	{
		ID:         44,
		UID:        "e2e_memo_044",
		CreatorID:  1,
		Content:    "学习笔记：Elasticsearch 全文搜索。倒排索引、分词器、聚合查询。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 777600,
		UpdatedTs:  testNow - 777600,
		RowStatus:  store.Normal,
	},

	// 工作相关 (8 条)
	{
		ID:         45,
		UID:        "e2e_memo_045",
		CreatorID:  1,
		Content:    "工作日志：本周完成了用户认证模块的重构，优化了登录流程。引入 JWT 令牌，安全性提升。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         46,
		UID:        "e2e_memo_046",
		CreatorID:  1,
		Content:    "TODO：处理线上工单 #1234，用户反馈登录失败问题。定位到是 Token 过期时间配置错误。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
	{
		ID:         47,
		UID:        "e2e_memo_047",
		CreatorID:  1,
		Content:    "项目文档：API 接口文档 v2.0，包含所有新增接口。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 172800,
		UpdatedTs:  testNow - 172800,
		RowStatus:  store.Normal,
	},
	{
		ID:         48,
		UID:        "e2e_memo_048",
		CreatorID:  1,
		Content:    "技术方案：搜索功能优化方案。使用 Elasticsearch 替代数据库模糊查询，响应时间从 500ms 降至 50ms。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 259200,
		UpdatedTs:  testNow - 259200,
		RowStatus:  store.Normal,
	},
	{
		ID:         49,
		UID:        "e2e_memo_049",
		CreatorID:  1,
		Content:    "性能分析报告：API 性能优化。热点接口分析、数据库慢查询优化、缓存命中率提升。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 345600,
		UpdatedTs:  testNow - 345600,
		RowStatus:  store.Normal,
	},
	{
		ID:         50,
		UID:        "e2e_memo_050",
		CreatorID:  1,
		Content:    "架构设计：实时消息推送系统设计。使用 WebSocket 长连接，配合 Redis 发布订阅。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 432000,
		UpdatedTs:  testNow - 432000,
		RowStatus:  store.Normal,
	},
	{
		ID:         51,
		UID:        "e2e_memo_051",
		CreatorID:  1,
		Content:    "代码审查记录：PR #456 代码审查。提出了 5 个改进建议，已全部采纳。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 518400,
		UpdatedTs:  testNow - 518400,
		RowStatus:  store.Normal,
	},
	{
		ID:         52,
		UID:        "e2e_memo_052",
		CreatorID:  1,
		Content:    "故障复盘：上周服务宕机原因分析。数据库连接池耗尽，已调整配置参数。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 604800,
		UpdatedTs:  testNow - 604800,
		RowStatus:  store.Normal,
	},

	// 边界测试用例 (2 条)
	{
		ID:         53,
		UID:        "e2e_memo_053",
		CreatorID:  1,
		Content:    "短内容：A",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow,
		UpdatedTs:  testNow,
		RowStatus:  store.Normal,
	},
	{
		ID:         54,
		UID:        "e2e_memo_054",
		CreatorID:  1,
		Content:    "中等长度内容：这是一个包含多个关键词的测试笔记，用于验证搜索功能的各种场景。关键词包括：测试、搜索、功能、验证、场景等。",
		Visibility: store.Private,
		Pinned:     false,
		CreatedTs:  testNow - 86400,
		UpdatedTs:  testNow - 86400,
		RowStatus:  store.Normal,
	},
}

// ============================================================================
// Test Schedules (30+ schedules for comprehensive testing)
// ============================================================================

// TestSchedules 测试日程数据
// Note: 今日 = 2026-02-15, 明日 = 2026-02-16, 本周 = 2026-02-15 ~ 2026-02-21
var TestSchedules = []*store.Schedule{
	// 今日日程 (2026-02-15)
	{
		ID:          1,
		UID:         "e2e_sched_001",
		CreatorID:   1,
		Title:       "团队周会",
		Description: "每周例会，讨论本周进展",
		Location:    "会议室A",
		StartTs:     testBaseTime.Add(1 * time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(2 * time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          2,
		UID:         "e2e_sched_002",
		CreatorID:   1,
		Title:       "代码审查",
		Description: "Review PR #123",
		Location:    "线上",
		StartTs:     testBaseTime.Add(3 * time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(4 * time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:        3,
		UID:       "e2e_sched_003",
		CreatorID: 1,
		Title:     "专注工作时间",
		StartTs:   testBaseTime.Unix(),
		EndTs:     nil,
		AllDay:    true,
		Timezone:  "Asia/Shanghai",
		RowStatus: store.Normal,
		CreatedTs: testNow,
		UpdatedTs: testNow,
	},

	// 明日日程 (2026-02-16)
	{
		ID:          4,
		UID:         "e2e_sched_004",
		CreatorID:   1,
		Title:       "项目评审",
		Description: "Q2 项目规划评审",
		Location:    "会议室B",
		StartTs:     testBaseTime.Add(24*time.Hour + 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(24*time.Hour + 2*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          5,
		UID:         "e2e_sched_005",
		CreatorID:   1,
		Title:       "客户演示",
		Description: "产品演示会议",
		Location:    "线上",
		StartTs:     testBaseTime.Add(24*time.Hour + 3*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(24*time.Hour + 4*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          6,
		UID:         "e2e_sched_006",
		CreatorID:   1,
		Title:       "技术调研",
		Description: "调研新技术选型",
		StartTs:     testBaseTime.Add(24*time.Hour + 5*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(24*time.Hour + 6*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          7,
		UID:         "e2e_sched_007",
		CreatorID:   1,
		Title:       "每日站会",
		Description: "Sprint 每日同步",
		Location:    "线上",
		StartTs:     testBaseTime.Add(1 * time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(90 * time.Minute).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},

	// 本周其他日程 (2026-02-17 ~ 2026-02-21)
	{
		ID:          8,
		UID:         "e2e_sched_008",
		CreatorID:   1,
		Title:       "技术分享",
		Description: "Go 并发编程实践",
		Location:    "会议室C",
		StartTs:     testBaseTime.Add(3*24*time.Hour + 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(3*24*time.Hour + 2*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          9,
		UID:         "e2e_sched_009",
		CreatorID:   1,
		Title:       "一对一沟通",
		Description: "与产品经理同步需求",
		Location:    "办公室",
		StartTs:     testBaseTime.Add(4*24*time.Hour + 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(4*24*time.Hour + 2*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          10,
		UID:         "e2e_sched_010",
		CreatorID:   1,
		Title:       "Sprint 规划会",
		Description: "Sprint 4 计划会议",
		Location:    "会议室A",
		StartTs:     testBaseTime.Add(5*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(5*24*time.Hour + 4*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          11,
		UID:         "e2e_sched_011",
		CreatorID:   1,
		Title:       "Bug 评审",
		Description: "线上问题评审",
		Location:    "线上",
		StartTs:     testBaseTime.Add(3*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(3*24*time.Hour + 30*time.Minute).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          12,
		UID:         "e2e_sched_012",
		CreatorID:   1,
		Title:       "UI 设计评审",
		Description: "新功能界面评审",
		Location:    "会议室B",
		StartTs:     testBaseTime.Add(4*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(4*24*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          13,
		UID:         "e2e_sched_013",
		CreatorID:   1,
		Title:       "数据库维护",
		Description: "数据库备份和优化",
		StartTs:     testBaseTime.Add(6*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(6*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},

	// 下周日程 (2026-02-22 ~ 2026-02-28)
	{
		ID:          14,
		UID:         "e2e_sched_014",
		CreatorID:   1,
		Title:       "Sprint 启动会",
		Description: "Sprint 4 启动",
		Location:    "会议室A",
		StartTs:     testBaseTime.Add(7*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(7*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          15,
		UID:         "e2e_sched_015",
		CreatorID:   1,
		Title:       "性能测试",
		Description: "新版本性能测试",
		StartTs:     testBaseTime.Add(8*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(8*24*time.Hour + 4*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          16,
		UID:         "e2e_sched_016",
		CreatorID:   1,
		Title:       "发布评审",
		Description: "版本发布评审会议",
		Location:    "会议室B",
		StartTs:     testBaseTime.Add(9*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(9*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          17,
		UID:         "e2e_sched_017",
		CreatorID:   1,
		Title:       "外部培训",
		Description: "新技术培训",
		Location:    "线上",
		StartTs:     testBaseTime.Add(10*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(10*24*time.Hour + 4*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          18,
		UID:         "e2e_sched_018",
		CreatorID:   1,
		Title:       "架构设计会",
		Description: "新模块架构设计",
		Location:    "会议室C",
		StartTs:     testBaseTime.Add(11*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(11*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          19,
		UID:         "e2e_sched_019",
		CreatorID:   1,
		Title:       "安全审计",
		Description: "代码安全审计",
		StartTs:     testBaseTime.Add(12*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(12*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          20,
		UID:         "e2e_sched_020",
		CreatorID:   1,
		Title:       "技术交流",
		Description: "与外部团队技术交流",
		Location:    "线上",
		StartTs:     testBaseTime.Add(13*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(13*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          21,
		UID:         "e2e_sched_021",
		CreatorID:   1,
		Title:       "Sprint 回顾会",
		Description: "Sprint 3 回顾",
		Location:    "会议室A",
		StartTs:     testBaseTime.Add(14*24*time.Hour + 2*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(14*24*time.Hour + 3*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},

	// 更多分散日程 (用于测试空闲时间查找)
	{
		ID:          22,
		UID:         "e2e_sched_022",
		CreatorID:   1,
		Title:       "临时会议",
		Description: "紧急问题讨论",
		Location:    "线上",
		StartTs:     testBaseTime.Add(24*time.Hour + 30*time.Minute).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(24*time.Hour + 1*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          23,
		UID:         "e2e_sched_023",
		CreatorID:   1,
		Title:       "面试",
		Description: "技术面试",
		Location:    "会议室B",
		StartTs:     testBaseTime.Add(5*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(5*24*time.Hour + 1*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          24,
		UID:         "e2e_sched_024",
		CreatorID:   1,
		Title:       "文档评审",
		Description: "技术文档评审",
		StartTs:     testBaseTime.Add(6*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(6*24*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          25,
		UID:         "e2e_sched_025",
		CreatorID:   1,
		Title:       "客户支持",
		Description: "客户问题支持",
		Location:    "线上",
		StartTs:     testBaseTime.Add(7*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(7*24*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          26,
		UID:         "e2e_sched_026",
		CreatorID:   1,
		Title:       "内部培训",
		Description: "新员工培训",
		Location:    "会议室C",
		StartTs:     testBaseTime.Add(8*24*time.Hour - 1*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(8*24*time.Hour + 1*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},

	// 跨天日程 (用于测试冲突检测)
	{
		ID:          27,
		UID:         "e2e_sched_027",
		CreatorID:   1,
		Title:       "长会议",
		Description: "跨天战略会议",
		Location:    "会议室A",
		StartTs:     testBaseTime.Add(1 * time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(24*time.Hour + 1*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
	{
		ID:          28,
		UID:         "e2e_sched_028",
		CreatorID:   1,
		Title:       "全天研讨会",
		Description: "技术研讨会",
		Location:    "会议中心",
		StartTs:     testBaseTime.Add(7*24*time.Hour).Unix(),
		EndTs:       pointerInt64(testBaseTime.Add(8*24*time.Hour).Unix()),
		AllDay:      false,
		Timezone:    "Asia/Shanghai",
		RowStatus:   store.Normal,
		CreatedTs:   testNow,
		UpdatedTs:   testNow,
	},
}

// TestMemoTags 测试标签数据
var TestMemoTags = []struct {
	MemoID      int
	Tag         string
	Confidence  float32
	Source      string
}{
	// Go 标签
	{1, "go", 1.0, "user"},
	{2, "go", 1.0, "user"},
	{3, "go", 1.0, "user"},
	{4, "go", 1.0, "user"},
	{5, "go", 1.0, "user"},
	{6, "go", 1.0, "user"},
	{7, "go", 1.0, "user"},
	{8, "go", 1.0, "user"},
	{9, "go", 1.0, "user"},
	{10, "go", 1.0, "user"},

	// Python 标签
	{11, "python", 1.0, "user"},
	{12, "python", 1.0, "user"},
	{13, "python", 1.0, "user"},
	{14, "python", 1.0, "user"},
	{15, "python", 1.0, "user"},
	{16, "python", 1.0, "user"},
	{17, "python", 1.0, "user"},
	{18, "python", 1.0, "user"},
	{19, "python", 1.0, "user"},
	{20, "python", 1.0, "user"},

	// 编程/代码标签
	{1, "编程", 1.0, "user"},
	{2, "编程", 1.0, "user"},
	{5, "编程", 1.0, "user"},
	{6, "编程", 1.0, "user"},
	{11, "编程", 1.0, "user"},
	{12, "编程", 1.0, "user"},
	{35, "编程", 1.0, "user"},
	{36, "编程", 1.0, "user"},

	// 会议标签
	{21, "会议", 1.0, "user"},
	{22, "会议", 1.0, "user"},
	{23, "会议", 1.0, "user"},
	{24, "会议", 1.0, "user"},
	{25, "会议", 1.0, "user"},
	{26, "会议", 1.0, "user"},
	{27, "会议", 1.0, "user"},
	{28, "会议", 1.0, "user"},

	// 学习标签
	{29, "学习", 1.0, "user"},
	{30, "学习", 1.0, "user"},
	{31, "学习", 1.0, "user"},
	{32, "学习", 1.0, "user"},
	{33, "学习", 1.0, "user"},
	{34, "学习", 1.0, "user"},
	{35, "学习", 1.0, "user"},
	{36, "学习", 1.0, "user"},
	{37, "学习", 1.0, "user"},
	{38, "学习", 1.0, "user"},

	// 工作标签
	{45, "工作", 1.0, "user"},
	{46, "工作", 1.0, "user"},
	{47, "工作", 1.0, "user"},
	{48, "工作", 1.0, "user"},
	{49, "工作", 1.0, "user"},
	{50, "工作", 1.0, "user"},
	{51, "工作", 1.0, "user"},
	{52, "工作", 1.0, "user"},

	// 技术标签
	{3, "技术", 1.0, "user"},
	{24, "技术", 1.0, "user"},
	{37, "技术", 1.0, "user"},
	{38, "技术", 1.0, "user"},
	{39, "技术", 1.0, "user"},
	{40, "技术", 1.0, "user"},
	{41, "技术", 1.0, "user"},
	{42, "技术", 1.0, "user"},
	{43, "技术", 1.0, "user"},
	{44, "技术", 1.0, "user"},
}

// ============================================================================
// Helper Functions
// ============================================================================

// pointerInt64 returns a pointer to the given int64 value.
func pointerInt64(v int64) *int64 {
	return &v
}

// GetMemoByTag returns memos that have the specified tag
func GetMemoByTag(tag string) []*store.Memo {
	var result []*store.Memo
	tagToMemoID := make(map[int]bool)

	for _, t := range TestMemoTags {
		if t.Tag == tag {
			tagToMemoID[t.MemoID] = true
		}
	}

	for _, memo := range TestMemos {
		if tagToMemoID[int(memo.ID)] {
			result = append(result, memo)
		}
	}

	return result
}

// GetTodaySchedules returns schedules for today
func GetTodaySchedules() []*store.Schedule {
	todayStart := testBaseTime.Unix()
	todayEnd := testBaseTime.Add(24 * time.Hour).Unix()

	var result []*store.Schedule
	for _, sched := range TestSchedules {
		if sched.StartTs >= todayStart && sched.StartTs < todayEnd {
			result = append(result, sched)
		}
	}

	return result
}
