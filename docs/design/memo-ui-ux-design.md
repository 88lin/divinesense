# Memo UI/UX 设计规范

> DivineSense 第二大脑核心体验设计 — 编辑、浏览、评论一体化
>
> **设计理念**: 智能便签 · 无缝流转 · 有温度的交互

---

## 1. 设计哲学

### 1.1 核心概念

```
「神识」= 你的第二大脑
     ↓
Memo = 思维的便签纸
     ↓
编辑·浏览·评论 = 思维的完整生命周期
```

### 1.2 设计原则

| 原则 | 描述 | 实现方式 |
|:-----|:-----|:---------|
| **无摩擦输入** | 想到即记录，0 延迟启动 | 底部固定编辑器 + 快捷键 |
| **渐进式披露** | 信息分层，按需展示 | 折叠/展开 + 智能预览 |
| **直觉化操作** | 所见即所得，无说明书 | 手势操作 + 双击编辑 |
| **优雅的反馈** | 每个操作都有回应 | 微动效 + 状态提示 |
| **AI 增强不干扰** | 助手隐于无形 | 上下文建议 + 静默辅助 |

### 1.3 视觉语言

```
┌─────────────────────────────────────────────────────────┐
│  色彩: OKLCH 色彩空间，6 色便签系统                        │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐             │
│  │琥珀│ │玫瑰│ │天蓝│ │祖母│ │紫罗│ │橙色│             │
│  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘             │
│                                                         │
│  字体: 系统原生 + 思源黑体 (中文)                          │
│  圆角: 0.5rem (8px) 柔和统一                             │
│  阴影: 分层阴影，便签纸质质感                              │
└─────────────────────────────────────────────────────────┘
```

---

## 2. Memo 编辑体验

### 2.1 编辑入口矩阵

| 入口 | 触发方式 | 场景 | 优先级 |
|:-----|:---------|:-----|:-------|
| 固定编辑器 | 底部 Always-visible | 新建 Memo | ⭐⭐⭐ |
| 斜杠命令 | `/` 触发 | 快速插入 | ⭐⭐⭐ |
| 双击编辑 | 双击 Memo 内容 | 快速修改 | ⭐⭐ |
| 悬浮编辑器 | 选中文字 → 浮动工具栏 | 局部编辑 | ⭐ |
| 快捷键 | `Cmd/Ctrl + N` | 键盘用户 | ⭐⭐ |

### 2.2 编辑器界面设计

```
┌─────────────────────────────────────────────────────────┐
│                    Memo Editor V2                        │
├─────────────────────────────────────────────────────────┤
│  ┌─ 工具栏 (可选展开) ────────────────────────────────┐  │
│  │ B  I  S  ≡  •  1.  []  #  @  |  🖼  🔗          │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 内容区域 ─────────────────────────────────────────┐ │
│  │                                                     │ │
│  │  今天的学习笔记...                                  │ │
│  │                                                     │ │
│  │  #想法 这个概念很有趣                               │ │
│  │  - [ ] 整理成文章                                   │ │
│  │  - [x] 分享给同事                                   │ │
│  │                                                     │ │
│  │  ┌─────────────────────────────────┐               │ │
│  │  │ 💡 AI 建议: 检测到任务列表        │               │ │
│  │  │    是否添加截止日期？             │               │ │
│  │  │    [添加] [忽略]                 │               │ │
│  │  └─────────────────────────────────┘               │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  ┌─ 底部操作栏 ────────────────────────────────────────┐ │
│  │ 🏷 #想法  #学习                    128字 │ [保存] │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 斜杠命令菜单

```typescript
// 斜杠命令设计
const slashCommands = [
  { trigger: '/', category: 'formatting', items: [
    { icon: 'H1', label: '标题 1', shortcut: '# ' },
    { icon: 'H2', label: '标题 2', shortcut: '## ' },
    { icon: 'B',  label: '粗体',   shortcut: '****' },
    { icon: 'I',  label: '斜体',   shortcut: '**' },
    { icon: 'S',  label: '删除线', shortcut: '~~~~' },
  ]},
  { trigger: '/', category: 'structure', items: [
    { icon: '•',  label: '无序列表', shortcut: '- ' },
    { icon: '1.', label: '有序列表', shortcut: '1. ' },
    { icon: '☐',  label: '任务列表', shortcut: '- [ ] ' },
    { icon: '>',  label: '引用',     shortcut: '> ' },
    { icon: '—',  label: '分割线',   shortcut: '---' },
    { icon: '📋', label: '代码块',   shortcut: '```' },
  ]},
  { trigger: '/', category: 'insert', items: [
    { icon: '🖼️', label: '图片',      action: 'uploadImage' },
    { icon: '🔗', label: '链接',      shortcut: '[](url)' },
    { icon: '📊', label: '表格',      shortcut: '| | |' },
    { icon: '📅', label: '日期时间',  action: 'insertDate' },
  ]},
  { trigger: '/', category: 'ai', items: [
    { icon: '✨', label: 'AI 续写',    action: 'aiContinue' },
    { icon: '📝', label: 'AI 总结',    action: 'aiSummarize' },
    { icon: '🌐', label: 'AI 翻译',    action: 'aiTranslate' },
    { icon: '🔧', label: 'AI 润色',    action: 'aiPolish' },
  ]},
];
```

### 2.4 编辑模式动画

```css
/* 编辑器出现动画 */
@keyframes editorSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 光标闪烁动画 */
@keyframes cursorBlink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* 保存成功动画 */
@keyframes saveSuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
```

---

## 3. Memo 浏览体验

### 3.1 MemoBlock V4 设计

```
┌─────────────────────────────────────────────────────────┐
│                      MemoBlock V4                        │
│                    「智能便签 2.0」                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 折叠状态 ─────────────────────────────────────────┐ │
│  │                                                     │ │
│  │  ┌──┐  今天学习了 Go 的并发模式...           [▽]   │ │
│  │  │📌│  2小时前 · 公开                            │ │
│  │  └──┘                                              │ │
│  │  ══════════════════════════════════════════════   │ │
│  │  [编辑] [复制] [全屏] [归档] [删除]               │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  ┌─ 展开状态 ─────────────────────────────────────────┐ │
│  │                                                     │ │
│  │  ┌──┐  今天学习了 Go 的并发模式，特别是           │ │
│  │  │📌│  Goroutine 和 Channel 的使用方式。         │ │
│  │  └──┘                                              │ │
│  │        ┌──────────────────────────────────────┐    │ │
│  │        │ #学习 #Go #并发                       │    │ │
│  │        │                                       │    │ │
│  │        │ Goroutine 是轻量级线程...             │    │ │
│  │        │                                       │    │ │
│  │        │ - [x] 学习基础概念                    │    │ │
│  │        │ - [ ] 实践练习                        │    │ │
│  │        │                                       │    │ │
│  │        │ ```go                                 │    │ │
│  │        │ go func() { ... }()                   │    │ │
│  │        │ ```                                   │    │ │
│  │        └──────────────────────────────────────┘    │ │
│  │                                                     │ │
│  │  ─────────────────────────────────────────────────  │ │
│  │  2小时前 · 公开 · 128字                [△ 收起]   │ │
│  │  [编辑] [复制] [全屏] [归档] [删除]               │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  ┌─ 全屏/阅读模式 ─────────────────────────────────────┐ │
│  │                                                     │ │
│  │  ┌─────────────────────────────────────────────┐   │ │
│  │  │  [×]                            用户名 · 2h  │   │
│  │  ├─────────────────────────────────────────────┤   │ │
│  │  │                                             │   │ │
│  │  │     今天学习了 Go 的并发模式                  │   │ │
│  │  │                                             │   │ │
│  │  │     Goroutine 是轻量级线程，由 Go 运行时     │   │ │
│  │  │     管理。Channel 是用于 Goroutine 之间      │   │ │
│  │  │     通信的管道...                            │   │ │
│  │  │                                             │   │ │
│  │  │     ┌──────────────────────────────┐        │   │ │
│  │  │     │ go func() {                  │        │   │ │
│  │  │     │   fmt.Println("Hello")       │        │   │ │
│  │  │     │ }()                          │        │   │ │
│  │  │     └──────────────────────────────┘        │   │ │
│  │  │                                             │   │ │
│  │  │     - [x] 学习基础概念                       │   │ │
│  │  │     - [ ] 实践练习                           │   │ │
│  │  │                                             │   │ │
│  │  │     #学习 #Go #并发                          │   │ │
│  │  │                                             │   │ │
│  │  └─────────────────────────────────────────────┘   │ │
│  │                                                     │ │
│  │  ← 下滑或点击背景退出                               │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 手势交互

```
┌─────────────────────────────────────────────────────────┐
│                    手势交互规范                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 滑动手势 ───────────────────────────────────────┐  │
│  │                                                   │  │
│  │   ←←←←  左滑归档        右滑删除  →→→→           │  │
│  │                                                   │  │
│  │   ┌─────────────┐    ┌─────────────┐            │  │
│  │   │  📦 归档    │    │  🗑️ 删除   │            │  │
│  │   └─────────────┘    └─────────────┘            │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 长按手势 ───────────────────────────────────────┐  │
│  │                                                   │  │
│  │   长按 0.5s → 快捷操作菜单弹出                    │  │
│  │                                                   │  │
│  │   ┌─────────────┐                                │  │
│  │   │ 📌 置顶     │                                │  │
│  │   │ 📋 复制     │                                │  │
│  │   │ 📤 分享     │                                │  │
│  │   │ 📦 归档     │                                │  │
│  │   │ 🗑️ 删除    │                                │  │
│  │   └─────────────┘                                │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 双击手势 ───────────────────────────────────────┐  │
│  │                                                   │  │
│  │   双击内容区 → 进入编辑模式                       │  │
│  │   双击标题区 → 进入全屏阅读                       │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 下拉手势 (全屏模式) ────────────────────────────┐  │
│  │                                                   │  │
│  │   在全屏模式下，从顶部下拉 → 退出全屏             │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 列表视图设计

```
┌─────────────────────────────────────────────────────────┐
│                    Memo 列表视图                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 筛选器 ──────────────────────────────────────────┐  │
│  │ [全部] [已置顶] [有任务] [有标签]  🔍 搜索        │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 时间分组 (可选) ─────────────────────────────────┐  │
│  │                                                   │  │
│  │  ── 今天 ───────────────────────────────────────  │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │ 📌 早上站会笔记...                10:30      │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │    中午看书心得...                14:20      │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  │  ── 昨天 ───────────────────────────────────────  │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │    周报要点整理...                           │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 瀑布流视图 (可选，适合图片多的 Memo) ────────────┐  │
│  │                                                   │  │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐          │  │
│  │  │  📷     │  │ 文字    │  │  📷     │          │  │
│  │  │ 图片    │  │ 笔记    │  │ 图片    │          │  │
│  │  │ Memo    │  │ ...     │  │ Memo    │          │  │
│  │  │         │  │         │  │         │          │  │
│  │  └─────────┘  └─────────┘  └─────────┘          │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. Memo 评论体验

### 4.1 评论界面设计

```
┌─────────────────────────────────────────────────────────┐
│                    评论系统设计                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 评论入口 (Memo 详情页) ──────────────────────────┐  │
│  │                                                   │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │ 原始 Memo 内容                               │ │  │
│  │  │ ...                                         │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  │  ───────────────────────────────────────────────  │  │
│  │                                                   │  │
│  │  💬 评论 (3)                      [+ 写评论]     │  │
│  │                                                   │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │ 👤 张三 · 2小时前                           │ │  │
│  │  │                                             │ │  │
│  │  │ 这个观点很有意思，我之前也想过类似的问题...  │ │  │
│  │  │                                             │ │  │
│  │  │            💛 3  ·  回复                    │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │ 👤 李四 · 1小时前                           │ │  │
│  │  │                                             │ │  │
│  │  │ 同意！补充一点...                           │ │  │
│  │  │                                             │ │  │
│  │  │            💛 1  ·  回复                    │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 评论编辑器 ──────────────────────────────────────┐  │
│  │                                                   │  │
│  │  ┌─────────────────────────────────────────────┐ │  │
│  │  │ 写下你的想法...                             │ │  │
│  │  │                                             │ │  │
│  │  │                                             │ │  │
│  │  └─────────────────────────────────────────────┘ │  │
│  │                                                   │  │
│  │  [表情] [图片]           [取消]  [发表评论]     │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 评论通知设计

```
┌─────────────────────────────────────────────────────────┐
│                    评论通知设计                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 通知卡片 (收件箱) ───────────────────────────────┐  │
│  │                                                   │  │
│  │  ┌──┐                                            │  │
│  │  │👤│ 张三 评论了你的 Memo                       │  │
│  │  └──┘                                            │  │
│  │                                                   │  │
│  │  ┌───────────────────────────────────────────┐  │  │
│  │  │ 💬 "这个观点很有意思..."                   │  │  │
│  │  └───────────────────────────────────────────┘  │  │
│  │                                                   │  │
│  │  原文: 今天学习了 Go 的并发模式...               │  │
│  │                                                   │  │
│  │                        2小时前    [✓ 已读]       │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 未读指示器 ──────────────────────────────────────┐  │
│  │                                                   │  │
│  │  ┌───────────────────────────────────────────┐  │  │
│  │  │ ▌  未读评论通知                            │  │  │
│  │  │ ▌  ...                                    │  │  │
│  │  └───────────────────────────────────────────┘  │  │
│  │                                                   │  │
│  │  左侧蓝色竖条表示未读状态                        │  │
│  │                                                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 嵌套评论设计 (未来)

```
┌─────────────────────────────────────────────────────────┐
│                    嵌套评论 (V2)                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  👤 张三 · 2小时前                                      │
│  这个观点很有意思！                                     │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 👤 李四 · 1小时前 (回复 张三)                    │   │
│  │ 是的，我也这么觉得                              │   │
│  │ ┌───────────────────────────────────────────┐  │   │
│  │ │ 👤 王五 · 30分钟前 (回复 李四)             │  │   │
│  │ │ 补充一点...                                │  │   │
│  │ └───────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                         │
│  💬 回复                                                │
│                                                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. 动效规范

### 5.1 过渡动画

| 交互 | 动画 | 时长 | 缓动函数 |
|:-----|:-----|:-----|:---------|
| 折叠/展开 | 高度变化 | 200ms | ease-out |
| 进入全屏 | scale + fade | 250ms | ease-in-out |
| 退出全屏 | scale + fade | 200ms | ease-in |
| 滑动操作 | translate | 150ms | ease-out |
| 保存成功 | pulse | 300ms | ease-in-out |
| 加载状态 | shimmer | 1.5s | linear (循环) |

### 5.2 微交互

```css
/* 按钮悬停 */
.memo-action-btn {
  transition: all 150ms ease;
}
.memo-action-btn:hover {
  transform: scale(1.05);
  background: rgba(0, 0, 0, 0.05);
}

/* 便签悬停 */
.memo-block {
  transition: box-shadow 200ms ease, transform 200ms ease;
}
.memo-block:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

/* 任务完成动画 */
@keyframes taskComplete {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.task-checkbox:checked {
  animation: taskComplete 300ms ease;
}
```

---

## 6. 响应式设计

### 6.1 断点系统

| 断点 | 宽度 | 布局 |
|:-----|:-----|:-----|
| xs | < 640px | 单列，底部编辑器 |
| sm | 640px+ | 单列，侧边栏可折叠 |
| md | 768px+ | 双列，固定侧边栏 |
| lg | 1024px+ | 三列，详情页侧边栏 |
| xl | 1280px+ | 三列，更宽松间距 |

### 6.2 移动端适配

```
┌───────────────────────┐
│      移动端布局        │
├───────────────────────┤
│                       │
│  ┌─────────────────┐  │
│  │ 顶部导航栏      │  │
│  │ [≡]  神识  [🔍] │  │
│  └─────────────────┘  │
│                       │
│  ┌─────────────────┐  │
│  │                 │  │
│  │   Memo 列表     │  │
│  │                 │  │
│  │  ┌───────────┐  │  │
│  │  │ Memo 1    │  │  │
│  │  └───────────┘  │  │
│  │  ┌───────────┐  │  │
│  │  │ Memo 2    │  │  │
│  │  └───────────┘  │  │
│  │                 │  │
│  └─────────────────┘  │
│                       │
│  ┌─────────────────┐  │
│  │ 固定编辑器      │  │
│  │ [有什么想法?]   │  │
│  └─────────────────┘  │
│                       │
└───────────────────────┘
```

---

## 7. 无障碍设计

### 7.1 键盘导航

| 快捷键 | 功能 |
|:-------|:-----|
| `Tab` | 在可交互元素间移动 |
| `Enter` | 激活/确认 |
| `Escape` | 关闭/取消 |
| `Cmd/Ctrl + N` | 新建 Memo |
| `Cmd/Ctrl + S` | 保存 |
| `Cmd/Ctrl + /` | 打开斜杠命令 |
| `↑ ↓` | 在列表中导航 |

### 7.2 屏幕阅读器支持

```html
<!-- Memo 卡片无障碍 -->
<article
  role="article"
  aria-label="Memo by 用户名"
  tabindex="0"
>
  <button aria-label="展开内容">
    <ChevronDown aria-hidden="true" />
  </button>
</article>
```

### 7.3 颜色对比度

- 所有文本与背景对比度 ≥ 4.5:1
- 重要操作按钮对比度 ≥ 3:1
- 确保色盲用户可通过形状/图标区分状态

---

## 8. 实施路线图

### Phase 1: 基础增强 (Week 1-2)
- [ ] MemoBlock V4 便签样式优化
- [ ] 全屏阅读模式增强
- [ ] 手势操作完善

### Phase 2: 编辑器升级 (Week 3-4)
- [ ] 斜杠命令菜单重构
- [ ] AI 辅助写作集成
- [ ] 工具栏可选展开

### Phase 3: 评论系统 (Week 5-6)
- [ ] 评论界面重新设计
- [ ] 评论通知优化
- [ ] 嵌套评论支持

### Phase 4: 动效打磨 (Week 7-8)
- [ ] 微交互动效实现
- [ ] 过渡动画优化
- [ ] 加载状态设计

---

*本文档随产品设计迭代持续更新*
