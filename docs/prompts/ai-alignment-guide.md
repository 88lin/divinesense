# AI Alignment Guide —— 与 AI 对齐语言的实战手册

> **定位**：DivineSense 调试实战——与 AI 高效协同的进阶技巧

在 DivineSense 这种复杂的 AI 驱动系统中，特别是非前端领域的工程师在调试前端问题时，最大的挑战往往不是「如何修复」，而是「如何与 AI 达成语言对齐」。

本方案总结了一套「对齐语言、零信息差、高效闭环」的调试技巧。

---

## 技巧 1：建立「视觉对齐」黄金标准

**痛点**：截图圈选描述模糊，AI 难以理解组件嵌套深度。

**方案**：要求 AI 以 ASCII 字符图形绘制完整页面框架，并在后续对话中以此为「地图」发号施令。

### 推荐 Prompt

```
请以字符图形绘制 AIChat 页面的完整组件框架，包含嵌套关系，以便我们对齐术语。
```

### 效果示例

```
┌─────────────────────────────────────────────────────┐
│              DivineSense AI Chat 界面架构             │
└─────────────────────────────────────────────────────┘
AIChat.tsx (主页面)
├── UnifiedChatView (统一对话视图)
│   ├── ChatHeader (桌面端头部 [ModeSwitcher, CapabilityStatus])
│   ├── SessionBar (会话汇总栏 [Cost, Tokens, Duration])
│   ├── ChatMessages (消息流)
│   │   └── UnifiedMessageBlock[] (消息块数组)
│   │       ├── BlockHeader (头像、徽章、分支、统计)
│   │       ├── BlockBody (折叠部分：思考过程、工具调用、AI 回复)
│   │       └── BlockFooter (操作按钮：Fork、Regenerate、Delete)
│   └── ChatInput (输入区 [Toolbar, TextArea])
```

**价值**：一旦 AI 绘制出这个图，你就拥有了「共同语言」。你可以说：「把 BlockHeader 里的分支指示器挪到 BlockFooter」，AI 的理解准确率将达到 99% 以上。

---

## 技巧 2：采用「记录员模式」收集问题

**痛点**：发现一个问题改一个，容易打断 AI 的逻辑链，导致旧功能回退（Regression）。

**方案**：在分析前，先让 AI 充当记录员，收集所有已知的表现和痛点。

### 推荐 Prompt

```
现在请作为我的秘书，理解并分条记录我描述的所有问题。
在我发出「分析并给出方案」指令前，仅做记录和归类，不要立即开始修复。
```

### 交互示例

```
❯ 记录 #1：ChatHeader 实际不需要 ModeSwitcher，因为它在 ChatInput 里已存在。
❯ 记录 #2：PC 端 SessionBar 过宽，应整合进 ChatHeader 以节省空间。
...
❯ 分析以上问题，结合本项目架构和最佳实践给出深度调研报告及实施方案。
```

---

## 技巧 3：使用「深度调研」指令突破思维瓶颈

**痛点**：AI 处理复杂逻辑时倾向于给出一个「看起来可行」但经不起推敲的简单方案。

**方案**：使用特定修饰词，强制 AI 启动更高强度的链路思考。

### 关键词库

| 关键词                   | 作用                                                                |
| :----------------------- | :------------------------------------------------------------------ |
| **「深入调研」**         | 要求 AI 检查所有引用路径                                            |
| **「结合项目最佳实践」** | 强制 AI 参考 CLAUDE.md 和现有代码风格                               |
| **「联网深入分析」**     | 对于第三方库（如 Tailwind v4, Biome）的特定陷阱，要求其检索最新文档 |

---

## 技巧 4：闭环执行与「小步快跑」

**痛点**：一次性修改 20 个文件，报错后难以定位是哪个点改错了。

**方案**：要求 AI 按优先级分批实施，且每完成一个 P0/P1 节点就进行一次提交。

### 推荐的工作流

1. **优先级分层**：要求 AI 将方案按 P0（紧急修复）、P1（优化）、P2（视觉）排序。

2. **单步实施**：
   ```
   现在开始实施 P0 任务。完成后先运行 make check-all 验证，通过后立即提交代码，描述为 fix(ui): ... 。
   ```

3. **强制检查**：利用 `make check-all` 作为交付准则，不通过不进入下一步。

---

## 总结

| 原则                 | 实践                                           |
| :------------------- | :--------------------------------------------- |
| **图胜过表**         | 用 ASCII 图对齐 UI 结构                        |
| **批处理优于原子化** | 先记录所有问题，再统一分析，最后分步执行       |
| **频繁提交**         | 在 Evolution Mode 下，Git 记录是你唯一的后悔药 |
