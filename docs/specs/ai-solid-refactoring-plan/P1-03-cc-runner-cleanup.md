# P1-03: cc_runner.go æ¡¥æ¥å±‚æ¸…ç†

> **é˜¶æ®µ**: Phase 1 â€” æ¸…ç†æ¡¥æ¥å±‚ & DRY æ²»ç†  
> **åŸåˆ™**: SRP (å•ä¸€èŒè´£)  
> **é£é™©**: ğŸŸ¢ ä½  
> **é¢„è®¡å·¥ä½œé‡**: 1 å¤©  
> **å‰ç½®ä¾èµ–**: æ— 

## èƒŒæ™¯

`ai/agents/cc_runner.go` åŒ…å« **20+ ç±»å‹åˆ«å** å’Œ **8 ä¸ªå‡½æ•°åˆ«å**ï¼Œå…¨éƒ¨æŒ‡å‘ `agents/runner` åŒ…ï¼Œæ€»è®¡ ~250 è¡Œé›¶ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚è¿™æ˜¯å†å²é‡æ„é—ç•™çš„å…¼å®¹å±‚ï¼Œå¢åŠ è®¤çŸ¥è´Ÿæ‹…ä¸”æ— å®é™…åŠŸèƒ½ã€‚

## ç›®æ ‡

å°†æ‰€æœ‰å¤–éƒ¨å¯¹ `agent.XXX`ï¼ˆå®é™…ä¸º runner ç±»å‹çš„åˆ«åï¼‰çš„å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ `runner.XXX`ï¼Œç„¶ååˆ é™¤ `cc_runner.go`ã€‚

## æ¶‰åŠæ–‡ä»¶

| æ“ä½œ   | æ–‡ä»¶                                         |
| :----- | :------------------------------------------- |
| DELETE | `ai/agents/cc_runner.go`                     |
| MODIFY | æ‰€æœ‰é€šè¿‡ `agent.` å‰ç¼€å¼•ç”¨ runner ç±»å‹çš„æ–‡ä»¶ |

## æ”¹é€ æ­¥éª¤

1. **å…¨é‡æ‰«æ**å¼•ç”¨ï¼š`grep -r "agent\.CCRunner\|agent\.NewCCRunner\|agent\.RunnerConfig\|agent\.SessionManager\|agent\.DangerDetector\|agent\.TruncateString" --include="*.go" .`
2. **é€æ–‡ä»¶æ›¿æ¢**ï¼šå°† `agent.CCRunner` â†’ `runner.CCRunner` ç­‰ï¼ŒåŒæ­¥æ›´æ–° import
3. **åˆ é™¤** `cc_runner.go`
4. **ç¼–è¯‘éªŒè¯**

## éªŒæ”¶æ¡ä»¶

- [ ] `ai/agents/cc_runner.go` æ–‡ä»¶å·²åˆ é™¤
- [ ] ä»£ç åº“ä¸­æ— ä»»ä½•æ–‡ä»¶é€šè¿‡ `agent.` å‰ç¼€å¼•ç”¨ runner åŒ…ä¸­çš„ç±»å‹
- [ ] `go build ./...` ç¼–è¯‘é€šè¿‡
- [ ] `go test ./ai/... -count=1` å…¨éƒ¨é€šè¿‡
- [ ] `go vet ./ai/...` æ— è­¦å‘Š

## æ³¨æ„äº‹é¡¹

- æ­¤æ–‡ä»¶ä¸­çš„æ‰€æœ‰å®šä¹‰å‡æ ‡è®°ä¸º `Deprecated`ï¼Œåˆ é™¤æ˜¯å®‰å…¨çš„
- è‹¥æœ‰å¤–éƒ¨åŒ…ï¼ˆé `ai/` å­æ ‘ï¼‰å¼•ç”¨è¿™äº›åˆ«åï¼Œéœ€åŒæ­¥æ›´æ–°
