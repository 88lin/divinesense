# æ­»ä»£ç åˆ†ææŠ¥å‘Š

> **ç”Ÿæˆæ—¥æœŸ**: 2026-02-13
> **åˆ†æå·¥å…·**: deadcode + å¤šç»´åº¦äººå·¥éªŒè¯
> **æ€»è®¡æ‰«æ**: 845 ä¸ªæ­»å‡½æ•°
> **ç»éªŒè¯**: çœŸæ­£å¯åˆ é™¤ ~500 è¡Œï¼Œå‡é˜³æ€§ ~350 ä¸ª

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

| åˆ†ç±» | æ•°é‡ | è¯´æ˜ |
|:-----|:-----|:-----|
| âœ… **ç¡®è®¤å¯åˆ é™¤** | ~500 è¡Œ | é‡æ„é—ç•™ã€åºŸå¼ƒå®ç° |
| âŒ **å‡é˜³æ€§ï¼ˆæ¥å£å®ç°ï¼‰** | ~100 ä¸ª | é€šè¿‡æ¥å£é—´æ¥è°ƒç”¨ |
| ğŸ”µ **é¢„ç•™åŸºç¡€è®¾æ–½** | ~200 ä¸ª | ç¼“å­˜ã€æŒ‡æ ‡ã€è°ƒåº¦å™¨ |
| ğŸŸ¡ **éœ€è¦è®¨è®º** | ~50 ä¸ª | è¿‡æ¸¡æœŸå…¼å®¹å±‚ |

---

## 1ï¸âƒ£ ç¡®è®¤å¯åˆ é™¤çš„ä»£ç 

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³åˆ é™¤ï¼‰

| æ–‡ä»¶ | èŒƒå›´ | è¡Œæ•° | åˆ é™¤ç†ç”± |
|:-----|:-----|:-----|:---------|
| `ai/agents/llm_intent_classifier.go` | æ•´ä¸ªæ–‡ä»¶ | 278 | **å®Œå…¨æœªä½¿ç”¨**ï¼Œè¢« `routing.FastRouter` æ›¿ä»£ |
| `ai/agents/cache.go` | æ•´ä¸ªæ–‡ä»¶ | 290 | è¢« `ai/cache/lru.go` æ³›å‹ç‰ˆæœ¬æ›¿ä»£ |
| `ai/agents/base_tool.go:155-221` | ToolRegistry ç»“æ„ä½“ | 66 | è¢« `registry/tool_registry.go` å…¨å±€æ³¨å†Œè¡¨æ›¿ä»£ |
| `ai/agents/base_tool.go:223-250` | ToolResult + NewToolResult | 27 | ä»æœªè¢«ä½¿ç”¨ |

**åˆ é™¤å‘½ä»¤**ï¼š
```bash
# å¯å®‰å…¨åˆ é™¤çš„æ–‡ä»¶
rm ai/agents/llm_intent_classifier.go
rm ai/agents/cache.go

# éœ€è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼ˆåˆ é™¤éƒ¨åˆ†ä»£ç ï¼‰
# ai/agents/base_tool.go: åˆ é™¤ ToolRegistry å’Œ ToolResult ç›¸å…³ä»£ç 
```

**é¢„è®¡èŠ‚çœ**: ~660 è¡Œä»£ç 

---

### ä¸­ä¼˜å…ˆçº§ï¼ˆéœ€ç¡®è®¤ååˆ é™¤ï¼‰

| æ–‡ä»¶ | å‡½æ•°/ç±»å‹ | ç–‘é—®ç‚¹ |
|:-----|:----------|:-------|
| `ai/agents/intent_classifier.go` | IntentClassifier, TaskIntent | åŠŸèƒ½å®Œæ•´ä½†åªåœ¨æ­»ä»£ç  `llm_intent_classifier.go` ä¸­ä½¿ç”¨ã€‚ç¡®è®¤æ— å…¶ä»–ä½¿ç”¨è®¡åˆ’åå¯åˆ é™¤ï¼ˆ~250è¡Œï¼‰ |

---

### ä½ä¼˜å…ˆçº§ï¼ˆæ¸è¿›å¼è¿ç§»ï¼‰

| æ–‡ä»¶ | å‡½æ•° | è¯´æ˜ |
|:-----|:-----|:-----|
| `ai/llm.go:53-80` | SystemPrompt, UserMessage, AssistantMessage, FormatMessages | **Deprecated å…¼å®¹å±‚**ï¼Œé‡å®šå‘åˆ° `ai/core/llm/`ã€‚éœ€è¦ç­‰ TitleGenerator è¿ç§»ååˆ é™¤ |

---

## 2ï¸âƒ£ ç¡®è®¤å‡é˜³æ€§ï¼ˆå¿…é¡»ä¿ç•™ï¼‰

### æ¥å£å®ç°ç±»ï¼ˆdeadcode è¯¯æŠ¥ï¼‰

| æ–‡ä»¶ | æ–¹æ³• | å®ç°çš„æ¥å£ | ä½¿ç”¨ä½ç½® |
|:-----|:-----|:-----------|:---------|
| `ai/agents/base_tool.go:97-99` | BaseTool.Name() | agent.Tool | UniversalParrot, ToolAdapter |
| `ai/agents/base_tool.go:103-105` | BaseTool.Description() | agent.Tool | UniversalParrot, ToolAdapter |
| `ai/agents/base_tool.go:109-135` | BaseTool.Run() | agent.Tool | UniversalParrot, ToolAdapter |
| `ai/agents/registry/tool_registry.go` | å…¨éƒ¨æ–¹æ³• | é€šè¿‡å…¨å±€å˜é‡é—´æ¥ä½¿ç”¨ | å¹¿æ³›ä½¿ç”¨ |

**åŸå› **: deadcode æ— æ³•è¯†åˆ«æ¥å£æ–¹æ³•çš„é—´æ¥è°ƒç”¨

---

## 3ï¸âƒ£ é¢„ç•™åŸºç¡€è®¾æ–½ï¼ˆå»ºè®®ä¿ç•™ï¼‰

### ç¼“å­˜æ¨¡å—ï¼ˆè®¾è®¡è‰¯å¥½ï¼Œæœ‰æ˜ç¡®ç”¨é€”ï¼‰

| æ–‡ä»¶ | è¯´æ˜ | ä¿ç•™ç†ç”± |
|:-----|:-----|:---------|
| `ai/agents/tools/cache.go` | ToolResultCache | Issue #92 æ ‡æ³¨ï¼Œå®Œæ•´æµ‹è¯•è¦†ç›– |
| `ai/cache/semantic.go` | SemanticCache | Issue #91 æ ‡æ³¨ï¼Œè¯­ä¹‰åŒ¹é…ç¼“å­˜ |
| `ai/cache/lru.go` | æ³›å‹ LRU ç¼“å­˜ | **æ­£åœ¨ä½¿ç”¨**: routing, universal_parrot |
| `store/cache/tiered.go` | ä¸‰å±‚ç¼“å­˜ | è®¾è®¡è‰¯å¥½ï¼Œé¢„ç•™ç”¨äºé«˜æ€§èƒ½åœºæ™¯ |
| `store/cache/redis.go` | Redis ç¼“å­˜ | å¯é€‰æ‰©å±•ï¼Œä¼˜é›…é™çº§è®¾è®¡ |

### æŒ‡æ ‡ä¸ç›‘æ§

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|:-----|:-----|:-----|
| `ai/observability/metrics/prometheus.go` | Prometheus æŒ‡æ ‡ | ä»…æµ‹è¯•ä½¿ç”¨ï¼Œé¢„ç•™ç”Ÿäº§ç›‘æ§ |

### é”™è¯¯å¤„ç†

| æ–‡ä»¶ | è¯´æ˜ | ä¿ç•™ç†ç”± |
|:-----|:-----|:---------|
| `ai/agents/error_class.go` | é”™è¯¯åˆ†ç±»ç³»ç»Ÿ | å®Œæ•´è®¾è®¡ï¼Œæœªæ¥æ™ºèƒ½é‡è¯•åŸºç¡€ |
| `ai/agents/recovery.go` | é”™è¯¯æ¢å¤æœºåˆ¶ | å®Œæ•´æµ‹è¯•ï¼ˆ331è¡Œï¼‰ï¼Œå¥å£®æ€§å¢å¼º |

---

## 4ï¸âƒ£ éœ€è¦è®¨è®º

| æ–‡ä»¶/ç›®å½• | è¯´æ˜ | å»ºè®®æ“ä½œ |
|:----------|:-----|:---------|
| `plugin/cron/` (13ä¸ªæ–‡ä»¶, ~600è¡Œ) | Cron è°ƒåº¦å™¨å®Œæ•´å®ç° | **æ— ä»»ä½•å¼•ç”¨**ã€‚å»ºè®®ï¼š1) å¦‚éœ€ä¿ç•™ï¼Œæ”¹ä¸ºå¤–éƒ¨ä¾èµ– `robfig/cron/v3`ï¼›2) å¦‚æ— è®¡åˆ’ï¼Œåˆ é™¤æ•´ä¸ªç›®å½• |
| `ai/observability/metrics/prometheus.go` (~460è¡Œ) | Prometheus æŒ‡æ ‡ | ä»…æµ‹è¯•ä½¿ç”¨ã€‚ç¡®è®¤ç›‘æ§é›†æˆè®¡åˆ’åå†³å®š |

---

## 5ï¸âƒ£ æ‰§è¡Œè®¡åˆ’

### Phase 1: ç«‹å³åˆ é™¤ï¼ˆæ— é£é™©ï¼‰
```bash
# 1. åˆ é™¤åºŸå¼ƒæ–‡ä»¶
git rm ai/agents/llm_intent_classifier.go
git rm ai/agents/cache.go

# 2. æ¸…ç† base_tool.go ä¸­çš„æ­»ä»£ç 
# æ‰‹åŠ¨åˆ é™¤ ToolRegistry å’Œ ToolResult ç›¸å…³ä»£ç ï¼ˆ155-250è¡Œï¼‰

# 3. è¿è¡Œæµ‹è¯•éªŒè¯
make test
```

### Phase 2: ç¡®è®¤ååˆ é™¤
```bash
# ç¡®è®¤ intent_classifier.go æ— å…¶ä»–ä½¿ç”¨è®¡åˆ’å
git rm ai/agents/intent_classifier.go
```

### Phase 3: æ¸è¿›å¼è¿ç§»
```bash
# 1. è¿ç§» TitleGenerator åˆ°ä½¿ç”¨ llm.Service
# 2. åˆ é™¤ ai/llm.go å…¼å®¹å±‚
```

---

## ğŸ“ˆ æ¸…ç†æ”¶ç›Šé¢„ä¼°

| é˜¶æ®µ | åˆ é™¤ä»£ç  | å‡å°‘ç»´æŠ¤è´Ÿæ‹… |
|:-----|:---------|:-------------|
| Phase 1 | ~660 è¡Œ | æ¶ˆé™¤æ··æ·†çš„é‡å¤å®ç° |
| Phase 2 | ~250 è¡Œ | ç»Ÿä¸€æ„å›¾åˆ†ç±»åˆ° FastRouter |
| Phase 3 | ~100 è¡Œ | æ¸…ç† Deprecated å…¼å®¹å±‚ |
| **æ€»è®¡** | **~1010 è¡Œ** | ä»£ç åº“æ›´æ¸…æ™° |

---

## âš ï¸ é£é™©æç¤º

1. **plugin/cron/** åˆ é™¤å‰éœ€ç¡®è®¤æ— å®šæ—¶ä»»åŠ¡è®¡åˆ’
2. **ai/llm.go** å…¼å®¹å±‚åˆ é™¤éœ€å…ˆè¿ç§» TitleGenerator
3. æ‰€æœ‰åˆ é™¤æ“ä½œå»ºè®®åˆ›å»ºç‹¬ç«‹ PRï¼Œä¾¿äºå›æ»š

---

*æŠ¥å‘Šç”± Agent Team å¹¶è¡Œåˆ†æç”Ÿæˆ*
*Analysts: interface-analyst, infra-analyst, util-analyst*
