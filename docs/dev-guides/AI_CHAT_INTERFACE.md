# AI Chat ç•Œé¢æ¶æ„

> **ä¿é²œçŠ¶æ€**: âœ… å·²éªŒè¯ (2026-02-06) | **æœ€åæ£€æŸ¥**: v0.93.1 (Unified Block Model + UI æ”¹è¿›)
> **å…³è”è§„æ ¼**: [Unified Block Model](../specs/unified-block-model.md) | [P1-A006](../specs/block-design/llm-stats-collection.md)

## æ¦‚è¿°

AI Chat ç•Œé¢é‡‡ç”¨ **Unified Block Modelï¼ˆç»Ÿä¸€å—æ¨¡å‹ï¼‰** è®¾è®¡ï¼Œå°†ç”¨æˆ·è¾“å…¥ä¸ AI å›å¤å°è£…ä¸ºä¸€ä¸ªå®Œæ•´çš„å¯æŠ˜å  Blockã€‚æ¯ä¸ª Block åŒ…å«å®Œæ•´çš„å¯¹è¯ä¸Šä¸‹æ–‡ã€Token ç»Ÿè®¡ã€æˆæœ¬è¿½è¸ªå’Œåˆ†æ”¯ä¿¡æ¯ã€‚

## v0.93.1 æ›´æ–°å†…å®¹

- **BranchIndicator å‹å¥½ç¼–å·**: å†…éƒ¨è·¯å¾„ "0/1/2" è½¬æ¢ä¸º "A.2.3" æ˜¾ç¤º
- **SessionStats æŒä¹…åŒ–**: åˆ·æ–°åä» Block.sessionStats è‡ªåŠ¨æ¢å¤
- **SessionBar æ•´åˆ**: PC ç«¯ SessionStats æ•´åˆåˆ° ChatHeaderï¼Œç§»åŠ¨ç«¯ä¿ç•™ç‹¬ç«‹ SessionBar
- **Mode å·®å¼‚åŒ–å±•ç¤º**: Normal (Tokens/Cost)ã€Geek (Time/Tools)ã€Evolution (Time/Files)

---

## ç»„ä»¶çº§æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DivineSense AI Chat ç•Œé¢æ¶æ„ (v0.93.0)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AIChat.tsx (/chat)
â”‚
â”œâ”€â”€ UnifiedChatView (ä¸»è§†å›¾)
â”‚   â”‚
â”‚   â”œâ”€â”€ ChatHeader (æ¡Œé¢ç«¯ - lg:breakpoint)
â”‚   â”‚   â”œâ”€â”€ AnimatedAvatar (å¤´åƒ + æ€è€ƒåŠ¨ç”»)
â”‚   â”‚   â”œâ”€â”€ ActionDescription (çŠ¶æ€æ–‡æœ¬)
â”‚   â”‚   â”œâ”€â”€ HeaderSessionStats (ä¼šè¯ç»Ÿè®¡)
â”‚   â”‚   â””â”€â”€ ImmersiveToggle (å…¨å±åˆ‡æ¢)
â”‚   â”‚
â”‚   â”œâ”€â”€ SessionBar (ç§»åŠ¨ç«¯ - lg:hidden)
â”‚   â”‚   â”œâ”€â”€ CollapseToggle (æŠ˜å /å±•å¼€)
â”‚   â”‚   â””â”€â”€ StatsDisplay (Cost/Tokens/Duration)
â”‚   â”‚
â”‚   â”œâ”€â”€ ChatMessages (æ¶ˆæ¯æµ - æ ¸å¿ƒå®¹å™¨)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ PartnerGreeting (ç©ºçŠ¶æ€æ¬¢è¿ç•Œé¢)
â”‚   â”‚   â”‚   â”œâ”€â”€ AnimatedAvatar (å¤§å¤´åƒ)
â”‚   â”‚   â”‚   â”œâ”€â”€ GreetingText (æ—¶é—´æ„ŸçŸ¥é—®å€™)
â”‚   â”‚   â”‚   â””â”€â”€ SuggestedPrompts (2x4 ç¤ºä¾‹é—®é¢˜ç½‘æ ¼)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ UnifiedMessageBlock[] (æ¶ˆæ¯å—æ•°ç»„)
â”‚   â”‚   â”‚   â”œâ”€â”€ BlockHeader (ç”¨æˆ·æ¶ˆæ¯é¢„è§ˆ + æ—¶é—´ + çŠ¶æ€)
â”‚   â”‚   â”‚   â”œâ”€â”€ BlockBody (Timeline å¸ƒå±€ - å¯æŠ˜å )
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserInputsSection (å¤šè¾“å…¥å±•ç¤º)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ThinkingSection (æ€è€ƒè¿‡ç¨‹)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolCallsSection (å·¥å…·è°ƒç”¨å¡ç‰‡)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AnswerSection (Markdown å†…å®¹)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorSection (é”™è¯¯å±•ç¤º)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BlockSummarySection (ä¼šè¯ç»Ÿè®¡)
â”‚   â”‚   â”‚   â””â”€â”€ BlockFooter (æ“ä½œæ )
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ AmazingInsightCard (ç»¼åˆæ¨¡å¼ä¸“å±)
â”‚   â”‚   â””â”€â”€ BlockEditDialog (ç¼–è¾‘å¼¹çª—)
â”‚   â”‚
â”‚   â””â”€â”€ ChatInput (è¾“å…¥åŒº)
â”‚       â”œâ”€â”€ Toolbar (æ–°å¯¹è¯/æ¸…ç©º/æ¸…ä¸Šä¸‹æ–‡ + å¿«æ·é”®æç¤º)
â”‚       â”œâ”€â”€ ModeCycleButton (æ¨¡å¼åˆ‡æ¢)
â”‚       â””â”€â”€ TextArea + SendButton (è‡ªé€‚åº”é«˜åº¦)
â”‚
â”œâ”€â”€ CapabilityPanelView (é¹¦é¹‰é€‰æ‹©é¢æ¿ - æ¡ä»¶æ¸²æŸ“)
â”‚   â”œâ”€â”€ MobileSubHeader (è¿”å›æŒ‰é’®)
â”‚   â””â”€â”€ ParrotHub (ç°ç°/æ—¶å·§/æŠ˜è¡·/æå®¢/è¿›åŒ– å¡ç‰‡)
â”‚
â””â”€â”€ ConfirmDialog (æ¸…ç©ºèŠå¤©ç¡®è®¤)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å“åº”å¼æ–­ç‚¹                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

           â”‚   sm(640px)   â”‚   md(768px)   â”‚   lg(1024px)  â”‚   xl(1280px)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ChatHeader    éšè—          éšè—           æ˜¾ç¤º           æ˜¾ç¤º
SessionBar    æ˜¾ç¤º          æ˜¾ç¤º           éšè—           éšè—
MessageWidth 100%           100%           max-w-3xl       max-w-4xl

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Block ä¸»é¢˜é…ç½®                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NORMAL (MEMO/SCHEDULE/AMAZING)        GEEK (Claude Code)       EVOLUTION (ç³»ç»Ÿè¿›åŒ–)
â”œâ”€â”€ border: amber-200/700            â”œâ”€â”€ border: sky-200/700       â”œâ”€â”€ border: emerald-200/700
â”œâ”€â”€ headerBg: amber-50/900/20        â”œâ”€â”€ headerBg: sky-50/900/20    â”œâ”€â”€ headerBg: emerald-50/900/20
â”œâ”€â”€ footerBg: amber-200/800/50       â”œâ”€â”€ footerBg: sky-200/800/50   â”œâ”€â”€ footerBg: emerald-200/800/50
â””â”€â”€ ringColor: amber-500/20          â””â”€â”€ ringColor: sky-500/20      â””â”€â”€ ringColor: emerald-500/20
```

---

## UnifiedMessageBlock è¯¦è§£

UnifiedMessageBlock æ˜¯ AI Chat çš„æ ¸å¿ƒæ¶ˆæ¯å®¹å™¨ï¼Œé‡‡ç”¨ **Warp Block** é£æ ¼è®¾è®¡ã€‚

### ç»“æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UnifiedMessageBlock ç»„ä»¶ç»“æ„                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  UnifiedMessageBlock (memo) - å¯æŠ˜å æ¶ˆæ¯å—                                    â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘  â”‚
â”‚  â•‘  â”‚  BlockHeader (å›ºå®š - ç‚¹å‡»åˆ‡æ¢æŠ˜å )                                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚ Left                 â”‚ Right                                    â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚ ğŸ‘¤ UserAvatar       â”‚ ğŸ“Š ModeSummary (Desktop/Mobile å·®å¼‚)      â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚    [+N Badge]        â”‚   Normal: Tokens + Cost                   â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚ ğŸ“ InputPreview     â”‚   Geek: Time + Tools                      â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚    (è§†è§‰å®½åº¦æˆªå–)    â”‚   Evolution: Time + Files                  â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ â° Timestamp                             â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ ğŸ·ï¸ ParrotBadge (NORMAL/GEEK/EVOLUTION) â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ ğŸŒ¿ BranchIndicator ("A.2" æˆ– "3 branches")â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ â–¼ CollapseToggle                          â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘  â”‚
â”‚  â•‘  â”‚  BlockBody (å¯æŠ˜å  - Timeline å¸ƒå±€)                                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚  Timeline Line (absolute left-[11px]) - è¿æ¥å„äº‹ä»¶èŠ‚ç‚¹        â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  Timeline Nodes (æŒ‰äº‹ä»¶é¡ºåºæ’åˆ—):                                   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  1ï¸âƒ£ UserInputsSection                                                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Node: blue-100 User Icon                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ InputCard[] (å¤šè¾“å…¥å±•ç¤ºï¼Œå¸¦åºå·)                             â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ ExpandButton (é•¿å†…å®¹è‡ªåŠ¨æŠ˜å )                                â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  2ï¸âƒ£ ThinkingSection (æ¡ä»¶æ¸²æŸ“)                                          â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Node: Brain Icon / Loader2 (animated)                       â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Toggle Button (foldable)                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ ReactMarkdown Content (prose-xs)                             â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  3ï¸âƒ£ ToolCallsSection (æ¡ä»¶æ¸²æŸ“)                                         â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  Node: Wrench Icon / Loader2 (purple, animated)            â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  ToolCallCard[]                                               â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  â”œâ”€â”€ ToolName + Status (running/done/error/pending)      â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  â”œâ”€â”€ Duration (font-mono)                                   â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  â”œâ”€â”€ InputSummary (truncate)                                â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚  â””â”€â”€ OutputSummary (details - å¯å±•å¼€)                        â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”‚      â””â”€â”€ isError: çº¢è‰²èƒŒæ™¯                                    â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  4ï¸âƒ£ AnswerSection (æ¡ä»¶: hasAnswer)                                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Node: Zap Icon / Loader2 (amber, animated)                  â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ MessageBubble (themeColors.bubbleBg)                         â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â””â”€â”€ ReactMarkdown (prose-sm + ä»£ç é«˜äº®)                      â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  5ï¸âƒ£ ErrorSection (æ¡ä»¶: hasError)                                      â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Node: AlertCircle (red-100)                                  â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ ErrorCard (red-50 bg + error message)                         â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  6ï¸âƒ£ BlockSummarySection (æ¡ä»¶: blockSummary)                            â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Node: BarChart3 (green-100)                                  â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ ExpandedSessionSummary                                       â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â”œâ”€â”€ SessionInfo (sessionId, duration)                        â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â”œâ”€â”€ TokenStats (input/output/cache/total)                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â”œâ”€â”€ CostEstimate (totalCostUSD)                              â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â”œâ”€â”€ ToolUsage (toolCallCount, toolsUsed[])                    â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â”œâ”€â”€ FileChanges (filesModified, filePaths[])                  â”‚   â•‘  â”‚
â”‚  â•‘  â”‚         â””â”€â”€ StatusIndicator (success/error)                          â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â³ Pending State (isLatest && !hasAnswer)                              â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ Loader2 + "åˆå§‹åŒ–ä¸­..."                                       â”‚   â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  ğŸ“ TypingCursor (children prop - æ¡ä»¶æ¸²æŸ“)                          â”‚   â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ scale-90 origin-left (æµå¼è¾“å…¥æŒ‡ç¤ºå™¨)                         â”‚   â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘  â”‚
â”‚  â•‘  â”‚  BlockFooter (å›ºå®šæ˜¾ç¤º)                                                â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚ Left                 â”‚ Right                                    â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚ â–¼ CollapseToggle     â”‚ EditButton (disabled: isStreaming)       â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚   "æ”¶èµ·"/"å±•å¼€"       â”‚ RegenerateButton (æ¡ä»¶: isLatest)         â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ ForgetButton (ä¸Šä¸‹æ–‡é—å¿˜)                    â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ CopyButton (Check/Copy Icon + çŠ¶æ€åé¦ˆ)     â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â”‚                     â”‚ DeleteButton (red text)                    â”‚   â”‚   â•‘  â”‚
â”‚  â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                               â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  ACTIVE/STREAMING STATES (è¾¹æ¡†åŠ¨æ•ˆ)                                        â•‘  â”‚
â”‚  â•‘  â€¢ isLatest && isStreaming â†’ ring-2 + animate-block-pulse                   â•‘  â”‚
â”‚  â•‘  â€¢ isLatest && !isStreaming â†’ ring-1                                       â•‘  â”‚
â”‚  â•‘  â€¢ BlockHeader Status Bubbling: streaming(blue) / error(red)               â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ˜å ç­–ç•¥

| çŠ¶æ€             | é»˜è®¤å±•å¼€ | è¯´æ˜                 |
| :--------------- | :------- | :------------------- |
| **æœ€æ–° Block**   | âœ…        | `isLatest = true`    |
| **æµå¼ä¸­ Block** | âœ…        | `isStreaming = true` |
| **å†å² Block**   | âŒ        | é»˜è®¤æŠ˜å              |

### çŠ¶æ€é¢œè‰²

```
Timeline Node é¢œè‰²:
â”œâ”€â”€ UserInputs:   blue-100/blue-500   (ç”¨æˆ·)
â”œâ”€â”€ Thinking:     blue-100/brain        (æ€è€ƒä¸­: è“è‰²)
â”œâ”€â”€ ToolCalling:  purple-100/purple-500 (å·¥å…·è°ƒç”¨: ç´«è‰²)
â”œâ”€â”€ Answer:       amber-100/amber-500   (AI å›å¤: ç¥ç€è‰²)
â”œâ”€â”€ Error:        red-100/red-500       (é”™è¯¯: çº¢è‰²)
â””â”€â”€ Summary:      green-100/green-500   (ç»Ÿè®¡: ç»¿è‰²)
```

---

## Block æ•°æ®ç»“æ„

### AIBlock å®Œæ•´å­—æ®µ

```go
// AIBlock - ç»Ÿä¸€å—æ¨¡å‹
type AIBlock struct {
    // === Identity ===
    ID              int64     `json:"id"`              // ä¸»é”®
    UID             string    `json:"uid"`             // å”¯ä¸€æ ‡è¯†ç¬¦ (UUID)
    ConversationID  int64     `json:"conversationId"`  // æ‰€å±ä¼šè¯
    RoundNumber     int       `json:"roundNumber"`     // ä¼šè¯å†…è½®æ¬¡ (ä»1å¼€å§‹)

    // === Mode & Type ===
    Mode         BlockMode  `json:"mode"`         // normal | geek | evolution
    BlockType    BlockType  `json:"blockType"`    // message | context_separator
    Status       BlockStatus `json:"status"`      // pending | streaming | completed | error

    // === Content ===
    UserInputs          []UserInput  `json:"userInputs"`          // ç”¨æˆ·è¾“å…¥æ•°ç»„
    AssistantContent    string       `json:"assistantContent"`    // AI å›å¤å†…å®¹
    AssistantTimestamp int64        `json:"assistantTimestamp"` // å›å¤æ—¶é—´æˆ³

    // === Event Stream (æµå¼äº‹ä»¶å†å²) ===
    EventStream []Event `json:"eventStream"` // thinking | tool_use | tool_result | answer

    // === Token Usage (JSONB) ===
    TokenUsage *TokenUsage `json:"tokenUsage,omitempty"` // Token ä½¿ç”¨ç»Ÿè®¡

    // === Session Statistics (JSONB) ===
    SessionStats string `json:"sessionStats,omitempty"` // ä¼šè¯ç»Ÿè®¡ JSON

    // === Cost & Model ===
    CostEstimate  int64  `json:"costEstimate,omitempty"`  // æˆæœ¬é¢„ä¼° (milli-cents)
    ModelVersion  string `json:"modelVersion,omitempty"`  // LLM æä¾›å•†/æ¨¡å‹

    // === Branching (æ ‘åˆ†æ”¯) ===
    ParentBlockID int64  `json:"parentBlockId,omitempty"` // çˆ¶å— ID (æ ¹èŠ‚ç‚¹ä¸º 0)
    BranchPath    string `json:"branchPath,omitempty"`    // å†…éƒ¨åˆ†æ”¯è·¯å¾„ (å¦‚ "0/1/2"ï¼ŒUI æ˜¾ç¤ºä¸º "A.2.3")

    // === User Feedback ===
    UserFeedback      string `json:"userFeedback,omitempty"`      // ç”¨æˆ·åé¦ˆ
    RegenerationCount int    `json:"regenerationCount,omitempty"` // é‡æ–°ç”Ÿæˆæ¬¡æ•°
    ErrorMessage      string `json:"errorMessage,omitempty"`      // é”™è¯¯ä¿¡æ¯

    // === Metadata ===
    Metadata   map[string]string `json:"metadata,omitempty"`   // æ‰©å±•å…ƒæ•°æ®
    CreatedTs  int64            `json:"createdTs"`           // åˆ›å»ºæ—¶é—´
    UpdatedTs  int64            `json:"updatedTs"`           // æ›´æ–°æ—¶é—´
    ArchivedAt int64            `json:"archivedAt,omitempty"` // å½’æ¡£æ—¶é—´

    // === Geek Mode ä¸“å± ===
    CCSessionID string `json:"ccSessionId,omitempty"` // CC Runner ä¼šè¯ ID
}
```

### TokenUsage ç»“æ„

```go
// TokenUsage - Token ä½¿ç”¨ç»Ÿè®¡
type TokenUsage struct {
    PromptTokens     int32 `json:"promptTokens"`     // è¾“å…¥ tokens
    CompletionTokens int32 `json:"completionTokens"` // è¾“å‡º tokens
    TotalTokens       int32 `json:"totalTokens"`       // æ€» tokens
    CacheReadTokens   int32 `json:"cacheReadTokens"`   // ç¼“å­˜å‘½ä¸­ tokens
    CacheWriteTokens  int32 `json:"cacheWriteTokens"`  // ç¼“å­˜å†™å…¥ tokens
}
```

### SessionStats ç»“æ„

```go
// SessionStats - ä¼šè¯ç»Ÿè®¡ (æŒä¹…åŒ–åˆ° Block.sessionStats)
type SessionStats struct {
    // ä¼šè¯æ ‡è¯†
    SessionID       string `json:"sessionId"`       // CC Session ID (Geek/Evolution)
    ConversationID  int64  `json:"conversationId"`  // æ‰€å±ä¼šè¯
    AgentType       string `json:"agentType"`       // ä»£ç†ç±»å‹

    // æ—¶é—´ç»Ÿè®¡ (bigint, æ¯«ç§’)
    TotalDurationMs      int64 `json:"totalDurationMs"`
    ThinkingDurationMs   int64 `json:"thinkingDurationMs"`
    ToolDurationMs       int64 `json:"toolDurationMs"`
    GenerationDurationMs int64 `json:"generationDurationMs"`

    // Token ç»Ÿè®¡
    InputTokens       int32 `json:"inputTokens"`
    OutputTokens      int32 `json:"outputTokens"`
    TotalTokens       int32 `json:"totalTokens"`
    CacheReadTokens   int32 `json:"cacheReadTokens"`
    CacheWriteTokens  int32 `json:"cacheWriteTokens"`

    // æˆæœ¬ç»Ÿè®¡
    TotalCostUsd float64 `json:"totalCostUsd"`

    // å·¥å…·ç»Ÿè®¡ (Geek/Evolution)
    ToolCallCount int32    `json:"toolCallCount"`
    ToolsUsed    []string `json:"toolsUsed"`
    FilesModified int32    `json:"filesModified"`
    FilePaths    []string `json:"filePaths"`

    // çŠ¶æ€
    IsError      bool   `json:"isError"`
    ErrorMessage string `json:"errorMessage"`
}
```

---

## Block çŠ¶æ€æµè½¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     create      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     stream     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   (ä¸å­˜åœ¨)    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   pending    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  streaming   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²                                   â”‚                                â”‚
     â”‚                                   â”‚ error/cancel                   â”‚
     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
     â”‚           â–¼                       â–¼                      â–¼    â–¼
     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”‚  completed  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    error    â”‚       â”‚   archived  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  fork   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ regenerate
                  â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   pending    â”‚ (regeneration_count++)
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€è¯´æ˜**:

| çŠ¶æ€        | æè¿°                   | UI è¡¨ç°                  |
| :---------- | :--------------------- | :----------------------- |
| `pending`   | Block å·²åˆ›å»ºï¼Œç­‰å¾…å¤„ç† | æ˜¾ç¤ºåŠ è½½åŠ¨ç”»             |
| `streaming` | æµå¼ç”Ÿæˆä¸­             | å®æ—¶æ›´æ–°å†…å®¹ï¼Œæ˜¾ç¤ºäº‹ä»¶æµ |
| `completed` | å®Œæˆ                   | æ˜¾ç¤ºå®Œæ•´å†…å®¹å’Œç»Ÿè®¡       |
| `error`     | å‡ºé”™                   | æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ”¯æŒé‡è¯•   |

---

## åˆ†æ”¯ç»“æ„

### æ ‘å½¢ç»“æ„

```
                    Block #1 (root - branch_path: "")
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
    Block #2A         Block #2B         Block #2C
  (path: "0")        (path: "1")        (path: "2")
    [ACTIVE]           â”‚                  â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”             â”‚
    Block #3A     Block #3B   Block #3C  Block #3D
  (path: "0/0")   (path: "1/0")(path: "1/1")(path: "2/0")
    [ACTIVE]
```

### åˆ†æ”¯è·¯å¾„è®¡ç®—è§„åˆ™

**å†…éƒ¨åˆ†æ”¯è·¯å¾„æ ¼å¼** (æ•°æ®åº“å­˜å‚¨):
```
branch_path æ ¼å¼: "0/1/2"
  - æ ¹èŠ‚ç‚¹: "" (ç©ºå­—ç¬¦ä¸²)
  - ç¬¬ä¸€å±‚: "0", "1", "2", ... (æŒ‰åˆ›å»ºé¡ºåº)
  - ç¬¬äºŒå±‚: "0/0", "0/1", "1/0", "1/1", ...
  - ç¬¬ N å±‚: çˆ¶è·¯å¾„ + "/" + å­åºå·
```

**å‹å¥½ç¼–å·æ˜¾ç¤ºæ ¼å¼** (UI æ˜¾ç¤º):
```
æ ¼å¼: "A.1.2"
  - ç¬¬ä¸€çº§: 0â†’A, 1â†’B, ..., 25â†’Z, 26â†’AA, 27â†’AB, ...
  - å…¶ä»–çº§åˆ«: 0â†’1, 1â†’2, 2â†’3, ... (0-based è½¬ 1-based)

è½¬æ¢ç¤ºä¾‹:
  "0"       â†’ "A"
  "1"       â†’ "B"
  "0/0"     â†’ "A.1"
  "0/1"     â†’ "A.2"
  "1/0/1"   â†’ "B.1.2"
  "26/0"    â†’ "AA.1"
```

### åˆ†æ”¯æ“ä½œ

| æ“ä½œ       | RPC æ–¹æ³•       | æ•ˆæœ                       |
| :--------- | :------------- | :------------------------- |
| **Fork**   | `ForkBlock`    | åˆ›å»ºæ–°åˆ†æ”¯ï¼Œç»§æ‰¿çˆ¶å—ä¸Šä¸‹æ–‡ |
| **Switch** | `SwitchBranch` | åˆ‡æ¢æ´»åŠ¨åˆ†æ”¯ï¼Œå½’æ¡£å…¶ä»–åˆ†æ”¯ |
| **Delete** | `DeleteBranch` | åˆ é™¤åˆ†æ”¯åŠå…¶å­æ ‘ (cascade) |

---

## æˆæœ¬è®¡ç®—

### è®¡ä»·è§„åˆ™ (DeepSeek V3)

| Token ç±»å‹  | å•ä»·           | milli-cents/token |
| :---------- | :------------- | :---------------- |
| Input       | Â¥0.14/M tokens | 0.14              |
| Output      | Â¥0.28/M tokens | 0.28              |
| Cache Read  | 90% off        | 0.014             |
| Cache Write | æ­£å¸¸è®¡è´¹       | 0.14              |

### è®¡ç®—ç¤ºä¾‹

```
Block #3 æˆæœ¬è®¡ç®—:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ prompt_tokens:     856   Ã— 0.14 = 119.84 milli-cents        â”‚
â”‚ completion_tokens: 423   Ã— 0.28 = 118.44 milli-cents        â”‚
â”‚ cache_read_tokens:  142   Ã— 0.014 = 1.988 milli-cents (90% off)â”‚
â”‚ cache_write_tokens: 28   Ã— 0.014 = 0.392 milli-cents        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ cost_estimate:     870n  â‰ˆ $0.0087 (0.87 cents)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å­˜å‚¨: cost_estimate = 870 (milli-cents, BigInt)
æ˜¾ç¤º: "0.87Â¢" (cents) æˆ– "$0.0087" (dollars)
```

### æˆæœ¬å¾½ç« é¢œè‰²

| æˆæœ¬èŒƒå›´      | é¢œè‰² | CSS ç±»        |
| :------------ | :--- | :------------ |
| < $0.01       | ç¿ ç»¿ | `emerald-100` |
| $0.01 - $0.10 | ç»¿è‰² | `green-100`   |
| $0.10 - $1.00 | ç¥ç€ | `amber-100`   |
| â‰¥ $1.00       | æ©™è‰² | `orange-100`  |

---

## æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§      | Normal Mode     | Geek Mode       | Evolution Mode  |
| :-------- | :-------------- | :-------------- | :-------------- |
| **Agent** | AUTO â†’ è·¯ç”±é€‰æ‹© | GeekParrot      | EvolutionParrot |
| **LLM**   | DeepSeek V3     | Claude Code CLI | Claude Code CLI |
| **ç”¨é€”**  | æ—¥å¸¸å¯¹è¯/æœç´¢   | ä»£ç æ‰§è¡Œ        | ç³»ç»Ÿè¿›åŒ–        |
| **æˆæœ¬**  | æŒ‰ Token è®¡è´¹   | é›¶ LLM æˆæœ¬     | é›¶ LLM æˆæœ¬     |
| **äº§å‡º**  | å¯¹è¯å›å¤        | ä»£ç äº§ç‰©        | GitHub PR       |
| **æƒé™**  | æ‰€æœ‰ç”¨æˆ·        | æ‰€æœ‰ç”¨æˆ·        | ä»…ç®¡ç†å‘˜        |

---

## ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£                                                                  | æè¿°                   |
| :-------------------------------------------------------------------- | :--------------------- |
| [Unified Block Model è§„æ ¼](../specs/unified-block-model.md)           | Block æ•°æ®æ¨¡å‹è¯¦ç»†è§„æ ¼ |
| [æ¶æ„æ–‡æ¡£](ARCHITECTURE.md)                                           | ç³»ç»Ÿæ•´ä½“æ¶æ„           |
| [å‰ç«¯å¼€å‘æŒ‡å—](FRONTEND.md)                                           | å‰ç«¯ç»„ä»¶å’Œå¸ƒå±€         |
| [LLM Stats Collection](../specs/block-design/llm-stats-collection.md) | Token ç»Ÿè®¡å®ç°         |
